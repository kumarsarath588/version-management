{"status":{"description":"","source_mpi":"","state":"DRAFT","is_cloned":false,"message_list":[{"message":"Credential is invalid","reason":"INVALID_CREDENTIAL","details":[{"attribute_name":"default_credential"}]}],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"0c1b00b3-692a-4501-bafd-a3b2d3d896ee","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"ecbe661e-8249-4e9a-9fa6-15c7eea8c7af","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"030017c3_dag"}],"description":"","message_list":[],"uuid":"f8ca284e-254f-4974-a6c3-be336758009b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"ecbe661e-8249-4e9a-9fa6-15c7eea8c7af"},"name":"5730e30f_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"bae51f77-bf6c-46c4-be8a-b0019dcc0a03","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"60413361-2580-4f9d-9e01-220897fc4a37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f5f997d_dag"}],"description":"","message_list":[],"uuid":"071f3ce5-fd84-4d57-b19d-d935b1bc0952","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"60413361-2580-4f9d-9e01-220897fc4a37"},"name":"b01e7edf_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"c4537c45-93a6-4a8b-8552-cf03dfb133df","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"5c53253e-6f58-4c71-8b53-3b059b3fde77","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c2b90e7d_dag"}],"description":"","message_list":[],"uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"5c53253e-6f58-4c71-8b53-3b059b3fde77"},"name":"0263f5a9_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"a85dfd4f-0e9b-4630-a718-ac95ced5341b","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"4b9887c0-076d-4f4a-a1a4-4eca74577b3a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"00b1cc9f_dag"}],"description":"","message_list":[],"uuid":"77336a28-07d1-4dc5-9624-02e54adc2697","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"4b9887c0-076d-4f4a-a1a4-4eca74577b3a"},"name":"8aadc288_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"b972fb1e-f561-4e28-97dd-1174d471212b","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"4b9a02bb-12d6-443a-9b80-b2df51b60065","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","message_list":[],"uuid":"6b23e67c-c798-4830-9a6d-dcc1639afb63","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"4b9a02bb-12d6-443a-9b80-b2df51b60065"},"name":"a059f54d_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"9545ef1b-bdb0-4bc5-b8d6-cd3637065a7a","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"DAG","uuid":"f1ba49f0-d2a0-4fe6-a967-1acaf26c1047","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"aa6751c6-2515-42a7-8640-b0d50e650c54"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"aa6751c6-2515-42a7-8640-b0d50e650c54","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"00b21925-2dcc-41e3-bae2-9e6a90d51160","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"f1ba49f0-d2a0-4fe6-a967-1acaf26c1047"},"name":"SYS_GEN__Runbook_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}}],"message_list":[],"uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"58f2d435-3022-4f9d-846f-b8cf928d1b2d","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"EXECUTION_MODE"}],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"54d8a2fd-6c44-4425-82e2-760ae1b7e21e","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"32d7d3f2-b0a8-48cb-a0ce-74ae5b92e118","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"485b1431-5f3b-4d8a-9728-946790e16bc3"},{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"2381c4b9-c187-4367-887d-0116c135f2e8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"485b1431-5f3b-4d8a-9728-946790e16bc3"},"edge_type":"inherent","type":"","uuid":"0c6a6722-ab02-4b83-9fbd-231c847d9ea9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"2381c4b9-c187-4367-887d-0116c135f2e8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"485b1431-5f3b-4d8a-9728-946790e16bc3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"7e750478-38fd-48d3-a683-ab15fa30c0fb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"c5d1bcf8-ecf6-4e9d-9e36-4f02cf93ac3e"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"2381c4b9-c187-4367-887d-0116c135f2e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"8a39ca0d-dbc5-4e16-ac85-e74f18509eeb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"32d7d3f2-b0a8-48cb-a0ce-74ae5b92e118"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for powering on an application","message_list":[],"uuid":"2dd2e5b4-df81-4ca5-ae2e-3bba17f91622","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"77ec6686-ec8a-4d93-9962-8a5ca02b0f09","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"513031d5-d9fd-4d3c-9c2c-88f84d85e004"},{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"6c0a3b97-35e4-4d94-82c3-4f4122891b2a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"513031d5-d9fd-4d3c-9c2c-88f84d85e004"},"edge_type":"inherent","type":"","uuid":"f017680b-003d-47c1-b068-0ec550f8d6e5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"6c0a3b97-35e4-4d94-82c3-4f4122891b2a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"513031d5-d9fd-4d3c-9c2c-88f84d85e004","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"6c0a3b97-35e4-4d94-82c3-4f4122891b2a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"8c36f9a8-bff3-44d8-893a-d4c08f8b88eb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"77ec6686-ec8a-4d93-9962-8a5ca02b0f09"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for restarting an application","message_list":[],"uuid":"aeee5a58-0644-4434-abe6-aad5bccaf208","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"95351326-ef89-43a7-abf5-8d9f15f4c9dc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"2d43ade8-4178-46a7-911e-ae636dcbf152"},{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"63f2091c-dcd3-4f32-979d-03b2780bbe2d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"2d43ade8-4178-46a7-911e-ae636dcbf152"},"edge_type":"inherent","type":"","uuid":"3aae8f97-23ec-464d-8f0c-0d18f73b984a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"63f2091c-dcd3-4f32-979d-03b2780bbe2d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"2d43ade8-4178-46a7-911e-ae636dcbf152","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"63f2091c-dcd3-4f32-979d-03b2780bbe2d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_MSSQL2014_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"8221a5b4-e0b9-4935-a5b8-6f744646124d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"95351326-ef89-43a7-abf5-8d9f15f4c9dc"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for suspending an application","message_list":[],"uuid":"7964e7a0-7330-4085-b89d-4dfc62be1da7","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"dd52e0eb-5bb9-4609-9a32-9389ae086a5d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"d43515a3-6768-4889-a064-afde87b937e5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"dd52e0eb-5bb9-4609-9a32-9389ae086a5d"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for modifying an application","message_list":[],"uuid":"2dc483b6-89e6-483f-a94a-e817781352fe","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"81754337-f0ae-47e9-988b-9096a14e9745","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"c61fa9d7-cf9f-46bd-ac0e-1a113cc3529a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"81754337-f0ae-47e9-988b-9096a14e9745"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for powering off an application","message_list":[],"uuid":"77801b5d-ef43-4ce4-b7d6-1a873ce629e0","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"d1de909f-d958-407b-a8a3-19d83626f549","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"c5b2376f-5bdf-44be-b010-f3fa0177b233"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"c5b2376f-5bdf-44be-b010-f3fa0177b233","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"d8bfc489-f06b-4b93-b28a-974555bdfc2a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d1de909f-d958-407b-a8a3-19d83626f549"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"609e4047-0dd9-4829-a12e-55398faaa9b8","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"9e1dcd4e-c09c-4381-8ce1-624696b923ae","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e0648b6e-2339-4438-8134-6b8e835791e9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"e0648b6e-2339-4438-8134-6b8e835791e9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"3c2567e5-6fe3-414f-ab85-a98a54632504","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"9e1dcd4e-c09c-4381-8ce1-624696b923ae"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ce32ac45-3c37-4795-904f-75160636ff58","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"DAG","uuid":"01739e59-a475-4c30-bde1-293d891fae40","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"a0b0774b-26bb-48a7-9955-d79d5a296ce4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"a0b0774b-26bb-48a7-9955-d79d5a296ce4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"219d59a2-0c09-4cd4-a8e7-43d876c0b7f1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"01739e59-a475-4c30-bde1-293d891fae40"},"name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}}],"message_list":[{"message":"editable 0 is not a valid list index","reason":"INVALID_EDITABLE","details":[{"attribute_name":"0"}]}],"uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686","state":"DRAFT","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"editables":{"readiness_probe":{"connection_type":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"1":{"data_source_reference":true,"device_properties":{"disk_address":{"adapter_type":true},"device_type":true}},"0":{"data_source_reference":true,"device_properties":{"disk_address":{"adapter_type":true},"device_type":true}},"3":{"disk_size_mib":true},"2":{"disk_size_mib":true},"5":{"disk_size_mib":true},"4":{"disk_size_mib":true},"7":{"disk_size_mib":true},"6":{"disk_size_mib":true},"9":{"disk_size_mib":true},"8":{"disk_size_mib":true}}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"7e750478-38fd-48d3-a683-ab15fa30c0fb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"c5d1bcf8-ecf6-4e9d-9e36-4f02cf93ac3e"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"variable_list":[],"name":"MSSQL2014"}],"credential_definition_list":[{"username":"administrator","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"62d33de3-b54f-41c1-bbce-5a66cc8d95d5","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"736c4269-45eb-4127-a15b-e0560e4d7167","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"dd3c572a-a498-4fd1-bcff-f18c1d381250","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"ed05f8f3-cd87-4fed-8671-d8b3011ae104"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e74f7ec9-93e4-4fba-b13b-0009278a93ff"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"b532831f-2410-4417-9623-4540b55ebd14"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"bacb9f33-61a5-4f5e-ae29-c9a0d6b631a6"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"cdd477c8-c1d1-4900-8edf-8fc9ed463fc0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"bacb9f33-61a5-4f5e-ae29-c9a0d6b631a6"},"edge_type":"inherent","type":"","uuid":"1d982463-9ca8-4238-b1b5-b654d09d9874","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"cdd477c8-c1d1-4900-8edf-8fc9ed463fc0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"b532831f-2410-4417-9623-4540b55ebd14"},"edge_type":"inherent","type":"","uuid":"a3a5b2e7-28c8-4959-8add-5296477dc0a2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"bacb9f33-61a5-4f5e-ae29-c9a0d6b631a6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"ed05f8f3-cd87-4fed-8671-d8b3011ae104"},"edge_type":"inherent","type":"","uuid":"35909a62-0a7b-4bab-9326-9bd3470da445","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e74f7ec9-93e4-4fba-b13b-0009278a93ff"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e74f7ec9-93e4-4fba-b13b-0009278a93ff"},"edge_type":"inherent","type":"","uuid":"b5ef9a62-e584-4f39-a137-eb67781fb22a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"b532831f-2410-4417-9623-4540b55ebd14"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"ed05f8f3-cd87-4fed-8671-d8b3011ae104","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e74f7ec9-93e4-4fba-b13b-0009278a93ff","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8a39ca0d-dbc5-4e16-ac85-e74f18509eeb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b532831f-2410-4417-9623-4540b55ebd14","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"1aa299f4-49fa-47bf-b854-845f753ed528"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bacb9f33-61a5-4f5e-ae29-c9a0d6b631a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"f8ca284e-254f-4974-a6c3-be336758009b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cdd477c8-c1d1-4900-8edf-8fc9ed463fc0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"e7c8b7bb-5d6c-45a3-b5a6-3fdeb26e68b5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"dd3c572a-a498-4fd1-bcff-f18c1d381250"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for starting an application","message_list":[],"uuid":"b17011e4-d886-4a53-9f7a-9dad02ad5580","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"6829e289-089b-4729-bae1-bc348a203895","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"78515077-baaa-48c6-94c1-bbbaedc69b85"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"c763d243-6181-4103-8011-23005334ee90"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"78515077-baaa-48c6-94c1-bbbaedc69b85"},"edge_type":"inherent","type":"","uuid":"2ed342f4-877e-4c79-a5c0-4b4ab825a082","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"c763d243-6181-4103-8011-23005334ee90"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"78515077-baaa-48c6-94c1-bbbaedc69b85","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8c36f9a8-bff3-44d8-893a-d4c08f8b88eb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c763d243-6181-4103-8011-23005334ee90","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"a4a68a39-a357-4a76-82aa-e1a34cb7bf1a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"6829e289-089b-4729-bae1-bc348a203895"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for restarting an application","message_list":[],"uuid":"8df7c988-4a76-469a-a2ca-aab63b765925","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"2f1d5feb-e3de-4269-89d4-f0e2534bad90","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e8a0f19b-379b-49e3-8576-cff2c5a2c8c8"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"5ea5dbac-da35-4a27-943a-b5642167c013"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"e8a0f19b-379b-49e3-8576-cff2c5a2c8c8"},"edge_type":"inherent","type":"","uuid":"d6543aa5-961d-4685-8aa4-7ead4888d02e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"5ea5dbac-da35-4a27-943a-b5642167c013"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e8a0f19b-379b-49e3-8576-cff2c5a2c8c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8221a5b4-e0b9-4935-a5b8-6f744646124d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5ea5dbac-da35-4a27-943a-b5642167c013","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"6b23e67c-c798-4830-9a6d-dcc1639afb63"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"7668f09a-3ad9-479c-acd1-fe2d0c267d00","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"2f1d5feb-e3de-4269-89d4-f0e2534bad90"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for stopping an application","message_list":[],"uuid":"2f98561e-a991-47ea-8e2f-4cf512054a18","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"c61397d6-bb65-4972-a971-012a807f157f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"df73c169-ab61-43a1-9c20-ff039766b8d0"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8ebc53b3-ce8a-43b7-839d-6f939e953baf"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"df73c169-ab61-43a1-9c20-ff039766b8d0"},"edge_type":"inherent","type":"","uuid":"899f09bd-dca5-4f9a-a307-0471092bbccb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8ebc53b3-ce8a-43b7-839d-6f939e953baf"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"df73c169-ab61-43a1-9c20-ff039766b8d0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8ebc53b3-ce8a-43b7-839d-6f939e953baf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d8bfc489-f06b-4b93-b28a-974555bdfc2a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"ea2b15b7-bcb6-4e7c-ad23-e582327170bf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"c61397d6-bb65-4972-a971-012a807f157f"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"64e708f0-8c2b-4a46-9610-5c4ad4c30ad9","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"114f12c5-9b67-49cb-bf40-69b84b1ccba5","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"1751f657-9d92-40ac-8a0e-3ac7a448bb89"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e42417a7-c695-4111-99b0-c811673279bf"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"38243e84-1f4a-4e0d-9109-06db8c0ea5fa"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"a8defa00-ff7a-4f4c-9bd7-3f928710410f"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"c537b389-f4c1-4329-929a-9661c3fd18c8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"1751f657-9d92-40ac-8a0e-3ac7a448bb89"},"edge_type":"inherent","type":"","uuid":"f459c4b3-fda9-48a8-8232-d99ec41a637d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e42417a7-c695-4111-99b0-c811673279bf"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e42417a7-c695-4111-99b0-c811673279bf"},"edge_type":"inherent","type":"","uuid":"1e829043-64aa-4aae-9246-6954afdd22a4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"38243e84-1f4a-4e0d-9109-06db8c0ea5fa"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"38243e84-1f4a-4e0d-9109-06db8c0ea5fa"},"edge_type":"inherent","type":"","uuid":"98029a08-3e9b-4bac-b945-2a572d5026f4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"a8defa00-ff7a-4f4c-9bd7-3f928710410f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"a8defa00-ff7a-4f4c-9bd7-3f928710410f"},"edge_type":"inherent","type":"","uuid":"7c29dcef-7d53-48a7-93fd-4b61090d05bd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"c537b389-f4c1-4329-929a-9661c3fd18c8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1751f657-9d92-40ac-8a0e-3ac7a448bb89","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e42417a7-c695-4111-99b0-c811673279bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"071f3ce5-fd84-4d57-b19d-d935b1bc0952"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"38243e84-1f4a-4e0d-9109-06db8c0ea5fa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"81433a61-ce42-4c50-b74e-aa50f8950b4b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a8defa00-ff7a-4f4c-9bd7-3f928710410f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"3c2567e5-6fe3-414f-ab85-a98a54632504"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"c537b389-f4c1-4329-929a-9661c3fd18c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"56989a8f-d8f1-4de8-921d-5cd6dc5f4dd2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"114f12c5-9b67-49cb-bf40-69b84b1ccba5"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for scaleout","message_list":[],"uuid":"3f3ca78d-6766-42bd-a4da-c91df9f7b78f","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"dbb8586b-5a47-4b6a-a727-04f012ad3862","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"46f7d8ac-6946-465a-8aec-95c5d5224ca6"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"SCALING","uuid":"46f7d8ac-6946-465a-8aec-95c5d5224ca6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"c2f42e03-1bc3-4a64-bc69-55a6d027f349","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"554ed765-754d-40b1-a07a-1919ddefb372","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"dbb8586b-5a47-4b6a-a727-04f012ad3862"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for scalein","message_list":[],"uuid":"fb440aab-710b-43ed-bf09-9ac2bd437f89","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"ea644094-466d-460b-be9d-19e203c4af99","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"084aa173-9897-4e46-8487-552e31229bef"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"SCALING","uuid":"084aa173-9897-4e46-8487-552e31229bef","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"822fd326-2c26-464b-be4c-1f450b40b850","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"c6ebc50a-f52e-4285-b157-3a01b3458ed7","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"ea644094-466d-460b-be9d-19e203c4af99"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"bd105d67-7227-4dca-af89-43a4a26b3ade","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DAG","uuid":"89da427c-32c7-4464-a2f9-f125f3d5c507","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"6504ae07-2e20-44e2-9023-8ed8e7c65c33"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"0f7868d0-90e7-4c8d-8027-720f90c38765"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"5dde9e66-4aa1-44c6-a777-b4ea2e7f283b"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"8fd6cb7e-244f-4159-9537-0f8ec06abd10"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"6504ae07-2e20-44e2-9023-8ed8e7c65c33"},"edge_type":"inherent","type":"","uuid":"e36b6fed-91ed-4bf7-908f-5e270ef57eeb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"0f7868d0-90e7-4c8d-8027-720f90c38765"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"5dde9e66-4aa1-44c6-a777-b4ea2e7f283b"},"edge_type":"inherent","type":"","uuid":"c7c9c933-e7f3-4d05-aa71-5dba94f59d38","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"8fd6cb7e-244f-4159-9537-0f8ec06abd10"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"0f7868d0-90e7-4c8d-8027-720f90c38765"},"edge_type":"inherent","type":"","uuid":"24d9cade-6deb-4b07-a92e-6a202093c293","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"5dde9e66-4aa1-44c6-a777-b4ea2e7f283b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6504ae07-2e20-44e2-9023-8ed8e7c65c33","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"00b21925-2dcc-41e3-bae2-9e6a90d51160"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"0f7868d0-90e7-4c8d-8027-720f90c38765","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5dde9e66-4aa1-44c6-a777-b4ea2e7f283b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"219d59a2-0c09-4cd4-a8e7-43d876c0b7f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"8fd6cb7e-244f-4159-9537-0f8ec06abd10","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"a2606537-0bd0-45ec-aab0-36a3fa09ccda","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"89da427c-32c7-4464-a2f9-f125f3d5c507"},"name":"SYS_GEN__Runbook_Deployment_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059","min_replicas":"1","state":"DRAFT","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"}],"substrate_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"273b5f6b-d3ca-4fef-9342-c2d10e7ffd37","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"a6d9059f-c95e-4d98-9fde-23de9a585dc1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"702634c0-b7da-48c3-ae5e-7afb37a2e4c6"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"bc3d7576-57f7-4253-8a86-bd9599bc7126"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"4a3467d8-b2e6-4040-8b1c-9cf64db8e063"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e2c7c5fc-c7b1-44b9-a7bf-294b3a8ec900"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"53df6acb-736d-4fb7-bef2-60f526e80782"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e2c7c5fc-c7b1-44b9-a7bf-294b3a8ec900"},"edge_type":"inherent","type":"","uuid":"a9a80264-5490-41f5-aab1-e71350882d1c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"53df6acb-736d-4fb7-bef2-60f526e80782"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"4a3467d8-b2e6-4040-8b1c-9cf64db8e063"},"edge_type":"inherent","type":"","uuid":"8b2f88c7-c98f-4b59-b579-4dc6edae7e14","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"e2c7c5fc-c7b1-44b9-a7bf-294b3a8ec900"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"702634c0-b7da-48c3-ae5e-7afb37a2e4c6"},"edge_type":"inherent","type":"","uuid":"b29760f5-fc81-4699-a868-1eae278822a3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"bc3d7576-57f7-4253-8a86-bd9599bc7126"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"bc3d7576-57f7-4253-8a86-bd9599bc7126"},"edge_type":"inherent","type":"","uuid":"7a1df663-9615-458c-9a9b-7e3797bb20eb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"4a3467d8-b2e6-4040-8b1c-9cf64db8e063"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"702634c0-b7da-48c3-ae5e-7afb37a2e4c6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bc3d7576-57f7-4253-8a86-bd9599bc7126","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8a39ca0d-dbc5-4e16-ac85-e74f18509eeb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4a3467d8-b2e6-4040-8b1c-9cf64db8e063","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"1aa299f4-49fa-47bf-b854-845f753ed528"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e2c7c5fc-c7b1-44b9-a7bf-294b3a8ec900","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"f8ca284e-254f-4974-a6c3-be336758009b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"53df6acb-736d-4fb7-bef2-60f526e80782","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"a1944549-af8a-4b92-8c9c-85cd72ff8084","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"a6d9059f-c95e-4d98-9fde-23de9a585dc1"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}},{"description":"System action for starting an application","message_list":[],"uuid":"c23af5fa-b3a3-4240-8a80-b7964533e3a1","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"2f057b7b-4065-4632-bec9-8cbc78b73f32","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"ee64dfb5-0215-4e22-94ac-36b8a8f20d76"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"ce5a8b9b-3478-4e02-9acb-15d2793844ad"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"ee64dfb5-0215-4e22-94ac-36b8a8f20d76"},"edge_type":"inherent","type":"","uuid":"52c357af-2149-4afc-bcb9-d80c5b5d348f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"ce5a8b9b-3478-4e02-9acb-15d2793844ad"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ee64dfb5-0215-4e22-94ac-36b8a8f20d76","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8c36f9a8-bff3-44d8-893a-d4c08f8b88eb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ce5a8b9b-3478-4e02-9acb-15d2793844ad","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"8906b023-8b59-40a9-9774-47c45f7f11d5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"2f057b7b-4065-4632-bec9-8cbc78b73f32"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}},{"description":"System action for restarting an application","message_list":[],"uuid":"9633235c-ded3-4f29-b58f-b503488fabd9","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"43daa81c-a1b4-4a78-8ee7-1a864c495b11","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"5997aa65-ca18-48c4-a223-96e1c123dfc2"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"f16fb3df-4439-4d12-aefc-8f03cf500f0d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"5997aa65-ca18-48c4-a223-96e1c123dfc2"},"edge_type":"inherent","type":"","uuid":"b8b80c5a-80ef-4d10-bf56-d301573ad30f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"f16fb3df-4439-4d12-aefc-8f03cf500f0d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5997aa65-ca18-48c4-a223-96e1c123dfc2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"8221a5b4-e0b9-4935-a5b8-6f744646124d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f16fb3df-4439-4d12-aefc-8f03cf500f0d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"6b23e67c-c798-4830-9a6d-dcc1639afb63"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"fecfd41d-7ba9-48e2-ae50-347ae8a0f6f6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"43daa81c-a1b4-4a78-8ee7-1a864c495b11"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}},{"description":"System action for stopping an application","message_list":[],"uuid":"8cfb76a1-59a6-4b4f-927c-3a248f9d07b6","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"3f75cb41-f80e-4d3c-9558-5484e60dc8de","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"3df37ed4-757c-4a92-8806-67e96a5f1cb8"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d45f3b59-9291-4f04-9842-959dfdc7787b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"3df37ed4-757c-4a92-8806-67e96a5f1cb8"},"edge_type":"inherent","type":"","uuid":"b405ecb4-263a-4b8b-99b1-22f04dbcf0b1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d45f3b59-9291-4f04-9842-959dfdc7787b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3df37ed4-757c-4a92-8806-67e96a5f1cb8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d45f3b59-9291-4f04-9842-959dfdc7787b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d8bfc489-f06b-4b93-b28a-974555bdfc2a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"}],"description":"","message_list":[],"uuid":"11db45a4-4cdf-474d-96bc-e3ed01e86014","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"3f75cb41-f80e-4d3c-9558-5484e60dc8de"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"2cc7e780-04a1-4464-8b6d-5770982bd364","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"faf8a46a-801e-47ae-8369-11fe0086ba4b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"86252055-d9e8-42d2-bc2e-9c8a89d12401"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"33261876-7764-467e-985c-c959f7f7f538"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"ddce8618-2ec1-4747-ae7a-c1e2ecc8226b"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d376572f-c748-4352-bfcc-a19b348145ec"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"50872665-a13a-43bf-949c-212c329cdd22"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"86252055-d9e8-42d2-bc2e-9c8a89d12401"},"edge_type":"inherent","type":"","uuid":"43dba7cc-f31a-4a22-8fa7-fcd38ce6e351","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"33261876-7764-467e-985c-c959f7f7f538"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"33261876-7764-467e-985c-c959f7f7f538"},"edge_type":"inherent","type":"","uuid":"e543c320-6af6-4d3b-b7da-6790d20bd6fb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"ddce8618-2ec1-4747-ae7a-c1e2ecc8226b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"ddce8618-2ec1-4747-ae7a-c1e2ecc8226b"},"edge_type":"inherent","type":"","uuid":"9e936640-fd4b-48e5-b778-4d6f8592b308","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d376572f-c748-4352-bfcc-a19b348145ec"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"d376572f-c748-4352-bfcc-a19b348145ec"},"edge_type":"inherent","type":"","uuid":"87bc10ab-46a0-4dbe-bd42-5d785c759e98","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"50872665-a13a-43bf-949c-212c329cdd22"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"86252055-d9e8-42d2-bc2e-9c8a89d12401","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"33261876-7764-467e-985c-c959f7f7f538","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"071f3ce5-fd84-4d57-b19d-d935b1bc0952"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ddce8618-2ec1-4747-ae7a-c1e2ecc8226b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"81433a61-ce42-4c50-b74e-aa50f8950b4b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d376572f-c748-4352-bfcc-a19b348145ec","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"3c2567e5-6fe3-414f-ab85-a98a54632504"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"50872665-a13a-43bf-949c-212c329cdd22","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"6d66e4c5-8a93-4fd6-893b-c50ee878e038","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"faf8a46a-801e-47ae-8369-11fe0086ba4b"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"de5033f4-ac74-4edf-a119-dfcaa3940ea7","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874"},"retries":"0","description":"","type":"DAG","uuid":"53f7ea49-6d88-4670-8596-36eb1c9bfbbe","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"b94b3973-16ff-4aab-9790-0c8a95000c81"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"71a6e374-6440-430c-85dd-96f235776c9b"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"7f98b617-f30b-4b95-861c-be10001b4db7"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"7215cbb8-45f2-4fb5-a4c4-19ea07b2ee1d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"b94b3973-16ff-4aab-9790-0c8a95000c81"},"edge_type":"inherent","type":"","uuid":"c5f84a00-9e05-4f4a-86e3-87099bf40a40","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"71a6e374-6440-430c-85dd-96f235776c9b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"7f98b617-f30b-4b95-861c-be10001b4db7"},"edge_type":"inherent","type":"","uuid":"8d38d8e0-4a2e-406a-ac1d-c7c13f7359ab","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059","uuid":"7215cbb8-45f2-4fb5-a4c4-19ea07b2ee1d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"71a6e374-6440-430c-85dd-96f235776c9b"},"edge_type":"inherent","type":"","uuid":"65705346-3116-47ce-94c6-372d6948a59e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"7f98b617-f30b-4b95-861c-be10001b4db7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b94b3973-16ff-4aab-9790-0c8a95000c81","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"00b21925-2dcc-41e3-bae2-9e6a90d51160"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"71a6e374-6440-430c-85dd-96f235776c9b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7f98b617-f30b-4b95-861c-be10001b4db7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686","uuid":"219d59a2-0c09-4cd4-a8e7-43d876c0b7f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_78550f3f_719e_41ed_8b8b_0d5844ebb686"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"7215cbb8-45f2-4fb5-a4c4-19ea07b2ee1d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_4eb97df6_95c2_49b6_a5d2_46f4ab2da059"}],"description":"","message_list":[],"uuid":"949d00ca-c872-414b-9bb4-222c74fbf6e6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874","uuid":"53f7ea49-6d88-4670-8596-36eb1c9bfbbe"},"name":"SYS_GEN__Runbook_Application_2e76f90c_ac74_4a6a_85b3_7f71fd0da874"}}],"message_list":[],"uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874","state":"DRAFT","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d272c026-3860-4370-bc50-95b49adf5a44","value":"10.15.193.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"966fade7-8d2e-4aeb-8aaf-417d9a03e05d","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"e1894997-d458-4e10-99c9-6ee1e2023c12","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"ec04ecb2-cc5a-41d0-a37f-d399991e4928","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"Nutanix"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"51dce6a8-296f-4905-8849-0ff109c36a1c","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"0b971568-7dd1-44cd-828e-1530b8dac7f1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"2b4e7dd1-1cd9-42be-a79a-b68b405c3203"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"2b4e7dd1-1cd9-42be-a79a-b68b405c3203","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},"edge_type":"user_defined","type":"","uuid":"55d148f3-2a74-4ccf-aec1-e8c9939f8cac","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},"edge_type":"user_defined","type":"","uuid":"0aa8dba4-0bb8-451d-a900-067b5f9c0f1f","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},"edge_type":"user_defined","type":"","uuid":"83eac695-2429-4970-97bc-80c716fc1c4a","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},"edge_type":"user_defined","type":"","uuid":"3c714489-9680-452e-9a3c-23eff11fd28b","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},"edge_type":"user_defined","type":"","uuid":"654b0a8a-9abd-4bb2-9e94-bcc270493e42","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},"edge_type":"user_defined","type":"","uuid":"93265590-7be9-4b1f-9ad3-198fc50d9518","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},"edge_type":"user_defined","type":"","uuid":"70ef35b4-050e-4e82-8739-bde6ddec317a","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"EXEC","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5426d89f-8997-44c8-9972-27109e2008ac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"75963782-4f21-437c-a390-3b86054a5cec","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"cec5d693-cc32-47d9-a622-6422091cf91b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_a408fae7_48d8_4905_ac92_b34a80960df1"}],"description":"","message_list":[],"uuid":"1aa299f4-49fa-47bf-b854-845f753ed528","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"0b971568-7dd1-44cd-828e-1530b8dac7f1"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for creating an application","message_list":[],"uuid":"7d307af7-4922-405a-9f26-f2558693f1de","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"e3213f42-7d44-40d9-9038-79452b71e4e6","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"167b8b12-387b-4a82-81d3-781b5a38fd07"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"82f6e0f6-cae7-4de8-8f3f-e48d5a3810d7"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"229534bf-7eeb-46c8-a673-d523464108cd"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"82f6e0f6-cae7-4de8-8f3f-e48d5a3810d7"},"edge_type":"inherent","type":"","uuid":"c0394af8-e3c6-49c2-a833-229ac08f280a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"229534bf-7eeb-46c8-a673-d523464108cd"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"167b8b12-387b-4a82-81d3-781b5a38fd07"},"edge_type":"inherent","type":"","uuid":"8463fd45-4b3f-4e0a-ae81-1989f657d632","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"82f6e0f6-cae7-4de8-8f3f-e48d5a3810d7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"167b8b12-387b-4a82-81d3-781b5a38fd07","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"1aa299f4-49fa-47bf-b854-845f753ed528"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"82f6e0f6-cae7-4de8-8f3f-e48d5a3810d7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"f8ca284e-254f-4974-a6c3-be336758009b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"229534bf-7eeb-46c8-a673-d523464108cd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"ee870bcf-7997-4150-9d6c-6a43baf565e7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"e3213f42-7d44-40d9-9038-79452b71e4e6"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"77643ec7-da84-4958-b64b-83d1878174e9","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"0c0ac680-823f-4560-884b-24105a57b1ec","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"883ea824-27d8-4714-9c2e-08ad737b793e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"883ea824-27d8-4714-9c2e-08ad737b793e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},"edge_type":"user_defined","type":"","uuid":"55d148f3-2a74-4ccf-aec1-e8c9939f8cac","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},"edge_type":"user_defined","type":"","uuid":"0aa8dba4-0bb8-451d-a900-067b5f9c0f1f","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},"edge_type":"user_defined","type":"","uuid":"83eac695-2429-4970-97bc-80c716fc1c4a","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},"edge_type":"user_defined","type":"","uuid":"3c714489-9680-452e-9a3c-23eff11fd28b","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},"edge_type":"user_defined","type":"","uuid":"654b0a8a-9abd-4bb2-9e94-bcc270493e42","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},"edge_type":"user_defined","type":"","uuid":"93265590-7be9-4b1f-9ad3-198fc50d9518","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},"edge_type":"user_defined","type":"","uuid":"70ef35b4-050e-4e82-8739-bde6ddec317a","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"EXEC","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5426d89f-8997-44c8-9972-27109e2008ac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"75963782-4f21-437c-a390-3b86054a5cec","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"cec5d693-cc32-47d9-a622-6422091cf91b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_a408fae7_48d8_4905_ac92_b34a80960df1"}],"description":"","message_list":[],"uuid":"81433a61-ce42-4c50-b74e-aa50f8950b4b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"0c0ac680-823f-4560-884b-24105a57b1ec"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"dbef8b5a-cd9e-469b-9892-daa5b622eb79","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"c423ee74-d8e4-49c3-9f32-6bc3792d5503","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"681d647f-faee-4fe3-92d4-3a99be6b9887"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"385aa5d1-c242-4b1a-9177-a0ff4e84604b"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"7e1aa535-f122-4a65-935f-12d66d1c3d5f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"681d647f-faee-4fe3-92d4-3a99be6b9887"},"edge_type":"inherent","type":"","uuid":"e53c31f5-41f5-478c-83cf-2cf6247478d1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"385aa5d1-c242-4b1a-9177-a0ff4e84604b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"385aa5d1-c242-4b1a-9177-a0ff4e84604b"},"edge_type":"inherent","type":"","uuid":"014a5a82-afee-4318-a2fb-200b426a1ee3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"7e1aa535-f122-4a65-935f-12d66d1c3d5f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"681d647f-faee-4fe3-92d4-3a99be6b9887","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"385aa5d1-c242-4b1a-9177-a0ff4e84604b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"071f3ce5-fd84-4d57-b19d-d935b1bc0952"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7e1aa535-f122-4a65-935f-12d66d1c3d5f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"81433a61-ce42-4c50-b74e-aa50f8950b4b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}],"description":"","message_list":[],"uuid":"fb95e1e5-2c10-4b4b-bf2a-2355d72a0389","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"c423ee74-d8e4-49c3-9f32-6bc3792d5503"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"bc610421-cac8-48f5-975d-3c0ac2543ebd","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"896db45f-c539-4697-bb9d-35631c35c039","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"72805a51-b989-42ea-95d6-f130ef62dc69"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"9fb2c9ba-8859-4b80-93b7-fc02ce26c428"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"72805a51-b989-42ea-95d6-f130ef62dc69"},"edge_type":"inherent","type":"","uuid":"4dfb0c15-c778-4e26-871f-e682353e9c5a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"9fb2c9ba-8859-4b80-93b7-fc02ce26c428"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"72805a51-b989-42ea-95d6-f130ef62dc69","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"00b21925-2dcc-41e3-bae2-9e6a90d51160"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"9fb2c9ba-8859-4b80-93b7-fc02ce26c428","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_a408fae7_48d8_4905_ac92_b34a80960df1"}],"description":"","message_list":[],"uuid":"c8fa6e77-19fe-49da-abe9-6d4b34a6871d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"896db45f-c539-4697-bb9d-35631c35c039"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for starting an application","message_list":[],"uuid":"93a012e5-515d-445a-9b98-1db2d6654659","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"a67896bd-a782-4375-bdac-7f071eca03ec","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"6d9a57c7-a70a-4bee-979d-6fe0e98e40c5"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6d9a57c7-a70a-4bee-979d-6fe0e98e40c5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"b3afbb75-ccf4-459c-a9d5-8979585b350a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"a67896bd-a782-4375-bdac-7f071eca03ec"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for restarting an application","message_list":[],"uuid":"3ffb86c5-cb04-43a1-bf31-733b5d8b1405","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"887eeb24-6398-40a2-91b5-64fc75a22b6d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"a6f1444c-3711-4c92-84e7-5477bcf86819"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a6f1444c-3711-4c92-84e7-5477bcf86819","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"6b23e67c-c798-4830-9a6d-dcc1639afb63"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"ac17b24b-a88a-4f89-8303-ce4d6bd3f5a5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"887eeb24-6398-40a2-91b5-64fc75a22b6d"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}},{"description":"System action for stopping an application","message_list":[],"uuid":"347a2593-3202-4199-a363-139d82a641b6","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"dac68b6f-a75f-4173-9df1-808736328c87","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634","uuid":"cff76177-468d-46af-84f6-89fc65c71399"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cff76177-468d-46af-84f6-89fc65c71399","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"77336a28-07d1-4dc5-9624-02e54adc2697"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_a8e220a8_1e5c_4790_b152_4d52ce7fc634"}],"description":"","message_list":[],"uuid":"fc10edd8-83fc-4a62-bb84-e978617996e5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_a408fae7_48d8_4905_ac92_b34a80960df1","uuid":"dac68b6f-a75f-4173-9df1-808736328c87"},"name":"SYS_GEN__Runbook_Package_a408fae7_48d8_4905_ac92_b34a80960df1"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"}],"uuid":"a408fae7-48d8-4905-ac92-b34a80960df1","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},"edge_type":"user_defined","type":"","uuid":"55d148f3-2a74-4ccf-aec1-e8c9939f8cac","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},"edge_type":"user_defined","type":"","uuid":"0aa8dba4-0bb8-451d-a900-067b5f9c0f1f","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},"edge_type":"user_defined","type":"","uuid":"83eac695-2429-4970-97bc-80c716fc1c4a","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},"edge_type":"user_defined","type":"","uuid":"3c714489-9680-452e-9a3c-23eff11fd28b","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},"edge_type":"user_defined","type":"","uuid":"654b0a8a-9abd-4bb2-9e94-bcc270493e42","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},"edge_type":"user_defined","type":"","uuid":"93265590-7be9-4b1f-9ad3-198fc50d9518","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},"edge_type":"user_defined","type":"","uuid":"70ef35b4-050e-4e82-8739-bde6ddec317a","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"EXEC","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","type":"EXEC","uuid":"5426d89f-8997-44c8-9972-27109e2008ac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"75963782-4f21-437c-a390-3b86054a5cec","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","description":"","type":"DAG","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"cec5d693-cc32-47d9-a622-6422091cf91b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999"},"name":"8cc4ed37_runbook"}},"variable_list":[],"name":"MSSQLPackage"}]},"name":"MSSQLClone"},"spec":{"name":"MSSQLClone","resources":{"service_definition_list":[{"singleton":false,"uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634","action_list":[{"uuid":"0c1b00b3-692a-4501-bafd-a3b2d3d896ee","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","uuid":"ecbe661e-8249-4e9a-9fa6-15c7eea8c7af","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"030017c3_dag"}],"uuid":"f8ca284e-254f-4974-a6c3-be336758009b","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"ecbe661e-8249-4e9a-9fa6-15c7eea8c7af"},"name":"5730e30f_runbook"},"type":"system","description":"System action for creating an application"},{"uuid":"bae51f77-bf6c-46c4-be8a-b0019dcc0a03","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","uuid":"60413361-2580-4f9d-9e01-220897fc4a37","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6f5f997d_dag"}],"uuid":"071f3ce5-fd84-4d57-b19d-d935b1bc0952","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"60413361-2580-4f9d-9e01-220897fc4a37"},"name":"b01e7edf_runbook"},"type":"system","description":"System action for deleting an application. Deletes created VMs as well"},{"uuid":"c4537c45-93a6-4a8b-8552-cf03dfb133df","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","uuid":"5c53253e-6f58-4c71-8b53-3b059b3fde77","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"c2b90e7d_dag"}],"uuid":"e1eaca89-d914-469a-8387-de2e86c90c3d","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"5c53253e-6f58-4c71-8b53-3b059b3fde77"},"name":"0263f5a9_runbook"},"type":"system","description":"System action for starting an application"},{"uuid":"a85dfd4f-0e9b-4630-a718-ac95ced5341b","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","uuid":"4b9887c0-076d-4f4a-a1a4-4eca74577b3a","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"00b1cc9f_dag"}],"uuid":"77336a28-07d1-4dc5-9624-02e54adc2697","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"4b9887c0-076d-4f4a-a1a4-4eca74577b3a"},"name":"8aadc288_runbook"},"type":"system","description":"System action for stopping an application"},{"uuid":"b972fb1e-f561-4e28-97dd-1174d471212b","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","description":"","uuid":"4b9a02bb-12d6-443a-9b80-b2df51b60065","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6c4b7c3b_dag"}],"uuid":"6b23e67c-c798-4830-9a6d-dcc1639afb63","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"4b9a02bb-12d6-443a-9b80-b2df51b60065"},"name":"a059f54d_runbook"},"type":"system","description":"System action for restarting an application"}],"description":"","depends_on_list":[],"port_list":[],"tier":"","variable_list":[{"val_type":"STRING","description":"","uuid":"58f2d435-3022-4f9d-846f-b8cf928d1b2d","value":"","label":"","attrs":{"type":""},"type":"LOCAL","name":"EXECUTION_MODE"}],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[],"uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"timeout_secs":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"}},"editables":{"readiness_probe":{"connection_type":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"1":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"0":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"3":{"disk_size_mib":true},"2":{"disk_size_mib":true},"5":{"disk_size_mib":true},"4":{"disk_size_mib":true},"7":{"disk_size_mib":true},"6":{"disk_size_mib":true},"9":{"disk_size_mib":true},"8":{"disk_size_mib":true}}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"power_state":"ON","type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"7e750478-38fd-48d3-a683-ab15fa30c0fb"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"c5d1bcf8-ecf6-4e9d-9e36-4f02cf93ac3e"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"variable_list":[],"name":"MSSQL2014"}],"credential_definition_list":[{"username":"administrator","description":"","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"ff9d20af-f5ba-4941-a5d0-74db7a28c3a5"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"ddc0d001-38cc-420d-b564-1429cd2c1b59"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","uuid":"62d33de3-b54f-41c1-bbce-5a66cc8d95d5","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"3afa0e2d-da86-4344-b182-cac4c0a35237"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"}],"uuid":"4eb97df6-95c2-49b6-a5d2-46f4ab2da059","min_replicas":"1","max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"78550f3f-719e-41ed-8b8b-0d5844ebb686"},"type":"GREENFIELD","variable_list":[],"name":"49669086_deployment"}],"uuid":"2e76f90c-ac74-4a6a-85b3-7f71fd0da874","action_list":[],"description":"","variable_list":[{"val_type":"STRING","description":"","uuid":"d272c026-3860-4370-bc50-95b49adf5a44","value":"10.15.193.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"AD_IP"},{"val_type":"STRING","description":"","uuid":"966fade7-8d2e-4aeb-8aaf-417d9a03e05d","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"DOMAIN"},{"val_type":"STRING","description":"","uuid":"e1894997-d458-4e10-99c9-6ee1e2023c12","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"INCLUDE_BPG"},{"val_type":"STRING","description":"","uuid":"ec04ecb2-cc5a-41d0-a37f-d399991e4928","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"BPG_RKTOOLS_URL"}],"name":"Nutanix"}],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"},"package_definition_list":[{"description":"","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"}],"uuid":"a408fae7-48d8-4905-ac92-b34a80960df1","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","name":"87d54973_dag","type":"DAG","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025"},"edge_type":"user_defined","type":"","uuid":"55d148f3-2a74-4ccf-aec1-e8c9939f8cac","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c"},"edge_type":"user_defined","type":"","uuid":"0aa8dba4-0bb8-451d-a900-067b5f9c0f1f","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0"},"edge_type":"user_defined","type":"","uuid":"83eac695-2429-4970-97bc-80c716fc1c4a","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c"},"edge_type":"user_defined","type":"","uuid":"3c714489-9680-452e-9a3c-23eff11fd28b","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc"},"edge_type":"user_defined","type":"","uuid":"654b0a8a-9abd-4bb2-9e94-bcc270493e42","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37"},"edge_type":"user_defined","type":"","uuid":"93265590-7be9-4b1f-9ad3-198fc50d9518","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444"},"edge_type":"user_defined","type":"","uuid":"70ef35b4-050e-4e82-8739-bde6ddec317a","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"5426d89f-8997-44c8-9972-27109e2008ac"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","name":"Enable Credssp","type":"EXEC","uuid":"1d5f6759-e217-4e25-8cb3-ab7d187cc025","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"Enable-WSManCredSSP -Role Server -Force","type":"","command_line_args":"","exit_status":[],"script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"AddToDomain","type":"EXEC","uuid":"d39c8c1c-d48d-47b5-8c70-e08bfb09150c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","uuid":"5671d66d-583d-4d2a-924f-4326a23d17e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\nsleep(60)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"InitializeDisk","type":"EXEC","uuid":"e9c96d5b-9bcc-4070-bc16-42c29852636c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"03d70a90-a6de-4d9b-a5e3-4b0790f4d432"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"InstallSQL","type":"EXEC","uuid":"53ba192f-2404-41ac-ab30-73ce1f053bbc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","uuid":"1c2681e6-d093-4563-8cb4-1b1d0ce35e37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","uuid":"a65247a1-5275-4d49-a0df-9dcd63021444","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"a8e220a8-1e5c-4790-b152-4d52ce7fc634"},"retries":"0","name":"FirewallRules","type":"EXEC","uuid":"5426d89f-8997-44c8-9972-27109e2008ac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"77275663-bb80-461f-a6f1-2cd1621afe4f"},"type":"","command_line_args":"","script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""}],"description":"","uuid":"75963782-4f21-437c-a390-3b86054a5cec","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"c42cbd06-b3ab-4168-a88a-2f31211b6f62"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"a408fae7-48d8-4905-ac92-b34a80960df1"},"retries":"0","name":"c5e51cfd_dag","type":"DAG","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""}],"description":"","uuid":"cec5d693-cc32-47d9-a622-6422091cf91b","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"dea1cb2e-6987-44bb-b869-d3e52bf31999"},"name":"8cc4ed37_runbook"}},"variable_list":[],"name":"MSSQLPackage"}],"client_attrs":{"a8e220a8-1e5c-4790-b152-4d52ce7fc634":{"y":100,"x":480}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1547715702007584","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"bc383778-8088-4aa6-9328-67b4d94cbee6","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":0,"creation_time":"1547715702007584","name":"MSSQLClone"}}