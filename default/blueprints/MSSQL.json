{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"9063f35f-e892-4a13-9558-95fe16493b26","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"fcd2205a-eda7-4a2b-9b74-797c949e86b7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"030017c3_dag"}],"description":"","message_list":[],"uuid":"58d10486-b9df-49d8-aab0-dcb65706345a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"fcd2205a-eda7-4a2b-9b74-797c949e86b7"},"name":"5730e30f_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"03a925b3-0078-4696-8f95-0ee7561c0f5a","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"92808c84-417d-41d3-8b17-70a7937aaa5f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f5f997d_dag"}],"description":"","message_list":[],"uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"92808c84-417d-41d3-8b17-70a7937aaa5f"},"name":"b01e7edf_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"cd6564c3-04d5-485d-aafb-6826be8ea8cc","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"b635e741-d23b-4963-b11e-a6a3af84cef5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c2b90e7d_dag"}],"description":"","message_list":[],"uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"b635e741-d23b-4963-b11e-a6a3af84cef5"},"name":"0263f5a9_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"52340f5f-cebf-40e7-a8fe-fe14d14412a2","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"3b334bd0-beb6-4f94-8f81-9f8ecaa00cf4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"00b1cc9f_dag"}],"description":"","message_list":[],"uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"3b334bd0-beb6-4f94-8f81-9f8ecaa00cf4"},"name":"8aadc288_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"5df9cef9-230c-4d85-a8b5-11cfcad20302","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"6ae241b4-3d5e-40f8-9aed-eae063f23723","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","message_list":[],"uuid":"b682d7e1-b079-4592-a499-25d0666d084f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"6ae241b4-3d5e-40f8-9aed-eae063f23723"},"name":"a059f54d_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"0d9922e2-8892-4af5-8bab-0206d24cee8e","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"DAG","uuid":"c676b3be-92f5-49e8-bb43-0cb2cbdc5714","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c9cd1bee-f8ca-4077-a0e4-e092afecdd6d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"c9cd1bee-f8ca-4077-a0e4-e092afecdd6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c676b3be-92f5-49e8-bb43-0cb2cbdc5714"},"name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}}],"message_list":[],"uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d065bae5-e745-47d0-8106-0e3d86885f1b","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"EXECUTION_MODE"}],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"f6f01606-f0ab-417e-b9c4-1a72321c9a9e","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"29febfe0-16be-4265-b473-00170464a183","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"096f5b18-213d-43dd-9964-5f8cf4ea48c8"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"265c908b-8b7a-4ea6-87e1-c435acce12d9"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"096f5b18-213d-43dd-9964-5f8cf4ea48c8"},"edge_type":"inherent","type":"","uuid":"28fd0188-b15e-4b30-a556-b75b650c3d7a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"265c908b-8b7a-4ea6-87e1-c435acce12d9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"096f5b18-213d-43dd-9964-5f8cf4ea48c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"265c908b-8b7a-4ea6-87e1-c435acce12d9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"89d6cb47-fc7f-4550-a0a3-9a7368a9b010","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"29febfe0-16be-4265-b473-00170464a183"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for powering on an application","message_list":[],"uuid":"40049a69-c41b-4704-8485-919c349e2178","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"4784b6db-1c11-49fc-a60f-65e08c42f626","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5e9e8f87-22ee-4012-8dab-e17c57c0332d"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c74a466a-3091-49e5-ab07-f2b760cf9a2f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5e9e8f87-22ee-4012-8dab-e17c57c0332d"},"edge_type":"inherent","type":"","uuid":"a9a6f119-7993-4fed-8ab0-d5985885d850","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c74a466a-3091-49e5-ab07-f2b760cf9a2f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"5e9e8f87-22ee-4012-8dab-e17c57c0332d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"c74a466a-3091-49e5-ab07-f2b760cf9a2f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"9197eccc-9c40-4159-ac8a-3e58a9b60a5c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"4784b6db-1c11-49fc-a60f-65e08c42f626"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for restarting an application","message_list":[],"uuid":"4fdfe343-1db1-4de8-a41a-ff7953cc81fb","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"be933177-d0fe-49cd-b40d-915d04728398","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"dfed2521-f287-4da7-9d78-314ea366be88"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"d74b5537-45e7-4195-9659-febaa7f6ee74"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"dfed2521-f287-4da7-9d78-314ea366be88"},"edge_type":"inherent","type":"","uuid":"1e876536-0d00-4da6-a0e6-5b07d3e6f1de","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"d74b5537-45e7-4195-9659-febaa7f6ee74"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"dfed2521-f287-4da7-9d78-314ea366be88","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"d74b5537-45e7-4195-9659-febaa7f6ee74","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"ba98d382-e6ff-4d4a-bfc3-7917b4a87f2d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"be933177-d0fe-49cd-b40d-915d04728398"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for suspending an application","message_list":[],"uuid":"d6ce55b9-e5c8-4845-9165-256798bf369a","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"c9593f0f-9cdf-45c2-9ee1-852d760df380","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"dddb19fe-f82e-4b0e-b978-d71cadff0542","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c9593f0f-9cdf-45c2-9ee1-852d760df380"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for modifying an application","message_list":[],"uuid":"9ead5414-cb4d-4201-8311-ba66a1d6e5ed","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"20fc69e6-facf-424d-838e-a53ad0885f7a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"6dc372a9-42df-4e5e-9388-0d37413c8fd2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"20fc69e6-facf-424d-838e-a53ad0885f7a"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for powering off an application","message_list":[],"uuid":"ada7b384-5f19-41dd-b30d-ead98a46467f","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"30a2466d-6290-4795-ab21-6a56183262a1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"d89e8c14-07f8-4021-a7af-b7b031512e4d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"d89e8c14-07f8-4021-a7af-b7b031512e4d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"b12b9d28-9fc2-4d74-b667-cd242ae7b4f7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"30a2466d-6290-4795-ab21-6a56183262a1"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"fc44c656-b7f6-4aa9-a9d6-4403512cdbde","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"569a329d-65f8-417f-9965-1039743f0e14","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"2bae7c83-5149-43cc-ab3a-c8804de161dc"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"2bae7c83-5149-43cc-ab3a-c8804de161dc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"d375b777-d6da-4d25-a78f-e94faa994e9e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"569a329d-65f8-417f-9965-1039743f0e14"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"53d2dc55-9411-413b-bae7-e6f2746100da","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"DAG","uuid":"49223d5e-d45e-49d5-9e8d-d5382d62dd50","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"45c0c047-2bb8-47c0-96ba-2d1b999bf529"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"45c0c047-2bb8-47c0-96ba-2d1b999bf529","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"b1c4adca-ebb9-457f-a676-0d868b62c81c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"49223d5e-d45e-49d5-9e8d-d5382d62dd50"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}}],"message_list":[],"uuid":"50039e03-837c-478b-b850-54b6ef4b898c","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"1":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"0":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"3":{"disk_size_mib":true},"2":{"disk_size_mib":true},"5":{"disk_size_mib":true},"4":{"disk_size_mib":true},"7":{"disk_size_mib":true},"6":{"disk_size_mib":true},"9":{"disk_size_mib":true},"8":{"disk_size_mib":true}}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"variable_list":[],"name":"AHV_MSSQL2014"},{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"0daa24a5-9e5c-440f-8774-8bd07fd4fa34","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"28d69812-6a23-49b2-9a89-e96d9dbb6120","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"89591a1c-74d1-4e0d-b51c-45e4497a128e"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"d5c39974-ad9a-4ccc-ab0a-6c8fe44a7e74"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"89591a1c-74d1-4e0d-b51c-45e4497a128e"},"edge_type":"inherent","type":"","uuid":"85c77a9c-f35a-48c0-895b-4d3c4b736332","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"d5c39974-ad9a-4ccc-ab0a-6c8fe44a7e74"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"PROVISION_VCENTER","uuid":"89591a1c-74d1-4e0d-b51c-45e4497a128e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"QA","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[{"nic_type":"e1000","type":"","net_name":"key-vim.host.PortGroup-VM Network"}],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":-1,"disk_mode":"persistent","adapter_type":"IDE","iso_path":"","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/","disk_type":"cdrom","type":""}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Provision_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"d5c39974-ad9a-4ccc-ab0a-6c8fe44a7e74","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"be2ea25e-4429-4db1-86e5-6bbd7c54f8bc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"28d69812-6a23-49b2-9a89-e96d9dbb6120"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for powering on an application","message_list":[],"uuid":"238c6e9a-5290-473e-863f-df0256b6edd7","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"eedb9c7b-2f07-4959-9588-36efed41c43f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"74a83f8e-6937-42d9-8d96-a14b4a9125b4"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"337cac28-b33c-4d71-9307-7dcc85fdae99"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"74a83f8e-6937-42d9-8d96-a14b4a9125b4"},"edge_type":"inherent","type":"","uuid":"90c273e2-f22f-4142-a803-c8378f49d21d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"337cac28-b33c-4d71-9307-7dcc85fdae99"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"74a83f8e-6937-42d9-8d96-a14b4a9125b4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_PowerOn_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"337cac28-b33c-4d71-9307-7dcc85fdae99","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"2d9c6625-8ce1-4754-b054-01e2733d64f0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"eedb9c7b-2f07-4959-9588-36efed41c43f"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for restarting an application","message_list":[],"uuid":"702e030f-767c-4bdc-9a98-94f58a55d681","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"b9ea1081-51cd-4783-9f6a-384ff118212c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"197acf96-84ef-48ad-8dde-3b21eb88d651"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7ac598a2-4adf-4e5f-9ff9-6acbb9157229"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"197acf96-84ef-48ad-8dde-3b21eb88d651"},"edge_type":"inherent","type":"","uuid":"b8681c34-438c-4a0d-a3a9-64c2da4ccb6f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7ac598a2-4adf-4e5f-9ff9-6acbb9157229"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"197acf96-84ef-48ad-8dde-3b21eb88d651","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Restart994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"7ac598a2-4adf-4e5f-9ff9-6acbb9157229","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"c522631f-7f5b-41d1-9d56-76f41f829ada","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"b9ea1081-51cd-4783-9f6a-384ff118212c"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for suspending an application","message_list":[],"uuid":"a7dceb17-9112-477d-8c78-a315cf5fb830","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"ddeef34c-108a-4802-9cc8-135fbb59d65c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"1767fbef-0e8f-4f79-abc2-cdb77f83a384","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"ddeef34c-108a-4802-9cc8-135fbb59d65c"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for modifying an application","message_list":[],"uuid":"f500abff-fdf3-4284-aa5d-226717ee7a8d","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"444c6293-5b92-4986-91a8-1fad09dacf8a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"2e5871ff-0b12-46b5-a166-19d42d50469a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"444c6293-5b92-4986-91a8-1fad09dacf8a"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for powering off an application","message_list":[],"uuid":"39b14925-f875-4c21-b749-c5d7393b0060","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"550c1c42-d0a7-45ee-aec0-af8b75ce3190","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Poweroff_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"6fa9c9aa-5f97-418c-a084-65282e447da7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"6fa9c9aa-5f97-418c-a084-65282e447da7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Poweroff_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"c1ddd91d-6867-48fd-91a9-957fbca282ed","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"550c1c42-d0a7-45ee-aec0-af8b75ce3190"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"94f6fd5c-82c1-4159-af6d-4daaf7132a87","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"e9d47356-6e72-4a68-a37e-73bdc8322d81","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Delete_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"2589de50-bdc1-4420-91a0-dc6ce159ba0c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DELETE_VCENTER","uuid":"2589de50-bdc1-4420-91a0-dc6ce159ba0c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Delete_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"fbef534d-ade5-4fec-9660-80a60527e758","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e9d47356-6e72-4a68-a37e-73bdc8322d81"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"963a5e7b-8beb-4791-8151-97f03fdc33ac","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"DAG","uuid":"d75f9403-dab9-462c-9c61-483369f93a6e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"03beb550-2c7a-49f9-8d3a-351db51ef8cc"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"03beb550-2c7a-49f9-8d3a-351db51ef8cc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"360f1cc1-e45a-435b-b708-d927b1f54f3e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"d75f9403-dab9-462c-9c61-483369f93a6e"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}}],"message_list":[],"uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"resources":{"template_nic_list":{},"nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"QA","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[{"nic_type":"e1000","type":"","net_name":"key-vim.host.PortGroup-VM Network"}],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":-1,"disk_mode":"persistent","adapter_type":"IDE","iso_path":"","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/","disk_type":"cdrom","type":""}]}},"variable_list":[],"name":"VMware_MSSQL2014"}],"credential_definition_list":[{"username":"administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","state":"ACTIVE","message_list":[],"uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"584b7b3f-ea99-45d0-8ce9-3c3064409c0a","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"18f14d29-939c-495d-9e8c-217717b6f544","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"9a9c6680-2e1f-4770-8972-856115eefac0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"d0432877-d95b-468e-8bbd-78c3965735ba"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"00fd12b4-1635-4443-8db1-896c7801a3ee"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b747ff9f-d5b6-441d-8801-f580bcfe69e2"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ee34af3c-7e01-4a0e-83ec-204b41e8f7ca"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"885f419c-f4c1-42ea-b1fa-8ab752054163"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ee34af3c-7e01-4a0e-83ec-204b41e8f7ca"},"edge_type":"inherent","type":"","uuid":"c7b23259-543a-4f61-9b84-c429450f268a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"885f419c-f4c1-42ea-b1fa-8ab752054163"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b747ff9f-d5b6-441d-8801-f580bcfe69e2"},"edge_type":"inherent","type":"","uuid":"905e33a1-a7a7-4829-9fe1-16ba164676cc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ee34af3c-7e01-4a0e-83ec-204b41e8f7ca"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"00fd12b4-1635-4443-8db1-896c7801a3ee"},"edge_type":"inherent","type":"","uuid":"3e50e136-c5e6-4ca5-92a7-1711eeec247f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b747ff9f-d5b6-441d-8801-f580bcfe69e2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"d0432877-d95b-468e-8bbd-78c3965735ba"},"edge_type":"inherent","type":"","uuid":"ad8d3996-198a-40a6-ab85-d549a071acca","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"00fd12b4-1635-4443-8db1-896c7801a3ee"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"d0432877-d95b-468e-8bbd-78c3965735ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"00fd12b4-1635-4443-8db1-896c7801a3ee","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"89d6cb47-fc7f-4550-a0a3-9a7368a9b010"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b747ff9f-d5b6-441d-8801-f580bcfe69e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7dc38f1f-158d-4264-8322-7340342cecc9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ee34af3c-7e01-4a0e-83ec-204b41e8f7ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"885f419c-f4c1-42ea-b1fa-8ab752054163","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"cb10164f-ce7a-4c8c-9073-339a9cfe50a3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"9a9c6680-2e1f-4770-8972-856115eefac0"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for starting an application","message_list":[],"uuid":"87865311-df8f-44d1-a3ec-68158971d09e","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"182ca562-e9d6-427e-bc53-2638c5a4ae85","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"befd92ed-f045-40d7-b995-b209551f456f"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"49444b9a-ba42-4a0f-b179-270d2946fc4c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"befd92ed-f045-40d7-b995-b209551f456f"},"edge_type":"inherent","type":"","uuid":"9df69775-d767-4997-a628-0d75319c8af6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"49444b9a-ba42-4a0f-b179-270d2946fc4c"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"befd92ed-f045-40d7-b995-b209551f456f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"9197eccc-9c40-4159-ac8a-3e58a9b60a5c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"49444b9a-ba42-4a0f-b179-270d2946fc4c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"5d085e96-1a41-4c5c-81b5-fe5b18a788ba","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"182ca562-e9d6-427e-bc53-2638c5a4ae85"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for restarting an application","message_list":[],"uuid":"cf9f235a-13d1-43bd-9be4-e86baba58336","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"86ecd7d2-70ac-4869-b008-da2ce4c7f7c3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"9fc6cc1a-93bd-4f3e-bed6-f8cd82a211fb"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4a0ff4d8-ea6f-4f1a-8cbb-7143e3e8c1ad"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"9fc6cc1a-93bd-4f3e-bed6-f8cd82a211fb"},"edge_type":"inherent","type":"","uuid":"a7b9494f-4b28-46ae-8d07-cb117c1b740f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4a0ff4d8-ea6f-4f1a-8cbb-7143e3e8c1ad"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9fc6cc1a-93bd-4f3e-bed6-f8cd82a211fb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"ba98d382-e6ff-4d4a-bfc3-7917b4a87f2d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4a0ff4d8-ea6f-4f1a-8cbb-7143e3e8c1ad","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"f075e87c-da48-401b-842a-441b242adfcc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"86ecd7d2-70ac-4869-b008-da2ce4c7f7c3"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for stopping an application","message_list":[],"uuid":"459a0579-c077-4195-8a94-156a23efefb4","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"d53f74dd-5429-4ced-9284-55489107e8f7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0a878aed-942d-4a59-8c44-e0885955fc03"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f8e0bb9b-a0ee-49eb-b9a2-b71f192b6518"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0a878aed-942d-4a59-8c44-e0885955fc03"},"edge_type":"inherent","type":"","uuid":"efcc2e22-7ea7-43d1-8077-fa40cd8e40be","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f8e0bb9b-a0ee-49eb-b9a2-b71f192b6518"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0a878aed-942d-4a59-8c44-e0885955fc03","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f8e0bb9b-a0ee-49eb-b9a2-b71f192b6518","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b12b9d28-9fc2-4d74-b667-cd242ae7b4f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"098701fb-c249-4935-a0e9-706987a829af","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"d53f74dd-5429-4ced-9284-55489107e8f7"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"e9e34f27-4f46-48bc-8a1d-deaff6f57c46","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"acfdb4f0-308c-43af-a8b1-ae48e9cba4e8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"00adac85-2ee9-43b6-9a0c-9a06057a3519"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"79f964b7-53ee-4ec5-b799-edb5197bdbd8"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a1c02ebd-fb8e-4314-821f-719e38d0d069"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"af1a0f7e-50fe-466c-b674-9916deb1f56e"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"02b304d3-383b-4c5a-b499-f1ac267b639b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"00adac85-2ee9-43b6-9a0c-9a06057a3519"},"edge_type":"inherent","type":"","uuid":"3b426e39-9884-427d-b5b4-d452fc69bf9d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"79f964b7-53ee-4ec5-b799-edb5197bdbd8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"79f964b7-53ee-4ec5-b799-edb5197bdbd8"},"edge_type":"inherent","type":"","uuid":"dd00e21c-63c3-40da-8b2d-bc3df9d68628","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a1c02ebd-fb8e-4314-821f-719e38d0d069"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"af1a0f7e-50fe-466c-b674-9916deb1f56e"},"edge_type":"inherent","type":"","uuid":"ed4f1355-04f3-4758-87df-47ffdc10ee35","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"02b304d3-383b-4c5a-b499-f1ac267b639b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a1c02ebd-fb8e-4314-821f-719e38d0d069"},"edge_type":"inherent","type":"","uuid":"af16db78-b2a0-4e60-bd46-71e105f5e164","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"af1a0f7e-50fe-466c-b674-9916deb1f56e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"00adac85-2ee9-43b6-9a0c-9a06057a3519","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"79f964b7-53ee-4ec5-b799-edb5197bdbd8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a1c02ebd-fb8e-4314-821f-719e38d0d069","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"888b179c-3416-4680-b8fc-6e1c4d3c6d9c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"af1a0f7e-50fe-466c-b674-9916deb1f56e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"d375b777-d6da-4d25-a78f-e94faa994e9e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"02b304d3-383b-4c5a-b499-f1ac267b639b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"1564aace-8113-4183-b1bd-c2bd3f4e010e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"acfdb4f0-308c-43af-a8b1-ae48e9cba4e8"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for scaleout","message_list":[],"uuid":"0fc970e8-9de6-4243-bd82-55b65c668018","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"7542fb0b-7f95-40e8-8a99-fa8d76296538","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"97cd9e5f-57a8-4eaa-ad46-9ae683839530"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"SCALING","uuid":"97cd9e5f-57a8-4eaa-ad46-9ae683839530","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"2bc2a96b-357c-4b99-9c0c-012ea72b7889","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"59f8e2bc-d01c-4612-9e52-d1b78aeffe70","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"7542fb0b-7f95-40e8-8a99-fa8d76296538"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for scalein","message_list":[],"uuid":"5a212122-82df-4047-b5cb-8b7962b58de1","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"64731f9b-4867-435d-bb5c-e15be92b0cc0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"8baa9a00-aa6c-4e68-92a0-5f05893e03c7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"SCALING","uuid":"8baa9a00-aa6c-4e68-92a0-5f05893e03c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"342c7461-712d-4c73-8756-fb18db86387c","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"7e311cc2-6b54-4852-a479-a0011341c2db","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"64731f9b-4867-435d-bb5c-e15be92b0cc0"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"e8016de7-761c-4bd0-b0db-1ccacfcc5ff1","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DAG","uuid":"3f8eb2b6-9b98-4c3b-b515-2cf666124210","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a07ce6d8-4978-40b6-8d11-1d8fbef3aa9a"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"27335488-149f-4dba-8a3e-76d02de2518f"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"15fdc820-2e05-468f-80be-4f266872ca55"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"40c877c1-ef59-4acf-9ed9-dde0ddd20880"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a07ce6d8-4978-40b6-8d11-1d8fbef3aa9a"},"edge_type":"inherent","type":"","uuid":"dadf30f1-0d4a-4d83-8fd8-20ed997c314b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"27335488-149f-4dba-8a3e-76d02de2518f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"15fdc820-2e05-468f-80be-4f266872ca55"},"edge_type":"inherent","type":"","uuid":"0a81bb35-de6d-4fa6-a1ba-206e19156481","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"40c877c1-ef59-4acf-9ed9-dde0ddd20880"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"27335488-149f-4dba-8a3e-76d02de2518f"},"edge_type":"inherent","type":"","uuid":"9e47b7ae-d0b3-41ee-a89e-297858efd745","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"15fdc820-2e05-468f-80be-4f266872ca55"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a07ce6d8-4978-40b6-8d11-1d8fbef3aa9a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"27335488-149f-4dba-8a3e-76d02de2518f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"15fdc820-2e05-468f-80be-4f266872ca55","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b1c4adca-ebb9-457f-a676-0d868b62c81c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"40c877c1-ef59-4acf-9ed9-dde0ddd20880","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"6b5dd869-b55a-4b3d-8b77-684b41183bdc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"3f8eb2b6-9b98-4c3b-b515-2cf666124210"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"}],"substrate_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"013aa0f8-3114-492b-956a-ed32d29628ed","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"3a32a79b-2d80-4de7-9761-c76a2b25cc16","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"d1d644a4-ae17-4b7c-b6e4-e4073f6ac41a"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"65114da3-90d1-4bd5-8f98-e058593d3d70"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"c7a39098-33b0-4025-a270-d66da39b52f7"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"088309ea-41ed-4a4a-a2af-6ba3dfce9396"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b1c9ce35-c9cb-46af-adb9-b51d66cc355b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"088309ea-41ed-4a4a-a2af-6ba3dfce9396"},"edge_type":"inherent","type":"","uuid":"8da7d6f9-35ee-40b8-a23b-5af87f960840","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b1c9ce35-c9cb-46af-adb9-b51d66cc355b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"c7a39098-33b0-4025-a270-d66da39b52f7"},"edge_type":"inherent","type":"","uuid":"52442660-37d5-4174-9795-008e5730659a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"088309ea-41ed-4a4a-a2af-6ba3dfce9396"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"65114da3-90d1-4bd5-8f98-e058593d3d70"},"edge_type":"inherent","type":"","uuid":"4b51b1c1-b050-438c-8a22-898037277c8d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"c7a39098-33b0-4025-a270-d66da39b52f7"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"d1d644a4-ae17-4b7c-b6e4-e4073f6ac41a"},"edge_type":"inherent","type":"","uuid":"92e49137-7930-4399-bc29-da7db8703bb8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"65114da3-90d1-4bd5-8f98-e058593d3d70"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"d1d644a4-ae17-4b7c-b6e4-e4073f6ac41a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"65114da3-90d1-4bd5-8f98-e058593d3d70","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"89d6cb47-fc7f-4550-a0a3-9a7368a9b010"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c7a39098-33b0-4025-a270-d66da39b52f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7dc38f1f-158d-4264-8322-7340342cecc9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"088309ea-41ed-4a4a-a2af-6ba3dfce9396","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b1c9ce35-c9cb-46af-adb9-b51d66cc355b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"2466f62b-c99f-4dea-b0c0-f1d3c162cfc6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"3a32a79b-2d80-4de7-9761-c76a2b25cc16"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for starting an application","message_list":[],"uuid":"5553f5bc-fca0-466e-adc8-ca42c1c4032d","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"1d87164d-9f5b-43d7-9ef3-a84acb753d67","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"0ce2236b-2638-4e12-8c07-d0dcf67235c5"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e446aa56-eff9-4b74-b2fa-cf91d72f8df0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"0ce2236b-2638-4e12-8c07-d0dcf67235c5"},"edge_type":"inherent","type":"","uuid":"63fd6477-c15e-4b46-a49f-cf11023ee7c8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e446aa56-eff9-4b74-b2fa-cf91d72f8df0"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0ce2236b-2638-4e12-8c07-d0dcf67235c5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"9197eccc-9c40-4159-ac8a-3e58a9b60a5c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e446aa56-eff9-4b74-b2fa-cf91d72f8df0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"a848ccec-747c-4030-9b83-e60460c34f51","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"1d87164d-9f5b-43d7-9ef3-a84acb753d67"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for restarting an application","message_list":[],"uuid":"e8923115-5d1e-49cd-b793-8e7fbb047625","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"4155304d-0d2d-4aa9-99f2-4828a81ab66e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"60bed1b8-9ef0-4870-ba53-98075f118d2a"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b20a4ba6-9d77-47be-9c8c-a3357d84e8c1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"60bed1b8-9ef0-4870-ba53-98075f118d2a"},"edge_type":"inherent","type":"","uuid":"66cea0c8-9305-48b3-bc68-06d30e74b3ef","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b20a4ba6-9d77-47be-9c8c-a3357d84e8c1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"60bed1b8-9ef0-4870-ba53-98075f118d2a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"ba98d382-e6ff-4d4a-bfc3-7917b4a87f2d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b20a4ba6-9d77-47be-9c8c-a3357d84e8c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"1e79ace6-fe36-464c-87b4-c27cca8c107b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"4155304d-0d2d-4aa9-99f2-4828a81ab66e"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for stopping an application","message_list":[],"uuid":"263fe3ef-f7f8-498f-a6a9-e0f19ea40999","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"e89effeb-8300-4950-8421-e605f7098fef","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"680e0226-f649-4df7-9e9c-af0da5ab712c"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"67c43b6f-f97a-4a81-9c09-373b4293802c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"680e0226-f649-4df7-9e9c-af0da5ab712c"},"edge_type":"inherent","type":"","uuid":"e58785c1-bf40-4b62-82e4-54278895e396","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"67c43b6f-f97a-4a81-9c09-373b4293802c"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"680e0226-f649-4df7-9e9c-af0da5ab712c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"67c43b6f-f97a-4a81-9c09-373b4293802c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b12b9d28-9fc2-4d74-b667-cd242ae7b4f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"bafab6d4-9f3d-450e-8987-ef020c37980a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"e89effeb-8300-4950-8421-e605f7098fef"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"43a08c2e-74cd-4c16-a605-e7c121386ea2","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"b8b14384-dcb2-427f-97b5-ce89f0a46dab","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"12d2451a-d015-4a61-9bc0-c78da9dc43be"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"f14a67b9-f935-420e-9f47-f296b56d550b"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b69cacc2-0ee7-4857-94a4-9b33ff188109"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"8ce733f8-ee85-421a-a408-18f56304acd9"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"f3ce6165-645a-461a-9bde-ea9dfc4654a0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"12d2451a-d015-4a61-9bc0-c78da9dc43be"},"edge_type":"inherent","type":"","uuid":"c0c0156f-4a49-4ee6-b33b-3071784474dd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"f14a67b9-f935-420e-9f47-f296b56d550b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"f14a67b9-f935-420e-9f47-f296b56d550b"},"edge_type":"inherent","type":"","uuid":"f612bc7c-39fe-4e86-a143-6381caa8248a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b69cacc2-0ee7-4857-94a4-9b33ff188109"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"8ce733f8-ee85-421a-a408-18f56304acd9"},"edge_type":"inherent","type":"","uuid":"90dbd945-e8d1-4609-ba91-66d5204f1b74","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"f3ce6165-645a-461a-9bde-ea9dfc4654a0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b69cacc2-0ee7-4857-94a4-9b33ff188109"},"edge_type":"inherent","type":"","uuid":"4287c1cd-f5bc-4b5f-ad9e-8fe548db74ea","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"8ce733f8-ee85-421a-a408-18f56304acd9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"12d2451a-d015-4a61-9bc0-c78da9dc43be","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f14a67b9-f935-420e-9f47-f296b56d550b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b69cacc2-0ee7-4857-94a4-9b33ff188109","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"888b179c-3416-4680-b8fc-6e1c4d3c6d9c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8ce733f8-ee85-421a-a408-18f56304acd9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"d375b777-d6da-4d25-a78f-e94faa994e9e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"f3ce6165-645a-461a-9bde-ea9dfc4654a0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"bd0f4f6d-ca14-43ef-bc07-7ceba61decee","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"b8b14384-dcb2-427f-97b5-ce89f0a46dab"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"a1cb01ba-fc40-4dcb-9f3d-272f4a32b7ff","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},"retries":"0","description":"","type":"DAG","uuid":"a185e8fe-a059-43be-8087-e3b2e572a1c9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"eda607d9-352c-4bfc-b4a3-cbd765e09ad3"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"84bf77de-9990-4252-8f29-d51f84d8b233"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"16cb5833-4c20-4641-b384-0c85009c06cb"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"45a126fa-7ef9-4cd4-8a12-2cbe697b55e3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"eda607d9-352c-4bfc-b4a3-cbd765e09ad3"},"edge_type":"inherent","type":"","uuid":"78869811-2b42-4133-8964-d261d5609872","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"84bf77de-9990-4252-8f29-d51f84d8b233"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"16cb5833-4c20-4641-b384-0c85009c06cb"},"edge_type":"inherent","type":"","uuid":"cd82e08f-011c-4064-bbc5-699a2145b8c7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"45a126fa-7ef9-4cd4-8a12-2cbe697b55e3"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"84bf77de-9990-4252-8f29-d51f84d8b233"},"edge_type":"inherent","type":"","uuid":"31eed7b1-6ddc-46df-9f34-3dad9e23fe2d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"16cb5833-4c20-4641-b384-0c85009c06cb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"eda607d9-352c-4bfc-b4a3-cbd765e09ad3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"84bf77de-9990-4252-8f29-d51f84d8b233","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"16cb5833-4c20-4641-b384-0c85009c06cb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b1c4adca-ebb9-457f-a676-0d868b62c81c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"45a126fa-7ef9-4cd4-8a12-2cbe697b55e3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"c229c6ff-9812-4266-bceb-6840c404f39a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"a185e8fe-a059-43be-8087-e3b2e572a1c9"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}}],"message_list":[],"uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"17680fe8-d8fc-4890-926c-a5867c5b1555","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"75ad188f-85cd-4ee5-b041-69bd4d80ec7f","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f4d0b6dc-5372-4c45-99ad-d6f107775934","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"fd066c01-83b0-4b73-aa43-932ccd89026e","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"Nutanix"},{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"b0955c16-c78d-491f-8540-d174702fb48d","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"03c5d954-b21d-414d-8117-aa3544aaff72","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"9b8a6f2d-c800-4b0e-a1ec-d48f07fe5db1"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"27e5cba7-7af5-420e-b073-b86e0ab6bb55"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"89500bcc-69ea-469d-8c97-880ef1842dd6"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9801ac66-ad75-40ce-b1d5-660380b152bd"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"31eed9dd-366d-4850-b08b-551369d4f0a6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9801ac66-ad75-40ce-b1d5-660380b152bd"},"edge_type":"inherent","type":"","uuid":"798c0052-78ab-4f8d-a651-0620a79a1b77","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"31eed9dd-366d-4850-b08b-551369d4f0a6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"89500bcc-69ea-469d-8c97-880ef1842dd6"},"edge_type":"inherent","type":"","uuid":"1cfdde30-8d8a-4bcc-a8b3-8e170b08037f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9801ac66-ad75-40ce-b1d5-660380b152bd"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"9b8a6f2d-c800-4b0e-a1ec-d48f07fe5db1"},"edge_type":"inherent","type":"","uuid":"c96111f8-a684-447f-a22c-c489fa037036","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"27e5cba7-7af5-420e-b073-b86e0ab6bb55"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"27e5cba7-7af5-420e-b073-b86e0ab6bb55"},"edge_type":"inherent","type":"","uuid":"248c7faf-8c18-4b74-b077-2dbc05d895ab","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"89500bcc-69ea-469d-8c97-880ef1842dd6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"9b8a6f2d-c800-4b0e-a1ec-d48f07fe5db1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"27e5cba7-7af5-420e-b073-b86e0ab6bb55","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"be2ea25e-4429-4db1-86e5-6bbd7c54f8bc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"89500bcc-69ea-469d-8c97-880ef1842dd6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"2ba90feb-1d44-436e-9c0d-bbc04ac45e5f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9801ac66-ad75-40ce-b1d5-660380b152bd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"31eed9dd-366d-4850-b08b-551369d4f0a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"473f53f2-e95d-4d88-88b3-17f683d25429","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"03c5d954-b21d-414d-8117-aa3544aaff72"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for starting an application","message_list":[],"uuid":"b6737970-7e07-4990-89bb-9e8bd1397464","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"58d1e84a-5a6e-4417-b31c-b9ba45b95a11","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"0e110f0f-d4db-45d0-84da-9b365c8a4579"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"6fff5ba2-f85f-4066-98cd-4bafdf4ce37b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"0e110f0f-d4db-45d0-84da-9b365c8a4579"},"edge_type":"inherent","type":"","uuid":"cafa9889-f0c1-4c2a-aa63-f45048366447","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"6fff5ba2-f85f-4066-98cd-4bafdf4ce37b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0e110f0f-d4db-45d0-84da-9b365c8a4579","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"2d9c6625-8ce1-4754-b054-01e2733d64f0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6fff5ba2-f85f-4066-98cd-4bafdf4ce37b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"e05077e8-4594-4791-966e-ed6902993fff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"58d1e84a-5a6e-4417-b31c-b9ba45b95a11"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for restarting an application","message_list":[],"uuid":"832f4911-95b5-4b42-a35d-923e2556fdca","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"0f783889-cd65-4ee7-a3eb-6e7c8450dffc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3aeda3f2-4551-4fcb-9a31-c291e79ac537"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"f055a589-4691-47de-9676-4cd33f6f5b03"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3aeda3f2-4551-4fcb-9a31-c291e79ac537"},"edge_type":"inherent","type":"","uuid":"fb7d6f44-e9c6-4eaf-ac9c-5779be058322","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"f055a589-4691-47de-9676-4cd33f6f5b03"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3aeda3f2-4551-4fcb-9a31-c291e79ac537","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"c522631f-7f5b-41d1-9d56-76f41f829ada"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f055a589-4691-47de-9676-4cd33f6f5b03","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"c83d0f75-e25c-4ea0-b70d-4e47bbccba87","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"0f783889-cd65-4ee7-a3eb-6e7c8450dffc"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for stopping an application","message_list":[],"uuid":"f7543c57-716e-4144-a91a-c20df2e1671d","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"ce482bcf-d443-4339-9349-3567326c3d49","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"157fe1e4-764c-4bf5-85f5-e4927c20e947"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"f2a967c3-ef4c-4ff2-b814-b8de5ef77330"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"157fe1e4-764c-4bf5-85f5-e4927c20e947"},"edge_type":"inherent","type":"","uuid":"18c172a2-c94c-4975-848b-0d0149cf7f67","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"f2a967c3-ef4c-4ff2-b814-b8de5ef77330"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"157fe1e4-764c-4bf5-85f5-e4927c20e947","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f2a967c3-ef4c-4ff2-b814-b8de5ef77330","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"c1ddd91d-6867-48fd-91a9-957fbca282ed"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"24a0a80b-b3ca-4ec8-8c36-cfad25b1d08e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"ce482bcf-d443-4339-9349-3567326c3d49"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"db7bd93f-1b2f-4f9a-af00-f212e063d6ee","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"2332c899-b52b-4533-91f7-c92e3b50fbc3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"926d1675-4b49-4db5-b054-86d90f51daf8"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"799a10c4-2b91-4eb2-bf20-6bef20c03bba"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c9add3fd-8edc-419a-a8bd-61498a913a4b"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"49198213-1b79-46f7-97c2-205be572db05"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"77c0e7aa-c50a-495f-8a7c-b313f0ab18a1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"926d1675-4b49-4db5-b054-86d90f51daf8"},"edge_type":"inherent","type":"","uuid":"03a2a222-f578-4159-b349-43c839525835","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"799a10c4-2b91-4eb2-bf20-6bef20c03bba"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"799a10c4-2b91-4eb2-bf20-6bef20c03bba"},"edge_type":"inherent","type":"","uuid":"72845ddf-2dba-4215-8906-a6deb799853a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c9add3fd-8edc-419a-a8bd-61498a913a4b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"49198213-1b79-46f7-97c2-205be572db05"},"edge_type":"inherent","type":"","uuid":"337e9c31-0351-4d9b-a825-e9cf08fa1acb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"77c0e7aa-c50a-495f-8a7c-b313f0ab18a1"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c9add3fd-8edc-419a-a8bd-61498a913a4b"},"edge_type":"inherent","type":"","uuid":"f714541e-a824-4c93-9ab1-e3670af9e6ae","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"49198213-1b79-46f7-97c2-205be572db05"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"926d1675-4b49-4db5-b054-86d90f51daf8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"799a10c4-2b91-4eb2-bf20-6bef20c03bba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c9add3fd-8edc-419a-a8bd-61498a913a4b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c23e041e-062a-4fbf-b6c7-18a50768dcf4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"49198213-1b79-46f7-97c2-205be572db05","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"fbef534d-ade5-4fec-9660-80a60527e758"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"77c0e7aa-c50a-495f-8a7c-b313f0ab18a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"5cc40ad6-815a-4dc7-9d6d-f180c6e704d7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"2332c899-b52b-4533-91f7-c92e3b50fbc3"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for scaleout","message_list":[],"uuid":"716c24e0-f5ee-45a0-ada3-6947220d5921","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"160f10d5-a4a9-4d9d-977a-c14c79e0cc26","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"5bd8b794-395f-463a-ba1b-3b655a06571e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"SCALING","uuid":"5bd8b794-395f-463a-ba1b-3b655a06571e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"ca0ce2ff-dfb3-4e40-b5ee-d87e06cc1d2c","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"32058801-fa5c-43c5-8efd-c7aa8791a348","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"160f10d5-a4a9-4d9d-977a-c14c79e0cc26"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for scalein","message_list":[],"uuid":"44263f94-fe3e-461d-b976-7bd1a6ee3d4a","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"31a33211-d494-4df9-a431-98298a380f64","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"38c58d12-ebbf-4273-afbd-284635bc09c4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"SCALING","uuid":"38c58d12-ebbf-4273-afbd-284635bc09c4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"264950e9-4594-483a-8929-8523af374dab","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b0efce0a-644b-4b5c-aebc-885792a5dc3e","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"31a33211-d494-4df9-a431-98298a380f64"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"d6a4e593-8964-498d-9909-2122915845ad","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DAG","uuid":"c19558f4-3927-4deb-ae6b-61fd08214adc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7e82381b-6a55-4a07-92a2-92bfe2ba052a"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"55a13c02-a3e5-48ca-9cff-d7fc5ccb05fc"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"34806aba-d9d3-4a29-906f-adcd7a755d49"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"2eb5c5c5-1814-4e36-b78c-69b1cf49663b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7e82381b-6a55-4a07-92a2-92bfe2ba052a"},"edge_type":"inherent","type":"","uuid":"0326d721-e70b-421a-99e6-15e9c8807705","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"55a13c02-a3e5-48ca-9cff-d7fc5ccb05fc"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"34806aba-d9d3-4a29-906f-adcd7a755d49"},"edge_type":"inherent","type":"","uuid":"c33de29c-8229-4131-ac05-2985972da600","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"2eb5c5c5-1814-4e36-b78c-69b1cf49663b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"55a13c02-a3e5-48ca-9cff-d7fc5ccb05fc"},"edge_type":"inherent","type":"","uuid":"152450f1-7cff-41ec-b7bf-dff936baa33c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"34806aba-d9d3-4a29-906f-adcd7a755d49"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7e82381b-6a55-4a07-92a2-92bfe2ba052a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"55a13c02-a3e5-48ca-9cff-d7fc5ccb05fc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"34806aba-d9d3-4a29-906f-adcd7a755d49","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"360f1cc1-e45a-435b-b708-d927b1f54f3e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"2eb5c5c5-1814-4e36-b78c-69b1cf49663b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"acca4260-40d6-44a1-9fda-779affa531a3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"c19558f4-3927-4deb-ae6b-61fd08214adc"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"}],"substrate_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment_cloned_0"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"4bf875bc-f3f1-439c-a8c0-0e682821e582","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"d112d102-cf05-4da8-8ebe-ee7a1c96e466","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"66bfb90b-b85d-4504-81d7-ae10452ecb8f"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"1a65ec7b-fbc3-4374-9b3a-bc59f85073f9"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ff5eb6b5-017c-4b23-90c7-f734a7f22498"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"16061848-9058-49dd-9438-0e85c1efd178"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"263f217d-4bb5-4792-87bc-7cd78f64119c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"16061848-9058-49dd-9438-0e85c1efd178"},"edge_type":"inherent","type":"","uuid":"6bf3f314-20c6-4eb1-8ca3-7fa0b94adc53","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"263f217d-4bb5-4792-87bc-7cd78f64119c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ff5eb6b5-017c-4b23-90c7-f734a7f22498"},"edge_type":"inherent","type":"","uuid":"389ebc32-f56f-4696-916a-50d2aa6d47bd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"16061848-9058-49dd-9438-0e85c1efd178"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"66bfb90b-b85d-4504-81d7-ae10452ecb8f"},"edge_type":"inherent","type":"","uuid":"3daa6882-18f9-4c3d-9d94-42d91d33f175","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"1a65ec7b-fbc3-4374-9b3a-bc59f85073f9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"1a65ec7b-fbc3-4374-9b3a-bc59f85073f9"},"edge_type":"inherent","type":"","uuid":"acf50b11-dcd9-49c5-a7c5-ee57eaf44723","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ff5eb6b5-017c-4b23-90c7-f734a7f22498"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"66bfb90b-b85d-4504-81d7-ae10452ecb8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1a65ec7b-fbc3-4374-9b3a-bc59f85073f9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"be2ea25e-4429-4db1-86e5-6bbd7c54f8bc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ff5eb6b5-017c-4b23-90c7-f734a7f22498","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"2ba90feb-1d44-436e-9c0d-bbc04ac45e5f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"16061848-9058-49dd-9438-0e85c1efd178","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"263f217d-4bb5-4792-87bc-7cd78f64119c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"93feab26-3ade-4815-871e-39c15d973930","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"d112d102-cf05-4da8-8ebe-ee7a1c96e466"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for starting an application","message_list":[],"uuid":"404738f4-c1ee-4e66-83c1-037b29f38d7d","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"66b1a25e-9092-4458-a1fc-d616bed9a61e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7f3d0c51-ca9e-4f4d-80f4-0797fde8c71e"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"df6d53d2-32b0-44f9-aecf-00ff3dc59700"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7f3d0c51-ca9e-4f4d-80f4-0797fde8c71e"},"edge_type":"inherent","type":"","uuid":"e10baacc-832b-4c63-bebe-549809d30460","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"df6d53d2-32b0-44f9-aecf-00ff3dc59700"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7f3d0c51-ca9e-4f4d-80f4-0797fde8c71e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"2d9c6625-8ce1-4754-b054-01e2733d64f0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"df6d53d2-32b0-44f9-aecf-00ff3dc59700","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"06bf5609-8449-420f-a199-37b0562debcf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"66b1a25e-9092-4458-a1fc-d616bed9a61e"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for restarting an application","message_list":[],"uuid":"4f3893a7-102b-4860-b9f5-81dca69886be","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"0bf324f2-121b-473b-86a4-df4b1698f946","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"b898ea04-d41c-4856-9411-6263d3dbb959"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"15dbd511-ed2e-4ac6-ba69-5347b20ab91b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"b898ea04-d41c-4856-9411-6263d3dbb959"},"edge_type":"inherent","type":"","uuid":"1b44d741-6c03-4904-83e9-6e22e0d77d4f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"15dbd511-ed2e-4ac6-ba69-5347b20ab91b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b898ea04-d41c-4856-9411-6263d3dbb959","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"c522631f-7f5b-41d1-9d56-76f41f829ada"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"15dbd511-ed2e-4ac6-ba69-5347b20ab91b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"3c2c1c30-efcc-494f-bb09-231fb1b7bd59","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"0bf324f2-121b-473b-86a4-df4b1698f946"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for stopping an application","message_list":[],"uuid":"297cb724-29dd-46ba-a51d-276f63580bf0","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"471fa183-b5a6-4408-8730-3b5f746af24f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"1ad9b6c8-53cd-4c60-a940-dbb550d80ee1"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"05644fcf-e53b-4ff1-a49d-0e1c50941bd8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"1ad9b6c8-53cd-4c60-a940-dbb550d80ee1"},"edge_type":"inherent","type":"","uuid":"1d952ccb-a363-4c16-8c08-94f1b45ae819","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"05644fcf-e53b-4ff1-a49d-0e1c50941bd8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1ad9b6c8-53cd-4c60-a940-dbb550d80ee1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"05644fcf-e53b-4ff1-a49d-0e1c50941bd8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"c1ddd91d-6867-48fd-91a9-957fbca282ed"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"e817988d-12a3-4f70-a3d2-8225e63e6c4f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"471fa183-b5a6-4408-8730-3b5f746af24f"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f825f8f6-480c-4552-9c78-cc6b1036643c","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"9e440465-7760-4e8c-bfe9-829238ecaeff","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"18fce715-9411-4ff1-8405-b2106bf0c2fb"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"db5840e6-b5d3-4bc8-bf2a-e9a1489d5438"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e048a72a-0f52-48bf-bcb9-f71aa3c857e6"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"55b487c7-9fda-4798-8c71-d54de98fb9bd"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"b99f7bc0-9464-496f-b0f6-f8441e718868"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"18fce715-9411-4ff1-8405-b2106bf0c2fb"},"edge_type":"inherent","type":"","uuid":"18abfdd9-c087-4fb7-be2a-52f1cfcbba4e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"db5840e6-b5d3-4bc8-bf2a-e9a1489d5438"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"db5840e6-b5d3-4bc8-bf2a-e9a1489d5438"},"edge_type":"inherent","type":"","uuid":"3a9cf2bd-8caa-4c5b-a010-a1addd22941f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e048a72a-0f52-48bf-bcb9-f71aa3c857e6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"55b487c7-9fda-4798-8c71-d54de98fb9bd"},"edge_type":"inherent","type":"","uuid":"1ad194ff-24cd-47f7-973d-986c4c947e18","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"b99f7bc0-9464-496f-b0f6-f8441e718868"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e048a72a-0f52-48bf-bcb9-f71aa3c857e6"},"edge_type":"inherent","type":"","uuid":"24f3c1bc-552a-4f43-a578-b3af324ec067","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"55b487c7-9fda-4798-8c71-d54de98fb9bd"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"18fce715-9411-4ff1-8405-b2106bf0c2fb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"db5840e6-b5d3-4bc8-bf2a-e9a1489d5438","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e048a72a-0f52-48bf-bcb9-f71aa3c857e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c23e041e-062a-4fbf-b6c7-18a50768dcf4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"55b487c7-9fda-4798-8c71-d54de98fb9bd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"fbef534d-ade5-4fec-9660-80a60527e758"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"b99f7bc0-9464-496f-b0f6-f8441e718868","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"046524ff-9419-4d90-acf5-2d33dfbac352","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"9e440465-7760-4e8c-bfe9-829238ecaeff"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"56f3deb2-22b6-46bd-9630-3ecdf5ce5ea8","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"},"retries":"0","description":"","type":"DAG","uuid":"ee562184-d881-43fb-bbff-c1b7c2c4ff70","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ad8788d4-d8d4-4cb9-8481-f66d6148aef8"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"8326f8fc-5b3b-4257-837f-07b0683d009f"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7fd3bf82-1fdc-43e0-b21a-c44c27d04d32"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"54b31d4d-3ab6-46d0-88b8-e1b34163922b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ad8788d4-d8d4-4cb9-8481-f66d6148aef8"},"edge_type":"inherent","type":"","uuid":"8216458e-d204-4692-b3a2-da8c0a8daa8d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"8326f8fc-5b3b-4257-837f-07b0683d009f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7fd3bf82-1fdc-43e0-b21a-c44c27d04d32"},"edge_type":"inherent","type":"","uuid":"9799a15c-a4e9-462f-85d9-c62c50a367f6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"54b31d4d-3ab6-46d0-88b8-e1b34163922b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"8326f8fc-5b3b-4257-837f-07b0683d009f"},"edge_type":"inherent","type":"","uuid":"fcaede96-7546-4024-b4a2-19f42d6c69e1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7fd3bf82-1fdc-43e0-b21a-c44c27d04d32"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ad8788d4-d8d4-4cb9-8481-f66d6148aef8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"8326f8fc-5b3b-4257-837f-07b0683d009f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7fd3bf82-1fdc-43e0-b21a-c44c27d04d32","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"360f1cc1-e45a-435b-b708-d927b1f54f3e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"54b31d4d-3ab6-46d0-88b8-e1b34163922b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"883ed12d-2e3b-4d54-8fcb-bd23d4eb94f8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"ee562184-d881-43fb-bbff-c1b7c2c4ff70"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}}],"message_list":[],"uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d0181658-da70-4f06-f515-4e14eb48435d","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"5b12a41f-a4d4-09e3-d9a5-60c75f948388","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"77ef9cb8-762d-380d-f216-d66d6f8ded36","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"e368f3c9-bb1d-fcbf-6aa5-f99cd42d47f3","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"VMware"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"a3931003-0a04-4f0e-b923-91bff3bc7c6f","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"d3b342c5-f8ef-413f-a68e-b092e883274e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"8db738e9-36a4-4898-9f2e-02d2627e39ce"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"8db738e9-36a4-4898-9f2e-02d2627e39ce","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"EXEC","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f4ae3248-9427-408c-8178-a17544fccfff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"21f9c710-5deb-4cb2-ab9f-ff5bfc7a18fc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"7dc38f1f-158d-4264-8322-7340342cecc9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"d3b342c5-f8ef-413f-a68e-b092e883274e"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for creating an application","message_list":[],"uuid":"f6def0ec-6484-402a-aa99-d2461aef29c9","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"421f06be-5509-4397-9449-81d0f8894649","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"f01f68bb-17f8-4ded-ba33-fb99486ae8ed"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"6672d43f-5b20-43a9-87cf-fbc4e65070f6"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"50015528-d7ab-4e17-a053-701ad60140eb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"6672d43f-5b20-43a9-87cf-fbc4e65070f6"},"edge_type":"inherent","type":"","uuid":"4e5982cb-88e3-4325-8681-abfd85137227","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"50015528-d7ab-4e17-a053-701ad60140eb"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"f01f68bb-17f8-4ded-ba33-fb99486ae8ed"},"edge_type":"inherent","type":"","uuid":"f64d0afe-074a-4b28-94f2-cf14990b9b4a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"6672d43f-5b20-43a9-87cf-fbc4e65070f6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f01f68bb-17f8-4ded-ba33-fb99486ae8ed","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7dc38f1f-158d-4264-8322-7340342cecc9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6672d43f-5b20-43a9-87cf-fbc4e65070f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"50015528-d7ab-4e17-a053-701ad60140eb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"6913f3e5-9162-41a6-93e1-4068c40a3379","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"421f06be-5509-4397-9449-81d0f8894649"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"4dfffb0a-2ed9-4fc7-88bc-ef4c75f02c27","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"7263150d-58c2-4525-9c0b-e96157673124","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"4933c01b-47ad-4538-ba31-f0896bc5e84c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"4933c01b-47ad-4538-ba31-f0896bc5e84c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"EXEC","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f4ae3248-9427-408c-8178-a17544fccfff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"21f9c710-5deb-4cb2-ab9f-ff5bfc7a18fc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"888b179c-3416-4680-b8fc-6e1c4d3c6d9c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7263150d-58c2-4525-9c0b-e96157673124"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"d8cbe088-be64-4ea7-be43-4df164ae14a3","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"bd9c9c07-ad12-4746-a150-410db00c8b0a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ee895828-6862-4751-9e82-ae0c014cf9fe"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a253bee7-cada-4c22-9be9-b3637b70114d"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a04c2c91-8a99-40a0-8216-5acf3a816fde"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ee895828-6862-4751-9e82-ae0c014cf9fe"},"edge_type":"inherent","type":"","uuid":"93d19ddf-5177-4e55-93a5-6933f29f413c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a253bee7-cada-4c22-9be9-b3637b70114d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a253bee7-cada-4c22-9be9-b3637b70114d"},"edge_type":"inherent","type":"","uuid":"b01484b6-ea37-4fcc-b805-30d846cf3d94","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a04c2c91-8a99-40a0-8216-5acf3a816fde"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ee895828-6862-4751-9e82-ae0c014cf9fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a253bee7-cada-4c22-9be9-b3637b70114d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a04c2c91-8a99-40a0-8216-5acf3a816fde","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"888b179c-3416-4680-b8fc-6e1c4d3c6d9c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"df16d3a4-2c52-4fbc-b425-89b60829f26f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"bd9c9c07-ad12-4746-a150-410db00c8b0a"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"f2985679-a60b-4f04-a479-9ce148f61834","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"d12c55c6-8754-4cb5-9f33-28602f48e348","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9badf0e2-6b22-4bac-ba4d-a77d27f150bb"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"afeefc1e-f61f-4be5-b87f-9afad3f41f0f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9badf0e2-6b22-4bac-ba4d-a77d27f150bb"},"edge_type":"inherent","type":"","uuid":"a729e8e2-ee62-4e28-8ff6-d2880d4e3c44","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"afeefc1e-f61f-4be5-b87f-9afad3f41f0f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9badf0e2-6b22-4bac-ba4d-a77d27f150bb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"afeefc1e-f61f-4be5-b87f-9afad3f41f0f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"637b3dcf-15f0-44b2-a972-1275b4537bdb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"d12c55c6-8754-4cb5-9f33-28602f48e348"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for starting an application","message_list":[],"uuid":"79d84320-2574-412d-b42b-9ca0c0420f13","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"2b5dac7e-2eeb-46f8-8d77-f84e79c34b05","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5a7304c5-938f-42d0-85de-d619d0383e84"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5a7304c5-938f-42d0-85de-d619d0383e84","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"f5427310-2950-4297-bbb0-712c105d9a22","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"2b5dac7e-2eeb-46f8-8d77-f84e79c34b05"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ce9b9218-c7e4-46bf-8403-1cce888d289f","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"0372d313-9cff-4c1c-ae60-f9803673107e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"79f7796f-e655-4461-8383-c9229de9a6c7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"79f7796f-e655-4461-8383-c9229de9a6c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"72109e43-b789-4e1b-afe0-541fff4140ca","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"0372d313-9cff-4c1c-ae60-f9803673107e"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for stopping an application","message_list":[],"uuid":"560d62d8-d4b3-4159-b3c9-5862cd8e3e49","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"2dc78fea-3aef-4bbf-89e0-8a7dadeb701e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"d248d93b-142b-4081-89ae-3eb4bc6b0c8f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d248d93b-142b-4081-89ae-3eb4bc6b0c8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"fa14921b-6f44-4e28-b736-391fa576f89c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"2dc78fea-3aef-4bbf-89e0-8a7dadeb701e"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"}],"uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"EXEC","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f4ae3248-9427-408c-8178-a17544fccfff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","description":"","type":"DAG","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"21f9c710-5deb-4cb2-ab9f-ff5bfc7a18fc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a"},"name":"8cc4ed37_runbook"}},"variable_list":[],"name":"AHV_MSSQLPackage"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"154103b3-f0f0-4c99-afbd-78ae85ae16a8","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"ba6593ce-6726-412e-aba1-3c98a1cb7e08","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"27e7e39c-07a3-4351-9ce1-feef00cf030c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"27e7e39c-07a3-4351-9ce1-feef00cf030c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"EXEC","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"601972cb-9c57-c50b-c914-ac976957ebe4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"dfc06d5a-9089-c18e-584f-2405d004c522","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"2ba90feb-1d44-436e-9c0d-bbc04ac45e5f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ba6593ce-6726-412e-aba1-3c98a1cb7e08"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for creating an application","message_list":[],"uuid":"b2071dcb-710e-409b-b98f-29fa7993865d","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"23467830-8fad-48a0-883a-1e2fa9b28fb2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"845b9e15-d1ae-4f9e-9615-c2b585834e6d"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c1da547e-2a3c-4ad3-9bca-89e0e7134dc8"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e19e54a6-29dd-4953-8822-9457c2ca6ae0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c1da547e-2a3c-4ad3-9bca-89e0e7134dc8"},"edge_type":"inherent","type":"","uuid":"bfc959e1-2b85-4886-8159-9d84d78705c6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e19e54a6-29dd-4953-8822-9457c2ca6ae0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"845b9e15-d1ae-4f9e-9615-c2b585834e6d"},"edge_type":"inherent","type":"","uuid":"4d370579-7196-48e2-9116-7792264f3c0c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c1da547e-2a3c-4ad3-9bca-89e0e7134dc8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"845b9e15-d1ae-4f9e-9615-c2b585834e6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"2ba90feb-1d44-436e-9c0d-bbc04ac45e5f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c1da547e-2a3c-4ad3-9bca-89e0e7134dc8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e19e54a6-29dd-4953-8822-9457c2ca6ae0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"a1cb9435-31ac-45ed-8eb0-ddadcc43b0e3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"23467830-8fad-48a0-883a-1e2fa9b28fb2"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"66b1dde3-e593-41bc-90ff-b4d5bb25a461","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"5a8fd4fa-7cd7-4155-b0f9-c12ae677a065","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ce90226c-de7e-4e6b-81d1-16c9fdac921d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"ce90226c-de7e-4e6b-81d1-16c9fdac921d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"EXEC","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"601972cb-9c57-c50b-c914-ac976957ebe4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"dfc06d5a-9089-c18e-584f-2405d004c522","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"c23e041e-062a-4fbf-b6c7-18a50768dcf4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5a8fd4fa-7cd7-4155-b0f9-c12ae677a065"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"4b815934-e7f3-40ca-a2ef-0a4d54ebcca1","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"20bbe267-9fc7-4ba3-9371-81b425a61b70","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"41091e6c-b954-4085-b4df-d4b678e3b3dc"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ae1e748e-ff25-45aa-8a5e-63a58fd119cc"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"4e3ab6c0-e0ad-4818-8200-c58a7ee3e7c9"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"41091e6c-b954-4085-b4df-d4b678e3b3dc"},"edge_type":"inherent","type":"","uuid":"fb19d6ab-b432-4289-ab9a-387eb1d513b5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ae1e748e-ff25-45aa-8a5e-63a58fd119cc"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"ae1e748e-ff25-45aa-8a5e-63a58fd119cc"},"edge_type":"inherent","type":"","uuid":"95326ab1-9d15-44b6-a573-d816ae300a6e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"4e3ab6c0-e0ad-4818-8200-c58a7ee3e7c9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"41091e6c-b954-4085-b4df-d4b678e3b3dc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ae1e748e-ff25-45aa-8a5e-63a58fd119cc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4e3ab6c0-e0ad-4818-8200-c58a7ee3e7c9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"c23e041e-062a-4fbf-b6c7-18a50768dcf4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"d83fe521-ae4e-4a7b-b5e7-41eeec9dc29e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"20bbe267-9fc7-4ba3-9371-81b425a61b70"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"cd83b5a2-fa5d-4953-8569-2a65d3790662","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"72dd2fbf-205a-4675-b898-b5d8c16bcbe0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c8098320-f976-4fca-b93a-16a2c175a0df"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"2a92d8cc-06b4-4401-adb9-c7a5ba05fcad"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c8098320-f976-4fca-b93a-16a2c175a0df"},"edge_type":"inherent","type":"","uuid":"2b536763-6449-42bf-8daa-f1de368f8fed","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"2a92d8cc-06b4-4401-adb9-c7a5ba05fcad"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c8098320-f976-4fca-b93a-16a2c175a0df","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0b4da414-b758-4114-8110-1bfe5e51b35f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"2a92d8cc-06b4-4401-adb9-c7a5ba05fcad","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"d6ed8d83-e8bf-4c2b-a6c7-ec290344dad0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"72dd2fbf-205a-4675-b898-b5d8c16bcbe0"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for starting an application","message_list":[],"uuid":"8eb9dfaf-fbc5-47fa-a431-96cf0f8140db","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"b5375e85-ec08-48b6-8ae3-b48d2a55e3c0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a2ba5a00-ccfc-4f57-a104-9c484403325b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a2ba5a00-ccfc-4f57-a104-9c484403325b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"5bf9262c-fe2b-4ca7-a772-72b1fd6a0f3b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"b5375e85-ec08-48b6-8ae3-b48d2a55e3c0"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for restarting an application","message_list":[],"uuid":"157d8763-1e2b-4897-93de-5fcd8092092d","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"e4ea50f2-74b6-402c-893a-f56886fa465f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"20b73e03-edd5-4727-b395-4b1ec9a9fa4b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"20b73e03-edd5-4727-b395-4b1ec9a9fa4b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"b682d7e1-b079-4592-a499-25d0666d084f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"d5711494-89d9-4028-951e-cf9788f593be","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e4ea50f2-74b6-402c-893a-f56886fa465f"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for stopping an application","message_list":[],"uuid":"a107d2bc-b95a-4f53-af80-a1b1489633f5","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"19be8c2d-8afd-4ee8-ad62-06a408d2d109","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"03fda74d-f5d1-45bb-9dcf-4917fe76fb54"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"03fda74d-f5d1-45bb-9dcf-4917fe76fb54","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"395a4416-bae8-467e-9766-573535591868","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"19be8c2d-8afd-4ee8-ad62-06a408d2d109"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"}],"uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"EXEC","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","description":"","type":"EXEC","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"601972cb-9c57-c50b-c914-ac976957ebe4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","description":"","type":"DAG","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"dfc06d5a-9089-c18e-584f-2405d004c522","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1"},"name":"8cc4ed37_runbook_cloned_0"}},"variable_list":[],"name":"VMware_MSSQLPackage"}]},"name":"MSSQL"},"spec":{"name":"MSSQL","resources":{"service_definition_list":[{"singleton":false,"name":"MSSQL","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","name":"MSSQL"},"retries":"0","description":"","uuid":"fcd2205a-eda7-4a2b-9b74-797c949e86b7","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"030017c3_dag"}],"description":"","uuid":"58d10486-b9df-49d8-aab0-dcb65706345a","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"fcd2205a-eda7-4a2b-9b74-797c949e86b7"},"name":"5730e30f_runbook"},"type":"system","uuid":"9063f35f-e892-4a13-9558-95fe16493b26"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","name":"MSSQL"},"retries":"0","description":"","uuid":"92808c84-417d-41d3-8b17-70a7937aaa5f","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6f5f997d_dag"}],"description":"","uuid":"d62b2d9f-3dda-4272-af26-d8f5c425a824","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"92808c84-417d-41d3-8b17-70a7937aaa5f"},"name":"b01e7edf_runbook"},"type":"system","uuid":"03a925b3-0078-4696-8f95-0ee7561c0f5a"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","name":"MSSQL"},"retries":"0","description":"","uuid":"b635e741-d23b-4963-b11e-a6a3af84cef5","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"c2b90e7d_dag"}],"description":"","uuid":"6594e230-2c65-4817-95f2-de8bfd0e152d","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"b635e741-d23b-4963-b11e-a6a3af84cef5"},"name":"0263f5a9_runbook"},"type":"system","uuid":"cd6564c3-04d5-485d-aafb-6826be8ea8cc"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","name":"MSSQL"},"retries":"0","description":"","uuid":"3b334bd0-beb6-4f94-8f81-9f8ecaa00cf4","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"00b1cc9f_dag"}],"description":"","uuid":"53a1f5c6-edad-4388-beaa-751d93127c2c","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"3b334bd0-beb6-4f94-8f81-9f8ecaa00cf4"},"name":"8aadc288_runbook"},"type":"system","uuid":"52340f5f-cebf-40e7-a8fe-fe14d14412a2"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","name":"MSSQL"},"retries":"0","description":"","uuid":"6ae241b4-3d5e-40f8-9aed-eae063f23723","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","uuid":"b682d7e1-b079-4592-a499-25d0666d084f","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"6ae241b4-3d5e-40f8-9aed-eae063f23723"},"name":"a059f54d_runbook"},"type":"system","uuid":"5df9cef9-230c-4d85-a8b5-11cfcad20302"}],"description":"","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","uuid":"d065bae5-e745-47d0-8106-0e3d86885f1b","name":"EXECUTION_MODE","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""}],"depends_on_list":[]}],"substrate_definition_list":[{"name":"AHV_MSSQL2014","action_list":[],"uuid":"50039e03-837c-478b-b850-54b6ef4b898c","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"timeout_secs":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"1":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"0":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}},"3":{"disk_size_mib":true},"2":{"disk_size_mib":true},"5":{"disk_size_mib":true},"4":{"disk_size_mib":true},"7":{"disk_size_mib":true},"6":{"disk_size_mib":true},"9":{"disk_size_mib":true},"8":{"disk_size_mib":true}}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","resources":{"nic_list":[{"subnet_reference":{"uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"}}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"AppFamily":"Databases"}},"variable_list":[],"description":""},{"name":"VMware_MSSQL2014","action_list":[],"uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"timeout_secs":"300","address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true},"create_spec":{"resources":{"template_nic_list":{},"nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","type":"PROVISION_VMWARE_VM","cluster":"Sabine59-Cluster","template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","storage_pod":"QA","resources":{"nic_list":[{"nic_type":"e1000","net_name":"key-vim.host.PortGroup-VM Network"}],"num_vcpus_per_socket":1,"num_sockets":4,"memory_size_mib":4096,"guest_customization":{"customization_type":"GUEST_OS_WINDOWS"},"account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_type":"cdrom","adapter_type":"IDE","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/"}]}},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"administrator","description":"","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"b6f168ba-b749-48d9-a9cf-36077856f7b2"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"16753412-9e92-485b-994e-e6891c1e4ccd"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","uuid":"584b7b3f-ea99-45d0-8ce9-3c3064409c0a","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"eadc0738-f6e3-43b5-8ee7-291e9db3ea7f"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"49669086_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"}],"uuid":"94aac5e6-3ef3-499d-a250-29dbff483fed","min_replicas":"1","max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"50039e03-837c-478b-b850-54b6ef4b898c"},"type":"GREENFIELD","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","uuid":"17680fe8-d8fc-4890-926c-a5867c5b1555","name":"AD_IP","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"75ad188f-85cd-4ee5-b041-69bd4d80ec7f","name":"DOMAIN","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"f4d0b6dc-5372-4c45-99ad-d6f107775934","name":"INCLUDE_BPG","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"fd066c01-83b0-4b73-aa43-932ccd89026e","name":"BPG_RKTOOLS_URL","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""}],"uuid":"d8ca5db1-ef8a-44d0-b64f-29ecfa424f4e"},{"deployment_create_list":[{"name":"49669086_deployment_cloned_0","action_list":[],"package_local_reference_list":[{"kind":"app_package","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"}],"uuid":"ff1cd891-9b8f-7af1-4976-b58b38119fe1","min_replicas":"1","max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","uuid":"994ead39-f178-f72e-a8a8-5f6a40f7032e"},"type":"GREENFIELD","variable_list":[],"description":""}],"description":"","action_list":[],"name":"VMware","variable_list":[{"val_type":"STRING","uuid":"d0181658-da70-4f06-f515-4e14eb48435d","name":"AD_IP","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"5b12a41f-a4d4-09e3-d9a5-60c75f948388","name":"DOMAIN","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"77ef9cb8-762d-380d-f216-d66d6f8ded36","name":"INCLUDE_BPG","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"e368f3c9-bb1d-fcbf-6aa5-f99cd42d47f3","name":"BPG_RKTOOLS_URL","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""}],"uuid":"e5b7d183-44b4-f682-1fb6-8b8271090dfb"}],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"},"package_definition_list":[{"uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"}],"name":"AHV_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","name":"87d54973_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"f6ba9d89-25df-4e33-a6b7-597c43f3a09d"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"96bd69e7-ca1c-4d1e-8143-9829070e156c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"705a62f6-25bc-4837-abaf-83a49b312ba2"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"6887d08d-3d6d-44d8-889e-66c0a018028c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"e5f04a5e-dca0-483b-af09-b0181345562a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"d7071764-3a31-42a7-8bae-637001cbeb93"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"851655b4-5542-4490-812c-2eaf1d774e7c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"2ac9a81a-8f24-4a46-b620-89ba63dd3ca0"}],"name":"b58c360f_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"51760d64-16a2-4c06-82b6-f53fb0df9a5e"},"uuid":"f4ae3248-9427-408c-8178-a17544fccfff"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"741f15bb-777a-46fb-a9b3-2e77af3cd6db"},"retries":"0","name":"c5e51cfd_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a"}],"name":"8cc4ed37_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"3c908a4f-513a-4162-90b2-3eeb046a088a"},"uuid":"21f9c710-5deb-4cb2-ab9f-ff5bfc7a18fc"}},"variable_list":[],"description":""},{"uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f","action_list":[],"service_local_reference_list":[{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"}],"name":"VMware_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","name":"87d54973_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},{"kind":"app_task","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},{"kind":"app_task","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},{"kind":"app_task","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},{"kind":"app_task","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},{"kind":"app_task","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},{"kind":"app_task","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},{"kind":"app_task","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"}},{"from_task_reference":{"kind":"app_task","uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"}},{"from_task_reference":{"kind":"app_task","uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"}},{"from_task_reference":{"kind":"app_task","uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"}},{"from_task_reference":{"kind":"app_task","uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"}},{"from_task_reference":{"kind":"app_task","uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"}},{"from_task_reference":{"kind":"app_task","uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8"},{"target_any_local_reference":{"kind":"app_package","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"29fa4aae-bae8-2d7c-36fe-8688f7d64c04"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"549fa1a9-dccf-5745-5979-100bfa1e7f6c"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b7130262-d52a-42cc-1449-72cae148a4f6"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"2cc41e03-66b3-4a6b-bc3e-f15a311a2ad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"a1df6718-0596-7316-44a7-30ac3f79b204"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"a9acc8d5-34e7-1b2f-0b93-9bfbb9d216e2"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"74cefef2-ce62-4b2e-cb47-4880984a422c"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"fb1c1f30-64d0-ec56-6f21-9aaa7d8e83c8"},{"target_any_local_reference":{"kind":"app_service","uuid":"3b1e43cc-34ae-40cc-871c-83c9b128b825"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"d96a6a5f-e526-44c0-884e-8ba5601ed4b2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"40b32a4d-c832-70b0-8fca-f7012aec2de5"}],"name":"b58c360f_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","uuid":"37adfda5-1c32-d165-3df4-8aaa6bea8ff8"},"uuid":"601972cb-9c57-c50b-c914-ac976957ebe4"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","uuid":"37e277ed-62e3-f6c3-5127-2fdcfa44ec5f"},"retries":"0","name":"c5e51cfd_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1"}],"name":"8cc4ed37_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","uuid":"faaffeb1-bbd3-cdad-8c4e-9788c72096e1"},"uuid":"dfc06d5a-9089-c18e-584f-2405d004c522"}},"variable_list":[],"description":""}],"client_attrs":{"94aac5e6-3ef3-499d-a250-29dbff483fed":{"y":-135.4844039225,"x":279.2478090454},"ff1cd891-9b8f-7af1-4976-b58b38119fe1":{"y":-135.4844039225,"x":279.2478090454}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1557916135283586","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"f158fd16-6e22-460b-be81-0443efc8a459","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":4,"creation_time":"1549430537205381","name":"MSSQL"}}