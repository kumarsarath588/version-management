{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"69b6440d-5955-4a73-b62b-d0c48abad28c","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"06522ebc-796d-43a1-bf2e-cf1735533c2d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"030017c3_dag"}],"description":"","message_list":[],"uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"06522ebc-796d-43a1-bf2e-cf1735533c2d"},"name":"5730e30f_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f8ea9018-3c05-468f-bfef-17a372a4dd00","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"101ee92c-24ec-485d-849e-cbbe936c05de","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f5f997d_dag"}],"description":"","message_list":[],"uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"101ee92c-24ec-485d-849e-cbbe936c05de"},"name":"b01e7edf_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"6553269f-dc66-4652-a4e9-f37d19af9091","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"74eeb29a-4d88-4e83-b6d3-e0fd2d98b898","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c2b90e7d_dag"}],"description":"","message_list":[],"uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"74eeb29a-4d88-4e83-b6d3-e0fd2d98b898"},"name":"0263f5a9_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"90867768-45bd-4f7b-9d5d-0c7ff3a8c008","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"d6a3d13a-7324-4812-a98f-8bd616b8bd79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"00b1cc9f_dag"}],"description":"","message_list":[],"uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"d6a3d13a-7324-4812-a98f-8bd616b8bd79"},"name":"8aadc288_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"bf6557b3-9100-4557-ad80-47cb527bfb89","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"c99da499-8a0e-4d87-a8da-d84b62b34aaa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","message_list":[],"uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"c99da499-8a0e-4d87-a8da-d84b62b34aaa"},"name":"a059f54d_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"7a1832f6-b7df-4bbb-826c-dfc286534d80","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"DAG","uuid":"65832295-6bc3-487e-ae1f-4dd108f63166","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a973b087-df59-4daa-b2ea-ff303e73fb45"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"a973b087-df59-4daa-b2ea-ff303e73fb45","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"65832295-6bc3-487e-ae1f-4dd108f63166"},"name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}}],"message_list":[],"uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"5375d2ca-c4bd-4ae3-a122-fc2065099dfd","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"EXECUTION_MODE"}],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"09563e93-0edb-49e3-890b-275c0535712c","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"3464049f-fe76-4361-ac36-23ebab43d0f3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"70d50453-14a6-4911-bc84-3ea612daf6da"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"84693bb2-6cbc-4b78-8f5c-3e9bb2667ada"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"70d50453-14a6-4911-bc84-3ea612daf6da"},"edge_type":"inherent","type":"","uuid":"7c7afe22-7f10-4e55-8ab0-05bc3b0ab7e5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"84693bb2-6cbc-4b78-8f5c-3e9bb2667ada"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"70d50453-14a6-4911-bc84-3ea612daf6da","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"test","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"@@{infoblox_ip.uuid}@@"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"84693bb2-6cbc-4b78-8f5c-3e9bb2667ada","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"eff2986e-73de-42d1-af5a-a95786d956ee","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"3464049f-fe76-4361-ac36-23ebab43d0f3"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for powering on an application","message_list":[],"uuid":"f49e9e47-a427-4c98-910e-8d739de7bc32","name":"action_poweron","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"17687857-a451-4a9d-8540-307df09314d1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"c05737f7-8998-4945-a575-c0e511d826e0"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"af23c808-285d-4666-b45e-1050fe5e774b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"c05737f7-8998-4945-a575-c0e511d826e0"},"edge_type":"inherent","type":"","uuid":"8622fb33-47e0-4eaa-b77f-180f31c88261","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"af23c808-285d-4666-b45e-1050fe5e774b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"c05737f7-8998-4945-a575-c0e511d826e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"af23c808-285d-4666-b45e-1050fe5e774b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"5a0b9a0a-3dc9-46a7-ab21-d2e8b2840111","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"17687857-a451-4a9d-8540-307df09314d1"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for restarting an application","message_list":[],"uuid":"58d4789f-7a5a-4121-91d2-3331737fe60d","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"6a39a4b3-ea3c-4a7c-b833-37f6ce864794","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"8757847b-67a5-4af7-b8a7-6fc2e42570d3"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"3672a2a1-789f-42c8-86da-ae01890f7a20"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"8757847b-67a5-4af7-b8a7-6fc2e42570d3"},"edge_type":"inherent","type":"","uuid":"3f10e222-3163-4953-a100-586684b8abed","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"3672a2a1-789f-42c8-86da-ae01890f7a20"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"8757847b-67a5-4af7-b8a7-6fc2e42570d3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"3672a2a1-789f-42c8-86da-ae01890f7a20","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"4688177f-5828-445e-a282-876bcd97cd01","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"6a39a4b3-ea3c-4a7c-b833-37f6ce864794"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for suspending an application","message_list":[],"uuid":"6d1b4c3f-a64d-4d72-b310-d6b088e9cfcd","name":"action_suspend","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"222f30cc-f889-418a-b02b-f0eb5564f511","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"e91a825f-31f3-43b0-884c-52879c179434","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"222f30cc-f889-418a-b02b-f0eb5564f511"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for modifying an application","message_list":[],"uuid":"6dd1a8bc-4252-421b-b30f-bd22949193af","name":"action_modify","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"09cc9879-4c73-43e7-87e3-ccb4b37f29b8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"28e15e61-867c-4a02-a7e1-f9b9ce16748f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"09cc9879-4c73-43e7-87e3-ccb4b37f29b8"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for powering off an application","message_list":[],"uuid":"4d0b25d6-1ab4-4014-994a-70933ecbb5e5","name":"action_poweroff","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"e22ba9f1-a793-4a42-82b2-6df5aaf57934","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"9c7353e2-e0fe-4b43-aa0d-e1a2880390bf"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"9c7353e2-e0fe-4b43-aa0d-e1a2880390bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"bf51f9eb-bd97-4f78-baa8-0ae81c093d50","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"e22ba9f1-a793-4a42-82b2-6df5aaf57934"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"5aef8466-2491-4486-954e-5d50a229dd67","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"5bc920af-abcd-48c8-9dab-8e72ac814a24","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"6976d915-ae8d-4590-a569-a0cc8828e0fe"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"6976d915-ae8d-4590-a569-a0cc8828e0fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"08d30cfb-a90e-4a85-a01b-244e749abbcb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5bc920af-abcd-48c8-9dab-8e72ac814a24"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"8396f13d-2158-4c4f-b020-6fc6dff0e155","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"1946c395-c1b5-4850-93a7-7cbe469f69d9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"397dfe95-0606-4814-8fdf-8ed2a6805dfa"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"397dfe95-0606-4814-8fdf-8ed2a6805dfa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_b61f7a03_cada_4202_82be_fa387c71e362"}],"description":"","message_list":[],"uuid":"1ccfc7fa-189e-4042-8af8-6dffcf740049","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"1946c395-c1b5-4850-93a7-7cbe469f69d9"},"name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}},{"description":"","message_list":[],"uuid":"f887378c-67a4-9d7e-eaed-be5f3ba448ca","name":"pre_action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"099fba04-e606-3ece-ad6b-36ca96994018","child_tasks_local_reference_list":[{"kind":"app_task","name":"Reserve IP Address","uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0"},{"kind":"app_task","name":"Set IP Variable","uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Reserve IP Address","uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0"},"edge_type":"user_defined","type":"","uuid":"180db7c3-0a57-d829-77fb-a1090a5a7762","to_task_reference":{"kind":"app_task","name":"Set IP Variable","uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3619a2eb_dag"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"HTTP","uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"expected_response_params":[{"status":"SUCCESS","code":200,"type":""},{"status":"FAILURE","code":404,"type":""},{"status":"SUCCESS","code":201,"type":""}],"request_body":"{\n  \"ipv4addr\": \"func:nextavailableip:@@{NETWORK}@@\",\n  \"name\": \"@@{calm_application_name}@@\",\n  \"match_client\": \"RESERVED\"\n}","retry_count":1,"url":"https:\/\/10.46.7.56\/wapi\/v2.7\/fixedaddress","response_paths":{"ipref":"$"},"retry_interval":1,"headers":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d35a6efa-ebae-b2c0-d3c9-d8c337c2c8bf","value":"application\\json","label":"","state":"NOT_VALIDATED","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"Accept"}],"authentication":{"auth_type":"basic","basic_auth":{"username":"admin","password":{"attrs":{"is_secret_modified":false,"secret_reference":{}}}}},"tls_verify":false,"content_type":"application\/json","connection_timeout":120,"type":"","method":"POST"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Reserve IP Address"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"HTTP","uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"expected_response_params":[{"status":"SUCCESS","code":200,"type":""}],"request_body":"","retry_count":1,"url":"https:\/\/10.46.7.56\/wapi\/v1.2\/@@{ipref}@@","response_paths":{"infoblox_ip":"$.ipv4addr"},"retry_interval":1,"headers":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b6f6a07d-bfe5-93ca-ca1e-8a9145939111","value":"application\/json","label":"","state":"NOT_VALIDATED","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"Accept"}],"authentication":{"auth_type":"basic","basic_auth":{"username":"admin","password":{"attrs":{"is_secret_modified":false,"secret_reference":{}}}}},"tls_verify":false,"content_type":"application\/json","connection_timeout":120,"type":"","method":"GET"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Set IP Variable"}],"description":"","message_list":[],"uuid":"7c0b8266-14a1-7abc-22a1-4e43fa0dd665","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3619a2eb_dag","uuid":"099fba04-e606-3ece-ad6b-36ca96994018"},"name":"a7a8cd24_runbook"}},{"description":"","message_list":[],"uuid":"fe23b082-efe9-0548-0973-0a897aa994dd","name":"post_action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"DAG","uuid":"32a48253-9840-e633-af8d-259e00b83d55","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"91df092a_dag"}],"description":"","message_list":[],"uuid":"d28fe84a-a432-5533-d4cd-f9928c94393c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"91df092a_dag","uuid":"32a48253-9840-e633-af8d-259e00b83d55"},"name":"952fc660_runbook"}}],"message_list":[],"uuid":"b61f7a03-cada-4202-82be-fa387c71e362","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":true}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"test","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"@@{infoblox_ip.uuid}@@"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"variable_list":[],"name":"AHV_MSSQL2014"},{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"1c561187-24d4-4dbd-a544-2bdae2ddca87","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"4c0d1d86-4f55-4c49-875e-c3986dc1d2df","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"9ba3483b-77c8-4f80-9c99-f5bb2e29f1b4"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"eade3e3e-a10b-4a84-a4e6-9bf4e18e1dd9"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"9ba3483b-77c8-4f80-9c99-f5bb2e29f1b4"},"edge_type":"inherent","type":"","uuid":"c56eccb6-6523-481b-b12e-a240967175c7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"eade3e3e-a10b-4a84-a4e6-9bf4e18e1dd9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"PROVISION_VCENTER","uuid":"9ba3483b-77c8-4f80-9c99-f5bb2e29f1b4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"QA","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[{"nic_type":"e1000","type":"","net_name":"key-vim.host.PortGroup-VM Network"}],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":-1,"disk_mode":"persistent","adapter_type":"IDE","iso_path":"","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/","disk_type":"cdrom","type":""}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Provision_3a8c4355_941a_4b99_8ef5_6b14ca182849"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"eade3e3e-a10b-4a84-a4e6-9bf4e18e1dd9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"6c1540b8-d672-4628-aa0a-e676c7332e3d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"4c0d1d86-4f55-4c49-875e-c3986dc1d2df"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for powering on an application","message_list":[],"uuid":"b77d177a-d04f-41ef-bc88-7d9f12fce4b9","name":"action_poweron","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"e73982aa-bc4f-47e9-a677-c284f2e499f8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"700afe7b-00f0-49f8-b2f9-5296b76e7ba7"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"5d3fbdb1-3266-4565-a107-5f694d1f5a18"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"700afe7b-00f0-49f8-b2f9-5296b76e7ba7"},"edge_type":"inherent","type":"","uuid":"37af832b-80ee-47fb-b061-0ef0a2950d3c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"5d3fbdb1-3266-4565-a107-5f694d1f5a18"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"700afe7b-00f0-49f8-b2f9-5296b76e7ba7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_PowerOn_3a8c4355_941a_4b99_8ef5_6b14ca182849"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"5d3fbdb1-3266-4565-a107-5f694d1f5a18","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"d1aeaeb9-8bda-42d5-8250-97927424dd42","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e73982aa-bc4f-47e9-a677-c284f2e499f8"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for restarting an application","message_list":[],"uuid":"4c6ee191-ddd0-48d5-a468-563066c92a8e","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"33f1e4b4-4f78-4feb-88f5-71f8b463d197","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"f602ea93-5279-4d93-8cd8-8f9cbb57c027"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"eb085fd5-3f73-4b20-978f-952b2b5dfdf7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"f602ea93-5279-4d93-8cd8-8f9cbb57c027"},"edge_type":"inherent","type":"","uuid":"c6a7c69f-21b8-4401-a2de-6ecc33f58161","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"eb085fd5-3f73-4b20-978f-952b2b5dfdf7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"f602ea93-5279-4d93-8cd8-8f9cbb57c027","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Restart3a8c4355_941a_4b99_8ef5_6b14ca182849"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"eb085fd5-3f73-4b20-978f-952b2b5dfdf7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"300","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"3dffc906-d090-4bd7-a6cd-51ed80862410","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"33f1e4b4-4f78-4feb-88f5-71f8b463d197"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for suspending an application","message_list":[],"uuid":"edffab8e-bf3d-46b4-b322-79aed35f35c9","name":"action_suspend","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"10eb0e29-7b4a-4c20-abc2-ec2a06e35659","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"7c88c03e-260c-4416-9065-9ce90b370c9b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"10eb0e29-7b4a-4c20-abc2-ec2a06e35659"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for modifying an application","message_list":[],"uuid":"2dae1bc7-3f23-487b-ab78-ace4fae15199","name":"action_modify","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"80c5aee3-315a-49c3-8bda-d1a1cc21a949","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"6e8b1dd9-fb11-4113-aee4-ee7da4b7230b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"80c5aee3-315a-49c3-8bda-d1a1cc21a949"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for powering off an application","message_list":[],"uuid":"ffe37791-e815-4707-a78c-64a10487ed9b","name":"action_poweroff","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"b36fd59e-e819-4bf1-9956-6047477a95c1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Poweroff_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"67d8a84c-e7a5-4684-9609-9f9c76b87fe5"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"67d8a84c-e7a5-4684-9609-9f9c76b87fe5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Poweroff_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"86547aec-0cc8-4c81-856a-1b60d582a7c4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"b36fd59e-e819-4bf1-9956-6047477a95c1"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"cd3665ea-51f1-424a-bc69-42b40ba1cba3","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"9738170a-f024-43c6-b8c6-2a53d963a50e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Delete_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"09b2159f-092c-49fc-8b60-3c93006d3656"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DELETE_VCENTER","uuid":"09b2159f-092c-49fc-8b60-3c93006d3656","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Delete_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"2d2ebd8a-93bf-4db6-8c83-4c901f1022ab","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"9738170a-f024-43c6-b8c6-2a53d963a50e"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"cd32b86f-8316-42fd-a8c3-03431487f66b","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"DAG","uuid":"bdd4626a-2111-46a7-9303-1a12c8ef86cf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_3a8c4355_941a_4b99_8ef5_6b14ca182849","uuid":"5f99f203-61a2-49d4-a0a6-3d30aae4188d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"5f99f203-61a2-49d4-a0a6-3d30aae4188d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_3a8c4355_941a_4b99_8ef5_6b14ca182849"}],"description":"","message_list":[],"uuid":"183c1868-e2a8-4767-aa04-0981ebd43d03","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"bdd4626a-2111-46a7-9303-1a12c8ef86cf"},"name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}}],"message_list":[],"uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"resources":{"template_nic_list":{},"nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"QA","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[{"nic_type":"e1000","type":"","net_name":"key-vim.host.PortGroup-VM Network"}],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":-1,"disk_mode":"persistent","adapter_type":"IDE","iso_path":"","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/","disk_type":"cdrom","type":""}]}},"variable_list":[],"name":"VMware_MSSQL2014"}],"credential_definition_list":[{"username":"administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"a89814c1-26af-4782-b38c-51e7bab75155","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","state":"ACTIVE","message_list":[],"uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"2684689f-ff74-4318-956c-63f0c8cd39bb","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"0af30f25-3aeb-4bf9-b135-289f29590464","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"2435220b-22d9-4152-9463-c1867e545795","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"9225c9ea-a644-416b-a014-6c124e2e1f62"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"1b783b63-6004-4c08-b1a5-6be4d41a6312"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"0762d3e7-b76f-4709-8ad7-9102813dd899"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"651f58bc-dfc9-436b-a44d-26a634246197"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"871e1952-b076-4cef-81d7-b9faeddafc48"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"304aa404-e933-4463-b055-8d89c098d2f1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"871e1952-b076-4cef-81d7-b9faeddafc48"},"edge_type":"inherent","type":"","uuid":"ac49f073-c5f1-43c6-a13c-f8801a3d2c32","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"304aa404-e933-4463-b055-8d89c098d2f1"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"651f58bc-dfc9-436b-a44d-26a634246197"},"edge_type":"inherent","type":"","uuid":"5a964a17-c5d6-4594-b8fd-4d522fdce5ff","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"871e1952-b076-4cef-81d7-b9faeddafc48"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"1b783b63-6004-4c08-b1a5-6be4d41a6312"},"edge_type":"inherent","type":"","uuid":"89770fad-2978-4c3a-952c-2bbfe8f8b2a1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"0762d3e7-b76f-4709-8ad7-9102813dd899"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"9225c9ea-a644-416b-a014-6c124e2e1f62"},"edge_type":"inherent","type":"","uuid":"ad470789-312a-4483-b4a9-4f4be7a41a77","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"1b783b63-6004-4c08-b1a5-6be4d41a6312"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"0762d3e7-b76f-4709-8ad7-9102813dd899"},"edge_type":"inherent","type":"","uuid":"680e4197-9b75-4955-bc6a-7d9c4ef65cb3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"651f58bc-dfc9-436b-a44d-26a634246197"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"9225c9ea-a644-416b-a014-6c124e2e1f62","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1b783b63-6004-4c08-b1a5-6be4d41a6312","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a7a8cd24_runbook","uuid":"7c0b8266-14a1-7abc-22a1-4e43fa0dd665"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0762d3e7-b76f-4709-8ad7-9102813dd899","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"eff2986e-73de-42d1-af5a-a95786d956ee"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"651f58bc-dfc9-436b-a44d-26a634246197","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"fd8721c8-1933-44cf-b633-ea06ba18a9cb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"871e1952-b076-4cef-81d7-b9faeddafc48","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"304aa404-e933-4463-b055-8d89c098d2f1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"1be5bcfa-ff9d-47ba-a8d1-6af3ed2a53fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"2435220b-22d9-4152-9463-c1867e545795"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for starting an application","message_list":[],"uuid":"da7d9b83-5c35-4314-8c24-e6c5278973e2","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"4d09509d-4c42-4817-8b62-4f16108bbf27","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f7dae3eb-0858-4e68-9e3b-d86023e3bfe1"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"24ac18bb-7d33-4ea3-983c-0f59560ac6f0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f7dae3eb-0858-4e68-9e3b-d86023e3bfe1"},"edge_type":"inherent","type":"","uuid":"01f9a13b-16f4-4d46-8146-ba20908dddc1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"24ac18bb-7d33-4ea3-983c-0f59560ac6f0"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f7dae3eb-0858-4e68-9e3b-d86023e3bfe1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5a0b9a0a-3dc9-46a7-ab21-d2e8b2840111"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"24ac18bb-7d33-4ea3-983c-0f59560ac6f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"ab107040-845f-45a6-8d57-4d4296566389","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"4d09509d-4c42-4817-8b62-4f16108bbf27"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ff234bf8-fb82-4807-bc5b-0558f89664d2","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"4aa33819-1d5a-40b7-9aa6-21af9ee9fa35","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"56d1bda3-257d-43fd-82cb-de6628967189"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b1e03cb4-5aff-44e3-af84-2089df1b0525"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"56d1bda3-257d-43fd-82cb-de6628967189"},"edge_type":"inherent","type":"","uuid":"c923edd7-2bc9-4f0e-98b3-7a0678b534e8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b1e03cb4-5aff-44e3-af84-2089df1b0525"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"56d1bda3-257d-43fd-82cb-de6628967189","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"4688177f-5828-445e-a282-876bcd97cd01"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b1e03cb4-5aff-44e3-af84-2089df1b0525","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"852b0e6c-05cf-4577-b34d-be44bbedba43","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"4aa33819-1d5a-40b7-9aa6-21af9ee9fa35"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for stopping an application","message_list":[],"uuid":"ad402e2b-34e6-4c12-bf71-6db51fbcf9c5","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"e41c91ce-1493-4063-b848-baaebb333660","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"50586230-3dc9-48d8-9ccb-a9f08fa0c64f"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f5cb217a-1559-4449-8fd3-d55c30c45e3f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"50586230-3dc9-48d8-9ccb-a9f08fa0c64f"},"edge_type":"inherent","type":"","uuid":"f48bdd0b-2933-46d1-861d-6112e7931e1b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"f5cb217a-1559-4449-8fd3-d55c30c45e3f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"50586230-3dc9-48d8-9ccb-a9f08fa0c64f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f5cb217a-1559-4449-8fd3-d55c30c45e3f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"bf51f9eb-bd97-4f78-baa8-0ae81c093d50"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"6b8c7a93-1426-4d13-8ac5-53b6d28a6747","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"e41c91ce-1493-4063-b848-baaebb333660"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"8b6f1326-63c9-4787-aa90-213d0fae6980","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"c932766a-afcd-4ad3-ab5b-03209611f862","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"1025938f-0185-457c-8bb8-a8caf9f808f3"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"78589ef6-392b-49ce-85ca-7f68906a46d4"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"850115e0-61da-465b-86ac-a28cd8771c1d"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"17e6da5f-6be2-4ad0-ac60-0c572fe7d475"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"3b4e20cd-8be0-435e-8f78-f3d11d1d8950"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"c5e2e427-ea97-44c0-bf2f-f463517bbab4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"1025938f-0185-457c-8bb8-a8caf9f808f3"},"edge_type":"inherent","type":"","uuid":"23200941-8dc1-49ef-bb9a-d16a70d163bd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"78589ef6-392b-49ce-85ca-7f68906a46d4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"78589ef6-392b-49ce-85ca-7f68906a46d4"},"edge_type":"inherent","type":"","uuid":"c4f8b126-cf15-41e2-99cb-02e8d86cf027","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"850115e0-61da-465b-86ac-a28cd8771c1d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"17e6da5f-6be2-4ad0-ac60-0c572fe7d475"},"edge_type":"inherent","type":"","uuid":"3a45b5dc-c370-47e8-81d6-09a799b2b73c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"3b4e20cd-8be0-435e-8f78-f3d11d1d8950"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"3b4e20cd-8be0-435e-8f78-f3d11d1d8950"},"edge_type":"inherent","type":"","uuid":"9a75b880-4ebd-4180-a8d7-326bade365c4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"c5e2e427-ea97-44c0-bf2f-f463517bbab4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"850115e0-61da-465b-86ac-a28cd8771c1d"},"edge_type":"inherent","type":"","uuid":"010a389e-2f8d-421c-a00b-778388a16a58","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"17e6da5f-6be2-4ad0-ac60-0c572fe7d475"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1025938f-0185-457c-8bb8-a8caf9f808f3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"78589ef6-392b-49ce-85ca-7f68906a46d4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"850115e0-61da-465b-86ac-a28cd8771c1d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"ad599526-fe74-4984-966f-3e9728b0957a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"17e6da5f-6be2-4ad0-ac60-0c572fe7d475","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"08d30cfb-a90e-4a85-a01b-244e749abbcb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3b4e20cd-8be0-435e-8f78-f3d11d1d8950","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"952fc660_runbook","uuid":"d28fe84a-a432-5533-d4cd-f9928c94393c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"c5e2e427-ea97-44c0-bf2f-f463517bbab4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"30ca39f2-8705-4699-b3ea-e2ddaf003d51","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"c932766a-afcd-4ad3-ab5b-03209611f862"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for scaleout","message_list":[],"uuid":"87495d83-f4a1-4c4e-8927-4be60d942fc9","name":"action_scaleout","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"3f6b94c7-4083-4fda-90df-4535697d6758","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"99ff05f3-dc89-4d91-b6da-e9700ede853b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"SCALING","uuid":"99ff05f3-dc89-4d91-b6da-e9700ede853b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"f24d0d30-a6cb-4df3-ab89-4218380ecd52","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"8844dc8b-99fc-4d0a-bf55-00d1846a2a1c","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"3f6b94c7-4083-4fda-90df-4535697d6758"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for scalein","message_list":[],"uuid":"faa5f21c-7f54-458d-8028-22af95dd4189","name":"action_scalein","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"337e7b92-07b5-4a67-8c04-583c24f1b2cf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"027f85a2-726d-4765-84f9-7e26369129ea"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"SCALING","uuid":"027f85a2-726d-4765-84f9-7e26369129ea","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"769b8713-d8f1-4f04-86ef-76d5fb2a4297","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"0e970aba-06a0-4de3-ba9f-26773a4dfb41","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"337e7b92-07b5-4a67-8c04-583c24f1b2cf"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"f428e97c-d56f-41a8-9c1e-5329658f1a39","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DAG","uuid":"72d07f28-dcf5-47ed-94eb-50560b4599e3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"21e8f693-e803-43c4-9d0a-f1d75860ca4e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"5b1fc42e-14d1-4045-b31b-97f009fc3791"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b9ce3b89-bfbc-4c1f-82d2-4f5fbf8255d0"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"e179d762-7157-4ca6-ba5e-d5b49d79bd95"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"21e8f693-e803-43c4-9d0a-f1d75860ca4e"},"edge_type":"inherent","type":"","uuid":"9aeb37a1-be58-4405-9d97-70e32cbbec94","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"5b1fc42e-14d1-4045-b31b-97f009fc3791"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b9ce3b89-bfbc-4c1f-82d2-4f5fbf8255d0"},"edge_type":"inherent","type":"","uuid":"d26de53e-c8c0-4284-906f-2523619029cc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"e179d762-7157-4ca6-ba5e-d5b49d79bd95"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"5b1fc42e-14d1-4045-b31b-97f009fc3791"},"edge_type":"inherent","type":"","uuid":"907a9c27-c348-4712-a13a-52bc3ff47ea1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"b9ce3b89-bfbc-4c1f-82d2-4f5fbf8255d0"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"21e8f693-e803-43c4-9d0a-f1d75860ca4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"5b1fc42e-14d1-4045-b31b-97f009fc3791","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b9ce3b89-bfbc-4c1f-82d2-4f5fbf8255d0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"1ccfc7fa-189e-4042-8af8-6dffcf740049"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"e179d762-7157-4ca6-ba5e-d5b49d79bd95","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"749a5a59-9d35-46b3-a3af-3065db06a39b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"72d07f28-dcf5-47ed-94eb-50560b4599e3"},"name":"SYS_GEN__Runbook_Deployment_94aac5e6_3ef3_499d_a250_29dbff483fed"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45","min_replicas":"5","state":"ACTIVE","max_replicas":"10","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"}],"substrate_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"adb26fc1-b9d5-416f-8437-82213c550d0a","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"a669663f-c44a-4826-8abb-bfa4dcacdee3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"c31a8ed0-da30-458f-a58f-da17d65429a5"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"957feede-1702-4fcb-a9d5-5e1f591298db"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"23a9b279-56f6-4302-ace1-6a24e05c9f46"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"47420502-b83e-4d33-8dd7-df801076c076"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a1771879-3b54-4ca7-a07d-467102b8b9e4"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"127545ae-aaa9-4e4d-8049-a9e5b3a9554c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a1771879-3b54-4ca7-a07d-467102b8b9e4"},"edge_type":"inherent","type":"","uuid":"6b2eb70d-cc8c-4fad-bed2-5e42f01a60e4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"127545ae-aaa9-4e4d-8049-a9e5b3a9554c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"47420502-b83e-4d33-8dd7-df801076c076"},"edge_type":"inherent","type":"","uuid":"c0d7f59c-e868-4923-a7ac-c26babec7603","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a1771879-3b54-4ca7-a07d-467102b8b9e4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"957feede-1702-4fcb-a9d5-5e1f591298db"},"edge_type":"inherent","type":"","uuid":"fdb273b6-aa47-4ff5-a85e-ad49e9b02f94","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"23a9b279-56f6-4302-ace1-6a24e05c9f46"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"c31a8ed0-da30-458f-a58f-da17d65429a5"},"edge_type":"inherent","type":"","uuid":"9081018a-197c-4d30-b4c1-12b871e1eead","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"957feede-1702-4fcb-a9d5-5e1f591298db"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"23a9b279-56f6-4302-ace1-6a24e05c9f46"},"edge_type":"inherent","type":"","uuid":"f2c4615a-f66d-4247-8478-6f2f501e160c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"47420502-b83e-4d33-8dd7-df801076c076"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"c31a8ed0-da30-458f-a58f-da17d65429a5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_94aac5e6_3ef3_499d_a250_29dbff483fed"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"957feede-1702-4fcb-a9d5-5e1f591298db","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a7a8cd24_runbook","uuid":"7c0b8266-14a1-7abc-22a1-4e43fa0dd665"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"23a9b279-56f6-4302-ace1-6a24e05c9f46","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"eff2986e-73de-42d1-af5a-a95786d956ee"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"47420502-b83e-4d33-8dd7-df801076c076","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"fd8721c8-1933-44cf-b633-ea06ba18a9cb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a1771879-3b54-4ca7-a07d-467102b8b9e4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"127545ae-aaa9-4e4d-8049-a9e5b3a9554c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"d72aef7e-aa6c-4bbd-afdb-c2d76e0cba6f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"a669663f-c44a-4826-8abb-bfa4dcacdee3"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for starting an application","message_list":[],"uuid":"fc1d5381-7357-4ab0-a33b-486deb158eb4","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"47476658-355e-4a33-ad2d-c3955a29ce39","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5ed0dd97-a397-495e-a9dd-be84316119a9"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9dca601c-cb24-40ce-8c23-81fb7a6d84a1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5ed0dd97-a397-495e-a9dd-be84316119a9"},"edge_type":"inherent","type":"","uuid":"9d936f68-8835-4fbe-991f-66204af8d6cd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9dca601c-cb24-40ce-8c23-81fb7a6d84a1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5ed0dd97-a397-495e-a9dd-be84316119a9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"5a0b9a0a-3dc9-46a7-ab21-d2e8b2840111"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9dca601c-cb24-40ce-8c23-81fb7a6d84a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"8e0075b7-f4dd-4ea4-a1a9-38bf52243c12","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"47476658-355e-4a33-ad2d-c3955a29ce39"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for restarting an application","message_list":[],"uuid":"8565087b-410f-4135-80e9-408f92fb7dfe","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"b899ea0c-1d36-45fd-b146-fe94d636e403","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"1a9b6a35-43eb-4cd0-b696-73bd29949f02"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"2baa67c4-b8a0-4c88-b40c-a606bd7dd8e4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"1a9b6a35-43eb-4cd0-b696-73bd29949f02"},"edge_type":"inherent","type":"","uuid":"04c0bc4b-cc2c-4ed6-8d92-52911c84aeb9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"2baa67c4-b8a0-4c88-b40c-a606bd7dd8e4"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1a9b6a35-43eb-4cd0-b696-73bd29949f02","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"4688177f-5828-445e-a282-876bcd97cd01"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2baa67c4-b8a0-4c88-b40c-a606bd7dd8e4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"fec79b0b-9178-4b37-9174-24adbe1b7ed9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"b899ea0c-1d36-45fd-b146-fe94d636e403"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for stopping an application","message_list":[],"uuid":"bcbb2a23-f1aa-426e-82d1-52d4ca74d217","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"9eefd476-d9c2-4ead-adc6-9330bb57643a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"283538f3-d679-4093-8d0b-d0c2aae332fa"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"e1dcaad6-8e9a-4671-b187-88cb9dbead4e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"283538f3-d679-4093-8d0b-d0c2aae332fa"},"edge_type":"inherent","type":"","uuid":"027da6b1-b4e2-415b-a2f0-ca6a3043b9b2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"e1dcaad6-8e9a-4671-b187-88cb9dbead4e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"283538f3-d679-4093-8d0b-d0c2aae332fa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e1dcaad6-8e9a-4671-b187-88cb9dbead4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"bf51f9eb-bd97-4f78-baa8-0ae81c093d50"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"}],"description":"","message_list":[],"uuid":"79630a6d-900b-40dd-8866-283886a8c8fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"9eefd476-d9c2-4ead-adc6-9330bb57643a"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"1c3e879e-9f58-411c-87fe-6cc7fe016ce9","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"e0be559b-1051-45af-a56e-7afe49210122","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"99a4f830-004c-4c92-aaf2-043a9eaea749"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"acbef0db-930a-4912-a288-c8491dac18c0"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a9277e9e-efb8-48f1-a6e8-c99cfb5e70ca"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"ccf4120b-8246-495f-995f-f7b3f963c29f"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"c9955dca-dc83-4acf-8177-b530b290ec26"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"e8b82c2a-10ef-48c3-936a-d27b9c1e3b64"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"99a4f830-004c-4c92-aaf2-043a9eaea749"},"edge_type":"inherent","type":"","uuid":"3d71af79-a19a-4626-b709-5ec585add2af","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"acbef0db-930a-4912-a288-c8491dac18c0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"acbef0db-930a-4912-a288-c8491dac18c0"},"edge_type":"inherent","type":"","uuid":"878593cb-cdae-4e9b-aa30-4c8dec9011d2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a9277e9e-efb8-48f1-a6e8-c99cfb5e70ca"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"ccf4120b-8246-495f-995f-f7b3f963c29f"},"edge_type":"inherent","type":"","uuid":"ad10533f-7ae1-4695-98bd-5bcbff63b46e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"c9955dca-dc83-4acf-8177-b530b290ec26"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"c9955dca-dc83-4acf-8177-b530b290ec26"},"edge_type":"inherent","type":"","uuid":"ded16dbb-cef5-4cf3-aa1e-ecd8bd42b834","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"e8b82c2a-10ef-48c3-936a-d27b9c1e3b64"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a9277e9e-efb8-48f1-a6e8-c99cfb5e70ca"},"edge_type":"inherent","type":"","uuid":"d18fd69c-bd83-4ccb-aa53-b05094b69383","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362","uuid":"ccf4120b-8246-495f-995f-f7b3f963c29f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"99a4f830-004c-4c92-aaf2-043a9eaea749","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"acbef0db-930a-4912-a288-c8491dac18c0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a9277e9e-efb8-48f1-a6e8-c99cfb5e70ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"ad599526-fe74-4984-966f-3e9728b0957a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ccf4120b-8246-495f-995f-f7b3f963c29f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"08d30cfb-a90e-4a85-a01b-244e749abbcb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c9955dca-dc83-4acf-8177-b530b290ec26","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"952fc660_runbook","uuid":"d28fe84a-a432-5533-d4cd-f9928c94393c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_b61f7a03_cada_4202_82be_fa387c71e362"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"e8b82c2a-10ef-48c3-936a-d27b9c1e3b64","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"053758bd-888d-413c-97e1-d36f0d50c9bd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"e0be559b-1051-45af-a56e-7afe49210122"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"9f2afd9c-2e2e-4179-8461-5b776c57b9e0","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},"retries":"0","description":"","type":"DAG","uuid":"8b2e09fd-e213-4298-ad84-8728a4199e91","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5d1cd7a0-a452-4dfd-a11f-39acbd14168b"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7bdda827-90ae-4e3a-8b36-374c2b4d0e40"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c072e590-3483-4e17-ba46-b556fae34b27"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"66a82e8b-af15-4ea7-a7ab-cbbccad9d822"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5d1cd7a0-a452-4dfd-a11f-39acbd14168b"},"edge_type":"inherent","type":"","uuid":"c3f8b37a-75e6-4ab8-b68f-c28640acc2d3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7bdda827-90ae-4e3a-8b36-374c2b4d0e40"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c072e590-3483-4e17-ba46-b556fae34b27"},"edge_type":"inherent","type":"","uuid":"5091cfdb-0cc9-48da-a15e-b975918b81b1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed","uuid":"66a82e8b-af15-4ea7-a7ab-cbbccad9d822"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"7bdda827-90ae-4e3a-8b36-374c2b4d0e40"},"edge_type":"inherent","type":"","uuid":"522daf07-0b18-4b63-b7fb-8b127902938d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"c072e590-3483-4e17-ba46-b556fae34b27"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5d1cd7a0-a452-4dfd-a11f-39acbd14168b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"7bdda827-90ae-4e3a-8b36-374c2b4d0e40","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c072e590-3483-4e17-ba46-b556fae34b27","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_50039e03_837c_478b_b850_54b6ef4b898c","uuid":"1ccfc7fa-189e-4042-8af8-6dffcf740049"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_50039e03_837c_478b_b850_54b6ef4b898c"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"66a82e8b-af15-4ea7-a7ab-cbbccad9d822","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_94aac5e6_3ef3_499d_a250_29dbff483fed"}],"description":"","message_list":[],"uuid":"be6cf11b-9569-4dd5-989b-6e58233e4a41","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e","uuid":"8b2e09fd-e213-4298-ad84-8728a4199e91"},"name":"SYS_GEN__Runbook_Application_d8ca5db1_ef8a_44d0_b64f_29ecfa424f4e"}}],"message_list":[],"uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"8917f318-8304-4dd0-a81e-fe0dcb919821","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"ee39fc37-5dda-49c7-b401-1b987261ff00","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"9cbbf909-f75e-4a7b-8d15-8491091d8cfc","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"a20a73de-63e5-441e-8efb-a3c8de183595","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f481cb28-0f67-f864-1b22-99d58c4153c1","value":"10.46.6.0\/24","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":[]},"name":"NETWORK"}],"name":"Nutanix"},{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"5d1d4822-eea3-4696-9ab5-443055090744","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"387a2121-df3d-4e62-973d-216739b80f8f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"71ad4c48-10a5-4217-8ee8-f22e5916bccf"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7f94f2b0-11ef-412a-8b62-1d3fa8f7d5b1"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ec90d489-8229-4b9a-aeb3-1bdab6b2c9fc"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"63003d37-e949-4cbd-9176-395d0f2e5f38"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a1ec928a-869c-4130-bbf1-0dfad22e4742"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"63003d37-e949-4cbd-9176-395d0f2e5f38"},"edge_type":"inherent","type":"","uuid":"69313471-d318-4965-8254-64e10f2584e1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a1ec928a-869c-4130-bbf1-0dfad22e4742"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ec90d489-8229-4b9a-aeb3-1bdab6b2c9fc"},"edge_type":"inherent","type":"","uuid":"71d3c9f0-6147-4342-bbcc-c42989237ab9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"63003d37-e949-4cbd-9176-395d0f2e5f38"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"71ad4c48-10a5-4217-8ee8-f22e5916bccf"},"edge_type":"inherent","type":"","uuid":"94db0e9a-c7b9-4963-b63c-1bd5382a7583","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7f94f2b0-11ef-412a-8b62-1d3fa8f7d5b1"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7f94f2b0-11ef-412a-8b62-1d3fa8f7d5b1"},"edge_type":"inherent","type":"","uuid":"5895999f-55fe-4ead-8dc0-ee09b172a68b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"ec90d489-8229-4b9a-aeb3-1bdab6b2c9fc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"71ad4c48-10a5-4217-8ee8-f22e5916bccf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7f94f2b0-11ef-412a-8b62-1d3fa8f7d5b1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"6c1540b8-d672-4628-aa0a-e676c7332e3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ec90d489-8229-4b9a-aeb3-1bdab6b2c9fc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5270126e-853e-40be-b807-45bfef9fc45e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"63003d37-e949-4cbd-9176-395d0f2e5f38","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a1ec928a-869c-4130-bbf1-0dfad22e4742","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"8539032c-4a81-4731-bf83-93373e219f3d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"387a2121-df3d-4e62-973d-216739b80f8f"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for starting an application","message_list":[],"uuid":"84dc739f-f41a-4c94-ab1b-791c7b0426f4","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"f9a4bc95-277b-4aba-ae5e-ecfeaa2ad72e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e48107cd-c744-4635-8caa-0b04cc668161"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9494425c-3438-4598-ab82-d8f1135d6fbe"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e48107cd-c744-4635-8caa-0b04cc668161"},"edge_type":"inherent","type":"","uuid":"dc4a7e04-4dec-4394-9ea0-8be94b07778c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9494425c-3438-4598-ab82-d8f1135d6fbe"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e48107cd-c744-4635-8caa-0b04cc668161","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"d1aeaeb9-8bda-42d5-8250-97927424dd42"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9494425c-3438-4598-ab82-d8f1135d6fbe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"3c29d13f-91bf-4024-8992-222a842c0b66","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"f9a4bc95-277b-4aba-ae5e-ecfeaa2ad72e"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for restarting an application","message_list":[],"uuid":"460b7a52-b671-48d2-a5d6-929562194ef7","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"6ce4f9ae-4b05-4aab-a783-86b88ad2c04d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"412d79fa-53cc-41e9-9b8f-1817de1374c1"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5f6a7541-5e6b-4f91-be64-f6ab552713d6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"412d79fa-53cc-41e9-9b8f-1817de1374c1"},"edge_type":"inherent","type":"","uuid":"dcf4268b-2813-4037-b20f-023379665ad8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5f6a7541-5e6b-4f91-be64-f6ab552713d6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"412d79fa-53cc-41e9-9b8f-1817de1374c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3dffc906-d090-4bd7-a6cd-51ed80862410"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5f6a7541-5e6b-4f91-be64-f6ab552713d6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"f0139919-7179-4b6a-a7fe-2fbca1641515","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"6ce4f9ae-4b05-4aab-a783-86b88ad2c04d"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for stopping an application","message_list":[],"uuid":"fb93bab5-72d0-48af-9bbb-8bdbaa1aeae9","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"c1099598-a7a2-4341-bae7-4f77efea6354","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b760e302-5f12-432e-9c2d-29be9a561d0c"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7d75298c-beee-40ff-98da-79fbbe28c1bc"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"b760e302-5f12-432e-9c2d-29be9a561d0c"},"edge_type":"inherent","type":"","uuid":"9dfdcb16-d230-4c8c-92ce-9f9419f4c8a5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7d75298c-beee-40ff-98da-79fbbe28c1bc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b760e302-5f12-432e-9c2d-29be9a561d0c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7d75298c-beee-40ff-98da-79fbbe28c1bc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"86547aec-0cc8-4c81-856a-1b60d582a7c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"393776c4-ab54-46ec-aec3-a7be1c7d0b5b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"c1099598-a7a2-4341-bae7-4f77efea6354"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"bf811d7a-6539-4cb7-a2a9-8557d9ae56b3","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"72a26492-9ba4-4153-bc4d-4a69c08dee95","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7742c467-58b5-4a88-b75c-afd915497cb3"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7e5d95e1-9a37-4df7-8e42-ec23934546b4"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"52d7c35c-f820-4ee4-a8e0-5bdd48dca7fe"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3cbbf9cb-b9f2-4f08-9079-4073fbed71a7"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"111ebad3-e3fe-45f5-8369-b597c670f517"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7742c467-58b5-4a88-b75c-afd915497cb3"},"edge_type":"inherent","type":"","uuid":"15d5a810-62c7-4fef-9ea2-4dd915dba690","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7e5d95e1-9a37-4df7-8e42-ec23934546b4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7e5d95e1-9a37-4df7-8e42-ec23934546b4"},"edge_type":"inherent","type":"","uuid":"d3072e57-b51b-430b-a677-281c3c48fe24","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"52d7c35c-f820-4ee4-a8e0-5bdd48dca7fe"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3cbbf9cb-b9f2-4f08-9079-4073fbed71a7"},"edge_type":"inherent","type":"","uuid":"e6a77793-085d-439b-bdff-7ee82b22bd49","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"111ebad3-e3fe-45f5-8369-b597c670f517"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"52d7c35c-f820-4ee4-a8e0-5bdd48dca7fe"},"edge_type":"inherent","type":"","uuid":"88de1ee1-8f29-4c04-a98e-fd85dc46be8b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3cbbf9cb-b9f2-4f08-9079-4073fbed71a7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7742c467-58b5-4a88-b75c-afd915497cb3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7e5d95e1-9a37-4df7-8e42-ec23934546b4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"52d7c35c-f820-4ee4-a8e0-5bdd48dca7fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e4b40e7e-a18e-4ce5-b92d-01939390f847"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3cbbf9cb-b9f2-4f08-9079-4073fbed71a7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"2d2ebd8a-93bf-4db6-8c83-4c901f1022ab"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"111ebad3-e3fe-45f5-8369-b597c670f517","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"20b3fb30-d33d-4fa3-8254-976324bc4f3b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"72a26492-9ba4-4153-bc4d-4a69c08dee95"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for scaleout","message_list":[],"uuid":"75fde03c-2c9f-4014-a7bf-27166a7198cc","name":"action_scaleout","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"48cc45e6-1a9b-4e01-8722-4044fc1ca21e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"b23cc0b5-f680-4abd-9104-03a5e2c5b4f7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"SCALING","uuid":"b23cc0b5-f680-4abd-9104-03a5e2c5b4f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"e071046f-96c9-48ed-b485-d01e9b74c33d","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"02d893e3-25c0-4ee1-a3c4-16553d1182e1","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"48cc45e6-1a9b-4e01-8722-4044fc1ca21e"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for scalein","message_list":[],"uuid":"b60d6fb7-642a-49ff-8e64-3acc63dbdb87","name":"action_scalein","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"9723729d-9702-4a5b-b639-45d236e379fb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"62eb20d6-0e7f-4869-88d3-97a86d508a9f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"SCALING","uuid":"62eb20d6-0e7f-4869-88d3-97a86d508a9f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"8f0eca80-b1a1-4ea9-92c0-6f2ad9a292fd","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"83174051-fa43-4d7e-b5e4-02e62aedd949","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"9723729d-9702-4a5b-b639-45d236e379fb"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"b0cbe2de-c834-4bdb-85d5-fd07dfede61b","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DAG","uuid":"b89a99b3-dfa6-400f-9e7e-275453af326c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"287defea-a298-430e-930e-c4090cf247fe"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5af4c39c-59dd-42b6-9b0f-5fb76a1b36a2"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"9ac52b97-a458-4b19-bfb2-d6f520eeeffd"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"8bf2b263-1d3e-4b67-810f-35b9e012b056"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"287defea-a298-430e-930e-c4090cf247fe"},"edge_type":"inherent","type":"","uuid":"9c654283-9590-4674-b5e1-292af966a024","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5af4c39c-59dd-42b6-9b0f-5fb76a1b36a2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"9ac52b97-a458-4b19-bfb2-d6f520eeeffd"},"edge_type":"inherent","type":"","uuid":"2699e986-bd43-4e52-adc4-17307003eaa3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"8bf2b263-1d3e-4b67-810f-35b9e012b056"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5af4c39c-59dd-42b6-9b0f-5fb76a1b36a2"},"edge_type":"inherent","type":"","uuid":"cbef5770-5f96-400a-ac95-8faa1e52a877","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"9ac52b97-a458-4b19-bfb2-d6f520eeeffd"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"287defea-a298-430e-930e-c4090cf247fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"5af4c39c-59dd-42b6-9b0f-5fb76a1b36a2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9ac52b97-a458-4b19-bfb2-d6f520eeeffd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"183c1868-e2a8-4767-aa04-0981ebd43d03"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"8bf2b263-1d3e-4b67-810f-35b9e012b056","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"542f7caa-d0d9-4edb-90f9-901269ad035e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"b89a99b3-dfa6-400f-9e7e-275453af326c"},"name":"SYS_GEN__Runbook_Deployment_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"}],"substrate_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment_cloned_0"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"5ff632dd-2dea-4316-9b13-114f0c7aa708","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"2fc60b29-ca8d-44bc-b28b-b8e807376cfb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"c2a392ff-61c8-4cbd-9447-9c35c9250c0e"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7a28162c-e63d-4f11-8979-484a54c4dd39"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5d22e65d-a903-4718-a2be-12b13749ae79"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0791af50-a072-4fba-8f26-eb425b3a73b6"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"17b50670-bd1d-4481-8190-ff259af712c2"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0791af50-a072-4fba-8f26-eb425b3a73b6"},"edge_type":"inherent","type":"","uuid":"370c3a73-0717-4294-b986-5480e742cf1c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"17b50670-bd1d-4481-8190-ff259af712c2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5d22e65d-a903-4718-a2be-12b13749ae79"},"edge_type":"inherent","type":"","uuid":"1f1f7978-b6cb-4172-9e8c-a742a6a1e765","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"0791af50-a072-4fba-8f26-eb425b3a73b6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"c2a392ff-61c8-4cbd-9447-9c35c9250c0e"},"edge_type":"inherent","type":"","uuid":"a8acee81-4a04-445c-b7ad-fda4e119bbce","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7a28162c-e63d-4f11-8979-484a54c4dd39"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"7a28162c-e63d-4f11-8979-484a54c4dd39"},"edge_type":"inherent","type":"","uuid":"6d1249ef-d963-40e4-9abd-f31b033e1c83","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5d22e65d-a903-4718-a2be-12b13749ae79"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"c2a392ff-61c8-4cbd-9447-9c35c9250c0e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_ff1cd891_9b8f_7af1_4976_b58b38119fe1"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7a28162c-e63d-4f11-8979-484a54c4dd39","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"6c1540b8-d672-4628-aa0a-e676c7332e3d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5d22e65d-a903-4718-a2be-12b13749ae79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5270126e-853e-40be-b807-45bfef9fc45e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0791af50-a072-4fba-8f26-eb425b3a73b6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"17b50670-bd1d-4481-8190-ff259af712c2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"801e5770-4ba0-4233-af7c-54007a09429f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"2fc60b29-ca8d-44bc-b28b-b8e807376cfb"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for starting an application","message_list":[],"uuid":"51ff91ac-6911-403d-a1bc-5146d8e6b4c7","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"78a69e78-0635-4aee-a5b7-646a2df0ce29","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"360be805-3606-44fa-a7d9-c4f20b905b79"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"01e5829e-5659-4746-94b3-1aef91d871c4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"360be805-3606-44fa-a7d9-c4f20b905b79"},"edge_type":"inherent","type":"","uuid":"76cfcd62-7f5b-4e01-8c0c-99bcdcdde250","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"01e5829e-5659-4746-94b3-1aef91d871c4"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"360be805-3606-44fa-a7d9-c4f20b905b79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"d1aeaeb9-8bda-42d5-8250-97927424dd42"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"01e5829e-5659-4746-94b3-1aef91d871c4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"7f078876-0c8a-43b4-b5dd-2057e9e90c62","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"78a69e78-0635-4aee-a5b7-646a2df0ce29"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for restarting an application","message_list":[],"uuid":"7c00b092-c066-4480-a5ea-1d974ec87f5b","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"9004c165-6826-4a43-a0ea-b0b4982790ab","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"617e350b-7a5c-4a75-a6c7-26304cbf9350"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"17d06af2-7f64-4a02-9590-943d15258234"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"617e350b-7a5c-4a75-a6c7-26304cbf9350"},"edge_type":"inherent","type":"","uuid":"dd59f501-cde3-4fe3-bb34-ec12b42829a3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"17d06af2-7f64-4a02-9590-943d15258234"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"617e350b-7a5c-4a75-a6c7-26304cbf9350","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"3dffc906-d090-4bd7-a6cd-51ed80862410"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"17d06af2-7f64-4a02-9590-943d15258234","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"65d06a04-07a9-43ab-a02f-3003689d31c9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"9004c165-6826-4a43-a0ea-b0b4982790ab"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for stopping an application","message_list":[],"uuid":"73f0defc-2ee5-4a4a-808f-4676ab0eaaa3","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"bff2f28d-4f5f-44f1-8529-0ca0f238f242","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"67b1e6bd-af1d-46c8-803a-e6fd64614408"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"4cb7acb2-a1d7-4887-a859-f02343b7af1f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"67b1e6bd-af1d-46c8-803a-e6fd64614408"},"edge_type":"inherent","type":"","uuid":"0f2de5f3-152a-4762-88a3-c5ef3d98577b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"4cb7acb2-a1d7-4887-a859-f02343b7af1f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"67b1e6bd-af1d-46c8-803a-e6fd64614408","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4cb7acb2-a1d7-4887-a859-f02343b7af1f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"86547aec-0cc8-4c81-856a-1b60d582a7c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"}],"description":"","message_list":[],"uuid":"71a46d40-7fd0-4aa3-86ad-0a7fe500b8c4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"bff2f28d-4f5f-44f1-8529-0ca0f238f242"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"315c25d5-34c1-4386-a751-8dee9248cfd4","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"769d5369-8502-4b96-b814-8b23386a94a3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"fbd6488b-83f6-4741-a585-ca05f9727ba3"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"59db9113-d3f1-44a7-8d20-1b6140995efa"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"eba260a6-7973-49fb-bb17-6adf09be33d2"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e3d746a3-1a25-4cdc-a720-ceffdc927f9a"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"590e1d88-7903-44a0-a7c8-f38727f643ea"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"fbd6488b-83f6-4741-a585-ca05f9727ba3"},"edge_type":"inherent","type":"","uuid":"5ab5cb8f-8f23-4893-8c2d-0e5a712c1521","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"59db9113-d3f1-44a7-8d20-1b6140995efa"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"59db9113-d3f1-44a7-8d20-1b6140995efa"},"edge_type":"inherent","type":"","uuid":"a2b8e4a0-d184-4650-a8b3-4e9951964a73","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"eba260a6-7973-49fb-bb17-6adf09be33d2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e3d746a3-1a25-4cdc-a720-ceffdc927f9a"},"edge_type":"inherent","type":"","uuid":"02cadf3d-e74a-4c22-b82c-0e9264ce8f4d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"590e1d88-7903-44a0-a7c8-f38727f643ea"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"eba260a6-7973-49fb-bb17-6adf09be33d2"},"edge_type":"inherent","type":"","uuid":"5d95a67f-6d50-43db-81ae-3b98dabd79cd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"e3d746a3-1a25-4cdc-a720-ceffdc927f9a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fbd6488b-83f6-4741-a585-ca05f9727ba3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"59db9113-d3f1-44a7-8d20-1b6140995efa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"eba260a6-7973-49fb-bb17-6adf09be33d2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e4b40e7e-a18e-4ce5-b92d-01939390f847"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e3d746a3-1a25-4cdc-a720-ceffdc927f9a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"2d2ebd8a-93bf-4db6-8c83-4c901f1022ab"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"590e1d88-7903-44a0-a7c8-f38727f643ea","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"87ad6e13-a9cd-48f2-8da1-f1ce47f233c7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"769d5369-8502-4b96-b814-8b23386a94a3"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"0aa0bdd9-2964-492f-b707-eee27c0e9a2a","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"},"retries":"0","description":"","type":"DAG","uuid":"851fa0a7-632d-4cd2-a320-fa6f1b0f1966","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"04e8af32-06aa-48c9-9710-4213b6543a28"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"70fd1b67-cbcd-48dc-977e-a9d0b22818f6"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"686a8e67-48ed-4e43-b82a-3f7ec8ec5c44"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"9bee3bb2-763b-44f2-82e1-0e1a23595fcd"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"04e8af32-06aa-48c9-9710-4213b6543a28"},"edge_type":"inherent","type":"","uuid":"30979d98-2cd4-4244-bd82-5658ef5ea9b5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"70fd1b67-cbcd-48dc-977e-a9d0b22818f6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"686a8e67-48ed-4e43-b82a-3f7ec8ec5c44"},"edge_type":"inherent","type":"","uuid":"b8f3aedd-eb82-49ff-a566-036ebcaa63c6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1","uuid":"9bee3bb2-763b-44f2-82e1-0e1a23595fcd"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"70fd1b67-cbcd-48dc-977e-a9d0b22818f6"},"edge_type":"inherent","type":"","uuid":"dd3bf640-901c-41ac-ab34-c3b94f22838c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"686a8e67-48ed-4e43-b82a-3f7ec8ec5c44"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"04e8af32-06aa-48c9-9710-4213b6543a28","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"70fd1b67-cbcd-48dc-977e-a9d0b22818f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"686a8e67-48ed-4e43-b82a-3f7ec8ec5c44","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e","uuid":"183c1868-e2a8-4767-aa04-0981ebd43d03"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_994ead39_f178_f72e_a8a8_5f6a40f7032e"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"9bee3bb2-763b-44f2-82e1-0e1a23595fcd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_ff1cd891_9b8f_7af1_4976_b58b38119fe1"}],"description":"","message_list":[],"uuid":"8749dc1f-6e6f-47cc-9f52-dab33adcc369","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb","uuid":"851fa0a7-632d-4cd2-a320-fa6f1b0f1966"},"name":"SYS_GEN__Runbook_Application_e5b7d183_44b4_f682_1fb6_8b8271090dfb"}}],"message_list":[],"uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b103830b-9f73-45f7-831b-5235eb8a9474","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"495c5e9a-b083-4100-b7c7-5712034128fc","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"1d861501-c341-4858-bd88-0f32433499d3","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"bab6085d-a945-47f0-9699-255a682e0f09","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"VMware"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"4165c81d-7999-46c4-8d31-825a37fff152","name":"action_install","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"b0ac59f4-b9ea-4be5-88b5-9ef6e6f88083","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_aeb955eb_e670_42d5_a08d_d01bfe608d9a","uuid":"fcb53bc7-c185-43b6-b382-29aa517f132b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"fcb53bc7-c185-43b6-b382-29aa517f132b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"EXEC","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"171ec080-7051-4670-8839-90b52156c1c5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3831b157-475b-48dd-b769-e598deec68c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"d962d157-96b8-4f06-829d-287d3b20e912","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"e2cbd562-fef2-43bc-9d14-8124287024c6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"ae8eec00-c8f8-4626-8513-21d7f5332105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_aeb955eb_e670_42d5_a08d_d01bfe608d9a"}],"description":"","message_list":[],"uuid":"fd8721c8-1933-44cf-b633-ea06ba18a9cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"b0ac59f4-b9ea-4be5-88b5-9ef6e6f88083"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for creating an application","message_list":[],"uuid":"8af75e13-a358-4792-afde-5f0dc7556034","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"32b8036e-7848-49a3-9230-aa174a4e3211","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"e74ebb8a-fb65-41a7-8067-ac7eec9a7703"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"469baba5-1250-4255-b2b9-8d0a10c5ef1d"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"3105c32d-c084-4f17-88bb-980517e50637"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"469baba5-1250-4255-b2b9-8d0a10c5ef1d"},"edge_type":"inherent","type":"","uuid":"7a5c8a62-0979-463d-aafe-5cc4b1681359","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"3105c32d-c084-4f17-88bb-980517e50637"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"e74ebb8a-fb65-41a7-8067-ac7eec9a7703"},"edge_type":"inherent","type":"","uuid":"ca3ca29d-fb11-44c2-ba11-dc5a59de9c44","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"469baba5-1250-4255-b2b9-8d0a10c5ef1d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e74ebb8a-fb65-41a7-8067-ac7eec9a7703","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"fd8721c8-1933-44cf-b633-ea06ba18a9cb"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"469baba5-1250-4255-b2b9-8d0a10c5ef1d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3105c32d-c084-4f17-88bb-980517e50637","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"c3eea62b-bbbe-4307-94cd-a903808c58af","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"32b8036e-7848-49a3-9230-aa174a4e3211"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"df9f9082-e11a-4ce7-b471-3dd5130fa0a4","name":"action_uninstall","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"05221b88-b7ad-42e3-bcb2-73ebe3c122be","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_aeb955eb_e670_42d5_a08d_d01bfe608d9a","uuid":"f392db76-6be8-4ee1-8930-dac30d2365b8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"f392db76-6be8-4ee1-8930-dac30d2365b8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"EXEC","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"171ec080-7051-4670-8839-90b52156c1c5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3831b157-475b-48dd-b769-e598deec68c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"d962d157-96b8-4f06-829d-287d3b20e912","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"e2cbd562-fef2-43bc-9d14-8124287024c6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"ae8eec00-c8f8-4626-8513-21d7f5332105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_aeb955eb_e670_42d5_a08d_d01bfe608d9a"}],"description":"","message_list":[],"uuid":"ad599526-fe74-4984-966f-3e9728b0957a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"05221b88-b7ad-42e3-bcb2-73ebe3c122be"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"362f5381-9db8-426d-8792-a23945eb002f","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"364c27ae-9bc7-4b25-ac52-68b22103bf8f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a3b1bfd2-75ef-4e13-98ea-036cb1fa2633"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7ddc7b1d-3618-40f7-a65e-add37753093d"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"bdacc7c3-0134-4832-be4f-f05b941b6d66"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a3b1bfd2-75ef-4e13-98ea-036cb1fa2633"},"edge_type":"inherent","type":"","uuid":"a075036f-be9c-481c-944d-7ccdca4399af","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7ddc7b1d-3618-40f7-a65e-add37753093d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"7ddc7b1d-3618-40f7-a65e-add37753093d"},"edge_type":"inherent","type":"","uuid":"89a82e78-5765-4d60-8df3-0705a198409c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"bdacc7c3-0134-4832-be4f-f05b941b6d66"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a3b1bfd2-75ef-4e13-98ea-036cb1fa2633","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7ddc7b1d-3618-40f7-a65e-add37753093d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bdacc7c3-0134-4832-be4f-f05b941b6d66","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"ad599526-fe74-4984-966f-3e9728b0957a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"9dcb98ec-96ad-492d-b416-b8a654e686dc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"364c27ae-9bc7-4b25-ac52-68b22103bf8f"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"d18abff7-e28d-444e-b0a4-d3b0f07c1fd2","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"a787e277-88d2-4eb7-9532-9a967f6f0fb2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a48ec4a8-e767-4b06-b6e2-419764793aac"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"ba5d3e31-2970-48a0-b623-2640062e482f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"a48ec4a8-e767-4b06-b6e2-419764793aac"},"edge_type":"inherent","type":"","uuid":"8caff00a-680c-4c3f-9852-fa87507b47e5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"ba5d3e31-2970-48a0-b623-2640062e482f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a48ec4a8-e767-4b06-b6e2-419764793aac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"ba5d3e31-2970-48a0-b623-2640062e482f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}],"description":"","message_list":[],"uuid":"a6fba666-b9bc-4527-ad0c-93ddacecf235","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"a787e277-88d2-4eb7-9532-9a967f6f0fb2"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for starting an application","message_list":[],"uuid":"4ffecdca-8454-4b84-88f8-c3a52dde8f0e","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"d76faa06-1241-47cb-8e1f-7a4ff8e02452","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8f32fcd-5c27-4a11-8c13-18b0fe43b219"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e8f32fcd-5c27-4a11-8c13-18b0fe43b219","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"db3c4c1a-3d6b-4c04-82a1-936a9453080c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"d76faa06-1241-47cb-8e1f-7a4ff8e02452"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for restarting an application","message_list":[],"uuid":"7b1a818e-9474-432e-a607-217b05f1cfa9","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"31342228-49f2-466a-8b07-2bfb2e61f5b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"54c6c71a-a552-42f4-9109-97197ab25aae"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"54c6c71a-a552-42f4-9109-97197ab25aae","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"ffeca995-c7c0-4965-9bfa-e91be38766c9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"31342228-49f2-466a-8b07-2bfb2e61f5b0"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}},{"description":"System action for stopping an application","message_list":[],"uuid":"cdd12a30-fcff-4c78-95c4-8a0d3033cdec","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"239d2c51-07cc-4d45-8d1a-3553725c2df9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"24d20b19-1f36-4c3a-a64d-d98dbdb2cbf3"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"24d20b19-1f36-4c3a-a64d-d98dbdb2cbf3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"f11db5c6-358d-498c-92ad-70fa45477fe0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db","uuid":"239d2c51-07cc-4d45-8d1a-3553725c2df9"},"name":"SYS_GEN__Runbook_Package_741f15bb_777a_46fb_a9b3_2e77af3cd6db"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"}],"uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"EXEC","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"171ec080-7051-4670-8839-90b52156c1c5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3831b157-475b-48dd-b769-e598deec68c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"d962d157-96b8-4f06-829d-287d3b20e912","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"e2cbd562-fef2-43bc-9d14-8124287024c6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","description":"","type":"DAG","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"ae8eec00-c8f8-4626-8513-21d7f5332105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35"},"name":"8cc4ed37_runbook"}},"variable_list":[],"name":"AHV_MSSQLPackage"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"fb7c54b8-ed27-48df-a96b-d467d40a4461","name":"action_install","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"e3eb1e63-2b3d-4a90-9c51-32344565780e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_f7a2f7c0_381e_4fa8_9724_f016ddf2a3bf","uuid":"3a4d4dba-9d67-4545-833f-1ec5c5480975"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"3a4d4dba-9d67-4545-833f-1ec5c5480975","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"EXEC","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"acba9509-9e74-433b-b795-c06d3a444742","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"29d65039-cdcf-4bab-ba69-8c9c2ba1759f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"31234904-04bf-4cf5-846a-0ebaa4fc5e2c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_f7a2f7c0_381e_4fa8_9724_f016ddf2a3bf"}],"description":"","message_list":[],"uuid":"5270126e-853e-40be-b807-45bfef9fc45e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e3eb1e63-2b3d-4a90-9c51-32344565780e"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for creating an application","message_list":[],"uuid":"809577dc-0709-4ffb-bd89-321450c308a2","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"9fca7680-c30c-49de-83b3-ff1fae0dc68c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"aa08cbd4-f613-43e7-8092-71b4e1cebc07"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9003e560-cdfd-424c-a1cc-da9a789367b3"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"8c4b1441-0694-4511-bc86-da2e66dc94cf"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9003e560-cdfd-424c-a1cc-da9a789367b3"},"edge_type":"inherent","type":"","uuid":"324629ed-6311-4831-9660-e77a2437181b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"8c4b1441-0694-4511-bc86-da2e66dc94cf"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"aa08cbd4-f613-43e7-8092-71b4e1cebc07"},"edge_type":"inherent","type":"","uuid":"24084493-e3da-484c-845a-2689c995f5d4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"9003e560-cdfd-424c-a1cc-da9a789367b3"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"aa08cbd4-f613-43e7-8092-71b4e1cebc07","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"5270126e-853e-40be-b807-45bfef9fc45e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9003e560-cdfd-424c-a1cc-da9a789367b3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8c4b1441-0694-4511-bc86-da2e66dc94cf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"6edb043c-f008-4cf4-99ec-e53e698eaea6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"9fca7680-c30c-49de-83b3-ff1fae0dc68c"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"92fde016-7861-4d61-b92b-df4beea2c114","name":"action_uninstall","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"7763b148-6ee0-4b61-8ee1-c9d1cf11c4ae","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_f7a2f7c0_381e_4fa8_9724_f016ddf2a3bf","uuid":"b6f64542-8245-4d1f-8b49-58279d074adb"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"b6f64542-8245-4d1f-8b49-58279d074adb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"EXEC","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"acba9509-9e74-433b-b795-c06d3a444742","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"29d65039-cdcf-4bab-ba69-8c9c2ba1759f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"31234904-04bf-4cf5-846a-0ebaa4fc5e2c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_f7a2f7c0_381e_4fa8_9724_f016ddf2a3bf"}],"description":"","message_list":[],"uuid":"e4b40e7e-a18e-4ce5-b92d-01939390f847","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"7763b148-6ee0-4b61-8ee1-c9d1cf11c4ae"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"46aeaf29-5647-4ece-ac00-afba4895ac82","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"7c3a25fa-b730-444b-a11b-f34687c6d89b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c8b97357-810a-43cf-a38a-c39a6b63fd95"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4c303c83-f048-4fb5-b4b3-9a975a08022e"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"72192260-987e-4c4e-a1ba-50c1eb8b2624"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"c8b97357-810a-43cf-a38a-c39a6b63fd95"},"edge_type":"inherent","type":"","uuid":"55338ba0-cea3-48af-86b8-1fdbf939e4a2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4c303c83-f048-4fb5-b4b3-9a975a08022e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4c303c83-f048-4fb5-b4b3-9a975a08022e"},"edge_type":"inherent","type":"","uuid":"7e10869c-3435-4396-bfef-1abedcac1b25","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"72192260-987e-4c4e-a1ba-50c1eb8b2624"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c8b97357-810a-43cf-a38a-c39a6b63fd95","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4c303c83-f048-4fb5-b4b3-9a975a08022e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"72192260-987e-4c4e-a1ba-50c1eb8b2624","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"e4b40e7e-a18e-4ce5-b92d-01939390f847"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"a7342e79-aad7-4809-acc1-461c25dc1914","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"7c3a25fa-b730-444b-a11b-f34687c6d89b"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"4e09747d-8106-4bf5-99b2-c10229ad5538","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"b4dff8f5-23e2-4bdd-91af-bab45a5ac628","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"29f06ed0-6c85-4399-ac5f-f46fc197ae02"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"fdec3545-6ce8-4081-b821-c8d28f0cbf6d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"29f06ed0-6c85-4399-ac5f-f46fc197ae02"},"edge_type":"inherent","type":"","uuid":"e4122fcf-19f0-441a-8f8e-555377439960","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"fdec3545-6ce8-4081-b821-c8d28f0cbf6d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"29f06ed0-6c85-4399-ac5f-f46fc197ae02","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"e8fbcd19-4c58-4dbc-8070-8c696920e8b4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"fdec3545-6ce8-4081-b821-c8d28f0cbf6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}],"description":"","message_list":[],"uuid":"a5270dea-908a-47db-90a5-46342a91421d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"b4dff8f5-23e2-4bdd-91af-bab45a5ac628"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for starting an application","message_list":[],"uuid":"5b5cf8a6-6ed7-4f23-a2c4-af32532e8e3f","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"1838d76d-a33c-499a-9d3c-f727c9b1ed0f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"749eb9f8-e933-4790-9949-459650dceaf7"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"749eb9f8-e933-4790-9949-459650dceaf7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"885b7e6a-0260-4b5b-9062-549d6d3615cd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"1838d76d-a33c-499a-9d3c-f727c9b1ed0f"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for restarting an application","message_list":[],"uuid":"9be063ba-a1b0-436a-81c4-6cbe886ee99a","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"f3128331-42ab-4878-a009-5e0b55f8aa2d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"4861ccd3-9fa9-484a-b8ac-49dd3904171e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4861ccd3-9fa9-484a-b8ac-49dd3904171e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"5fe4ec7a-84bf-4d9c-b541-5020ad808a42","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"f3128331-42ab-4878-a009-5e0b55f8aa2d"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}},{"description":"System action for stopping an application","message_list":[],"uuid":"e0780482-37d6-4a0b-93ea-86faf6902b5b","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"61425512-f689-4a04-b49a-4c12e7c5bead","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825","uuid":"5587f511-2d14-4b57-b3d3-6fc059644ab4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5587f511-2d14-4b57-b3d3-6fc059644ab4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_3b1e43cc_34ae_40cc_871c_83c9b128b825"}],"description":"","message_list":[],"uuid":"4f284e49-e7a5-4156-8a04-bfea0df9d9cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f","uuid":"61425512-f689-4a04-b49a-4c12e7c5bead"},"name":"SYS_GEN__Runbook_Package_37e277ed_62e3_f6c3_5127_2fdcfa44ec5f"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"}],"uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"EXEC","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"acba9509-9e74-433b-b795-c06d3a444742","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","description":"","type":"EXEC","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"29d65039-cdcf-4bab-ba69-8c9c2ba1759f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","description":"","type":"DAG","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"31234904-04bf-4cf5-846a-0ebaa4fc5e2c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e"},"name":"8cc4ed37_runbook_cloned_0"}},"variable_list":[],"name":"VMware_MSSQLPackage"},{"description":"","action_list":[],"message_list":[],"service_local_reference_list":[],"uuid":"76e215e9-079b-d323-ce1f-703722e81aa1","state":"ACTIVE","version":"","editables":{},"type":"SUBSTRATE_IMAGE","options":{"type":"","name":"Windows","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"http:\/\/@@{location_url}@@\/@@{calm_date}@@\/windows2016.qcow","version":{"product_version":"1.0.0","type":"","product_name":"MS WINdows"},"architecture":"X86_64","type":""},"description":""},"variable_list":[],"name":"WIndows"}]},"name":"DemoMSSQL"},"spec":{"name":"DemoMSSQL","resources":{"service_definition_list":[{"singleton":false,"name":"MSSQL","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","name":"MSSQL"},"retries":"0","description":"","uuid":"06522ebc-796d-43a1-bf2e-cf1735533c2d","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"030017c3_dag"}],"description":"","uuid":"5a5a1d4c-7369-4e4e-ba94-adbe4710e7dc","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"06522ebc-796d-43a1-bf2e-cf1735533c2d"},"name":"5730e30f_runbook"},"type":"system","uuid":"69b6440d-5955-4a73-b62b-d0c48abad28c"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","name":"MSSQL"},"retries":"0","description":"","uuid":"101ee92c-24ec-485d-849e-cbbe936c05de","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6f5f997d_dag"}],"description":"","uuid":"63e46204-038e-4d3d-b238-b1ec58076ba2","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"101ee92c-24ec-485d-849e-cbbe936c05de"},"name":"b01e7edf_runbook"},"type":"system","uuid":"f8ea9018-3c05-468f-bfef-17a372a4dd00"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","name":"MSSQL"},"retries":"0","description":"","uuid":"74eeb29a-4d88-4e83-b6d3-e0fd2d98b898","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"c2b90e7d_dag"}],"description":"","uuid":"008cdac1-56ea-49f6-b8ba-3e3b63e6b821","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"74eeb29a-4d88-4e83-b6d3-e0fd2d98b898"},"name":"0263f5a9_runbook"},"type":"system","uuid":"6553269f-dc66-4652-a4e9-f37d19af9091"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","name":"MSSQL"},"retries":"0","description":"","uuid":"d6a3d13a-7324-4812-a98f-8bd616b8bd79","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"00b1cc9f_dag"}],"description":"","uuid":"5fd7f72e-6164-43b6-8775-cf4d12b0ef04","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"d6a3d13a-7324-4812-a98f-8bd616b8bd79"},"name":"8aadc288_runbook"},"type":"system","uuid":"90867768-45bd-4f7b-9d5d-0c7ff3a8c008"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","name":"MSSQL"},"retries":"0","description":"","uuid":"c99da499-8a0e-4d87-a8da-d84b62b34aaa","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","uuid":"0cf38c90-ef03-4f78-b170-fa2f71cd41d7","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"c99da499-8a0e-4d87-a8da-d84b62b34aaa"},"name":"a059f54d_runbook"},"type":"system","uuid":"bf6557b3-9100-4557-ad80-47cb527bfb89"}],"description":"","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","uuid":"5375d2ca-c4bd-4ae3-a122-fc2065099dfd","name":"EXECUTION_MODE","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""}],"depends_on_list":[]}],"substrate_definition_list":[{"name":"AHV_MSSQL2014","action_list":[{"critical":false,"type":"fragment","uuid":"f887378c-67a4-9d7e-eaed-be5f3ba448ca","runbook":{"main_task_local_reference":{"kind":"app_task","uuid":"099fba04-e606-3ece-ad6b-36ca96994018"},"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"name":"3619a2eb_dag","child_tasks_local_reference_list":[{"kind":"app_task","uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0"},{"kind":"app_task","uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59"}],"attrs":{"edges":[{"from_task_reference":{"kind":"app_task","uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0"},"uuid":"180db7c3-0a57-d829-77fb-a1090a5a7762","to_task_reference":{"kind":"app_task","uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59"}}]},"type":"DAG","variable_list":[],"uuid":"099fba04-e606-3ece-ad6b-36ca96994018"},{"target_any_local_reference":{"kind":"app_substrate","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"name":"Reserve IP Address","child_tasks_local_reference_list":[],"attrs":{"expected_response_params":[{"status":"SUCCESS","code":"200"},{"status":"FAILURE","code":"404"},{"status":"SUCCESS","code":"201"}],"request_body":"{\n  \"ipv4addr\": \"func:nextavailableip:@@{NETWORK}@@\",\n  \"name\": \"@@{calm_application_name}@@\",\n  \"match_client\": \"RESERVED\"\n}","headers":[{"val_type":"STRING","uuid":"d35a6efa-ebae-b2c0-d3c9-d8c337c2c8bf","value":"application\\json","attrs":{},"type":"LOCAL","name":"Accept"}],"url":"https:\/\/10.46.7.56\/wapi\/v2.7\/fixedaddress","response_paths":{"ipref":"$"},"retry_interval":1,"retry_count":1,"authentication":{"auth_type":"basic","basic_auth":{"username":"admin","password":{"attrs":{"is_secret_modified":false}}}},"content_type":"application\/json","connection_timeout":120,"method":"POST"},"type":"HTTP","variable_list":[],"uuid":"ce809fba-adf2-5782-f4fc-924e261a9dc0"},{"target_any_local_reference":{"kind":"app_substrate","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"name":"Set IP Variable","child_tasks_local_reference_list":[],"attrs":{"expected_response_params":[{"status":"SUCCESS","code":"200"}],"headers":[{"val_type":"STRING","uuid":"b6f6a07d-bfe5-93ca-ca1e-8a9145939111","value":"application\/json","attrs":{},"type":"LOCAL","name":"Accept"}],"url":"https:\/\/10.46.7.56\/wapi\/v1.2\/@@{ipref}@@","response_paths":{"infoblox_ip":"$.ipv4addr"},"retry_interval":1,"retry_count":1,"authentication":{"auth_type":"basic","basic_auth":{"username":"admin","password":{"attrs":{"is_secret_modified":false}}}},"content_type":"application\/json","connection_timeout":120,"method":"GET"},"type":"HTTP","variable_list":[],"uuid":"544dd3b9-c01a-fd17-1bf9-4bfd4bcb9f59"}],"name":"a7a8cd24_runbook","variable_list":[],"uuid":"7c0b8266-14a1-7abc-22a1-4e43fa0dd665"},"name":"pre_action_create"},{"critical":false,"type":"fragment","uuid":"fe23b082-efe9-0548-0973-0a897aa994dd","runbook":{"main_task_local_reference":{"kind":"app_task","uuid":"32a48253-9840-e633-af8d-259e00b83d55"},"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"name":"91df092a_dag","child_tasks_local_reference_list":[],"attrs":{"edges":[]},"type":"DAG","variable_list":[],"uuid":"32a48253-9840-e633-af8d-259e00b83d55"}],"name":"952fc660_runbook","variable_list":[],"uuid":"d28fe84a-a432-5533-d4cd-f9928c94393c"},"name":"post_action_delete"}],"uuid":"b61f7a03-cada-4202-82be-fa387c71e362","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"timeout_secs":"300","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":true}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"test","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"subnet_reference":{"uuid":"@@{infoblox_ip.uuid}@@"}}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":{"kind":"image","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"IDE"},"device_type":"CDROM"}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":2,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":3,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":4,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":5,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":6,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":7,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":8,"adapter_type":"SCSI"},"device_type":"DISK"}}]}},"variable_list":[],"description":""},{"name":"VMware_MSSQL2014","action_list":[],"uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"timeout_secs":"300","address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true},"create_spec":{"resources":{"template_nic_list":{},"nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","type":"PROVISION_VMWARE_VM","cluster":"Sabine59-Cluster","template":"5020b0fe-19fa-bbfe-0d94-844a9a4145d2","storage_pod":"QA","resources":{"nic_list":[{"nic_type":"e1000","net_name":"key-vim.host.PortGroup-VM Network"}],"num_vcpus_per_socket":1,"num_sockets":4,"memory_size_mib":4096,"guest_customization":{"customization_type":"GUEST_OS_WINDOWS"},"account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_type":"cdrom","adapter_type":"IDE","location":"ds:\/\/\/vmfs\/volumes\/7b773e05-e06fc970\/"}]}},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"administrator","description":"","uuid":"a89814c1-26af-4782-b38c-51e7bab75155","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"b6f168ba-b749-48d9-a9cf-36077856f7b2"}}},"editables":{"username":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"16753412-9e92-485b-994e-e6891c1e4ccd"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","uuid":"2684689f-ff74-4318-956c-63f0c8cd39bb","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"eadc0738-f6e3-43b5-8ee7-291e9db3ea7f"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"49669086_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"}],"uuid":"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45","min_replicas":"5","max_replicas":"10","substrate_local_reference":{"kind":"app_substrate","name":"MSSQL2014","uuid":"b61f7a03-cada-4202-82be-fa387c71e362"},"type":"GREENFIELD","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","uuid":"8917f318-8304-4dd0-a81e-fe0dcb919821","name":"AD_IP","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"ee39fc37-5dda-49c7-b401-1b987261ff00","name":"DOMAIN","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"9cbbf909-f75e-4a7b-8d15-8491091d8cfc","name":"INCLUDE_BPG","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"a20a73de-63e5-441e-8efb-a3c8de183595","name":"BPG_RKTOOLS_URL","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","name":"NETWORK","data_type":"BASE","uuid":"f481cb28-0f67-f864-1b22-99d58c4153c1","value":"10.46.6.0\/24","label":"","attrs":{},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED"},"description":""}],"uuid":"4ec0c966-1388-4b84-8afd-f6c1c603cce4"},{"deployment_create_list":[{"name":"49669086_deployment_cloned_0","action_list":[],"package_local_reference_list":[{"kind":"app_package","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"}],"uuid":"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3","min_replicas":"1","max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","uuid":"3a8c4355-941a-4b99-8ef5-6b14ca182849"},"type":"GREENFIELD","variable_list":[],"description":""}],"description":"","action_list":[],"name":"VMware","variable_list":[{"val_type":"STRING","uuid":"b103830b-9f73-45f7-831b-5235eb8a9474","name":"AD_IP","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"495c5e9a-b083-4100-b7c7-5712034128fc","name":"DOMAIN","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"1d861501-c341-4858-bd88-0f32433499d3","name":"INCLUDE_BPG","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"bab6085d-a945-47f0-9699-255a682e0f09","name":"BPG_RKTOOLS_URL","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""}],"uuid":"463b225a-83bf-4916-bc4c-1c9d75ffe9bb"}],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"},"package_definition_list":[{"uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"}],"name":"AHV_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","name":"87d54973_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},"edge_type":"user_defined","type":"","uuid":"35541af8-92d6-4d01-9348-9f48c58aab9d","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"171ec080-7051-4670-8839-90b52156c1c5"},"edge_type":"user_defined","type":"","uuid":"2fd3a516-a5f5-4bc4-910d-c746d994d312","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},"edge_type":"user_defined","type":"","uuid":"66901e18-d865-4baf-84e0-2e4713562f8f","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},"edge_type":"user_defined","type":"","uuid":"3dae1a85-c66f-44da-8257-9ff11b992cf2","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"3831b157-475b-48dd-b769-e598deec68c8"},"edge_type":"user_defined","type":"","uuid":"87c8382b-d0c9-469c-b047-d8154abfd4ac","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},"edge_type":"user_defined","type":"","uuid":"428485d6-5d29-49f5-9b0d-b97d0b0aa0db","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},"edge_type":"user_defined","type":"","uuid":"78c3c57d-f36a-4a06-aced-992363c4de8f","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0"},{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b8d23742-b9f1-40cc-8669-c1b8c41470f3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"171ec080-7051-4670-8839-90b52156c1c5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\nsleep(60)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"f19fe45e-7696-4488-81c8-352bee3478a3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"66966c66-aaa0-477c-9283-82db3f59fde7"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"3831b157-475b-48dd-b769-e598deec68c8"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b521f0e6-a8d8-4d12-8ba1-df6490b344c1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"d962d157-96b8-4f06-829d-287d3b20e912"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"8b23980f-ca0d-4051-b9bf-73903452f666"}],"name":"b58c360f_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"9fe3ddd2-c0c0-4a51-8341-b9afa6a1b8b0"},"uuid":"e2cbd562-fef2-43bc-9d14-8124287024c6"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MSSQLPackage","uuid":"aeb955eb-e670-42d5-a08d-d01bfe608d9a"},"retries":"0","name":"c5e51cfd_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"032d2e77-020d-426f-915e-a3857b5fbc35"}],"name":"8cc4ed37_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"032d2e77-020d-426f-915e-a3857b5fbc35"},"uuid":"ae8eec00-c8f8-4626-8513-21d7f5332105"}},"variable_list":[],"description":""},{"uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf","action_list":[],"service_local_reference_list":[{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"}],"name":"VMware_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","name":"87d54973_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},{"kind":"app_task","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},{"kind":"app_task","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},{"kind":"app_task","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},{"kind":"app_task","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},{"kind":"app_task","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},{"kind":"app_task","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},{"kind":"app_task","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},"edge_type":"user_defined","type":"","uuid":"302c5248-9eb4-5e04-520b-1d10bc51d9e8","to_task_reference":{"kind":"app_task","uuid":"acba9509-9e74-433b-b795-c06d3a444742"}},{"from_task_reference":{"kind":"app_task","uuid":"acba9509-9e74-433b-b795-c06d3a444742"},"edge_type":"user_defined","type":"","uuid":"741bfd6d-0ce5-19dd-8621-9edee9f12a9e","to_task_reference":{"kind":"app_task","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"}},{"from_task_reference":{"kind":"app_task","uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},"edge_type":"user_defined","type":"","uuid":"039a86ba-a9b8-9ea0-8ada-63bcef112e97","to_task_reference":{"kind":"app_task","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"}},{"from_task_reference":{"kind":"app_task","uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},"edge_type":"user_defined","type":"","uuid":"0886d091-628d-1501-e109-86468ceb22a5","to_task_reference":{"kind":"app_task","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"}},{"from_task_reference":{"kind":"app_task","uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},"edge_type":"user_defined","type":"","uuid":"e3beffb3-f48f-10a1-2f15-6689b05db1e0","to_task_reference":{"kind":"app_task","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"}},{"from_task_reference":{"kind":"app_task","uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},"edge_type":"user_defined","type":"","uuid":"e6385fb7-0d94-45d7-aebc-b26fee3b8a22","to_task_reference":{"kind":"app_task","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"}},{"from_task_reference":{"kind":"app_task","uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},"edge_type":"user_defined","type":"","uuid":"38107872-e249-0e4c-97b9-e6a8e7e67565","to_task_reference":{"kind":"app_task","uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d"},{"target_any_local_reference":{"kind":"app_package","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"Enable-WSManCredSSP -Role Server -Force","type":"","command_line_args":"","exit_status":[],"script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"f4f9957b-9c17-4914-9018-8e7f97d54c8f"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"acba9509-9e74-433b-b795-c06d3a444742"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\nsleep(60)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"ff996390-a473-4e2e-b636-84efba2da0b2"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"a89814c1-26af-4782-b38c-51e7bab75155"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"6a5bd492-0701-464f-8648-24cb74977b6d"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"8a76a8e5-98db-433a-aa86-6f3d897324b2"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"9d33a3d6-054c-4269-86e1-5cd6348c4c02"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"878fafe6-d19a-464f-8652-a49cbb3e564e"},{"target_any_local_reference":{"kind":"app_service","uuid":"ced73ba1-8069-49c8-9ef2-8bfc30f077a6"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","uuid":"51de2bda-e15e-4b1a-b095-718adc1756f7"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"3bbdf5d0-be23-4378-adc9-85f2ee3b91b0"}],"name":"b58c360f_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","uuid":"43b8325c-d11b-451d-9ffd-482d8d85978d"},"uuid":"29d65039-cdcf-4bab-ba69-8c9c2ba1759f"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","uuid":"f7a2f7c0-381e-4fa8-9724-f016ddf2a3bf"},"retries":"0","name":"c5e51cfd_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e"}],"name":"8cc4ed37_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","uuid":"14ca906a-22a7-4b90-a8b9-bcea7fbc076e"},"uuid":"31234904-04bf-4cf5-846a-0ebaa4fc5e2c"}},"variable_list":[],"description":""},{"name":"WIndows","type":"SUBSTRATE_IMAGE","uuid":"76e215e9-079b-d323-ce1f-703722e81aa1","variable_list":[],"options":{"name":"Windows","resources":{"image_type":"DISK_IMAGE","source_uri":"http:\/\/@@{location_url}@@\/@@{calm_date}@@\/windows2016.qcow","version":{"product_version":"1.0.0","product_name":"MS WINdows"},"architecture":"X86_64"}}}],"client_attrs":{"9203f2f7-93a2-4546-8b63-a2ae4ce3e9b3":{"y":-226.4844039225,"x":317.2478090454},"0c93a9fb-37da-f7b3-b1b8-8539491f2fd0":{"y":-226.4844039225,"x":317.2478090454},"ee1a21e6-ba8d-4baa-a3ec-e5ca0176fb45":{"y":-226.4844039225,"x":317.2478090454}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1558469048937274","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"281accfc-407a-4c9a-9373-02321ba9bb17","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":18,"creation_time":"1557999027786588","name":"DemoMSSQL"}}