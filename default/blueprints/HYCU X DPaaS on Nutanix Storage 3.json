{"status":{"description":"* [HYCU](https:\/\/@@{AHV_HYCU.address}@@:8443)\n* UI username\/password [admin]\/[admin]\n* SSH username\/password [hycu]\/[hycu\/4u]","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"f3f4094c-6e42-4a2d-b075-3f831757c4b3","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"9b84e61d-e510-4376-9813-74061fdd999f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"e20cbb61_dag"}],"description":"","message_list":[],"uuid":"b2c26360-6d6b-4d2f-a430-4dafef405639","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e20cbb61_dag","uuid":"9b84e61d-e510-4376-9813-74061fdd999f"},"name":"9368a69c_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"8949be04-ce2e-4c7c-83c7-4f2c2e2a3fda","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"1ce6d027-0edd-48fc-9924-235bdb06fa7d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"395e33b6_dag"}],"description":"","message_list":[],"uuid":"dd66bd32-56f4-4d21-9151-0088c716a757","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"395e33b6_dag","uuid":"1ce6d027-0edd-48fc-9924-235bdb06fa7d"},"name":"cc274171_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"b25be1f1-c04c-454d-8d27-375e8eff2495","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"ba8e15ad-c72c-47db-9f2e-4bede0ec706c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"260516ed_dag"}],"description":"","message_list":[],"uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"260516ed_dag","uuid":"ba8e15ad-c72c-47db-9f2e-4bede0ec706c"},"name":"b77a0435_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"1575f092-de3c-4a9f-81b2-3cfa60d0dd47","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"1be6ba28-e741-414f-94b8-20075e7fce1f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"eeeab6e2_dag"}],"description":"","message_list":[],"uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"eeeab6e2_dag","uuid":"1be6ba28-e741-414f-94b8-20075e7fce1f"},"name":"97b28e71_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"976b0181-20ec-442f-ae39-c9aa67e64a5e","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"6ebfdd83-3f8f-474b-b5e4-6e08cb595fc8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"443c3cae_dag"}],"description":"","message_list":[],"uuid":"31cea0dd-27b1-4b6d-9eca-f35a401b9927","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"443c3cae_dag","uuid":"6ebfdd83-3f8f-474b-b5e4-6e08cb595fc8"},"name":"0203ed8c_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"91b00851-5a65-4807-bc0d-18ba24755fd3","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"DAG","uuid":"b43b6275-215b-42c4-8ec9-69ae09deea53","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"d454f086-1e38-4000-bb6e-b4bcc0508260"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"d454f086-1e38-4000-bb6e-b4bcc0508260","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"737d27b5-6d9f-4fc9-a098-3bea27167c74","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"b43b6275-215b-42c4-8ec9-69ae09deea53"},"name":"SYS_GEN__Runbook_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}}],"message_list":[],"uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"4e5855c0-2f27-4bc5-9719-e3f7c1537fad","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"TARGET_IQN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"9f1fb6cf-9876-473e-b872-da55abee5572","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"INITIATOR_IQN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"142fa5e2-aae9-43a7-b42c-dc7a4940098f","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"CONTAINER_UUID"}],"name":"Nutanix"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"10572ded-6132-49bd-b0de-5b7005645273","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"107d7e4a-3147-491a-87e0-ad4aab78f9db","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"3b480a26-dbbe-4882-aef0-70ae94b7a182"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"292c6120-43df-4597-ac49-2d584f927cf4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"3b480a26-dbbe-4882-aef0-70ae94b7a182"},"edge_type":"inherent","type":"","uuid":"04dc714a-b09e-4dbb-87b9-1dcbff0009f2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"292c6120-43df-4597-ac49-2d584f927cf4"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"3b480a26-dbbe-4882-aef0-70ae94b7a182","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"hycu-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"292c6120-43df-4597-ac49-2d584f927cf4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"9b056831-3e8b-4e10-a87b-469652bb985e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"107d7e4a-3147-491a-87e0-ad4aab78f9db"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for powering on an application","message_list":[],"uuid":"ff975c05-73dd-4a26-8a56-696e30331b83","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"04ad1f6e-a047-483d-9702-a7ff75a55654","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"8c59e0cd-1a21-41e1-ab62-98c66188646b"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"de2f92e0-ba9f-4e59-95ae-fce893665a01"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"8c59e0cd-1a21-41e1-ab62-98c66188646b"},"edge_type":"inherent","type":"","uuid":"3ca68472-0e1c-43e8-bb46-60a265b101cd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"de2f92e0-ba9f-4e59-95ae-fce893665a01"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"8c59e0cd-1a21-41e1-ab62-98c66188646b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"de2f92e0-ba9f-4e59-95ae-fce893665a01","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"ad1a878c-5f0b-4e90-8fe0-3c49f8f2d3bf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"04ad1f6e-a047-483d-9702-a7ff75a55654"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for restarting an application","message_list":[],"uuid":"c824796d-bf83-4546-a86c-560de8ae3067","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"2255f9f6-f002-4f32-90c6-37afb97831b1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"4da2c483-3583-4c95-936a-76eb51d2cb98"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"082120ee-5ef8-40c4-b11a-813576e21749"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"4da2c483-3583-4c95-936a-76eb51d2cb98"},"edge_type":"inherent","type":"","uuid":"2fce859a-57f2-4a53-b4b0-99ab65c810f8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"082120ee-5ef8-40c4-b11a-813576e21749"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"4da2c483-3583-4c95-936a-76eb51d2cb98","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"082120ee-5ef8-40c4-b11a-813576e21749","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"c34cea40-adab-4385-a011-c3f433e4b52a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"2255f9f6-f002-4f32-90c6-37afb97831b1"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for suspending an application","message_list":[],"uuid":"02911819-900f-42f2-a9a5-5ce9db559a18","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"359f30a8-ffb2-4497-b0c0-dab063926ef7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"afd7ddc9-0b6c-4c5d-b4f1-f06b23f8ffc4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"359f30a8-ffb2-4497-b0c0-dab063926ef7"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for modifying an application","message_list":[],"uuid":"dea42f3c-ab77-4c75-be64-080e6029ab47","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"d5f1d0da-5d2b-46db-830f-fb96455b1a5d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"0f045036-037e-4482-abe9-5492e4550400","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d5f1d0da-5d2b-46db-830f-fb96455b1a5d"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for powering off an application","message_list":[],"uuid":"14ee8c9b-7c37-478e-9f02-0ef8f0f7a2e7","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"af0f95b0-538c-458b-a59e-cb00fceb14e2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"c5c9bdfc-a7dd-42d6-bea5-50c466a745e4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"c5c9bdfc-a7dd-42d6-bea5-50c466a745e4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"56c1b15a-d43b-446b-9f32-c6486c162fd6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"af0f95b0-538c-458b-a59e-cb00fceb14e2"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"d131d5cb-3c55-4a25-b05d-6210733e38ca","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"726484e3-3bcf-4f89-9f43-0c4505e37ae3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"53e76fe7-c47a-4e2d-b7c4-67953b913879"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"53e76fe7-c47a-4e2d-b7c4-67953b913879","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"18de4077-ad05-458c-ba7e-98bbb97d2126","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"726484e3-3bcf-4f89-9f43-0c4505e37ae3"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"06b30da7-d708-42c0-8f83-f114b61a6513","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"DAG","uuid":"15b2d0fd-3a49-452f-8d6e-5b097b70a9d0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"e3ea2d4f-5397-49e0-a879-e8f73e477288"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"e3ea2d4f-5397-49e0-a879-e8f73e477288","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"9913b098-6158-40a4-9549-dba9cd1cc33b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"15b2d0fd-3a49-452f-8d6e-5b097b70a9d0"},"name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}}],"message_list":[],"uuid":"859954f2-a4e4-4035-aa66-551f18ccc312","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"hycu-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}}]}},"variable_list":[],"name":"CalmDeploymentHYCU"}],"credential_definition_list":[{"username":"hycu","description":"","state":"ACTIVE","message_list":[],"uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"credentialsHYCU"},{"username":"admin","description":"","state":"ACTIVE","message_list":[],"uuid":"48d7dc98-4ecf-4612-a3cd-46afb6267a54","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"NTX_CREDENTIALS"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"379f4721-28d2-4c6a-b6fe-472525e637d0","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"e6834aa8-fbf3-4626-a286-66dd65c0bfd3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"c54e9fe6-e2cc-4c86-ae90-be684a89e19e"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"029321d2-67e2-4f92-90b4-39b1ef7f1991"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"15c84a95-5918-4a91-accc-bb7752927144"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"83648b07-acdd-43b5-836b-abd9803de0ee"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"1cf2a0f9-034d-4a34-8a02-e3dcb13a4efb"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"90c21f6a-8391-4187-8a24-b2754e85a1c4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"1cf2a0f9-034d-4a34-8a02-e3dcb13a4efb"},"edge_type":"inherent","type":"","uuid":"e8730774-efc4-4e7a-bc13-bc7909a169a1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"90c21f6a-8391-4187-8a24-b2754e85a1c4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"83648b07-acdd-43b5-836b-abd9803de0ee"},"edge_type":"inherent","type":"","uuid":"e6d115b4-542f-4220-98c0-b19361643aa7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"1cf2a0f9-034d-4a34-8a02-e3dcb13a4efb"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"15c84a95-5918-4a91-accc-bb7752927144"},"edge_type":"inherent","type":"","uuid":"92f1ad35-13e6-473c-9334-04ac52248e2a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"83648b07-acdd-43b5-836b-abd9803de0ee"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"c54e9fe6-e2cc-4c86-ae90-be684a89e19e"},"edge_type":"inherent","type":"","uuid":"4b6a57ab-bf69-4bb5-a5e8-1162861d9bc4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"15c84a95-5918-4a91-accc-bb7752927144"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"029321d2-67e2-4f92-90b4-39b1ef7f1991"},"edge_type":"inherent","type":"","uuid":"114e8903-c967-4c4f-a234-0312137e7899","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"15c84a95-5918-4a91-accc-bb7752927144"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"c54e9fe6-e2cc-4c86-ae90-be684a89e19e"},"edge_type":"inherent","type":"","uuid":"f0b6f757-8e02-4dbc-8d54-8c01712a3c3b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"029321d2-67e2-4f92-90b4-39b1ef7f1991"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"c54e9fe6-e2cc-4c86-ae90-be684a89e19e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"029321d2-67e2-4f92-90b4-39b1ef7f1991","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"e25c3006-1840-4af3-8334-c001f11d7641"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"15c84a95-5918-4a91-accc-bb7752927144","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"9b056831-3e8b-4e10-a87b-469652bb985e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"83648b07-acdd-43b5-836b-abd9803de0ee","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"153555ae-a286-4edf-96b6-c6cccfdc3fad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1cf2a0f9-034d-4a34-8a02-e3dcb13a4efb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"b2c26360-6d6b-4d2f-a430-4dafef405639"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"90c21f6a-8391-4187-8a24-b2754e85a1c4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"a6f7c20e-e243-472c-afd3-3ae1e46ff1ec","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"e6834aa8-fbf3-4626-a286-66dd65c0bfd3"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for starting an application","message_list":[],"uuid":"5cf196ca-0644-4fdc-83c1-38ecec58b6b1","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"66e736de-c53e-4aa3-81ca-218ad6c60ccd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"c55a98f5-12bd-4cbf-9cc1-157f1d76dda7"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"5b72a044-e99d-400a-b398-cc980653cb93"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"c55a98f5-12bd-4cbf-9cc1-157f1d76dda7"},"edge_type":"inherent","type":"","uuid":"98e41977-8920-45a9-a234-53a8cd51b042","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"5b72a044-e99d-400a-b398-cc980653cb93"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c55a98f5-12bd-4cbf-9cc1-157f1d76dda7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"ad1a878c-5f0b-4e90-8fe0-3c49f8f2d3bf"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5b72a044-e99d-400a-b398-cc980653cb93","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"a75ad1cc-9622-486b-9032-c04f496adbfa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"66e736de-c53e-4aa3-81ca-218ad6c60ccd"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for restarting an application","message_list":[],"uuid":"25811c87-522c-445a-a322-4601ee186611","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"3cd4dbd1-a203-437f-9f19-135ddd81355c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"22ebdf6b-a3fc-4fa9-ae99-c0872fe6e581"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"9bfc5df5-085a-4a12-8cf6-ead3860f701c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"22ebdf6b-a3fc-4fa9-ae99-c0872fe6e581"},"edge_type":"inherent","type":"","uuid":"0716d0e9-44d5-4f59-9e84-1ec901c400a8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"9bfc5df5-085a-4a12-8cf6-ead3860f701c"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"22ebdf6b-a3fc-4fa9-ae99-c0872fe6e581","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"c34cea40-adab-4385-a011-c3f433e4b52a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9bfc5df5-085a-4a12-8cf6-ead3860f701c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"31cea0dd-27b1-4b6d-9eca-f35a401b9927"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"34d0ffcd-2b12-4866-8933-54e0c0da264c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"3cd4dbd1-a203-437f-9f19-135ddd81355c"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for stopping an application","message_list":[],"uuid":"15d67d64-acb2-42ae-9d87-95862f55b694","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"d514ce42-b958-493f-8115-e05822a48bc5","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"112a0812-31bf-45c4-9201-b8181956afc5"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"526e3c90-270c-4ee5-9953-db999d5ed40d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"112a0812-31bf-45c4-9201-b8181956afc5"},"edge_type":"inherent","type":"","uuid":"b7c52171-d994-4627-ae5f-310a0efba23e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"526e3c90-270c-4ee5-9953-db999d5ed40d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"112a0812-31bf-45c4-9201-b8181956afc5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"526e3c90-270c-4ee5-9953-db999d5ed40d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"56c1b15a-d43b-446b-9f32-c6486c162fd6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"6d632e43-7a71-437c-b6d6-e50be2aa3fc8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"d514ce42-b958-493f-8115-e05822a48bc5"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"58b4d74b-0915-414b-a696-d5cd9a48a945","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"1000ad6f-d5ee-47d2-b4a5-1773317467df","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"7433e584-e76e-4e64-80eb-d5d450276f8f"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fe452dfb-a4b2-46fb-ac30-5cde0487e497"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"18965a2e-8dc1-4562-88b3-bac5fa424921"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"5d759115-cd5b-4104-bc3d-632356fc5e9f"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"00afa660-0612-4e6a-81ff-c648dd6ca2ba"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"7433e584-e76e-4e64-80eb-d5d450276f8f"},"edge_type":"inherent","type":"","uuid":"14054c97-dbaa-44e1-89a7-4c1d101929c3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fe452dfb-a4b2-46fb-ac30-5cde0487e497"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fe452dfb-a4b2-46fb-ac30-5cde0487e497"},"edge_type":"inherent","type":"","uuid":"b932f6c2-e6cb-4990-837a-37b0f637c840","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"18965a2e-8dc1-4562-88b3-bac5fa424921"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"5d759115-cd5b-4104-bc3d-632356fc5e9f"},"edge_type":"inherent","type":"","uuid":"69a6ea09-6d43-43ce-805b-647d5c66e4a9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"00afa660-0612-4e6a-81ff-c648dd6ca2ba"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"18965a2e-8dc1-4562-88b3-bac5fa424921"},"edge_type":"inherent","type":"","uuid":"dafa66ef-b926-466a-8e05-343b39b1d6af","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"5d759115-cd5b-4104-bc3d-632356fc5e9f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7433e584-e76e-4e64-80eb-d5d450276f8f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fe452dfb-a4b2-46fb-ac30-5cde0487e497","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"dd66bd32-56f4-4d21-9151-0088c716a757"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"18965a2e-8dc1-4562-88b3-bac5fa424921","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bc5342d3-e4c5-4a89-8c5f-c312461a7635"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5d759115-cd5b-4104-bc3d-632356fc5e9f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"18de4077-ad05-458c-ba7e-98bbb97d2126"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"00afa660-0612-4e6a-81ff-c648dd6ca2ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"e9d8559b-6a68-4308-8e6b-86dc8adc396e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"1000ad6f-d5ee-47d2-b4a5-1773317467df"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for scaleout","message_list":[],"uuid":"df7cfcff-7571-43f4-92f4-e3c243fc9630","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"54e87c66-042d-4a7a-87ea-fd1d376f7b28","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"815cdc62-de3b-4065-b2d3-eea19b655208"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"SCALING","uuid":"815cdc62-de3b-4065-b2d3-eea19b655208","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"85678738-f3da-48f8-9213-f4470a78c6ee","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f8f73b93-4a3a-4be4-a535-a24029ef5dc7","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"54e87c66-042d-4a7a-87ea-fd1d376f7b28"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for scalein","message_list":[],"uuid":"f4bba5a6-15da-4dcb-b83a-b81179512874","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"20ee3b59-fa15-4c2f-a872-697e0a9974d7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"72ea4f1a-fcdc-4585-a3aa-187e5a3e200f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"SCALING","uuid":"72ea4f1a-fcdc-4585-a3aa-187e5a3e200f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"5973ab86-e19b-4230-80b8-4ed476a605b4","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"4484d1b7-da25-4de7-978a-e072ef8ed6a0","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"20ee3b59-fa15-4c2f-a872-697e0a9974d7"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"2aa4cbfe-f8fe-40a8-83b9-70591dd078ba","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DAG","uuid":"2a044b2a-3de5-4ccf-b199-71927dadc210","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"4d5f53e3-7b8e-4bda-bfc2-0cb6371246c9"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"7f8dc786-1ac2-448f-9bfb-655a8a26ba03"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d0d83606-f373-4a27-ab9a-f35d10856f3c"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"4ce8a4c4-22ef-4103-a6bc-26a6db8e8d5f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"4d5f53e3-7b8e-4bda-bfc2-0cb6371246c9"},"edge_type":"inherent","type":"","uuid":"1717f0e8-b681-41b1-8f79-b8d15c0a4b56","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"7f8dc786-1ac2-448f-9bfb-655a8a26ba03"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d0d83606-f373-4a27-ab9a-f35d10856f3c"},"edge_type":"inherent","type":"","uuid":"ca304f2f-3628-42b5-b11c-1ebc6f781f40","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"4ce8a4c4-22ef-4103-a6bc-26a6db8e8d5f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"7f8dc786-1ac2-448f-9bfb-655a8a26ba03"},"edge_type":"inherent","type":"","uuid":"23a6e9c6-0741-4c36-956e-839fabfbc4fc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d0d83606-f373-4a27-ab9a-f35d10856f3c"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4d5f53e3-7b8e-4bda-bfc2-0cb6371246c9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"737d27b5-6d9f-4fc9-a098-3bea27167c74"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"7f8dc786-1ac2-448f-9bfb-655a8a26ba03","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d0d83606-f373-4a27-ab9a-f35d10856f3c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"9913b098-6158-40a4-9549-dba9cd1cc33b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"4ce8a4c4-22ef-4103-a6bc-26a6db8e8d5f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"68f99c09-a9f7-452f-be7a-3d3cdde9941e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"2a044b2a-3de5-4ccf-b199-71927dadc210"},"name":"SYS_GEN__Runbook_Deployment_31219e24_2383_4171_8d64_c9c9a520207d"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"31219e24-2383-4171-8d64-c9c9a520207d","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"}],"substrate_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"d0f2c1f8_deployment"}],"description":"","action_list":[{"description":"","message_list":[],"uuid":"d49aa34f-5f5f-44bd-b03b-72abb5722b89","name":"Add ABS Target","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"238ae48c-4289-4587-89af-ab929bbfc916","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get Initiator IQN","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5"},{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"},{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"},{"kind":"app_task","name":"Add ABS Target","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"},"edge_type":"user_defined","type":"","uuid":"32e37a12-928e-4d12-bfc2-703c84c69e80","to_task_reference":{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"}},{"from_task_reference":{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"},"edge_type":"user_defined","type":"","uuid":"4d1855e6-2b6a-41a3-9e66-cf23aa94d79f","to_task_reference":{"kind":"app_task","name":"Add ABS Target","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891"}},{"from_task_reference":{"kind":"app_task","name":"Get Initiator IQN","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5"},"edge_type":"user_defined","type":"","uuid":"34135fb0-fb10-4987-9546-42506a6c2f75","to_task_reference":{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"795298d9_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ntime = 5\nresponse = ''\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/iscsiinitiator\"\n\ntry:\n  response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n  get_iscsiinitiator = json.loads(response.content)\n  iqn = get_iscsiinitiator[\"entities\"][0][\"initiatorname\"]\nexcept Exception as e:\n  if response == \"\":\n    print \"ERROR: No response form HYCU controller or controller not reachable.\"\n  else:\n    get_iscsiinitiator = json.loads(response.content)\n    status = get_iscsiinitiator['message']['titleDescription']\n    print \"ERROR Message: {0}: Response code:({1}).\".format(status,response.status_code)\n    exit(1)\n\nprint \"INFO: Initiator Name successfully acquired: {}.\".format(iqn)\n\nprint \"INITIATOR_IQN=\" + iqn\n","eval_variables":["INITIATOR_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Get Initiator IQN"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nhycu = '@@{HYCU_HOSTNAME}@@'\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntime = 30\nstatus ={'200':'INFO: UUID sucessfully acquired.','201':'INFO: Container succesfully created.','401':'ERROR: Invalid username or password for storage cluster.','202':'ERROR: Creating Storage Container','422':'A storage container already exists' }\ncount = 1\nfinish = 13\nkey = ''\n\nif hycu == \"\" :\n    hycu = 'HYCU_Controller-'\n\nstorage_container_name = hycu + \"-HYCU-CONTAINER\"\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/storage_containers\"\n\nprint \"Creating Container for ABS target: {}.\".format(storage_container_name)\n\nwhile(True):\n  payload = {\n    \"compression_delay_in_secs\": 3600,\n    \"compression_enabled\": \"true\",\n    \"enable_software_encryption\": \"false\",\n    \"finger_print_on_write\": \"off\",\n    \"name\": storage_container_name\n  }\n  index = count  \n  count += 1\n  response = urlreq(api_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"201\":\n    break\n  elif key == \"422\":\n    storage_container_name = storage_container_name + \"-\" + str(index)\n    print \"INFO: Added index to Container Name '{}'\".format(index)\n    print \"Retrying in 5 seconds\"\n    sleep(5)\n  else:\n    print \"Retrying in 5 seconds.\"\n    sleep (5)\n  if count == finish:\n    print \"ERROR: Failed to create Container '{}'. Terminating\".format(storage_container_name)\n    exit(1)\n    \ncount = 1\n\nuuid_url = api_url + \"\/?search_string=\" + storage_container_name\n\nwhile (True):\n  count += 1\n  response = urlreq(uuid_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"200\":\n    break\n  else:\n    print \"INFO: Retrying in 5 seconds\"\n    sleep(5)\n  if count == finish:\n    print \"ERROR: Failed to get Container '{}' UUID. Terminating\".format(storage_container_name)\n    exit(1)\n  \nstorage_containers = json.loads(response.content)\nstorage_container_uuid = storage_containers[\"entities\"][0][\"storage_container_uuid\"]\n\nprint (status[key]) + \" Container name: '{0}', uuid:'{1}'\".format(storage_container_name, storage_container_uuid)\nprint \"CONTAINER_UUID=\" + storage_container_uuid","eval_variables":["CONTAINER_UUID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create Container"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\nstorage_container_uuid = '@@{CONTAINER_UUID}@@'\nvgname = 'HYCU-Volume-Group'\ntarget_vg_size = (@@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024)*1.7\niqn = '@@{INITIATOR_IQN}@@'\ncount = 1\nfinish = 13\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/\"\n\ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    vgname = vgname + '-' + iqn\n\nprint \"INFO: Creating volume group '{}'.\".format(vgname)\n\ncreate_vg_url = api_url + \"volume_groups\"\npayload = {\n  \"disk_list\": [{\n    \"create_config\": {\n      \"size\": target_vg_size,\n      \"storage_container_uuid\": storage_container_uuid\n      },\n    \"index\": 0\n    }],\n    \"is_shared\": True,\n    \"name\": vgname\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(create_vg_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\n  if response.status_code == 201:\n    print \"INFO: Volume group '{}' successfully created\".format(vgname)\n    break\n  else:\n    print \"ERROR: creation of volume group '{}' failed. Retrying in 5 seconds.\".format(vgname)\n    sleep(5)\n  if count == finish:\n    print \"ERROR: creation of volume group '{}' failed. Terminating.\".format(vgname)\n    exit(1)\n\nvg_create_status = json.loads(response.content)\ntask_uuid = vg_create_status['task_uuid']\n\nsleep(5)\n\ncheck_vg_creation_url = api_url + \"tasks\/\" + task_uuid\nresponse = urlreq(check_vg_creation_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvg_create_status = json.loads(response.content)\n\nif vg_create_status['progress_status'] != \"Succeeded\":\n  print \"ERROR: creation of volume group '{}' failed.\".format(vgname)\n  exit(1)\nelse:\n  print \"INFO: creation of volume group '{}' Successful.\".format(vgname)\n    \ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    iscsi_target=vg[\"iscsi_target\"]\n    vgUUID=vg['uuid']\n\nprint \"INFO: Attaching VG {} to node.\".format(vgname)\n\nattach_url = check_vg_url + \"\/\" + vgUUID + \"\/open\"\n\npayload = {\n  \"iscsi_client\": {\n    \"client_address\": iqn\n  },\n  \"operation\": \"ATTACH\"\n}\n\nresponse = urlreq(attach_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\nif response.status_code != 201:\n  print \"ERROR: Attaching vg '{}' failed.\".format(vgname)\n  print response.status_code\nelse:\n  attach_status = json.loads(response.content)\n  status = str(attach_status['value'])\n  if status == 'True':\n    print \"INFO: Attaching vg '{}' Successful.\".format(vgname)\n    print \"TARGET_IQN=iqn.2010-06.com.nutanix:\" + iscsi_target\n  else:\n    print \"ERROR: Attaching vg '{}' failed.\".format(vgname)","eval_variables":["TARGET_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create VG"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nhycu_username = 'admin'\nhycu_password = 'admin'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntarget_name = \"NutanixABS\"\ndata_service_port = \"3260\"\ntarget_iqn = \"@@{TARGET_IQN}@@\"\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\ncount = 1\nfinish = 6\n\niscsi_api =  prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/cluster\/\"\nhycu_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\" + \"\/targets\"\n\nprint \"INFO: Acquiring iSCSI Data Services IP from '{}' storage cluster\".format(prism_ip)\nresponse = urlreq(iscsi_api, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\niscsi = json.loads(response.content)\ndataIP = iscsi['cluster_external_data_services_ipaddress']\nexternalIP = iscsi['cluster_external_ipaddress']\n\nif dataIP != None:\n  print \"INFO: Data Service IP acquired '{}'\".format(dataIP)\nelse:\n  print \"INFO: Data Service IP does not exists on this storage cluster, using cluster virutal IP\".format(externalIP)\n  dataIP = externalIP\n    \nprint \"INFO: Checking existance of target on HYCU '{}'\".format(hycu_ip)\n\nresponse = urlreq(hycu_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\ntargets = json.loads(response.content)\n\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    target_name = '@@{HYCU_HOSTNAME}@@' + \"-\" + target_name\n\nprint \"Creating target '{}' on controller\".format(target_name)\n\npayload ={\n  \"name\": target_name,\n  \"description\": \"\",\n  \"targetType\": \"I_SCSI\",\n  \"allowedBackupStreams\": 1,\n  \"encryption\": \"False\",\n  \"iScsiStorageDetails\": {\n    \"port\": data_service_port,\n    \"address\": dataIP,\n    \"chap\": \"False\",\n    \"targetname\": target_iqn,\n    \"username\": \"\",\n    \"password\": \"\",\n    \"mutualChap\": \"False\"\n    }\n}\n\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(hycu_url, verb='POST', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n\njobs_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\n  if response.status_code != 200:\n    print \"ERROR: Failed to get job status '{}'. Retrying in 5 seconds.\".format(job_uuid)\n    count +=1\n    sleep(5)\n  if response.status_code == 500:\n    print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n    count += 1\n    sleep(5)\n  job_status = json.loads(response.content)\n  if job_status[\"entities\"][0][\"status\"] == \"OK\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful.\".format(target_name,job_uuid)\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful with warning.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n    print \"ERROR: Adding ABS Target '{0}', uuid '{1}' failed.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    exit(1)\n  else:\n    print \"INFO: Getting job status '{}' in-progress sleeping for 5 seconds.\".format(job_uuid)\n    sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add ABS Target"}],"description":"","message_list":[],"uuid":"e0fb845b-cc49-414a-9e0e-5e040e0c41ab","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Size in TB of Nutanix ABS target for HYCU backups","data_type":"BASE","message_list":[],"uuid":"0ee199bb-410b-4af6-b3e9-98c93003c0f7","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"STORAGE_SIZE_TB"}],"main_task_local_reference":{"kind":"app_task","name":"795298d9_dag","uuid":"238ae48c-4289-4587-89af-ab929bbfc916"},"name":"33f47972_runbook"}},{"description":"","message_list":[],"uuid":"274f572e-78e1-40f7-8393-506bbf85e38c","name":"Add AFS Target","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"9df03a37-d14f-42bb-8f0e-fae87bc37e48","child_tasks_local_reference_list":[{"kind":"app_task","name":"Add AFS Target","uuid":"77ade5c6-60bf-4179-ae77-a26bd61c9fcf"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"b9d7912e_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"77ade5c6-60bf-4179-ae77-a26bd61c9fcf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\nafs_type = \"@@{NTX_EXISTING_AFS_TYPE}@@\"\nafs_host = \"@@{NTX_EXISTING_AFS_HOST}@@\"\nafs_sharedpath = \"@@{NTX_EXISTING_AFS_SHARED_PATH}@@\"\nsmb_username = \"@@{NTX_EXISTING_SMB_USERNAME}@@\"\nsmb_password = \"@@{NTX_EXISTING_SMB_PASSWORD}@@\"\nsmb_domain = \"@@{NTX_EXISTING_SMB_DOMAIN}@@\"\ntarget_size = @@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024\ntarget_name = \"AFS\" + afs_type + \"Target\"\ncount = 1\nfinish = 13\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nafs_type = afs_type.upper()\n\nif afs_type == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_TYPE' is a mandatory variable. Terminating\"\n  exit(1)\n      \nif afs_host == \"\" and afs_sharedpath == \"\" and target_name == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_HOST', 'NTX_EXISTING_AFS_SHARED_PATH', 'TARGET_NAME' are a mandatory variable. Terminating.\"\n  exit(1)\n  \ntest_target_url = api_url + \"\/targets\/test\"\nindex = 0\nheaders = {'content-type': \"application\/json\"}\n\nwhile(True):\n  if index == 0:\n    check_name = target_name\n  else:\n    check_name = target_name + \"-\" + str(index)\n  print check_name\n  payload = {\n    \"name\": check_name\n  }\n  response = urlreq(test_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  check = json.loads(response.content)\n  if check[\"message\"][\"details\"] != \"targets.name.exists.err\":\n    target_name = check_name\n    break\n  index += 1\n  \nif afs_type == 'NFS':\n  print \"INFO: Creating NFS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"NFS\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"nfsFileSystemDetails\": {\n      \"address\": afs_host,\n      \"sharedPath\": afs_sharedpath\n    },\n    \"advertisedCapacityInBytes\": target_size\n  }\n\nelif afs_type == 'SMB':\n  print \"INFO: Creating ABS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"SMB\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"smbFileSystemDetails\": {\n      \"username\": smb_username,\n      \"password\": smb_password,\n      \"domain\": smb_domain,\n      \"sharedPath\": afs_sharedpath,\n      \"address\": afs_host\n    }\n  }\n  \nelse:\n  print \"ERROR: 'NTX_EXISTING_AFS_TYPE' can only be 'SMB\/NFS'.\".format(afs_type)\n  exit(1)\n   \ncreate_target_url = api_url + \"\/targets\"\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n  \n\njobs_url = api_url + \"\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding target '{}' successful.\".format(target_name)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding target '{}' successful with Warning\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding target '{}' failed.\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Adding target '{}' in-progress retrying in 5 seconds.\".format(target_name)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add AFS Target"}],"description":"","message_list":[],"uuid":"5e1fc2c7-0f1f-4e17-9755-1d64c162d066","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Protocol to expose Nutanix Files storage (NFS or SMB)","data_type":"BASE","message_list":[],"uuid":"35fbc5a9-80e2-4cb6-8346-109987401d2a","value":"","label":"","state":"ACTIVE","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":["SMB","NFS"]},"name":"NTX_EXISTING_AFS_TYPE"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Nutanix Files hostname","data_type":"BASE","message_list":[],"uuid":"b416061a-7c67-4899-959c-2380ffc41b47","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_AFS_HOST"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Nutanix Files share","data_type":"BASE","message_list":[],"uuid":"fbce4631-f3bb-4036-8be1-3cf1833b0c09","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_AFS_SHARED_PATH"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"Domain name, only if configuring SMB","data_type":"BASE","message_list":[],"uuid":"32ce67ec-5998-413b-85ed-40f84dfece34","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_SMB_DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"Admin account user name, only if configuring SMB","data_type":"BASE","message_list":[],"uuid":"17898cd1-8dec-461a-93a6-5c9f0445bd15","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_SMB_USERNAME"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"Admin account password, only if configuring SMB","data_type":"BASE","message_list":[],"uuid":"c7cf18e1-9eb7-46c1-bfa2-0e113a138988","value":"","label":"","state":"ACTIVE","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"af22bcc6-1b15-4d82-ba21-c8836fbacd61"},"type":""},"editables":{"value":true},"is_hidden":false,"type":"SECRET","options":{},"name":"NTX_EXISTING_SMB_PASSWORD"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Size in TB of Nutanix Files share for HYCU backups","data_type":"BASE","message_list":[],"uuid":"e1ca387d-6db2-4752-8754-58b0e57c6ed8","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"STORAGE_SIZE_TB"}],"main_task_local_reference":{"kind":"app_task","name":"b9d7912e_dag","uuid":"9df03a37-d14f-42bb-8f0e-fae87bc37e48"},"name":"9b3988f4_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"14984955-de19-4e14-956a-c059c91b363c","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"0b1d4da2-9aba-4948-abe2-df792fbb52e4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"004e23b8-461f-431b-b3c1-eb5a2854ff33"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"8775fe78-13a8-4071-b019-c9a064613119"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d894c7e2-2203-4336-8b51-35ed5c5ba60b"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"8272f13f-a8e8-4509-9114-fc149e24ed94"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"e24f0a08-dd92-408f-89e2-44b6aa7223c9"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"49ae6d2e-b6eb-4f76-86ea-c39453497ce6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"e24f0a08-dd92-408f-89e2-44b6aa7223c9"},"edge_type":"inherent","type":"","uuid":"508b826b-3bbb-451a-8820-ccc5d5078424","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"49ae6d2e-b6eb-4f76-86ea-c39453497ce6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"8272f13f-a8e8-4509-9114-fc149e24ed94"},"edge_type":"inherent","type":"","uuid":"6f41e114-8c26-45f3-90ef-224ab0715913","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"e24f0a08-dd92-408f-89e2-44b6aa7223c9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d894c7e2-2203-4336-8b51-35ed5c5ba60b"},"edge_type":"inherent","type":"","uuid":"1a2b45e9-f261-42c0-8de2-8cdf03be1c04","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"8272f13f-a8e8-4509-9114-fc149e24ed94"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"004e23b8-461f-431b-b3c1-eb5a2854ff33"},"edge_type":"inherent","type":"","uuid":"a37d74b6-3269-425a-9adf-703d10959e3c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d894c7e2-2203-4336-8b51-35ed5c5ba60b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"8775fe78-13a8-4071-b019-c9a064613119"},"edge_type":"inherent","type":"","uuid":"789ee3ca-854d-4a0b-bd57-f97aff3f43c5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"d894c7e2-2203-4336-8b51-35ed5c5ba60b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"004e23b8-461f-431b-b3c1-eb5a2854ff33"},"edge_type":"inherent","type":"","uuid":"af0ae48e-5e23-46a2-871d-becc45382aa5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"8775fe78-13a8-4071-b019-c9a064613119"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"004e23b8-461f-431b-b3c1-eb5a2854ff33","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_31219e24_2383_4171_8d64_c9c9a520207d"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8775fe78-13a8-4071-b019-c9a064613119","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"e25c3006-1840-4af3-8334-c001f11d7641"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d894c7e2-2203-4336-8b51-35ed5c5ba60b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"9b056831-3e8b-4e10-a87b-469652bb985e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8272f13f-a8e8-4509-9114-fc149e24ed94","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"153555ae-a286-4edf-96b6-c6cccfdc3fad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e24f0a08-dd92-408f-89e2-44b6aa7223c9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"b2c26360-6d6b-4d2f-a430-4dafef405639"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"49ae6d2e-b6eb-4f76-86ea-c39453497ce6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"c89fe793-96b7-4a2e-9b43-7f24c74076b1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"0b1d4da2-9aba-4948-abe2-df792fbb52e4"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}},{"description":"System action for starting an application","message_list":[],"uuid":"9445fd4c-77b6-4595-9770-e6229120c568","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"94fdec9d-e5c2-4123-ad11-8597695dc4fd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"f150214b-4b2d-4467-8b8c-a5da83c0437c"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"838e1a7f-2966-424f-973c-b5b9584e47b8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"f150214b-4b2d-4467-8b8c-a5da83c0437c"},"edge_type":"inherent","type":"","uuid":"c527feb1-3b7a-4abf-8001-e767c8468519","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"838e1a7f-2966-424f-973c-b5b9584e47b8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f150214b-4b2d-4467-8b8c-a5da83c0437c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"ad1a878c-5f0b-4e90-8fe0-3c49f8f2d3bf"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"838e1a7f-2966-424f-973c-b5b9584e47b8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"9434c698-1e80-4be5-9ee3-9b672de5f3c3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"94fdec9d-e5c2-4123-ad11-8597695dc4fd"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}},{"description":"System action for restarting an application","message_list":[],"uuid":"1bed5dcc-b3fe-4390-af8c-8381531984c1","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"d5c37698-9c88-4621-a0ca-eb8e3df8c9d9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"f83d783f-7443-4ecf-8f5d-247c5e5d7eff"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"cd7c48b0-b50e-421b-a49b-53887f3c4442"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"f83d783f-7443-4ecf-8f5d-247c5e5d7eff"},"edge_type":"inherent","type":"","uuid":"ed2b1449-ef49-40df-bd5d-66b7e031ecc8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"cd7c48b0-b50e-421b-a49b-53887f3c4442"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f83d783f-7443-4ecf-8f5d-247c5e5d7eff","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"c34cea40-adab-4385-a011-c3f433e4b52a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cd7c48b0-b50e-421b-a49b-53887f3c4442","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"31cea0dd-27b1-4b6d-9eca-f35a401b9927"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"1b3f534e-ced3-43a0-8ed1-a3eb0cd9c7b2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"d5c37698-9c88-4621-a0ca-eb8e3df8c9d9"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}},{"description":"System action for stopping an application","message_list":[],"uuid":"9bd27a5f-4bbc-48bd-9701-1122f9f9c245","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"734e1d29-b237-4d1d-b5eb-696529602128","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"dab0fb33-7c1e-4c3d-9b85-730049ddd265"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"4fd045aa-0b91-4775-a31d-2c69655a2c23"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"dab0fb33-7c1e-4c3d-9b85-730049ddd265"},"edge_type":"inherent","type":"","uuid":"a71a2f63-26d4-485a-bdbc-f2c67df47c76","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"4fd045aa-0b91-4775-a31d-2c69655a2c23"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"dab0fb33-7c1e-4c3d-9b85-730049ddd265","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4fd045aa-0b91-4775-a31d-2c69655a2c23","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"56c1b15a-d43b-446b-9f32-c6486c162fd6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"}],"description":"","message_list":[],"uuid":"f8c7ed92-42ac-4742-ba64-be68e29173cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"734e1d29-b237-4d1d-b5eb-696529602128"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"ba735bc5-1b17-46af-b50c-6c99a2417960","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"d04fc230-67ef-4731-9604-a7d56b3e9877","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"61045903-ef6d-4139-8e08-5a24f7c35c1c"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"0fd404b3-5fc7-49d4-b9ea-f268988d843d"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"2a64f436-05b3-4b23-81a4-0c0ed369d6e2"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cdebedd5-527f-4c83-91c2-acfa1e119369"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"932725d9-6bdb-4ba1-94b1-1a5034131139"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"61045903-ef6d-4139-8e08-5a24f7c35c1c"},"edge_type":"inherent","type":"","uuid":"c9cd9ac1-0f52-497a-9e81-f62227fa085b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"0fd404b3-5fc7-49d4-b9ea-f268988d843d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"0fd404b3-5fc7-49d4-b9ea-f268988d843d"},"edge_type":"inherent","type":"","uuid":"8ee7cc79-f2c2-44d9-8cd7-6c453009b17b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"2a64f436-05b3-4b23-81a4-0c0ed369d6e2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cdebedd5-527f-4c83-91c2-acfa1e119369"},"edge_type":"inherent","type":"","uuid":"abe68d00-d562-4e9d-bfb5-2d58759d9364","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"932725d9-6bdb-4ba1-94b1-1a5034131139"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"2a64f436-05b3-4b23-81a4-0c0ed369d6e2"},"edge_type":"inherent","type":"","uuid":"1e445b37-8dbc-4af4-a510-5060284dafd5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cdebedd5-527f-4c83-91c2-acfa1e119369"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"61045903-ef6d-4139-8e08-5a24f7c35c1c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0fd404b3-5fc7-49d4-b9ea-f268988d843d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"dd66bd32-56f4-4d21-9151-0088c716a757"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2a64f436-05b3-4b23-81a4-0c0ed369d6e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bc5342d3-e4c5-4a89-8c5f-c312461a7635"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cdebedd5-527f-4c83-91c2-acfa1e119369","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"18de4077-ad05-458c-ba7e-98bbb97d2126"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"932725d9-6bdb-4ba1-94b1-1a5034131139","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"b803b9d6-2050-471b-8dc8-9f8dbab037f0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"d04fc230-67ef-4731-9604-a7d56b3e9877"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"93b8365d-44cb-4195-9149-1a4e7d39e35f","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"59560321-de11-43c1-8838-d2248a8ad679"},"retries":"0","description":"","type":"DAG","uuid":"b79f934c-17d2-4a69-9121-81583f4ba509","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"38943f49-fe97-4f63-9f07-767bae165598"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bd340a7a-da11-4f4e-816e-1be562a02c0d"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cb95cd57-7178-4758-a438-dd1e593771c3"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"3d6367f2-72d1-45ca-9b1f-72fc3ed85b81"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"38943f49-fe97-4f63-9f07-767bae165598"},"edge_type":"inherent","type":"","uuid":"582ae74f-adcc-48e7-b06a-72459daaf255","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bd340a7a-da11-4f4e-816e-1be562a02c0d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cb95cd57-7178-4758-a438-dd1e593771c3"},"edge_type":"inherent","type":"","uuid":"86dc5fac-970e-4236-b9d2-5f2f8b54b31e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d","uuid":"3d6367f2-72d1-45ca-9b1f-72fc3ed85b81"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bd340a7a-da11-4f4e-816e-1be562a02c0d"},"edge_type":"inherent","type":"","uuid":"3987fa83-5e4b-478b-bec6-ee75ff5997f4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"cb95cd57-7178-4758-a438-dd1e593771c3"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"38943f49-fe97-4f63-9f07-767bae165598","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"737d27b5-6d9f-4fc9-a098-3bea27167c74"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"bd340a7a-da11-4f4e-816e-1be562a02c0d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cb95cd57-7178-4758-a438-dd1e593771c3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312","uuid":"9913b098-6158-40a4-9549-dba9cd1cc33b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_859954f2_a4e4_4035_aa66_551f18ccc312"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"31219e24-2383-4171-8d64-c9c9a520207d"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"3d6367f2-72d1-45ca-9b1f-72fc3ed85b81","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_31219e24_2383_4171_8d64_c9c9a520207d"}],"description":"","message_list":[],"uuid":"5bf83353-7114-4710-b5ad-a3d92d68d16b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_59560321_de11_43c1_8838_d2248a8ad679","uuid":"b79f934c-17d2-4a69-9121-81583f4ba509"},"name":"SYS_GEN__Runbook_Application_59560321_de11_43c1_8838_d2248a8ad679"}}],"message_list":[],"uuid":"59560321-de11-43c1-8838-d2248a8ad679","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM hostname","data_type":"BASE","message_list":[],"uuid":"fbb309c7-0eb0-4434-aedc-5c2db0a8e6ab","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_HOSTNAME"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM static IP","data_type":"BASE","message_list":[],"uuid":"2ca78be0-75cd-4b40-9828-67f2acfdbdd3","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_IP"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM network subnet prefix","data_type":"BASE","message_list":[],"uuid":"f9d70fb7-5905-497d-be37-c00a401fd986","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_SUBNET_PREFIX"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM network gateway","data_type":"BASE","message_list":[],"uuid":"ee389c43-b07e-4282-93c7-7d87234df93b","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_GATEWAY"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM network DNS","data_type":"BASE","message_list":[],"uuid":"6d2f710a-1f56-4592-80bc-70a4dc1f6467","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_DNS"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"HYCU controller VM network domain","data_type":"BASE","message_list":[],"uuid":"71e9390a-de9d-4054-8fa2-f6e373a4efbf","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Nutanix production cluster\/s HYCU will protect (ex. https:\/\/cluster1:port1,https:\/\/cluster2:port2,...)","data_type":"BASE","message_list":[],"uuid":"a22e95fd-9fda-4434-9012-51f12b24a673","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_PRODUCTION_CLUSTERS_URL"},{"regex":{},"val_type":"STRING","is_mandatory":true,"description":"Nutanix storage cluster URL hosting HYCU controller VM (ex. https:\/\/cluster:port)","data_type":"BASE","message_list":[],"uuid":"a9b6db0b-52d4-41dc-a870-98506cc6d254","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_STORAGE_CLUSTER_URL"}],"name":"Default"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"1849183e-01d2-4199-aa11-85f8813541e8","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"53fd4a7b-4fb5-402c-a1b8-479c7ee0e526","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"45bd48d0-70e1-4f73-b800-191b9440f893"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"45bd48d0-70e1-4f73-b800-191b9440f893","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},"edge_type":"user_defined","type":"","uuid":"804bd245-9e19-4c1e-932d-eb7f8aae7b8e","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},"edge_type":"user_defined","type":"","uuid":"60f419b3-5b9d-4824-a676-c5e6a17f8a74","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"3ea1c0a8-9865-4c3b-9ca4-dc84999255cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"502f4be9-7932-4a04-82fe-e205ff753326","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043"},"name":"79a2ab44_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}],"description":"","message_list":[],"uuid":"153555ae-a286-4edf-96b6-c6cccfdc3fad","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"53fd4a7b-4fb5-402c-a1b8-479c7ee0e526"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for creating an application","message_list":[],"uuid":"6506fd94-5991-4852-9360-0ce7321b57f8","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"fa3710e7-4025-448b-a508-9dc2ce73477c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"0d8908a2-ddc1-4f9b-9d7c-19ad691e6d75"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fb315d2e-0b54-479d-b7d1-c1f6c6463f65"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"5fd64256-4539-495f-b08a-17ed1073eb76"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fb315d2e-0b54-479d-b7d1-c1f6c6463f65"},"edge_type":"inherent","type":"","uuid":"1d9fb0a0-f7b0-43b2-b77d-835953a0074b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"5fd64256-4539-495f-b08a-17ed1073eb76"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"0d8908a2-ddc1-4f9b-9d7c-19ad691e6d75"},"edge_type":"inherent","type":"","uuid":"930c96bb-4ede-46dd-ba23-9ad09b24744a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"fb315d2e-0b54-479d-b7d1-c1f6c6463f65"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0d8908a2-ddc1-4f9b-9d7c-19ad691e6d75","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"153555ae-a286-4edf-96b6-c6cccfdc3fad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fb315d2e-0b54-479d-b7d1-c1f6c6463f65","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"b2c26360-6d6b-4d2f-a430-4dafef405639"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5fd64256-4539-495f-b08a-17ed1073eb76","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"bdc1422c-5d0d-41e8-8c2f-03d5b83ad5dc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"fa3710e7-4025-448b-a508-9dc2ce73477c"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"dbf77a3d-b34a-4555-a0a0-adc6ccc23f07","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"e56c989a-465d-44bc-b626-84dd98a65294","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"606ec4b7-0494-4853-b983-819fdddb18b9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"606ec4b7-0494-4853-b983-819fdddb18b9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},"edge_type":"user_defined","type":"","uuid":"804bd245-9e19-4c1e-932d-eb7f8aae7b8e","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},"edge_type":"user_defined","type":"","uuid":"60f419b3-5b9d-4824-a676-c5e6a17f8a74","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"3ea1c0a8-9865-4c3b-9ca4-dc84999255cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"502f4be9-7932-4a04-82fe-e205ff753326","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043"},"name":"79a2ab44_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}],"description":"","message_list":[],"uuid":"bc5342d3-e4c5-4a89-8c5f-c312461a7635","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"e56c989a-465d-44bc-b626-84dd98a65294"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"bc6e3606-c5ab-4a82-a858-828bb6d9f1d4","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"99dc9ce8-728a-4501-b28b-bb02b778d0e9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"46c54e41-281a-41ff-80c2-76748b5d14b8"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"f64bd9e8-0383-46df-8b43-d08f392400fd"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"18f64963-515a-4fdc-9928-b46e58bec76f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"46c54e41-281a-41ff-80c2-76748b5d14b8"},"edge_type":"inherent","type":"","uuid":"86cd72f9-c2a1-4eb7-9bdc-7d83cb3b6026","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"f64bd9e8-0383-46df-8b43-d08f392400fd"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"f64bd9e8-0383-46df-8b43-d08f392400fd"},"edge_type":"inherent","type":"","uuid":"e9926b9e-900a-491e-96ba-83134c1d706f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"18f64963-515a-4fdc-9928-b46e58bec76f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"46c54e41-281a-41ff-80c2-76748b5d14b8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f64bd9e8-0383-46df-8b43-d08f392400fd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"dd66bd32-56f4-4d21-9151-0088c716a757"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"18f64963-515a-4fdc-9928-b46e58bec76f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"bc5342d3-e4c5-4a89-8c5f-c312461a7635"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}],"description":"","message_list":[],"uuid":"a542e573-d647-4467-a6bc-6e185ec4f970","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"99dc9ce8-728a-4501-b28b-bb02b778d0e9"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"d26c1076-041a-4adb-9541-864793ffa401","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"99ffd133-d3e2-48b1-93ac-b9210ccd3dbf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"61f23fc2-ed63-4fd8-af58-cddf7dcc02d7"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"39295b57-4e24-47c7-9023-e78be948cddb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"61f23fc2-ed63-4fd8-af58-cddf7dcc02d7"},"edge_type":"inherent","type":"","uuid":"679ef952-60bc-4003-b843-f87450f1a2dc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"39295b57-4e24-47c7-9023-e78be948cddb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"61f23fc2-ed63-4fd8-af58-cddf7dcc02d7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"737d27b5-6d9f-4fc9-a098-3bea27167c74"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"39295b57-4e24-47c7-9023-e78be948cddb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}],"description":"","message_list":[],"uuid":"e6951a6f-3708-4bc1-8ad7-a2fa0de4a07f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"99ffd133-d3e2-48b1-93ac-b9210ccd3dbf"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for starting an application","message_list":[],"uuid":"3b783ddd-6094-4c70-84fa-21453f1c2a34","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"391edfee-b6fb-4f2e-b94a-17193cbabb70","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"8d11a158-19b0-43a2-bbd9-be368c21da8c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8d11a158-19b0-43a2-bbd9-be368c21da8c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"decbd72e-6edc-4c1b-87a1-8ca3d82ee2cc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"391edfee-b6fb-4f2e-b94a-17193cbabb70"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for restarting an application","message_list":[],"uuid":"a248fd09-973a-42c0-b6ac-4a5bb5f1e973","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"a4400654-ef2e-4d8f-a29c-41700b1782f0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"f269270e-ca49-43e9-9c2d-f8a4c3d74240"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f269270e-ca49-43e9-9c2d-f8a4c3d74240","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"31cea0dd-27b1-4b6d-9eca-f35a401b9927"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"5f68c4c9-dce6-4e90-ae72-745289fc1e21","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"a4400654-ef2e-4d8f-a29c-41700b1782f0"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}},{"description":"System action for stopping an application","message_list":[],"uuid":"d83cf39c-325e-411c-ba9a-6ae0df118338","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"a8dc98c9-9139-4a4f-838e-9bd1f20c6ea4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2","uuid":"3e8a9451-8453-418b-a702-4a0f0c811b48"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3e8a9451-8453-418b-a702-4a0f0c811b48","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_f0709e07_07d4_4982_bab6_06c5ec40b5a2"}],"description":"","message_list":[],"uuid":"8f9d23b9-d106-4bc3-95e0-bd6a3e77c37f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f","uuid":"a8dc98c9-9139-4a4f-838e-9bd1f20c6ea4"},"name":"SYS_GEN__Runbook_Package_e9fa8f51_d66d_4975_add1_e4da2dfe603f"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"}],"uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},"edge_type":"user_defined","type":"","uuid":"804bd245-9e19-4c1e-932d-eb7f8aae7b8e","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},"edge_type":"user_defined","type":"","uuid":"60f419b3-5b9d-4824-a676-c5e6a17f8a74","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","description":"","type":"EXEC","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"3ea1c0a8-9865-4c3b-9ca4-dc84999255cb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","description":"","type":"DAG","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"502f4be9-7932-4a04-82fe-e205ff753326","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043"},"name":"79a2ab44_runbook"}},"variable_list":[],"name":"SetHYCU"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"a7c8316d-76dc-493e-bcd2-eeb87a91ae8a","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"e5f39b7e-b11d-4174-be63-3f2af141dba6","child_tasks_local_reference_list":[{"kind":"app_task","name":"Image Fetch task for VM","uuid":"e7988e4e-ea0a-459c-9abd-0ebc2b28139d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"SUBSTRATE_IMAGE_FETCH","uuid":"e7988e4e-ea0a-459c-9abd-0ebc2b28139d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"","name":"HYCU_3_5_2","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.2\/hycu-3.5.2-124.qcow2","version":{"product_version":"3.5.2","type":"","product_name":"HYCU"},"architecture":"X86_64","type":""},"description":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Image Fetch task for VM"}],"description":"","message_list":[],"uuid":"e25c3006-1840-4af3-8334-c001f11d7641","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"e5f39b7e-b11d-4174-be63-3f2af141dba6"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for creating an application","message_list":[],"uuid":"d169c9a0-3ad0-46ec-bda6-e2efbaaafadd","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"80a9684a-5504-4865-8b06-82166ac27431","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"4e4cf106-5067-4d28-81b4-9506f8b8150f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4e4cf106-5067-4d28-81b4-9506f8b8150f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"e25c3006-1840-4af3-8334-c001f11d7641"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"1726b91e-5c4d-4551-928f-b625eae35382","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"80a9684a-5504-4865-8b06-82166ac27431"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for starting an application","message_list":[],"uuid":"73961b81-4af5-48a0-a77b-0108f4376113","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"ecf7baa8-2885-4988-9548-1a948b96b51a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"a34c32f0-e5f4-4a7e-876c-78e8745d4781","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"ecf7baa8-2885-4988-9548-1a948b96b51a"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for restarting an application","message_list":[],"uuid":"3e75a283-19f1-45a9-9de5-66da9d0ae172","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"5bc4716f-da10-4de1-b132-28c34bc095f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"a0dc201e-3659-407a-8ce2-d1f0aac0acce","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"5bc4716f-da10-4de1-b132-28c34bc095f7"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for stopping an application","message_list":[],"uuid":"0bdf82d6-138c-485b-b863-3265259fd1a3","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"07445bbb-67d8-4a0f-91b3-f6163882730f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"ac15cb58-2e2e-4031-a227-61182da97b0c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"07445bbb-67d8-4a0f-91b3-f6163882730f"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f0cc330d-aae1-4003-b2f4-39e5fb2880f2","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"c55682b3-61e1-4963-b660-b29ced4f6bd6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"cdfcb1f3-253b-466d-ac21-b901dc212cfc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"c55682b3-61e1-4963-b660-b29ced4f6bd6"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"101dc61d-6dbe-4096-ad97-416a6b964b1d","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"retries":"0","description":"","type":"DAG","uuid":"3a4ba795-e14d-491d-9d02-f6132428ff2c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}],"description":"","message_list":[],"uuid":"11096f87-240b-4206-b0af-6fc22d8ec5f6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc","uuid":"3a4ba795-e14d-491d-9d02-f6132428ff2c"},"name":"SYS_GEN__Runbook_Package_3764b1f1_84e0_2b2e_ac47_6505ec3ea3fc"}}],"message_list":[],"service_local_reference_list":[],"uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc","state":"ACTIVE","version":"","editables":{},"type":"SUBSTRATE_IMAGE","options":{"type":"","name":"HYCU_3_5_2","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.2\/hycu-3.5.2-124.qcow2","version":{"product_version":"3.5.2","type":"","product_name":"HYCU"},"architecture":"X86_64","type":""},"description":""},"variable_list":[],"name":"HYCU_3_5_2"}]},"name":"HYCU X DPaaS on Nutanix Storage 3"},"spec":{"name":"HYCU X DPaaS on Nutanix Storage 3","resources":{"service_definition_list":[{"singleton":false,"name":"Nutanix","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"9b84e61d-e510-4376-9813-74061fdd999f","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"e20cbb61_dag"}],"description":"","uuid":"b2c26360-6d6b-4d2f-a430-4dafef405639","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e20cbb61_dag","uuid":"9b84e61d-e510-4376-9813-74061fdd999f"},"name":"9368a69c_runbook"},"type":"system","uuid":"f3f4094c-6e42-4a2d-b075-3f831757c4b3"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"1ce6d027-0edd-48fc-9924-235bdb06fa7d","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"395e33b6_dag"}],"description":"","uuid":"dd66bd32-56f4-4d21-9151-0088c716a757","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"395e33b6_dag","uuid":"1ce6d027-0edd-48fc-9924-235bdb06fa7d"},"name":"cc274171_runbook"},"type":"system","uuid":"8949be04-ce2e-4c7c-83c7-4f2c2e2a3fda"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"ba8e15ad-c72c-47db-9f2e-4bede0ec706c","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"260516ed_dag"}],"description":"","uuid":"64c5ad36-4654-48eb-bcfe-48faaad9f650","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"260516ed_dag","uuid":"ba8e15ad-c72c-47db-9f2e-4bede0ec706c"},"name":"b77a0435_runbook"},"type":"system","uuid":"b25be1f1-c04c-454d-8d27-375e8eff2495"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"1be6ba28-e741-414f-94b8-20075e7fce1f","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"eeeab6e2_dag"}],"description":"","uuid":"9cb4d073-efe7-4bf3-8833-3871fe280a25","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"eeeab6e2_dag","uuid":"1be6ba28-e741-414f-94b8-20075e7fce1f"},"name":"97b28e71_runbook"},"type":"system","uuid":"1575f092-de3c-4a9f-81b2-3cfa60d0dd47"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"6ebfdd83-3f8f-474b-b5e4-6e08cb595fc8","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"443c3cae_dag"}],"description":"","uuid":"31cea0dd-27b1-4b6d-9eca-f35a401b9927","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"443c3cae_dag","uuid":"6ebfdd83-3f8f-474b-b5e4-6e08cb595fc8"},"name":"0203ed8c_runbook"},"type":"system","uuid":"976b0181-20ec-442f-ae39-c9aa67e64a5e"}],"description":"","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","uuid":"4e5855c0-2f27-4bc5-9719-e3f7c1537fad","name":"TARGET_IQN","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"9f1fb6cf-9876-473e-b872-da55abee5572","name":"INITIATOR_IQN","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"142fa5e2-aae9-43a7-b42c-dc7a4940098f","name":"CONTAINER_UUID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""}],"depends_on_list":[]}],"substrate_definition_list":[{"name":"CalmDeploymentHYCU","action_list":[],"uuid":"859954f2-a4e4-4035-aa66-551f18ccc312","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"hycu-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","name":"HYCU_3_5_2","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"hycu","description":"","uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"862e6c45-57b0-4188-bee7-e9df3694d01e"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"credentialsHYCU"},{"username":"admin","description":"","uuid":"48d7dc98-4ecf-4612-a3cd-46afb6267a54","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"119b312e-566d-4c61-8623-c0044383d377"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"NTX_CREDENTIALS"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"d0f2c1f8_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"}],"description":"","published_service_local_reference_list":[],"min_replicas":"1","depends_on_list":[],"max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"859954f2-a4e4-4035-aa66-551f18ccc312"},"type":"GREENFIELD","variable_list":[],"uuid":"31219e24-2383-4171-8d64-c9c9a520207d"}],"description":"","action_list":[{"description":"","name":"Add ABS Target","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"238ae48c-4289-4587-89af-ab929bbfc916","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get Initiator IQN","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5"},{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"},{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"},{"kind":"app_task","name":"Add ABS Target","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891"}],"attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"},"edge_type":"user_defined","type":"","uuid":"32e37a12-928e-4d12-bfc2-703c84c69e80","to_task_reference":{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"}},{"from_task_reference":{"kind":"app_task","name":"Create VG","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b"},"edge_type":"user_defined","type":"","uuid":"4d1855e6-2b6a-41a3-9e66-cf23aa94d79f","to_task_reference":{"kind":"app_task","name":"Add ABS Target","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891"}},{"from_task_reference":{"kind":"app_task","name":"Get Initiator IQN","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5"},"edge_type":"user_defined","type":"","uuid":"34135fb0-fb10-4987-9546-42506a6c2f75","to_task_reference":{"kind":"app_task","name":"Create Container","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"795298d9_dag"},{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"3a2013d5-0cd1-4cb4-aa96-cdb3bd830ce5","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ntime = 5\nresponse = ''\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/iscsiinitiator\"\n\ntry:\n  response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n  get_iscsiinitiator = json.loads(response.content)\n  iqn = get_iscsiinitiator[\"entities\"][0][\"initiatorname\"]\nexcept Exception as e:\n  if response == \"\":\n    print \"ERROR: No response form HYCU controller or controller not reachable.\"\n  else:\n    get_iscsiinitiator = json.loads(response.content)\n    status = get_iscsiinitiator['message']['titleDescription']\n    print \"ERROR Message: {0}: Response code:({1}).\".format(status,response.status_code)\n    exit(1)\n\nprint \"INFO: Initiator Name successfully acquired: {}.\".format(iqn)\n\nprint \"INITIATOR_IQN=\" + iqn\n","eval_variables":["INITIATOR_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Get Initiator IQN"},{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"ba96551f-7ab4-44fe-a394-2e8ba0b1056c","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nhycu = '@@{HYCU_HOSTNAME}@@'\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntime = 30\nstatus ={'200':'INFO: UUID sucessfully acquired.','201':'INFO: Container succesfully created.','401':'ERROR: Invalid username or password for storage cluster.','202':'ERROR: Creating Storage Container','422':'A storage container already exists' }\ncount = 1\nfinish = 13\nkey = ''\n\nif hycu == \"\" :\n    hycu = 'HYCU_Controller-'\n\nstorage_container_name = hycu + \"-HYCU-CONTAINER\"\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/storage_containers\"\n\nprint \"Creating Container for ABS target: {}.\".format(storage_container_name)\n\nwhile(True):\n  payload = {\n    \"compression_delay_in_secs\": 3600,\n    \"compression_enabled\": \"true\",\n    \"enable_software_encryption\": \"false\",\n    \"finger_print_on_write\": \"off\",\n    \"name\": storage_container_name\n  }\n  index = count  \n  count += 1\n  response = urlreq(api_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"201\":\n    break\n  elif key == \"422\":\n    storage_container_name = storage_container_name + \"-\" + str(index)\n    print \"INFO: Added index to Container Name '{}'\".format(index)\n    print \"Retrying in 5 seconds\"\n    sleep(5)\n  else:\n    print \"Retrying in 5 seconds.\"\n    sleep (5)\n  if count == finish:\n    print \"ERROR: Failed to create Container '{}'. Terminating\".format(storage_container_name)\n    exit(1)\n    \ncount = 1\n\nuuid_url = api_url + \"\/?search_string=\" + storage_container_name\n\nwhile (True):\n  count += 1\n  response = urlreq(uuid_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"200\":\n    break\n  else:\n    print \"INFO: Retrying in 5 seconds\"\n    sleep(5)\n  if count == finish:\n    print \"ERROR: Failed to get Container '{}' UUID. Terminating\".format(storage_container_name)\n    exit(1)\n  \nstorage_containers = json.loads(response.content)\nstorage_container_uuid = storage_containers[\"entities\"][0][\"storage_container_uuid\"]\n\nprint (status[key]) + \" Container name: '{0}', uuid:'{1}'\".format(storage_container_name, storage_container_uuid)\nprint \"CONTAINER_UUID=\" + storage_container_uuid","eval_variables":["CONTAINER_UUID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Create Container"},{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"d230e6d4-8a97-4a1a-94f1-1ba4c4fa556b","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\nstorage_container_uuid = '@@{CONTAINER_UUID}@@'\nvgname = 'HYCU-Volume-Group'\ntarget_vg_size = (@@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024)*1.7\niqn = '@@{INITIATOR_IQN}@@'\ncount = 1\nfinish = 13\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/\"\n\ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    vgname = vgname + '-' + iqn\n\nprint \"INFO: Creating volume group '{}'.\".format(vgname)\n\ncreate_vg_url = api_url + \"volume_groups\"\npayload = {\n  \"disk_list\": [{\n    \"create_config\": {\n      \"size\": target_vg_size,\n      \"storage_container_uuid\": storage_container_uuid\n      },\n    \"index\": 0\n    }],\n    \"is_shared\": True,\n    \"name\": vgname\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(create_vg_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\n  if response.status_code == 201:\n    print \"INFO: Volume group '{}' successfully created\".format(vgname)\n    break\n  else:\n    print \"ERROR: creation of volume group '{}' failed. Retrying in 5 seconds.\".format(vgname)\n    sleep(5)\n  if count == finish:\n    print \"ERROR: creation of volume group '{}' failed. Terminating.\".format(vgname)\n    exit(1)\n\nvg_create_status = json.loads(response.content)\ntask_uuid = vg_create_status['task_uuid']\n\nsleep(5)\n\ncheck_vg_creation_url = api_url + \"tasks\/\" + task_uuid\nresponse = urlreq(check_vg_creation_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvg_create_status = json.loads(response.content)\n\nif vg_create_status['progress_status'] != \"Succeeded\":\n  print \"ERROR: creation of volume group '{}' failed.\".format(vgname)\n  exit(1)\nelse:\n  print \"INFO: creation of volume group '{}' Successful.\".format(vgname)\n    \ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    iscsi_target=vg[\"iscsi_target\"]\n    vgUUID=vg['uuid']\n\nprint \"INFO: Attaching VG {} to node.\".format(vgname)\n\nattach_url = check_vg_url + \"\/\" + vgUUID + \"\/open\"\n\npayload = {\n  \"iscsi_client\": {\n    \"client_address\": iqn\n  },\n  \"operation\": \"ATTACH\"\n}\n\nresponse = urlreq(attach_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\nif response.status_code != 201:\n  print \"ERROR: Attaching vg '{}' failed.\".format(vgname)\n  print response.status_code\nelse:\n  attach_status = json.loads(response.content)\n  status = str(attach_status['value'])\n  if status == 'True':\n    print \"INFO: Attaching vg '{}' Successful.\".format(vgname)\n    print \"TARGET_IQN=iqn.2010-06.com.nutanix:\" + iscsi_target\n  else:\n    print \"ERROR: Attaching vg '{}' failed.\".format(vgname)","eval_variables":["TARGET_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Create VG"},{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"8369a6c1-ddfc-42c2-97d5-674a94150891","child_tasks_local_reference_list":[],"attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nhycu_username = 'admin'\nhycu_password = 'admin'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntarget_name = \"NutanixABS\"\ndata_service_port = \"3260\"\ntarget_iqn = \"@@{TARGET_IQN}@@\"\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\ncount = 1\nfinish = 6\n\niscsi_api =  prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/cluster\/\"\nhycu_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\" + \"\/targets\"\n\nprint \"INFO: Acquiring iSCSI Data Services IP from '{}' storage cluster\".format(prism_ip)\nresponse = urlreq(iscsi_api, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\niscsi = json.loads(response.content)\ndataIP = iscsi['cluster_external_data_services_ipaddress']\nexternalIP = iscsi['cluster_external_ipaddress']\n\nif dataIP != None:\n  print \"INFO: Data Service IP acquired '{}'\".format(dataIP)\nelse:\n  print \"INFO: Data Service IP does not exists on this storage cluster, using cluster virutal IP\".format(externalIP)\n  dataIP = externalIP\n    \nprint \"INFO: Checking existance of target on HYCU '{}'\".format(hycu_ip)\n\nresponse = urlreq(hycu_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\ntargets = json.loads(response.content)\n\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    target_name = '@@{HYCU_HOSTNAME}@@' + \"-\" + target_name\n\nprint \"Creating target '{}' on controller\".format(target_name)\n\npayload ={\n  \"name\": target_name,\n  \"description\": \"\",\n  \"targetType\": \"I_SCSI\",\n  \"allowedBackupStreams\": 1,\n  \"encryption\": \"False\",\n  \"iScsiStorageDetails\": {\n    \"port\": data_service_port,\n    \"address\": dataIP,\n    \"chap\": \"False\",\n    \"targetname\": target_iqn,\n    \"username\": \"\",\n    \"password\": \"\",\n    \"mutualChap\": \"False\"\n    }\n}\n\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(hycu_url, verb='POST', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n\njobs_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\n  if response.status_code != 200:\n    print \"ERROR: Failed to get job status '{}'. Retrying in 5 seconds.\".format(job_uuid)\n    count +=1\n    sleep(5)\n  if response.status_code == 500:\n    print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n    count += 1\n    sleep(5)\n  job_status = json.loads(response.content)\n  if job_status[\"entities\"][0][\"status\"] == \"OK\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful.\".format(target_name,job_uuid)\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful with warning.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n    print \"ERROR: Adding ABS Target '{0}', uuid '{1}' failed.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    exit(1)\n  else:\n    print \"INFO: Getting job status '{}' in-progress sleeping for 5 seconds.\".format(job_uuid)\n    sleep(5)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"Add ABS Target"}],"description":"","uuid":"e0fb845b-cc49-414a-9e0e-5e040e0c41ab","variable_list":[{"val_type":"STRING","is_mandatory":true,"uuid":"0ee199bb-410b-4af6-b3e9-98c93003c0f7","name":"STORAGE_SIZE_TB","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Size in TB of Nutanix ABS target for HYCU backups"}],"main_task_local_reference":{"kind":"app_task","name":"795298d9_dag","uuid":"238ae48c-4289-4587-89af-ab929bbfc916"},"name":"33f47972_runbook"},"type":"user","uuid":"d49aa34f-5f5f-44bd-b03b-72abb5722b89"},{"description":"","name":"Add AFS Target","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"9df03a37-d14f-42bb-8f0e-fae87bc37e48","child_tasks_local_reference_list":[{"kind":"app_task","name":"Add AFS Target","uuid":"77ade5c6-60bf-4179-ae77-a26bd61c9fcf"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"b9d7912e_dag"},{"target_any_local_reference":{"kind":"app_service","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2","name":"Nutanix"},"retries":"0","description":"","uuid":"77ade5c6-60bf-4179-ae77-a26bd61c9fcf","child_tasks_local_reference_list":[],"attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\nafs_type = \"@@{NTX_EXISTING_AFS_TYPE}@@\"\nafs_host = \"@@{NTX_EXISTING_AFS_HOST}@@\"\nafs_sharedpath = \"@@{NTX_EXISTING_AFS_SHARED_PATH}@@\"\nsmb_username = \"@@{NTX_EXISTING_SMB_USERNAME}@@\"\nsmb_password = \"@@{NTX_EXISTING_SMB_PASSWORD}@@\"\nsmb_domain = \"@@{NTX_EXISTING_SMB_DOMAIN}@@\"\ntarget_size = @@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024\ntarget_name = \"AFS\" + afs_type + \"Target\"\ncount = 1\nfinish = 13\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nafs_type = afs_type.upper()\n\nif afs_type == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_TYPE' is a mandatory variable. Terminating\"\n  exit(1)\n      \nif afs_host == \"\" and afs_sharedpath == \"\" and target_name == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_HOST', 'NTX_EXISTING_AFS_SHARED_PATH', 'TARGET_NAME' are a mandatory variable. Terminating.\"\n  exit(1)\n  \ntest_target_url = api_url + \"\/targets\/test\"\nindex = 0\nheaders = {'content-type': \"application\/json\"}\n\nwhile(True):\n  if index == 0:\n    check_name = target_name\n  else:\n    check_name = target_name + \"-\" + str(index)\n  print check_name\n  payload = {\n    \"name\": check_name\n  }\n  response = urlreq(test_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  check = json.loads(response.content)\n  if check[\"message\"][\"details\"] != \"targets.name.exists.err\":\n    target_name = check_name\n    break\n  index += 1\n  \nif afs_type == 'NFS':\n  print \"INFO: Creating NFS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"NFS\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"nfsFileSystemDetails\": {\n      \"address\": afs_host,\n      \"sharedPath\": afs_sharedpath\n    },\n    \"advertisedCapacityInBytes\": target_size\n  }\n\nelif afs_type == 'SMB':\n  print \"INFO: Creating ABS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"SMB\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"smbFileSystemDetails\": {\n      \"username\": smb_username,\n      \"password\": smb_password,\n      \"domain\": smb_domain,\n      \"sharedPath\": afs_sharedpath,\n      \"address\": afs_host\n    }\n  }\n  \nelse:\n  print \"ERROR: 'NTX_EXISTING_AFS_TYPE' can only be 'SMB\/NFS'.\".format(afs_type)\n  exit(1)\n   \ncreate_target_url = api_url + \"\/targets\"\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n  \n\njobs_url = api_url + \"\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding target '{}' successful.\".format(target_name)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding target '{}' successful with Warning\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding target '{}' failed.\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Adding target '{}' in-progress retrying in 5 seconds.\".format(target_name)\n      sleep(5)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"Add AFS Target"}],"description":"","uuid":"5e1fc2c7-0f1f-4e17-9755-1d64c162d066","variable_list":[{"val_type":"STRING","is_mandatory":true,"uuid":"35fbc5a9-80e2-4cb6-8346-109987401d2a","name":"NTX_EXISTING_AFS_TYPE","value":"","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"type":"LOCAL","options":{"choices":["SMB","NFS"]},"description":"Protocol to expose Nutanix Files storage (NFS or SMB)"},{"val_type":"STRING","is_mandatory":true,"uuid":"b416061a-7c67-4899-959c-2380ffc41b47","name":"NTX_EXISTING_AFS_HOST","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Nutanix Files hostname"},{"val_type":"STRING","is_mandatory":true,"uuid":"fbce4631-f3bb-4036-8be1-3cf1833b0c09","name":"NTX_EXISTING_AFS_SHARED_PATH","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Nutanix Files share"},{"val_type":"STRING","is_mandatory":false,"uuid":"32ce67ec-5998-413b-85ed-40f84dfece34","name":"NTX_EXISTING_SMB_DOMAIN","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Domain name, only if configuring SMB"},{"val_type":"STRING","is_mandatory":false,"uuid":"17898cd1-8dec-461a-93a6-5c9f0445bd15","name":"NTX_EXISTING_SMB_USERNAME","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Admin account user name, only if configuring SMB"},{"val_type":"STRING","is_mandatory":false,"uuid":"c7cf18e1-9eb7-46c1-bfa2-0e113a138988","name":"NTX_EXISTING_SMB_PASSWORD","label":"","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"8ba17448-09a4-4ede-a41d-18b84054f3e6"}},"editables":{"value":true},"type":"SECRET","description":"Admin account password, only if configuring SMB"},{"val_type":"STRING","is_mandatory":true,"uuid":"e1ca387d-6db2-4752-8754-58b0e57c6ed8","name":"STORAGE_SIZE_TB","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Size in TB of Nutanix Files share for HYCU backups"}],"main_task_local_reference":{"kind":"app_task","name":"b9d7912e_dag","uuid":"9df03a37-d14f-42bb-8f0e-fae87bc37e48"},"name":"9b3988f4_runbook"},"type":"user","uuid":"274f572e-78e1-40f7-8393-506bbf85e38c"}],"name":"Default","variable_list":[{"val_type":"STRING","is_mandatory":true,"uuid":"fbb309c7-0eb0-4434-aedc-5c2db0a8e6ab","name":"HYCU_HOSTNAME","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM hostname"},{"val_type":"STRING","is_mandatory":true,"uuid":"2ca78be0-75cd-4b40-9828-67f2acfdbdd3","name":"HYCU_IP","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM static IP"},{"val_type":"STRING","is_mandatory":true,"uuid":"f9d70fb7-5905-497d-be37-c00a401fd986","name":"HYCU_SUBNET_PREFIX","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM network subnet prefix"},{"val_type":"STRING","is_mandatory":true,"uuid":"ee389c43-b07e-4282-93c7-7d87234df93b","name":"HYCU_GATEWAY","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM network gateway"},{"val_type":"STRING","is_mandatory":true,"uuid":"6d2f710a-1f56-4592-80bc-70a4dc1f6467","name":"HYCU_DNS","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM network DNS"},{"val_type":"STRING","is_mandatory":true,"uuid":"71e9390a-de9d-4054-8fa2-f6e373a4efbf","name":"HYCU_DOMAIN","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"HYCU controller VM network domain"},{"val_type":"STRING","is_mandatory":true,"uuid":"a22e95fd-9fda-4434-9012-51f12b24a673","name":"NTX_PRODUCTION_CLUSTERS_URL","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":"Nutanix production cluster\/s HYCU will protect (ex. https:\/\/cluster1:port1,https:\/\/cluster2:port2,...)"},{"val_type":"STRING","is_mandatory":true,"uuid":"a9b6db0b-52d4-41dc-a870-98506cc6d254","name":"NTX_STORAGE_CLUSTER_URL","value":"","label":"","editables":{"value":true},"type":"LOCAL","description":"Nutanix storage cluster URL hosting HYCU controller VM (ex. https:\/\/cluster:port)"}],"uuid":"59560321-de11-43c1-8838-d2248a8ad679"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"053370c0-a37d-4e05-a44b-b5a6ab2f870f"},"package_definition_list":[{"uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"}],"name":"SetHYCU","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","name":"530e63bc_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},"edge_type":"user_defined","type":"","uuid":"804bd245-9e19-4c1e-932d-eb7f8aae7b8e","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},"edge_type":"user_defined","type":"","uuid":"60f419b3-5b9d-4824-a676-c5e6a17f8a74","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"82f1cfe9-2144-41a4-894c-80c945df778c"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","name":"HYCU Services","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"4d67b4f7-44d4-4696-8f7a-ff8d33c1d66a"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","name":"Production Cluster","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"99687aba-4aad-4916-ae9e-889b6f08926c"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"f0709e07-07d4-4982-bab6-06c5ec40b5a2"},"retries":"0","name":"Storage Cluster","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b8c60a33-b04c-44c8-a3f1-28f04671e9d3"}],"name":"359cb705_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"82f1cfe9-2144-41a4-894c-80c945df778c"},"uuid":"3ea1c0a8-9865-4c3b-9ca4-dc84999255cb"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"e9fa8f51-d66d-4975-add1-e4da2dfe603f"},"retries":"0","name":"0f2f0fe8_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043"}],"name":"79a2ab44_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"e2d62ee9-57bf-4fb3-9f18-48c2cbc8f043"},"uuid":"502f4be9-7932-4a04-82fe-e205ff753326"}},"variable_list":[],"description":""},{"name":"HYCU_3_5_2","type":"SUBSTRATE_IMAGE","uuid":"3764b1f1-84e0-2b2e-ac47-6505ec3ea3fc","variable_list":[],"options":{"name":"HYCU_3_5_2","resources":{"image_type":"DISK_IMAGE","source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.2\/hycu-3.5.2-124.qcow2","version":{"product_version":"3.5.2","product_name":"HYCU"},"architecture":"X86_64"}}}],"client_attrs":{"31219e24-2383-4171-8d64-c9c9a520207d":{"y":313.2204776583,"x":699.4158597946}}},"description":"* [HYCU](https:\/\/@@{AHV_HYCU.address}@@:8443)\n* UI username\/password [admin]\/[admin]\n* SSH username\/password [hycu]\/[hycu\/4u]"},"api_version":"3.0","metadata":{"last_update_time":"1558332905450221","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"edb3758b-2f1b-4494-ba32-c295a6594737","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":8,"creation_time":"1555910227368756","name":"HYCU X DPaaS on Nutanix Storage 3"}}