{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"effd2104-1d8f-4056-baf3-ba53f0fa1a3c","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"07bc54ec-3ab1-4981-8f47-1297b3f27299","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"030017c3_dag"}],"description":"","message_list":[],"uuid":"0c7a78f2-054d-470a-8a42-505a3282036e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"07bc54ec-3ab1-4981-8f47-1297b3f27299"},"name":"5730e30f_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f1655afb-3f5c-4488-8807-12e186533c30","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"304ce4f0-a27a-457f-a83c-6eb0e558efae","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f5f997d_dag"}],"description":"","message_list":[],"uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"304ce4f0-a27a-457f-a83c-6eb0e558efae"},"name":"b01e7edf_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"adac83ef-41bd-4d50-a4fe-c4c9b3abd86f","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"87c79372-04ad-4f09-920a-8f99790813b4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c2b90e7d_dag"}],"description":"","message_list":[],"uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"87c79372-04ad-4f09-920a-8f99790813b4"},"name":"0263f5a9_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"c29fd3f8-3169-4470-b6b2-91d52bfae2ff","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"b5143435-d979-4482-b0a8-58faf2cd094c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"00b1cc9f_dag"}],"description":"","message_list":[],"uuid":"25be24bb-ab4a-4d37-975c-cb338295e110","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"b5143435-d979-4482-b0a8-58faf2cd094c"},"name":"8aadc288_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"e4dcdee2-2d70-4a76-9057-c8d4ca08c281","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"ed322f53-cfb0-4098-90b2-20e3f62e36c9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","message_list":[],"uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"ed322f53-cfb0-4098-90b2-20e3f62e36c9"},"name":"a059f54d_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"2c73121d-da77-4b86-9916-e50e45f3353e","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"DAG","uuid":"bd6e0594-9185-4497-b2ec-2a9e3d844e06","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"fe19c4a9-4b23-44d1-9ff3-0175a757d3b6"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"fe19c4a9-4b23-44d1-9ff3-0175a757d3b6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"bd6e0594-9185-4497-b2ec-2a9e3d844e06"},"name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}}],"message_list":[],"uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"85ce70be-4b42-4d76-b1c4-d4e1f19488c6","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"EXECUTION_MODE"}],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"9611df3a-3bd6-42ac-a1d6-c3e8371aa04b","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"be8f86bb-3ffd-4f12-82ac-bbd1c737766e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"b8ae6204-aa19-4149-b94c-940da9773f75"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"3b878398-3927-48ed-81be-ea83c577c6a4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"b8ae6204-aa19-4149-b94c-940da9773f75"},"edge_type":"inherent","type":"","uuid":"419f0ebb-31fa-4d58-85c7-7a7e55d1e100","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"3b878398-3927-48ed-81be-ea83c577c6a4"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"b8ae6204-aa19-4149-b94c-940da9773f75","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Win2k12r2_Sysprep.qcow2","uuid":"4df886ca-c671-4025-ae29-406c562bd5d0"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"3b878398-3927-48ed-81be-ea83c577c6a4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"81d847e0-f9cb-4f1c-9f84-7415de2ec59d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"be8f86bb-3ffd-4f12-82ac-bbd1c737766e"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for powering on an application","message_list":[],"uuid":"e53ed6d3-0e60-4156-a732-9794ab3cbca5","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"d6336ca0-f36a-47a6-892b-40d96296bdea","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"5cb93caf-685b-4766-b72a-58f5f70b0a55"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"5d9bd08f-81f2-45a8-833a-32d0691f0766"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"5cb93caf-685b-4766-b72a-58f5f70b0a55"},"edge_type":"inherent","type":"","uuid":"8e52d1bb-08c8-4712-a87f-7622777f30f0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"5d9bd08f-81f2-45a8-833a-32d0691f0766"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"5cb93caf-685b-4766-b72a-58f5f70b0a55","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"5d9bd08f-81f2-45a8-833a-32d0691f0766","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"b41ed450-7dba-4cbe-b46a-8887047ff1f1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"d6336ca0-f36a-47a6-892b-40d96296bdea"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for restarting an application","message_list":[],"uuid":"6d97b5e2-028b-4432-9dd0-4d88b3be89ff","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"cb939b08-12d5-47e8-b174-39931666b549","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2ba876dc-e1c9-4496-91d0-ab21dccfcea8"},{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"8180dac9-e25d-4555-b2c7-d26cbaab8a39"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2ba876dc-e1c9-4496-91d0-ab21dccfcea8"},"edge_type":"inherent","type":"","uuid":"abe8538f-d7a4-4223-bf2a-496f4a2b04c9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"8180dac9-e25d-4555-b2c7-d26cbaab8a39"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"2ba876dc-e1c9-4496-91d0-ab21dccfcea8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"8180dac9-e25d-4555-b2c7-d26cbaab8a39","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_AHV_MSSQL2014_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"3c026bb3-b0ed-4e63-93d1-2ca78469d055","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"cb939b08-12d5-47e8-b174-39931666b549"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for suspending an application","message_list":[],"uuid":"c4b8b6b9-e4ff-4c7c-b29e-f72c4e008031","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"cd5b6201-0d5e-4302-887b-e6bd29a896e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"fe508bbb-9f08-4f88-a772-6793915d412a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"cd5b6201-0d5e-4302-887b-e6bd29a896e6"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for modifying an application","message_list":[],"uuid":"7f11116d-a8e5-48b1-a431-2bc74d915171","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"2c10f08f-889d-43d2-acd7-178811834976","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"1ae94f67-ab00-4ca3-81a4-f5433a23c7d0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2c10f08f-889d-43d2-acd7-178811834976"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for powering off an application","message_list":[],"uuid":"caf3f2f4-dea2-462a-a8ce-46541ebb8fef","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"23b68722-a153-4e94-844c-7238a6735e1f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"7492783b-966d-437f-a476-760fa02d9206"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"7492783b-966d-437f-a476-760fa02d9206","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"0edb3e62-63c3-4411-af5f-44b935e10c24","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"23b68722-a153-4e94-844c-7238a6735e1f"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"8d9522c0-c873-4297-baa2-e6488c9a2724","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"bffa262b-e24f-4342-a66c-a5f542edaab1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"9cf015e3-b860-45a2-908f-c04bf7dd165f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"9cf015e3-b860-45a2-908f-c04bf7dd165f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"1ffb7d04-de82-4fb3-8f9b-d2bf4de2dfde","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"bffa262b-e24f-4342-a66c-a5f542edaab1"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ebe425c9-f9c3-45c6-a54e-1ac38c813a14","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"DAG","uuid":"96fa3281-6e61-439a-8def-3416a2b8627e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"54ac8286-cfe6-4b47-a737-a08bccff53c0"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"54ac8286-cfe6-4b47-a737-a08bccff53c0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"ffd7aaaf-ffac-4fd1-98fc-ec8127e28117","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"96fa3281-6e61-439a-8def-3416a2b8627e"},"name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}}],"message_list":[],"uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","categories":{"AppFamily":"Databases"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Win2k12r2_Sysprep.qcow2","uuid":"4df886ca-c671-4025-ae29-406c562bd5d0"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"CDROM","disk_address":{"adapter_type":"IDE","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":8,"type":""}}}]}},"variable_list":[],"name":"AHV_MSSQL2014"},{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"fa4741c7-6c06-4a58-86c3-474406d1d311","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"0a3aa8e4-3d37-4989-9f85-f3aa85787a3a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"c5f9465d-f467-41ec-a95b-16cd75622730"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"cf3ece95-b570-4124-bd3e-654b852544fe"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"c5f9465d-f467-41ec-a95b-16cd75622730"},"edge_type":"inherent","type":"","uuid":"9b7a2127-900a-4c19-a02e-22150cdab440","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"cf3ece95-b570-4124-bd3e-654b852544fe"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"PROVISION_VCENTER","uuid":"c5f9465d-f467-41ec-a95b-16cd75622730","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"DatastoreCluster","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020423a-ccea-0898-707d-a4581bfbaf1a","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Provision_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"cf3ece95-b570-4124-bd3e-654b852544fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"dc0c872a-312e-4d4e-91c8-52219fcebe7e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"0a3aa8e4-3d37-4989-9f85-f3aa85787a3a"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for powering on an application","message_list":[],"uuid":"755d0295-28f3-487e-b476-fc76959d3ca4","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"7882e85d-3e28-4e69-a232-88f2faad33a3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"539706ec-923b-4778-8747-5ac61c49a294"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"600d2126-ed76-43da-bf3b-0ea61e15930e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"539706ec-923b-4778-8747-5ac61c49a294"},"edge_type":"inherent","type":"","uuid":"c15a008c-3cf4-48e5-88a1-b671b8c51175","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"600d2126-ed76-43da-bf3b-0ea61e15930e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"539706ec-923b-4778-8747-5ac61c49a294","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_PowerOn_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"600d2126-ed76-43da-bf3b-0ea61e15930e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"b46028e0-952a-4539-9e03-999ca0c04818","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"7882e85d-3e28-4e69-a232-88f2faad33a3"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for restarting an application","message_list":[],"uuid":"1789d8e0-430d-4a0f-92dd-1042092e7d51","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"0bb535ee-bf85-4d3c-b0d7-279be1e0cc01","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"e8d61a85-521d-4ab8-87c1-e6ddcb7c934f"},{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"2058933d-202d-41d1-bd40-1577dbd7147e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"e8d61a85-521d-4ab8-87c1-e6ddcb7c934f"},"edge_type":"inherent","type":"","uuid":"ccd5601a-915c-4229-aa04-1e7215df82f8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"2058933d-202d-41d1-bd40-1577dbd7147e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"e8d61a85-521d-4ab8-87c1-e6ddcb7c934f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Restart66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"2058933d-202d-41d1-bd40-1577dbd7147e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_VMware_MSSQL2014_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"e1326aa9-5173-40b4-b686-c2fde3eea318","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"0bb535ee-bf85-4d3c-b0d7-279be1e0cc01"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for suspending an application","message_list":[],"uuid":"aa172745-0f1d-4c32-ab18-f10f0f7c22c2","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"2c8a6d36-a4d3-4229-b1cb-05d983553a94","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"d095e76c-2161-400d-a5c7-4b8ec0aa774b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"2c8a6d36-a4d3-4229-b1cb-05d983553a94"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for modifying an application","message_list":[],"uuid":"1d873410-88de-4d85-a056-708ac69c1954","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"f44422e5-e832-4fb0-85c4-a655061b3bba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"06abc464-5058-4c2f-abdb-f0855d0a792b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"f44422e5-e832-4fb0-85c4-a655061b3bba"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for powering off an application","message_list":[],"uuid":"365c5829-b729-47f2-b3aa-b6fdd0ad79e9","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"eda4c88f-8f7e-4bb1-a58e-b8ed09ff24b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Poweroff_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"34438967-9b1e-49cc-9e96-bdd950cdf1f1"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"34438967-9b1e-49cc-9e96-bdd950cdf1f1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Poweroff_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"26a8b4f7-6b0d-47de-9877-a9f4ea786d72","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"eda4c88f-8f7e-4bb1-a58e-b8ed09ff24b0"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"9c24c58b-50ed-4c96-b695-88087397eb2a","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"ffbe16f3-35dd-4e71-80eb-cb81d5e245c4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Delete_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"d6d22789-a86c-44a3-9c5f-ac63a24e8e10"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DELETE_VCENTER","uuid":"d6d22789-a86c-44a3-9c5f-ac63a24e8e10","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Delete_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"836ce118-7b27-4122-b6d0-ecba724e7b75","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"ffbe16f3-35dd-4e71-80eb-cb81d5e245c4"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"330c5dba-893f-44f0-bea5-17d5619f3fda","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"DAG","uuid":"5b4541ae-fd1c-45bc-bb93-670e94de5e69","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"fbeb9241-be10-47f3-ae4b-900f23cc973f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"fbeb9241-be10-47f3-ae4b-900f23cc973f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"92ddfb22-2064-4a4d-bd54-82978cc86156","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"5b4541ae-fd1c-45bc-bb93-670e94de5e69"},"name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}}],"message_list":[],"uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{},"template_nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"DatastoreCluster","drs_mode":true,"cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020423a-ccea-0898-707d-a4581bfbaf1a","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[]}},"variable_list":[],"name":"VMware_MSSQL2014"}],"credential_definition_list":[{"username":"administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","state":"ACTIVE","message_list":[],"uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"91a9b7a2-e565-4dc9-9385-afd39b082ee9","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"ab6dde04-ff47-4ae4-9c50-c07ffd62f528","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"16bf2d62-c937-43cc-8814-96b02e1c5ad0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018","uuid":"20787c97-dcae-41bd-b827-e6c524e593f4"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"fc6fddbe-3278-4b7b-941f-ee11cf9cedf5"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"95b6f2bd-2f34-43c8-adf2-3520229f80ee"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f3f3e445-02f5-4aaf-aca0-967410879a79"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8fb7e2f0-2cf8-4411-83e8-54295a963659"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f3f3e445-02f5-4aaf-aca0-967410879a79"},"edge_type":"inherent","type":"","uuid":"223b04bc-a17c-4bcf-aa61-f48c79934c86","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8fb7e2f0-2cf8-4411-83e8-54295a963659"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"95b6f2bd-2f34-43c8-adf2-3520229f80ee"},"edge_type":"inherent","type":"","uuid":"7cb569e2-0d93-4833-b0ba-c257be407aa6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f3f3e445-02f5-4aaf-aca0-967410879a79"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"fc6fddbe-3278-4b7b-941f-ee11cf9cedf5"},"edge_type":"inherent","type":"","uuid":"336b0485-8cbc-4e63-98fc-ae67be19b10b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"95b6f2bd-2f34-43c8-adf2-3520229f80ee"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018","uuid":"20787c97-dcae-41bd-b827-e6c524e593f4"},"edge_type":"inherent","type":"","uuid":"6282d973-cafa-4e06-ac11-bd220f6c82d5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"fc6fddbe-3278-4b7b-941f-ee11cf9cedf5"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"20787c97-dcae-41bd-b827-e6c524e593f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fc6fddbe-3278-4b7b-941f-ee11cf9cedf5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"81d847e0-f9cb-4f1c-9f84-7415de2ec59d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"95b6f2bd-2f34-43c8-adf2-3520229f80ee","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"fa139c04-f93b-4bc9-9dec-2815266cf889"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f3f3e445-02f5-4aaf-aca0-967410879a79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8fb7e2f0-2cf8-4411-83e8-54295a963659","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"b2412503-ec20-4169-b25e-fab4bbd8fc78","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"16bf2d62-c937-43cc-8814-96b02e1c5ad0"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for starting an application","message_list":[],"uuid":"f879958e-ee9e-4ad0-b7d5-3541832f70f1","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"d8a8f921-a779-403f-961a-a213e5541772","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"fc3cfc30-b0d1-4cba-8a68-eaf043afb959"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"023d41f6-a9b7-46e6-8225-b9d4749cdfa8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"fc3cfc30-b0d1-4cba-8a68-eaf043afb959"},"edge_type":"inherent","type":"","uuid":"e000b655-2263-4b8e-8e3f-6b5649687ece","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"023d41f6-a9b7-46e6-8225-b9d4749cdfa8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fc3cfc30-b0d1-4cba-8a68-eaf043afb959","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"b41ed450-7dba-4cbe-b46a-8887047ff1f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"023d41f6-a9b7-46e6-8225-b9d4749cdfa8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"7c12e94d-7400-4a5d-9b12-bdea5897df00","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"d8a8f921-a779-403f-961a-a213e5541772"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for restarting an application","message_list":[],"uuid":"29e5045b-77e5-45be-a40b-75f57b1f7ab5","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"105822ed-6ad5-4326-abc8-396963432f81","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"234cdf52-e3dd-49e0-8d47-657e8dd31467"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6725376d-cfb9-4d37-8b97-f81b1960f03d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"234cdf52-e3dd-49e0-8d47-657e8dd31467"},"edge_type":"inherent","type":"","uuid":"392fd88a-1c85-4e26-abb7-ff504881357e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6725376d-cfb9-4d37-8b97-f81b1960f03d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"234cdf52-e3dd-49e0-8d47-657e8dd31467","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"3c026bb3-b0ed-4e63-93d1-2ca78469d055"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6725376d-cfb9-4d37-8b97-f81b1960f03d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"4294880a-82b3-46e9-b099-862f8fe30bd0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"105822ed-6ad5-4326-abc8-396963432f81"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for stopping an application","message_list":[],"uuid":"e6115139-85bb-4b48-812f-f71d6a72218f","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"e3a7a54c-e1d7-46d1-8bba-dbd11beff8cf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"e040b7e4-23a9-4bbe-9ab3-d0b0ec1d75d5"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"71a8739d-ded2-4092-9e9f-f893f3a08857"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"e040b7e4-23a9-4bbe-9ab3-d0b0ec1d75d5"},"edge_type":"inherent","type":"","uuid":"b9640566-5c2c-478f-b624-c46eec7eb2fa","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"71a8739d-ded2-4092-9e9f-f893f3a08857"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e040b7e4-23a9-4bbe-9ab3-d0b0ec1d75d5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"71a8739d-ded2-4092-9e9f-f893f3a08857","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"0edb3e62-63c3-4411-af5f-44b935e10c24"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"9d1cc7aa-3aab-4ab3-85d3-b5ead99ba4c3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"e3a7a54c-e1d7-46d1-8bba-dbd11beff8cf"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"1b5a3210-0e22-4d2c-8cb4-9e0bdebc6fc5","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"b921f712-af69-45d5-beec-7a37b4f3f713","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"31da7e48-5fe2-4fc1-992f-bec43dabd8e6"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8eeb9df5-e177-4b66-a0f8-53d5c05c18a4"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6357f310-7f45-4f50-ae2d-0aad12bb32c0"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"1eb32666-8192-4887-b721-099ae0364414"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"5a8c97c4-a0cc-4f9a-9e74-4e552a11927b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"31da7e48-5fe2-4fc1-992f-bec43dabd8e6"},"edge_type":"inherent","type":"","uuid":"cb68e8dd-c961-4546-81e6-cf5fd80f4312","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8eeb9df5-e177-4b66-a0f8-53d5c05c18a4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8eeb9df5-e177-4b66-a0f8-53d5c05c18a4"},"edge_type":"inherent","type":"","uuid":"62aa1466-cfc9-4077-b1b4-6a194ce5e6db","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6357f310-7f45-4f50-ae2d-0aad12bb32c0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"1eb32666-8192-4887-b721-099ae0364414"},"edge_type":"inherent","type":"","uuid":"ff81d133-6e89-49fc-89d7-b0d9bc11d1ee","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"5a8c97c4-a0cc-4f9a-9e74-4e552a11927b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6357f310-7f45-4f50-ae2d-0aad12bb32c0"},"edge_type":"inherent","type":"","uuid":"1062ff9e-b43a-4e6b-b979-984051f5f1a8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"1eb32666-8192-4887-b721-099ae0364414"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"31da7e48-5fe2-4fc1-992f-bec43dabd8e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8eeb9df5-e177-4b66-a0f8-53d5c05c18a4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6357f310-7f45-4f50-ae2d-0aad12bb32c0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6bbf6098-acfb-4c64-9fa8-b2f45e38b55c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1eb32666-8192-4887-b721-099ae0364414","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"1ffb7d04-de82-4fb3-8f9b-d2bf4de2dfde"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"5a8c97c4-a0cc-4f9a-9e74-4e552a11927b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"7acd0469-aae8-429b-983d-89a5565ebbcf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"b921f712-af69-45d5-beec-7a37b4f3f713"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for scaleout","message_list":[],"uuid":"88c795b7-aca1-4d0f-b358-b8bd0b1abafd","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"b765f809-0d16-4f49-b9db-1516d29425fc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_aea31feb_6944_418b_b23c_6ce514733018","uuid":"3de531ff-6ae1-4812-a164-0292beaf1714"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"SCALING","uuid":"3de531ff-6ae1-4812-a164-0292beaf1714","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"07ed2e3d-9efa-4494-82d8-a8a79ae34b38","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"ab8eddd6-f9ba-48ab-b35b-878659ecd09c","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"b765f809-0d16-4f49-b9db-1516d29425fc"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for scalein","message_list":[],"uuid":"60294edc-2d89-4c68-9be4-236dc760ba54","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"0c720b2e-0529-4f67-813d-c906c3b177eb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_aea31feb_6944_418b_b23c_6ce514733018","uuid":"da51bc3e-185e-45cc-94e6-97098910a4b8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"SCALING","uuid":"da51bc3e-185e-45cc-94e6-97098910a4b8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"0f909174-1968-445b-a550-0ffdb7e49b75","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"dadb123f-e757-463a-8905-d282abbbb61e","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"0c720b2e-0529-4f67-813d-c906c3b177eb"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"a044c39e-2fc7-4b33-9376-6ed22d664d2f","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DAG","uuid":"d6b8f1d9-4792-4ef6-bb9e-dd80155997fe","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"43b9c2e6-4c0a-417b-87d2-2cd0295b9e9c"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"f05c004d-fd97-49c5-9c4f-143bb310e09d"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f781d999-6007-411e-b911-f62daaf07786"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"c406afd1-9bbe-4316-bbb2-5c83b96e6eaa"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"43b9c2e6-4c0a-417b-87d2-2cd0295b9e9c"},"edge_type":"inherent","type":"","uuid":"144dc3e6-2afe-408c-96da-17db5661f926","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"f05c004d-fd97-49c5-9c4f-143bb310e09d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f781d999-6007-411e-b911-f62daaf07786"},"edge_type":"inherent","type":"","uuid":"cd8ba62a-8460-4153-b668-f3954ed289c7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"c406afd1-9bbe-4316-bbb2-5c83b96e6eaa"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"f05c004d-fd97-49c5-9c4f-143bb310e09d"},"edge_type":"inherent","type":"","uuid":"5207615a-c163-4c7c-ad40-bddc0353f250","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f781d999-6007-411e-b911-f62daaf07786"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"43b9c2e6-4c0a-417b-87d2-2cd0295b9e9c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"f05c004d-fd97-49c5-9c4f-143bb310e09d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f781d999-6007-411e-b911-f62daaf07786","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"ffd7aaaf-ffac-4fd1-98fc-ec8127e28117"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"c406afd1-9bbe-4316-bbb2-5c83b96e6eaa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"0c940cb2-4670-4d3b-ad79-08988b0ac321","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_aea31feb_6944_418b_b23c_6ce514733018","uuid":"d6b8f1d9-4792-4ef6-bb9e-dd80155997fe"},"name":"SYS_GEN__Runbook_Deployment_aea31feb_6944_418b_b23c_6ce514733018"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"aea31feb-6944-418b-b23c-6ce514733018","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"}],"substrate_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"0c64c768-0e85-4811-a9a7-34f5b0b2d195","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"0abf69ae-7872-4481-a86e-5589ba468866","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018","uuid":"1b51744a-aeef-418b-9664-12c88dc546ce"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f9b566dc-b53a-4028-8de7-31d7f94645a6"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"8590f3d6-338f-40bc-94f5-6747eb5d464f"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"5ec45169-240b-412d-912f-ed1247ef584d"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6b361a61-ad60-47d8-a787-47b9fc8b60ba"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"5ec45169-240b-412d-912f-ed1247ef584d"},"edge_type":"inherent","type":"","uuid":"5584239a-9041-4cea-8c1c-1616888d1859","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6b361a61-ad60-47d8-a787-47b9fc8b60ba"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"8590f3d6-338f-40bc-94f5-6747eb5d464f"},"edge_type":"inherent","type":"","uuid":"ba55214f-4731-4ff5-b19f-2df9d77e4a51","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"5ec45169-240b-412d-912f-ed1247ef584d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f9b566dc-b53a-4028-8de7-31d7f94645a6"},"edge_type":"inherent","type":"","uuid":"18a13199-cf07-42f7-8a40-0fb3bcfc1b39","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"8590f3d6-338f-40bc-94f5-6747eb5d464f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018","uuid":"1b51744a-aeef-418b-9664-12c88dc546ce"},"edge_type":"inherent","type":"","uuid":"3cc5e853-d1b5-499b-8a8c-e502c3bb61cf","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f9b566dc-b53a-4028-8de7-31d7f94645a6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"1b51744a-aeef-418b-9664-12c88dc546ce","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_aea31feb_6944_418b_b23c_6ce514733018"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f9b566dc-b53a-4028-8de7-31d7f94645a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"81d847e0-f9cb-4f1c-9f84-7415de2ec59d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8590f3d6-338f-40bc-94f5-6747eb5d464f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"fa139c04-f93b-4bc9-9dec-2815266cf889"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5ec45169-240b-412d-912f-ed1247ef584d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6b361a61-ad60-47d8-a787-47b9fc8b60ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"cc1a4ba9-6997-427b-bab0-d0e4b569691b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"0abf69ae-7872-4481-a86e-5589ba468866"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}},{"description":"System action for starting an application","message_list":[],"uuid":"ebf0bfa8-b580-416c-a3b8-7d6d06e5d52d","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"86f8a0c5-fd17-45e0-8ba4-70007296ea85","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"26e22919-4433-4df7-a473-a958542fd04d"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"7cadee3c-6f2a-47fd-93e5-73274cae46f8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"26e22919-4433-4df7-a473-a958542fd04d"},"edge_type":"inherent","type":"","uuid":"672a6d44-01b0-484a-a6e9-14d89535bbf8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"7cadee3c-6f2a-47fd-93e5-73274cae46f8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"26e22919-4433-4df7-a473-a958542fd04d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"b41ed450-7dba-4cbe-b46a-8887047ff1f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7cadee3c-6f2a-47fd-93e5-73274cae46f8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"4e317560-5a7c-451c-91cf-55e7f6999ecf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"86f8a0c5-fd17-45e0-8ba4-70007296ea85"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}},{"description":"System action for restarting an application","message_list":[],"uuid":"4e7c8376-dfea-42ed-bcc3-3fa3b729814e","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"b6f29d2b-97bb-4382-a253-dc2904008c4d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f67de88a-f06c-4882-89be-f2eba26244e8"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d9dba58f-8610-4424-8e1a-21c0b101b217"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"f67de88a-f06c-4882-89be-f2eba26244e8"},"edge_type":"inherent","type":"","uuid":"ec3262b0-8fa5-43af-8dd6-22bd9ea309a8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d9dba58f-8610-4424-8e1a-21c0b101b217"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f67de88a-f06c-4882-89be-f2eba26244e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"3c026bb3-b0ed-4e63-93d1-2ca78469d055"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d9dba58f-8610-4424-8e1a-21c0b101b217","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"dccd76e7-2911-46ab-a80a-29a28d9024b2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"b6f29d2b-97bb-4382-a253-dc2904008c4d"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}},{"description":"System action for stopping an application","message_list":[],"uuid":"b3c98b34-f0a7-4c66-a0de-3867a48c4b6b","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"2bae2f03-0e82-4d85-bb8a-3e5617330738","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d20ccf72-6e77-4452-ba33-a7b5ffd53334"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"ac49babd-29f3-44c7-a2e3-fa8c34598cc6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d20ccf72-6e77-4452-ba33-a7b5ffd53334"},"edge_type":"inherent","type":"","uuid":"2857e891-a575-49c1-8aa5-47ed6a08b54b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"ac49babd-29f3-44c7-a2e3-fa8c34598cc6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d20ccf72-6e77-4452-ba33-a7b5ffd53334","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ac49babd-29f3-44c7-a2e3-fa8c34598cc6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"0edb3e62-63c3-4411-af5f-44b935e10c24"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"}],"description":"","message_list":[],"uuid":"63d61267-322b-48a8-a119-b02440898735","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"2bae2f03-0e82-4d85-bb8a-3e5617330738"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"4498f20a-7922-4b4d-be25-4bff42e70fa0","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"ed472de2-ef90-4b9d-a6f9-52c324e168d4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d5ec2000-da15-49ba-a771-3a298ad43f07"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f362bfc3-b90e-4278-a8aa-df3adf1ede08"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"c074523a-1d4b-43b7-9454-0e00ae59cd39"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"61630e21-730e-4208-ad01-b67d3abb4807"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"a9593b8a-0f70-44c1-a4dd-48a7e04ce36a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d5ec2000-da15-49ba-a771-3a298ad43f07"},"edge_type":"inherent","type":"","uuid":"2cc184a3-9e33-48cf-a937-8e332517d2e7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f362bfc3-b90e-4278-a8aa-df3adf1ede08"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f362bfc3-b90e-4278-a8aa-df3adf1ede08"},"edge_type":"inherent","type":"","uuid":"7227dcaf-4143-40a6-8b90-afeff349d77c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"c074523a-1d4b-43b7-9454-0e00ae59cd39"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"61630e21-730e-4208-ad01-b67d3abb4807"},"edge_type":"inherent","type":"","uuid":"aa717410-829a-49e7-853e-761dcd0a71d3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"a9593b8a-0f70-44c1-a4dd-48a7e04ce36a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"c074523a-1d4b-43b7-9454-0e00ae59cd39"},"edge_type":"inherent","type":"","uuid":"3cf5ebd5-36b5-4ac4-8b74-c17b2b626b7a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"61630e21-730e-4208-ad01-b67d3abb4807"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d5ec2000-da15-49ba-a771-3a298ad43f07","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f362bfc3-b90e-4278-a8aa-df3adf1ede08","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c074523a-1d4b-43b7-9454-0e00ae59cd39","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6bbf6098-acfb-4c64-9fa8-b2f45e38b55c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"61630e21-730e-4208-ad01-b67d3abb4807","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"1ffb7d04-de82-4fb3-8f9b-d2bf4de2dfde"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"a9593b8a-0f70-44c1-a4dd-48a7e04ce36a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"fac9532b-6e72-4c92-ac95-e9f7b8c78e9f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"ed472de2-ef90-4b9d-a6f9-52c324e168d4"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"4a94cfdf-7126-472a-91c6-79aabbc248bb","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},"retries":"0","description":"","type":"DAG","uuid":"c6396887-b9bf-4a42-b75b-ef4fc6d4505f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8f5ffd80-42d7-42ff-ba67-0d58b4fc3c9e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6768fc0f-3271-4c93-93f4-46635393cf53"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2944bdaa-6e14-4115-a997-786483470ad6"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"68976f7c-c0e4-4a55-bbfa-c71f5e2002a1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8f5ffd80-42d7-42ff-ba67-0d58b4fc3c9e"},"edge_type":"inherent","type":"","uuid":"3798ea18-b288-4230-bd61-13b72ef0db2f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6768fc0f-3271-4c93-93f4-46635393cf53"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2944bdaa-6e14-4115-a997-786483470ad6"},"edge_type":"inherent","type":"","uuid":"7e52357e-71e0-4772-95c9-8b6b3176f82c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018","uuid":"68976f7c-c0e4-4a55-bbfa-c71f5e2002a1"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6768fc0f-3271-4c93-93f4-46635393cf53"},"edge_type":"inherent","type":"","uuid":"29d3b68e-fa62-4eca-a287-a46599fefa3b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"2944bdaa-6e14-4115-a997-786483470ad6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8f5ffd80-42d7-42ff-ba67-0d58b4fc3c9e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"6768fc0f-3271-4c93-93f4-46635393cf53","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2944bdaa-6e14-4115-a997-786483470ad6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236","uuid":"ffd7aaaf-ffac-4fd1-98fc-ec8127e28117"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_04b534b3_84d4_4a60_8c82_3fb62a760236"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment","uuid":"aea31feb-6944-418b-b23c-6ce514733018"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"68976f7c-c0e4-4a55-bbfa-c71f5e2002a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_aea31feb_6944_418b_b23c_6ce514733018"}],"description":"","message_list":[],"uuid":"104289e4-5a2f-45ab-ac1f-4ac0b48fdfe6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8","uuid":"c6396887-b9bf-4a42-b75b-ef4fc6d4505f"},"name":"SYS_GEN__Runbook_Application_26a97468_d200_4d0f_ad0b_c07f5f0a08f8"}}],"message_list":[],"uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"6ce0a72e-5414-4430-88a9-34572a878aa5","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"dfb4ce84-d169-4240-a6cd-1289c4fbf37b","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d35d338a-6a18-4d7c-8a28-736b427cc3d8","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f9d6ff7a-bf7d-4257-89d2-58b388ff0e5a","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"Nutanix"},{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"b46de94d-cef3-45d8-a624-965490b34ed9","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"0b97bcb6-25db-48e0-aa82-34e2359173ba","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"92215a4f-b452-43e8-addc-b9c609ce7bda"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"802d6e44-6c53-44f4-9866-8b6f539621e9"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"6ab40ce5-33c3-4638-8242-315892ce76b2"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"be9ca0e2-6b6f-4d64-a893-d73045640b39"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"a3a5cfd7-c725-48a2-96f2-ab3721cb7551"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"be9ca0e2-6b6f-4d64-a893-d73045640b39"},"edge_type":"inherent","type":"","uuid":"4f8a000f-3808-4187-9ee5-665bb6efe662","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"a3a5cfd7-c725-48a2-96f2-ab3721cb7551"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"6ab40ce5-33c3-4638-8242-315892ce76b2"},"edge_type":"inherent","type":"","uuid":"faa3df01-7472-4760-93b6-88cf8392c648","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"be9ca0e2-6b6f-4d64-a893-d73045640b39"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"802d6e44-6c53-44f4-9866-8b6f539621e9"},"edge_type":"inherent","type":"","uuid":"6d04a29e-4d6b-4456-aa86-b3a75db8e87e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"6ab40ce5-33c3-4638-8242-315892ce76b2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"92215a4f-b452-43e8-addc-b9c609ce7bda"},"edge_type":"inherent","type":"","uuid":"db108f6b-7c7b-4f46-9d27-038168deeece","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"802d6e44-6c53-44f4-9866-8b6f539621e9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"92215a4f-b452-43e8-addc-b9c609ce7bda","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"802d6e44-6c53-44f4-9866-8b6f539621e9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"dc0c872a-312e-4d4e-91c8-52219fcebe7e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6ab40ce5-33c3-4638-8242-315892ce76b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"742a8ec9-3b84-4afa-b289-7b0cb761a5f4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"be9ca0e2-6b6f-4d64-a893-d73045640b39","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a3a5cfd7-c725-48a2-96f2-ab3721cb7551","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"37e6e707-52ba-480d-8478-10a3da93a60f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"0b97bcb6-25db-48e0-aa82-34e2359173ba"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for starting an application","message_list":[],"uuid":"1d2a7362-7cd9-40d6-b99f-8d216ab5f9ed","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"b580c050-1d36-41a5-b95f-58a0725b2baf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"3f25991f-9cc1-4b9c-a753-99c9df42681d"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"0f095d18-b6cd-4852-a250-2fe5274de2f0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"3f25991f-9cc1-4b9c-a753-99c9df42681d"},"edge_type":"inherent","type":"","uuid":"a28be212-0186-4d8b-9b99-6a4dc8073dfb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"0f095d18-b6cd-4852-a250-2fe5274de2f0"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3f25991f-9cc1-4b9c-a753-99c9df42681d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"b46028e0-952a-4539-9e03-999ca0c04818"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0f095d18-b6cd-4852-a250-2fe5274de2f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"089ac0a1-ab9a-4c85-91d1-a7444a237b9e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"b580c050-1d36-41a5-b95f-58a0725b2baf"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for restarting an application","message_list":[],"uuid":"505474e3-652f-4aba-a548-d48cbf350f03","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"8c9430c9-53ed-4f30-aa6e-cbde1358eaf6","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"2a1243c1-f899-45e0-8839-de50f76bed99"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"132f298f-3e08-4c2b-b42f-9752a1968bc5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"2a1243c1-f899-45e0-8839-de50f76bed99"},"edge_type":"inherent","type":"","uuid":"a27dbc14-c581-4e11-bd1c-81c32f81e546","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"132f298f-3e08-4c2b-b42f-9752a1968bc5"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2a1243c1-f899-45e0-8839-de50f76bed99","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"e1326aa9-5173-40b4-b686-c2fde3eea318"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"132f298f-3e08-4c2b-b42f-9752a1968bc5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"5143ea71-c9be-420c-950d-f146da5f67ee","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"8c9430c9-53ed-4f30-aa6e-cbde1358eaf6"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for stopping an application","message_list":[],"uuid":"e503f511-daaf-4f35-aeb3-eda03533bb25","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"7660947d-a23f-4fb9-a213-c27131f2d32b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"7fcbb7d8-c943-464e-bfed-0417bb4c215b"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"41177498-d412-43ae-aae3-607be6ac44f7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"7fcbb7d8-c943-464e-bfed-0417bb4c215b"},"edge_type":"inherent","type":"","uuid":"d46b2954-df23-447a-a792-c1fc20ffa9c5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"41177498-d412-43ae-aae3-607be6ac44f7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7fcbb7d8-c943-464e-bfed-0417bb4c215b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"41177498-d412-43ae-aae3-607be6ac44f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"26a8b4f7-6b0d-47de-9877-a9f4ea786d72"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"e97e0ab7-18ec-4e20-a913-bab5b1091bda","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"7660947d-a23f-4fb9-a213-c27131f2d32b"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"40b8be87-7a69-4d5a-aad7-7b191fa44e8f","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"39516cae-fce0-49b2-858c-880dd83d668e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"81b1a612-e9e4-4003-8a35-35d5d3d46b5d"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"bacceff7-c387-4245-81e5-6708a9583208"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"caa577b5-547b-459b-b7cc-1d81428d69cb"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"5b536147-b577-48a8-9d2d-4a314e645c1d"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"2a0e3423-37a1-41ba-a889-bea30a9f5181"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"81b1a612-e9e4-4003-8a35-35d5d3d46b5d"},"edge_type":"inherent","type":"","uuid":"9a007f40-0606-4cd8-8c64-85afecc318de","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"bacceff7-c387-4245-81e5-6708a9583208"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"bacceff7-c387-4245-81e5-6708a9583208"},"edge_type":"inherent","type":"","uuid":"01e2747b-c639-49c7-b120-9f8cceb56d25","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"caa577b5-547b-459b-b7cc-1d81428d69cb"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"5b536147-b577-48a8-9d2d-4a314e645c1d"},"edge_type":"inherent","type":"","uuid":"5bbf5067-be93-4a8c-befe-c3ddbb0d7019","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"2a0e3423-37a1-41ba-a889-bea30a9f5181"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"caa577b5-547b-459b-b7cc-1d81428d69cb"},"edge_type":"inherent","type":"","uuid":"d7b8e0e8-f160-46c3-82d6-e4506f3b1777","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"5b536147-b577-48a8-9d2d-4a314e645c1d"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"81b1a612-e9e4-4003-8a35-35d5d3d46b5d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bacceff7-c387-4245-81e5-6708a9583208","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"caa577b5-547b-459b-b7cc-1d81428d69cb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"349c00cb-6f03-46e1-96e6-ac7e3baa08ea"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5b536147-b577-48a8-9d2d-4a314e645c1d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"836ce118-7b27-4122-b6d0-ecba724e7b75"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"2a0e3423-37a1-41ba-a889-bea30a9f5181","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"028b3e8d-17ee-4a0d-8086-c96774a72d80","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"39516cae-fce0-49b2-858c-880dd83d668e"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for scaleout","message_list":[],"uuid":"de76c411-a229-407f-8a44-af1061f06a22","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"0731140b-1e47-4273-a7f1-f1d5dfbc1150","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"42ba6a3e-72f4-4ce5-995b-9e1cad39020a"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"SCALING","uuid":"42ba6a3e-72f4-4ce5-995b-9e1cad39020a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"67177e88-232b-445a-8913-9d785c851fa4","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"61f5e33a-9faa-4511-b26c-702a1d2d3ce9","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"0731140b-1e47-4273-a7f1-f1d5dfbc1150"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for scalein","message_list":[],"uuid":"72405f60-1b21-4572-95f5-99bffd201696","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"894a9ad6-23eb-4140-aa66-eebd10c7f2f9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"f00bc6af-4e75-4f5d-b614-3699056eb77c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"SCALING","uuid":"f00bc6af-4e75-4f5d-b614-3699056eb77c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"4561e38d-fa92-4e69-ae47-91fe5ae85b5a","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"7254ca20-c757-43d0-82d4-3f059fbab2c1","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"894a9ad6-23eb-4140-aa66-eebd10c7f2f9"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"9c70ad5a-d134-423b-a79e-7d5c4fc2fe9c","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DAG","uuid":"347cb2ac-3640-4e4d-8659-6ab2666476e4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6f460a8c-b0fd-4c95-853e-e625953a53fe"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"969ba7bf-6066-443e-bc50-6ee325dc92ec"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"7d7a4d5a-ea1c-4e12-9bee-e3a8671b3dc9"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"3b780e48-02f5-49c6-bb90-67d65b486bdc"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"6f460a8c-b0fd-4c95-853e-e625953a53fe"},"edge_type":"inherent","type":"","uuid":"dbd0790a-5cb2-49f5-8e9f-bbe98432cabb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"969ba7bf-6066-443e-bc50-6ee325dc92ec"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"969ba7bf-6066-443e-bc50-6ee325dc92ec"},"edge_type":"inherent","type":"","uuid":"d3ab2e3f-2afc-4479-a33e-727b0348d6eb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"7d7a4d5a-ea1c-4e12-9bee-e3a8671b3dc9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"7d7a4d5a-ea1c-4e12-9bee-e3a8671b3dc9"},"edge_type":"inherent","type":"","uuid":"9bc4aaab-4b4f-4eda-90da-8ccb45531672","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"3b780e48-02f5-49c6-bb90-67d65b486bdc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6f460a8c-b0fd-4c95-853e-e625953a53fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"969ba7bf-6066-443e-bc50-6ee325dc92ec","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7d7a4d5a-ea1c-4e12-9bee-e3a8671b3dc9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"92ddfb22-2064-4a4d-bd54-82978cc86156"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"3b780e48-02f5-49c6-bb90-67d65b486bdc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"e3e5e82a-365a-4730-aee5-e3d0f4e5a8b3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"347cb2ac-3640-4e4d-8659-6ab2666476e4"},"name":"SYS_GEN__Runbook_Deployment_66aa5276_841d_4e36_882f_f9dabfe971fb"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"}],"substrate_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"49669086_deployment_cloned_0"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"63f78483-3667-425f-bb77-92e767f02895","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"75e015c4-d33e-4c0b-949e-cd4076a3297e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"4b43636b-b941-40eb-a42f-cfb1cca0a083"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"d9b3d68e-f76b-4513-8b0a-9ee7d3b318a1"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"8e96fe18-2ae5-4f51-97b8-fffe2383bb25"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"892f72d8-5d84-4700-96f5-663d2bf6d96c"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"a6fccc20-57ce-4b4d-a97d-318f41c87643"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"892f72d8-5d84-4700-96f5-663d2bf6d96c"},"edge_type":"inherent","type":"","uuid":"e392f9dd-ef5d-4185-a788-3a79fc6dd127","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"a6fccc20-57ce-4b4d-a97d-318f41c87643"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"8e96fe18-2ae5-4f51-97b8-fffe2383bb25"},"edge_type":"inherent","type":"","uuid":"14af3fd4-e6f0-45a8-b45c-016661f585da","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"892f72d8-5d84-4700-96f5-663d2bf6d96c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"d9b3d68e-f76b-4513-8b0a-9ee7d3b318a1"},"edge_type":"inherent","type":"","uuid":"498a271f-897b-47b9-a4a9-d8160a7e4eea","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"8e96fe18-2ae5-4f51-97b8-fffe2383bb25"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"4b43636b-b941-40eb-a42f-cfb1cca0a083"},"edge_type":"inherent","type":"","uuid":"762b34ac-89c7-4f4c-9ddc-299a0865e6b7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"d9b3d68e-f76b-4513-8b0a-9ee7d3b318a1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"4b43636b-b941-40eb-a42f-cfb1cca0a083","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_66aa5276_841d_4e36_882f_f9dabfe971fb"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d9b3d68e-f76b-4513-8b0a-9ee7d3b318a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"dc0c872a-312e-4d4e-91c8-52219fcebe7e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8e96fe18-2ae5-4f51-97b8-fffe2383bb25","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"742a8ec9-3b84-4afa-b289-7b0cb761a5f4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"892f72d8-5d84-4700-96f5-663d2bf6d96c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a6fccc20-57ce-4b4d-a97d-318f41c87643","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"a7ce9a0c-a109-4de7-93e3-74bc56cf7781","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"75e015c4-d33e-4c0b-949e-cd4076a3297e"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}},{"description":"System action for starting an application","message_list":[],"uuid":"d4d14635-d00c-4263-ad88-8bd638d000cf","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"a9596807-7c21-401d-9ac7-dc6ff5307bfb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"4d58980e-3634-43bd-8053-e6a70f7052e9"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"20ad0a81-1e4a-4288-b873-495a13de9696"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"4d58980e-3634-43bd-8053-e6a70f7052e9"},"edge_type":"inherent","type":"","uuid":"0b82bb0c-5208-45b6-9cb9-0ee379c53840","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"20ad0a81-1e4a-4288-b873-495a13de9696"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4d58980e-3634-43bd-8053-e6a70f7052e9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"b46028e0-952a-4539-9e03-999ca0c04818"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"20ad0a81-1e4a-4288-b873-495a13de9696","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"ad39423a-2f08-4d8e-be59-c78027fec41d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"a9596807-7c21-401d-9ac7-dc6ff5307bfb"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}},{"description":"System action for restarting an application","message_list":[],"uuid":"da6c2f56-da00-48f4-b47d-7c64e03ceba6","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"0e5db727-fdfc-4ab8-90d8-36c536fe1a25","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"148c1f38-0a69-4758-97e4-72edda9a7262"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"4f49e2dd-27b8-4b98-ba74-82638c189df2"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"148c1f38-0a69-4758-97e4-72edda9a7262"},"edge_type":"inherent","type":"","uuid":"60368354-68a6-4368-8457-f1119e8a944e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"4f49e2dd-27b8-4b98-ba74-82638c189df2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"148c1f38-0a69-4758-97e4-72edda9a7262","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"e1326aa9-5173-40b4-b686-c2fde3eea318"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4f49e2dd-27b8-4b98-ba74-82638c189df2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"cbb0d5cc-4d5f-46a6-b9cf-595b106834b1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"0e5db727-fdfc-4ab8-90d8-36c536fe1a25"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}},{"description":"System action for stopping an application","message_list":[],"uuid":"e721afe4-59ab-4832-8061-deac607c7a05","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"5442c056-a6f2-41eb-9f5d-8ad4e287f1b4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"213c2e8b-23f5-42e4-8ec7-d555ef5c24c7"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"b5f082fa-7d8a-458f-a31b-075e47715543"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"213c2e8b-23f5-42e4-8ec7-d555ef5c24c7"},"edge_type":"inherent","type":"","uuid":"aaca0b44-49e0-42bc-b514-abacd91deee5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"b5f082fa-7d8a-458f-a31b-075e47715543"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"213c2e8b-23f5-42e4-8ec7-d555ef5c24c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b5f082fa-7d8a-458f-a31b-075e47715543","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"26a8b4f7-6b0d-47de-9877-a9f4ea786d72"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"}],"description":"","message_list":[],"uuid":"6ad9b985-9393-4070-9a8e-dcbc8cdef8e2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"5442c056-a6f2-41eb-9f5d-8ad4e287f1b4"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f96f616e-5547-4f26-a2c4-c180fd5b1da8","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"bfe4a386-2bd4-4219-9a03-dd0a3a14d2c2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"277b7162-64b1-4909-8136-b1b2ed03cc76"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"cf93a820-9cf8-401a-a636-87e9b270bc03"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"5e09d1f7-1537-4a3c-aebe-a929c16fa3cc"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"f5b4969a-e61c-418f-9a09-5fe794441aaf"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"afacb764-b56c-42c6-9505-4a5e9c639765"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"277b7162-64b1-4909-8136-b1b2ed03cc76"},"edge_type":"inherent","type":"","uuid":"cb3f7451-ef8a-4ccc-8961-3b81616bed93","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"cf93a820-9cf8-401a-a636-87e9b270bc03"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"cf93a820-9cf8-401a-a636-87e9b270bc03"},"edge_type":"inherent","type":"","uuid":"790e7c23-ae27-48b0-865c-020067018c19","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"5e09d1f7-1537-4a3c-aebe-a929c16fa3cc"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"f5b4969a-e61c-418f-9a09-5fe794441aaf"},"edge_type":"inherent","type":"","uuid":"19b76182-dea9-497d-87c1-3eee89f9ea7a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"afacb764-b56c-42c6-9505-4a5e9c639765"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"5e09d1f7-1537-4a3c-aebe-a929c16fa3cc"},"edge_type":"inherent","type":"","uuid":"471324bb-1a3e-43b6-b835-cc81a6060998","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"f5b4969a-e61c-418f-9a09-5fe794441aaf"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"277b7162-64b1-4909-8136-b1b2ed03cc76","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cf93a820-9cf8-401a-a636-87e9b270bc03","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5e09d1f7-1537-4a3c-aebe-a929c16fa3cc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"349c00cb-6f03-46e1-96e6-ac7e3baa08ea"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f5b4969a-e61c-418f-9a09-5fe794441aaf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"836ce118-7b27-4122-b6d0-ecba724e7b75"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"afacb764-b56c-42c6-9505-4a5e9c639765","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"0b127a56-677f-4b8e-b877-ea11dbedca57","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"bfe4a386-2bd4-4219-9a03-dd0a3a14d2c2"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"b4bb25d0-72df-49d5-8b63-54dfbe0ec33b","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"VMware","uuid":"851d5a5a-9bad-4607-be15-82875712cb94"},"retries":"0","description":"","type":"DAG","uuid":"0a645245-1186-4a03-969f-b862a9384b79","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"87be24aa-f916-489a-92b4-e7408b99ebfc"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"c8d7c8ed-b8c2-4b41-b154-551f0c6b1a07"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"85451a54-1129-4b77-926e-01703978543a"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"0b4ed199-af8f-4f06-88b4-81834a994fc6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"87be24aa-f916-489a-92b4-e7408b99ebfc"},"edge_type":"inherent","type":"","uuid":"f618f61e-9d3c-4b78-b2e2-98abf4ada20f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"c8d7c8ed-b8c2-4b41-b154-551f0c6b1a07"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"c8d7c8ed-b8c2-4b41-b154-551f0c6b1a07"},"edge_type":"inherent","type":"","uuid":"b37b2eea-6eb6-471c-b90c-274af4c4852c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"85451a54-1129-4b77-926e-01703978543a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"85451a54-1129-4b77-926e-01703978543a"},"edge_type":"inherent","type":"","uuid":"8c19ee7f-d817-4635-a52f-4ca809083d13","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb","uuid":"0b4ed199-af8f-4f06-88b4-81834a994fc6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"87be24aa-f916-489a-92b4-e7408b99ebfc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"c8d7c8ed-b8c2-4b41-b154-551f0c6b1a07","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"85451a54-1129-4b77-926e-01703978543a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73","uuid":"92ddfb22-2064-4a4d-bd54-82978cc86156"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_66aaefdb_2f89_4b45_a92e_b79a22d51c73"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"49669086_deployment_cloned_0","uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"0b4ed199-af8f-4f06-88b4-81834a994fc6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_66aa5276_841d_4e36_882f_f9dabfe971fb"}],"description":"","message_list":[],"uuid":"115cd13c-3f43-4729-a6f1-77b3f63851fd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_851d5a5a_9bad_4607_be15_82875712cb94","uuid":"0a645245-1186-4a03-969f-b862a9384b79"},"name":"SYS_GEN__Runbook_Application_851d5a5a_9bad_4607_be15_82875712cb94"}}],"message_list":[],"uuid":"851d5a5a-9bad-4607-be15-82875712cb94","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"90126b6f-188d-4807-abd3-1bfa3c7b1650","value":"10.46.6.5","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"419a9965-6d1f-42d5-81de-409c814aae0a","value":"contoso.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"e03a3270-65de-4aff-90fc-553695ad6676","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"7bd277d8-1526-40bd-ad34-c3964d281691","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"VMware"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"96ab3844-4a27-4056-b4e8-08d9e3606789","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"0ca5dfed-12f5-45d6-a171-a9c4349ebb63","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"0281b668-4aff-4dbb-896e-9f97dfb1d004"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"0281b668-4aff-4dbb-896e-9f97dfb1d004","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},"edge_type":"user_defined","type":"","uuid":"8b37425f-23be-4198-8b6d-592bb1630b54","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},"edge_type":"user_defined","type":"","uuid":"7e01b446-63e8-40c9-81ee-55d897df4dc3","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},"edge_type":"user_defined","type":"","uuid":"e795ef9a-6f5f-4c6b-83f8-98eed2284a6c","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},"edge_type":"user_defined","type":"","uuid":"499672a1-e461-4cb4-aaab-b2a288f2dabb","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},"edge_type":"user_defined","type":"","uuid":"707d0887-6e6b-41e9-a0ed-950146881939","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},"edge_type":"user_defined","type":"","uuid":"7054e752-a04a-451f-8cf9-df5fb129ee6a","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},"edge_type":"user_defined","type":"","uuid":"f5c55d89-23e5-4040-bd69-01c5221859d6","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"EXEC","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"160d1834-7a16-43db-b846-7da6febac28e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"0048087f-da89-42d3-b575-268910574106","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"11e0eccb-8662-4800-8613-89185390b031","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f29a6d73-186b-4cfc-8eee-fb7679b7ef19","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"1fb39995-f18e-41e1-96b6-45d7f7e235f2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_5055ac9e_1f97_4c56_8108_1940e8ada92a"}],"description":"","message_list":[],"uuid":"fa139c04-f93b-4bc9-9dec-2815266cf889","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"0ca5dfed-12f5-45d6-a171-a9c4349ebb63"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for creating an application","message_list":[],"uuid":"d645d2bc-fb47-4b7b-aec0-6963f92e28ad","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"f81ebcb5-99e3-431e-86c6-3da4136ac733","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"ed684aaf-8392-4a5f-8a3d-5edb14352eb7"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"76949a6e-abd3-4af5-9f3a-4f94dc181ef9"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"af797030-2377-4340-8911-fb8b3a057b24"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"76949a6e-abd3-4af5-9f3a-4f94dc181ef9"},"edge_type":"inherent","type":"","uuid":"6a8602c5-6579-419a-9c2c-6e3001786486","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"af797030-2377-4340-8911-fb8b3a057b24"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"ed684aaf-8392-4a5f-8a3d-5edb14352eb7"},"edge_type":"inherent","type":"","uuid":"865f61a4-a197-40ca-84a6-87e4cca40ae4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"76949a6e-abd3-4af5-9f3a-4f94dc181ef9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ed684aaf-8392-4a5f-8a3d-5edb14352eb7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"fa139c04-f93b-4bc9-9dec-2815266cf889"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"76949a6e-abd3-4af5-9f3a-4f94dc181ef9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"af797030-2377-4340-8911-fb8b3a057b24","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"1ae1af47-1191-4fc5-b36c-ea2c0800d4a2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"f81ebcb5-99e3-431e-86c6-3da4136ac733"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"1075463d-212f-481f-a410-f080bbe495d9","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"ba3b3738-2696-4bd3-94fc-5510f0efb186","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"75d110cc-f56f-4076-80bd-bdcdad00a8db"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"75d110cc-f56f-4076-80bd-bdcdad00a8db","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},"edge_type":"user_defined","type":"","uuid":"8b37425f-23be-4198-8b6d-592bb1630b54","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},"edge_type":"user_defined","type":"","uuid":"7e01b446-63e8-40c9-81ee-55d897df4dc3","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},"edge_type":"user_defined","type":"","uuid":"e795ef9a-6f5f-4c6b-83f8-98eed2284a6c","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},"edge_type":"user_defined","type":"","uuid":"499672a1-e461-4cb4-aaab-b2a288f2dabb","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},"edge_type":"user_defined","type":"","uuid":"707d0887-6e6b-41e9-a0ed-950146881939","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},"edge_type":"user_defined","type":"","uuid":"7054e752-a04a-451f-8cf9-df5fb129ee6a","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},"edge_type":"user_defined","type":"","uuid":"f5c55d89-23e5-4040-bd69-01c5221859d6","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"EXEC","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"160d1834-7a16-43db-b846-7da6febac28e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"0048087f-da89-42d3-b575-268910574106","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"11e0eccb-8662-4800-8613-89185390b031","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f29a6d73-186b-4cfc-8eee-fb7679b7ef19","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"1fb39995-f18e-41e1-96b6-45d7f7e235f2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4"},"name":"8cc4ed37_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_5055ac9e_1f97_4c56_8108_1940e8ada92a"}],"description":"","message_list":[],"uuid":"6bbf6098-acfb-4c64-9fa8-b2f45e38b55c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"ba3b3738-2696-4bd3-94fc-5510f0efb186"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"16e44aca-3446-4e18-a228-07a999c8d72b","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"65e8c6f7-c1d1-4ce0-a665-f0dfe23712e5","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"e771c250-ccf9-4a31-af9e-388e2f1e43de"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"0c19fbbd-4d22-4eb5-8e50-0b420427491f"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"98cf6a98-2a6c-4964-8d81-6ed943c962f3"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"e771c250-ccf9-4a31-af9e-388e2f1e43de"},"edge_type":"inherent","type":"","uuid":"73454942-210a-49a1-b04a-c634b24e0e45","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"0c19fbbd-4d22-4eb5-8e50-0b420427491f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"0c19fbbd-4d22-4eb5-8e50-0b420427491f"},"edge_type":"inherent","type":"","uuid":"6306174d-77e8-4725-a48a-b71fd0026b33","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"98cf6a98-2a6c-4964-8d81-6ed943c962f3"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e771c250-ccf9-4a31-af9e-388e2f1e43de","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0c19fbbd-4d22-4eb5-8e50-0b420427491f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"98cf6a98-2a6c-4964-8d81-6ed943c962f3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"6bbf6098-acfb-4c64-9fa8-b2f45e38b55c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}],"description":"","message_list":[],"uuid":"8e988165-e2b8-4559-b33b-14013127491d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"65e8c6f7-c1d1-4ce0-a665-f0dfe23712e5"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"b9e9c196-65cb-4347-9b9b-2b3b077f4f6e","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"fae88581-4ba9-4855-b248-e0d92c2b4eb9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"9143fdd0-b36d-45ed-9f0e-585ed6aff2b1"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"8c754e9f-6a89-4fca-b163-d474fabaeffb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"9143fdd0-b36d-45ed-9f0e-585ed6aff2b1"},"edge_type":"inherent","type":"","uuid":"eeae0469-598b-496f-9f96-cc9be40f76d0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"8c754e9f-6a89-4fca-b163-d474fabaeffb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9143fdd0-b36d-45ed-9f0e-585ed6aff2b1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"8c754e9f-6a89-4fca-b163-d474fabaeffb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_5055ac9e_1f97_4c56_8108_1940e8ada92a"}],"description":"","message_list":[],"uuid":"c4e0a458-021e-4a33-a394-647b4768a416","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"fae88581-4ba9-4855-b248-e0d92c2b4eb9"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for starting an application","message_list":[],"uuid":"986d20d9-4dca-4767-9ca1-08a211f7e739","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"864ad770-1ca3-4c80-b2f9-b690cb329f76","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"a1f72703-f10f-43b5-9a29-c4aad7b1a08c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a1f72703-f10f-43b5-9a29-c4aad7b1a08c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"67aa54b6-23bd-41e6-bbbf-db83a4c3f29b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"864ad770-1ca3-4c80-b2f9-b690cb329f76"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for restarting an application","message_list":[],"uuid":"775d1d94-e1c8-4260-9572-9ad72dad60d9","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"c841e8cf-499e-43c2-a790-a5f98f63b65a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"358e9199-92d8-4be6-b770-33395845a120"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"358e9199-92d8-4be6-b770-33395845a120","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"894a108a-b0ff-4356-bed2-3b1d6738d58b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"c841e8cf-499e-43c2-a790-a5f98f63b65a"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}},{"description":"System action for stopping an application","message_list":[],"uuid":"3f89155d-c495-45e5-963f-b4076c9e8bf6","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"31c09cae-807d-43e7-937c-88895b6b351c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"f454f0de-95e7-4c97-8eb6-ffd3d07cf060"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f454f0de-95e7-4c97-8eb6-ffd3d07cf060","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"43fea7da-aab2-459d-91f5-92c1f5705647","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a","uuid":"31c09cae-807d-43e7-937c-88895b6b351c"},"name":"SYS_GEN__Runbook_Package_5055ac9e_1f97_4c56_8108_1940e8ada92a"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"}],"uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},"edge_type":"user_defined","type":"","uuid":"8b37425f-23be-4198-8b6d-592bb1630b54","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},"edge_type":"user_defined","type":"","uuid":"7e01b446-63e8-40c9-81ee-55d897df4dc3","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},"edge_type":"user_defined","type":"","uuid":"e795ef9a-6f5f-4c6b-83f8-98eed2284a6c","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},"edge_type":"user_defined","type":"","uuid":"499672a1-e461-4cb4-aaab-b2a288f2dabb","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},"edge_type":"user_defined","type":"","uuid":"707d0887-6e6b-41e9-a0ed-950146881939","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},"edge_type":"user_defined","type":"","uuid":"7054e752-a04a-451f-8cf9-df5fb129ee6a","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},"edge_type":"user_defined","type":"","uuid":"f5c55d89-23e5-4040-bd69-01c5221859d6","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"EXEC","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"160d1834-7a16-43db-b846-7da6febac28e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"0048087f-da89-42d3-b575-268910574106","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"11e0eccb-8662-4800-8613-89185390b031","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"f29a6d73-186b-4cfc-8eee-fb7679b7ef19","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f"},"name":"b58c360f_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","description":"","type":"DAG","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag"}],"description":"","message_list":[],"uuid":"1fb39995-f18e-41e1-96b6-45d7f7e235f2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4"},"name":"8cc4ed37_runbook"}},"variable_list":[],"name":"AHV_MSSQLPackage"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"c3506db3-7d37-4e6a-aa45-ca4ffe31d982","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"cf330fb5-fb05-45e3-9f97-4df0fe1fe6e9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"8675e332-2157-4598-870a-0d742238bbff"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"8675e332-2157-4598-870a-0d742238bbff","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},"edge_type":"user_defined","type":"","uuid":"e34d4b02-0ac6-44a0-af30-24185a5124dc","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},"edge_type":"user_defined","type":"","uuid":"675b8333-29a4-4a35-9a7a-5936200eee07","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},"edge_type":"user_defined","type":"","uuid":"049a2821-27fe-4e1e-af20-421d6abae917","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},"edge_type":"user_defined","type":"","uuid":"bff18c6b-97d6-451d-b5cd-44bd00beb4ed","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},"edge_type":"user_defined","type":"","uuid":"e53ab1ab-90f8-48bf-b05c-74dd903e516c","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},"edge_type":"user_defined","type":"","uuid":"6fff69db-1389-46c6-8d96-65398ffffbae","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},"edge_type":"user_defined","type":"","uuid":"48fd664f-fb22-4190-8439-2cff7418bfd5","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"EXEC","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"57c2a8e1-0dcc-41ec-bde6-13e7453bf26b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"6416a780-38dc-4ac4-986d-67155ee86638","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}],"description":"","message_list":[],"uuid":"742a8ec9-3b84-4afa-b289-7b0cb761a5f4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"cf330fb5-fb05-45e3-9f97-4df0fe1fe6e9"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for creating an application","message_list":[],"uuid":"ae7e37c3-c51a-4f1d-8043-22a779861138","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"428bc8ce-bb16-4257-80f9-5be21b1c92de","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"f46a85b8-6448-4587-9a27-93e85f3c667d"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"9139a879-d7b4-497a-9598-bf313b88e907"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8ec00111-2346-4a08-86bd-b4651c128524"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"9139a879-d7b4-497a-9598-bf313b88e907"},"edge_type":"inherent","type":"","uuid":"32779c0d-f32b-4bde-a170-d0610caf5aa4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"8ec00111-2346-4a08-86bd-b4651c128524"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"f46a85b8-6448-4587-9a27-93e85f3c667d"},"edge_type":"inherent","type":"","uuid":"d4798ef3-5ab8-475b-947f-f1958802b636","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"9139a879-d7b4-497a-9598-bf313b88e907"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f46a85b8-6448-4587-9a27-93e85f3c667d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"742a8ec9-3b84-4afa-b289-7b0cb761a5f4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9139a879-d7b4-497a-9598-bf313b88e907","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"5730e30f_runbook","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8ec00111-2346-4a08-86bd-b4651c128524","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"6c1fe89c-74f9-4f8c-b56d-58200fcd745e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"428bc8ce-bb16-4257-80f9-5be21b1c92de"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"b0085bff-212e-4f0b-89bd-db5e995464e5","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"2343fcb1-17e7-490e-8ed4-a74fa7fcd2c0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"03d296ff-a7a8-4af5-8aa4-10659b323197"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"03d296ff-a7a8-4af5-8aa4-10659b323197","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},"edge_type":"user_defined","type":"","uuid":"e34d4b02-0ac6-44a0-af30-24185a5124dc","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},"edge_type":"user_defined","type":"","uuid":"675b8333-29a4-4a35-9a7a-5936200eee07","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},"edge_type":"user_defined","type":"","uuid":"049a2821-27fe-4e1e-af20-421d6abae917","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},"edge_type":"user_defined","type":"","uuid":"bff18c6b-97d6-451d-b5cd-44bd00beb4ed","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},"edge_type":"user_defined","type":"","uuid":"e53ab1ab-90f8-48bf-b05c-74dd903e516c","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},"edge_type":"user_defined","type":"","uuid":"6fff69db-1389-46c6-8d96-65398ffffbae","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},"edge_type":"user_defined","type":"","uuid":"48fd664f-fb22-4190-8439-2cff7418bfd5","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"EXEC","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"57c2a8e1-0dcc-41ec-bde6-13e7453bf26b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"6416a780-38dc-4ac4-986d-67155ee86638","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748"},"name":"8cc4ed37_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}],"description":"","message_list":[],"uuid":"349c00cb-6f03-46e1-96e6-ac7e3baa08ea","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"2343fcb1-17e7-490e-8ed4-a74fa7fcd2c0"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"b2ed515a-4e65-4ea1-b722-7137db0f72bb","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"577461e5-f5df-4391-8950-c6c48679206b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"22b32ee5-2369-41d4-98a6-52ae50ab2583"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c760c319-141f-4cd4-b188-e348bfe9fde9"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"6a62c7d9-4404-4311-91d1-49b8c9a00936"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"22b32ee5-2369-41d4-98a6-52ae50ab2583"},"edge_type":"inherent","type":"","uuid":"66f1f4d6-4cf4-4214-8840-d9d9499d52a9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c760c319-141f-4cd4-b188-e348bfe9fde9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c760c319-141f-4cd4-b188-e348bfe9fde9"},"edge_type":"inherent","type":"","uuid":"167dbeda-b4fd-44a8-910a-4a3c9d983e7f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"6a62c7d9-4404-4311-91d1-49b8c9a00936"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"22b32ee5-2369-41d4-98a6-52ae50ab2583","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c760c319-141f-4cd4-b188-e348bfe9fde9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b01e7edf_runbook","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6a62c7d9-4404-4311-91d1-49b8c9a00936","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"349c00cb-6f03-46e1-96e6-ac7e3baa08ea"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}],"description":"","message_list":[],"uuid":"efe5f870-d431-4f15-a2bf-33c9b56d6711","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"577461e5-f5df-4391-8950-c6c48679206b"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"54c62f51-3e5a-4477-bd3e-78341e961ef7","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"dd591d36-c8ce-48f4-a7a0-6ff75670f1d5","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"93b1cad0-0411-4830-a5a2-0978c175526e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"ab80f449-a049-4c4d-94ce-a58b299616f9"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"93b1cad0-0411-4830-a5a2-0978c175526e"},"edge_type":"inherent","type":"","uuid":"f3d0a3cf-f449-45c8-9c1a-ddaf3918a415","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"ab80f449-a049-4c4d-94ce-a58b299616f9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"93b1cad0-0411-4830-a5a2-0978c175526e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"c6d6a46b-e08a-4e35-86f7-325d65ce236e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"ab80f449-a049-4c4d-94ce-a58b299616f9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}],"description":"","message_list":[],"uuid":"fcefd041-0a24-4e0c-ab0a-d825f301eec4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"dd591d36-c8ce-48f4-a7a0-6ff75670f1d5"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for starting an application","message_list":[],"uuid":"7d0518b3-6a08-4e99-819d-7175fe5ef521","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"5596d716-a8c3-43c5-98ba-240dbbdbddc8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"004350e5-abb6-4594-9241-6394927393cb"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"004350e5-abb6-4594-9241-6394927393cb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0263f5a9_runbook","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"0af376e7-7be4-4d20-959c-7d9d26685404","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"5596d716-a8c3-43c5-98ba-240dbbdbddc8"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for restarting an application","message_list":[],"uuid":"83110d4c-941f-49ee-bd90-8618a25495fa","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"36eb4001-90a2-4d04-a379-bcb6bb3f580a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"872f63ac-5b0a-44fc-8369-f439d54f810f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"872f63ac-5b0a-44fc-8369-f439d54f810f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"a059f54d_runbook","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"9234d3b4-1c1a-4120-981b-209a3c820b24","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"36eb4001-90a2-4d04-a379-bcb6bb3f580a"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}},{"description":"System action for stopping an application","message_list":[],"uuid":"f6d13a59-d031-43ff-9504-b43328011327","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"ac0dcc58-504f-441c-b08b-bfde155d5fc7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728","uuid":"d1472264-f4aa-4e50-91e3-b38e8237b481"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d1472264-f4aa-4e50-91e3-b38e8237b481","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8aadc288_runbook","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_38ba6066_9f80_44e1_bc11_2f8d1265b728"}],"description":"","message_list":[],"uuid":"a492782e-80ed-4c90-aced-4eaf720b0b9e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67","uuid":"ac0dcc58-504f-441c-b08b-bfde155d5fc7"},"name":"SYS_GEN__Runbook_Package_d2f557a2_1b5e_4c16_82eb_b3c9a7595a67"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"}],"uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},"edge_type":"user_defined","type":"","uuid":"e34d4b02-0ac6-44a0-af30-24185a5124dc","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},"edge_type":"user_defined","type":"","uuid":"675b8333-29a4-4a35-9a7a-5936200eee07","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},"edge_type":"user_defined","type":"","uuid":"049a2821-27fe-4e1e-af20-421d6abae917","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},"edge_type":"user_defined","type":"","uuid":"bff18c6b-97d6-451d-b5cd-44bd00beb4ed","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},"edge_type":"user_defined","type":"","uuid":"e53ab1ab-90f8-48bf-b05c-74dd903e516c","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},"edge_type":"user_defined","type":"","uuid":"6fff69db-1389-46c6-8d96-65398ffffbae","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},"edge_type":"user_defined","type":"","uuid":"48fd664f-fb22-4190-8439-2cff7418bfd5","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"87d54973_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"EXEC","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"npsscript","type":"","command_line_args":"","exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"AddToDomain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for Machine to Join domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InitializeDisk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"InstallSQL"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplyOSBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ApplySQLBPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","description":"","type":"EXEC","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"FirewallRules"}],"description":"","message_list":[],"uuid":"57c2a8e1-0dcc-41ec-bde6-13e7453bf26b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911"},"name":"b58c360f_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","description":"","type":"DAG","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"c5e51cfd_dag_cloned_1"}],"description":"","message_list":[],"uuid":"6416a780-38dc-4ac4-986d-67155ee86638","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748"},"name":"8cc4ed37_runbook_cloned_0"}},"variable_list":[],"name":"VMware_MSSQLPackage"}]},"name":"SQLMOE"},"spec":{"name":"SQLMOE","resources":{"service_definition_list":[{"singleton":false,"name":"MSSQL","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","name":"MSSQL"},"retries":"0","description":"","uuid":"07bc54ec-3ab1-4981-8f47-1297b3f27299","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"030017c3_dag"}],"description":"","uuid":"0c7a78f2-054d-470a-8a42-505a3282036e","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"030017c3_dag","uuid":"07bc54ec-3ab1-4981-8f47-1297b3f27299"},"name":"5730e30f_runbook"},"type":"system","uuid":"effd2104-1d8f-4056-baf3-ba53f0fa1a3c"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","name":"MSSQL"},"retries":"0","description":"","uuid":"304ce4f0-a27a-457f-a83c-6eb0e558efae","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6f5f997d_dag"}],"description":"","uuid":"65b7aa4f-5edd-468d-ab0a-72694c6da738","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f5f997d_dag","uuid":"304ce4f0-a27a-457f-a83c-6eb0e558efae"},"name":"b01e7edf_runbook"},"type":"system","uuid":"f1655afb-3f5c-4488-8807-12e186533c30"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","name":"MSSQL"},"retries":"0","description":"","uuid":"87c79372-04ad-4f09-920a-8f99790813b4","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"c2b90e7d_dag"}],"description":"","uuid":"6ca80fc1-aab2-4d2c-b8dd-036963ca2d2f","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"c2b90e7d_dag","uuid":"87c79372-04ad-4f09-920a-8f99790813b4"},"name":"0263f5a9_runbook"},"type":"system","uuid":"adac83ef-41bd-4d50-a4fe-c4c9b3abd86f"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","name":"MSSQL"},"retries":"0","description":"","uuid":"b5143435-d979-4482-b0a8-58faf2cd094c","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"00b1cc9f_dag"}],"description":"","uuid":"25be24bb-ab4a-4d37-975c-cb338295e110","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"00b1cc9f_dag","uuid":"b5143435-d979-4482-b0a8-58faf2cd094c"},"name":"8aadc288_runbook"},"type":"system","uuid":"c29fd3f8-3169-4470-b6b2-91d52bfae2ff"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","name":"MSSQL"},"retries":"0","description":"","uuid":"ed322f53-cfb0-4098-90b2-20e3f62e36c9","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6c4b7c3b_dag"}],"description":"","uuid":"5c316d30-39ac-4dd0-b854-3f64e7b5a5ff","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6c4b7c3b_dag","uuid":"ed322f53-cfb0-4098-90b2-20e3f62e36c9"},"name":"a059f54d_runbook"},"type":"system","uuid":"e4dcdee2-2d70-4a76-9057-c8d4ca08c281"}],"description":"","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","description":"","uuid":"85ce70be-4b42-4d76-b1c4-d4e1f19488c6","value":"","label":"","attrs":{"type":""},"type":"LOCAL","name":"EXECUTION_MODE"}],"depends_on_list":[]}],"substrate_definition_list":[{"name":"AHV_MSSQL2014","action_list":[],"uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <ComputerName>@@{name}@@<\/ComputerName>\n         <RegisteredOrganization>Nutanix<\/RegisteredOrganization>\n         <RegisteredOwner>Acropolis<\/RegisteredOwner>\n         <TimeZone>UTC<\/TimeZone>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","name":"Win2k12r2_Sysprep.qcow2","uuid":"4df886ca-c671-4025-ae29-406c562bd5d0"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":{"kind":"image","type":"","name":"SQLServer2014SP2-FullSlipstream-x64-ENU","uuid":"ae7b7652-bddf-41b2-8920-fa3d5bd0be9a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"IDE"},"device_type":"CDROM"}},{"data_source_reference":null,"type":"","disk_size_mib":51200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":153600,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":2,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":3,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":307200,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":4,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":5,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":6,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":7,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":204800,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":8,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"AppFamily":"Databases"}},"variable_list":[],"description":""},{"name":"VMware_MSSQL2014","action_list":[],"uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{},"template_nic_list":{},"template_controller_list":{},"controller_list":{},"template_disk_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_random}@@","storage_pod":"DatastoreCluster","cluster":"Sabine59-Cluster","host":"","clone_is_template":false,"template":"5020423a-ccea-0898-707d-a4581bfbaf1a","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":4096,"power_state":"poweron","guest_customization":{"customization_name":"","cloud_init":"","linux_data":null,"customization_type":"GUEST_OS_WINDOWS","type":"","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[]}},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"administrator","description":"","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"b13fb13a-48e1-4db8-8383-c4b3a5753c1e"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"e65c56da-219c-4046-8a86-59d960eaa214"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"contoso\\administrator","description":"","uuid":"91a9b7a2-e565-4dc9-9385-afd39b082ee9","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"65ff746a-2c5c-43cd-acfb-cf052b65dd81"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"49669086_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"}],"description":"","published_service_local_reference_list":[],"min_replicas":"1","depends_on_list":[],"max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"AHV_MSSQL2014","uuid":"04b534b3-84d4-4a60-8c82-3fb62a760236"},"type":"GREENFIELD","variable_list":[],"uuid":"aea31feb-6944-418b-b23c-6ce514733018"}],"description":"","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","description":"","uuid":"6ce0a72e-5414-4430-88a9-34572a878aa5","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"AD_IP"},{"val_type":"STRING","description":"","uuid":"dfb4ce84-d169-4240-a6cd-1289c4fbf37b","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"DOMAIN"},{"val_type":"STRING","description":"","uuid":"d35d338a-6a18-4d7c-8a28-736b427cc3d8","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"INCLUDE_BPG"},{"val_type":"STRING","description":"","uuid":"f9d6ff7a-bf7d-4257-89d2-58b388ff0e5a","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"BPG_RKTOOLS_URL"}],"uuid":"26a97468-d200-4d0f-ad0b-c07f5f0a08f8"},{"deployment_create_list":[{"name":"49669086_deployment_cloned_0","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"}],"description":"","published_service_local_reference_list":[],"min_replicas":"1","depends_on_list":[],"max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"VMware_MSSQL2014","uuid":"66aaefdb-2f89-4b45-a92e-b79a22d51c73"},"type":"GREENFIELD","variable_list":[],"uuid":"66aa5276-841d-4e36-882f-f9dabfe971fb"}],"description":"","action_list":[],"name":"VMware","variable_list":[{"val_type":"STRING","description":"","uuid":"90126b6f-188d-4807-abd3-1bfa3c7b1650","value":"10.46.6.5","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"AD_IP"},{"val_type":"STRING","description":"","uuid":"419a9965-6d1f-42d5-81de-409c814aae0a","value":"contoso.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"DOMAIN"},{"val_type":"STRING","description":"","uuid":"e03a3270-65de-4aff-90fc-553695ad6676","value":"yes","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"INCLUDE_BPG"},{"val_type":"STRING","description":"","uuid":"7bd277d8-1526-40bd-ad34-c3964d281691","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"BPG_RKTOOLS_URL"}],"uuid":"851d5a5a-9bad-4607-be15-82875712cb94"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"},"package_definition_list":[{"uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"}],"name":"AHV_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","name":"87d54973_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},"edge_type":"user_defined","type":"","uuid":"8b37425f-23be-4198-8b6d-592bb1630b54","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"160d1834-7a16-43db-b846-7da6febac28e"},"edge_type":"user_defined","type":"","uuid":"7e01b446-63e8-40c9-81ee-55d897df4dc3","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"0048087f-da89-42d3-b575-268910574106"},"edge_type":"user_defined","type":"","uuid":"e795ef9a-6f5f-4c6b-83f8-98eed2284a6c","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},"edge_type":"user_defined","type":"","uuid":"499672a1-e461-4cb4-aaab-b2a288f2dabb","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},"edge_type":"user_defined","type":"","uuid":"707d0887-6e6b-41e9-a0ed-950146881939","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"11e0eccb-8662-4800-8613-89185390b031"},"edge_type":"user_defined","type":"","uuid":"7054e752-a04a-451f-8cf9-df5fb129ee6a","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},"edge_type":"user_defined","type":"","uuid":"f5c55d89-23e5-4040-bd69-01c5221859d6","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f"},{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"Enable-WSManCredSSP -Role Server -Force","type":"","command_line_args":"","exit_status":[],"script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"c2dc1609-d0d2-4633-83a9-025256cec167"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"160d1834-7a16-43db-b846-7da6febac28e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\nsleep(60)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"0048087f-da89-42d3-b575-268910574106"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"e2216ccd-8657-4ae1-8acc-95c3630d1aa1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"e29c4334-1e82-469c-89ac-a53dec14708c"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"11e0eccb-8662-4800-8613-89185390b031"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"491cd5ae-cde3-4543-8d84-199243e0f611"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b0e3bc23-130a-4ce1-bea7-453cd965f6a6"}],"name":"b58c360f_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag","uuid":"3507bf23-cb77-47a5-ad42-1a5d1952031f"},"uuid":"f29a6d73-186b-4cfc-8eee-fb7679b7ef19"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"AHV_MSSQLPackage","uuid":"5055ac9e-1f97-4c56-8108-1940e8ada92a"},"retries":"0","name":"c5e51cfd_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4"}],"name":"8cc4ed37_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag","uuid":"064ea302-3407-4cd0-acd8-07d453b67fb4"},"uuid":"1fb39995-f18e-41e1-96b6-45d7f7e235f2"}},"variable_list":[],"description":""},{"uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"}],"name":"VMware_MSSQLPackage","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","name":"87d54973_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},"edge_type":"user_defined","type":"","uuid":"e34d4b02-0ac6-44a0-af30-24185a5124dc","to_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"}},{"from_task_reference":{"kind":"app_task","name":"AddToDomain","uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},"edge_type":"user_defined","type":"","uuid":"675b8333-29a4-4a35-9a7a-5936200eee07","to_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"}},{"from_task_reference":{"kind":"app_task","name":"Wait for Machine to Join domain","uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},"edge_type":"user_defined","type":"","uuid":"049a2821-27fe-4e1e-af20-421d6abae917","to_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"}},{"from_task_reference":{"kind":"app_task","name":"InitializeDisk","uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},"edge_type":"user_defined","type":"","uuid":"bff18c6b-97d6-451d-b5cd-44bd00beb4ed","to_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"}},{"from_task_reference":{"kind":"app_task","name":"InstallSQL","uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},"edge_type":"user_defined","type":"","uuid":"e53ab1ab-90f8-48bf-b05c-74dd903e516c","to_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"}},{"from_task_reference":{"kind":"app_task","name":"ApplyOSBPG","uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},"edge_type":"user_defined","type":"","uuid":"6fff69db-1389-46c6-8d96-65398ffffbae","to_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"}},{"from_task_reference":{"kind":"app_task","name":"ApplySQLBPG","uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},"edge_type":"user_defined","type":"","uuid":"48fd664f-fb22-4190-8439-2cff7418bfd5","to_task_reference":{"kind":"app_task","name":"FirewallRules","uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911"},{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","name":"Enable Credssp","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"Enable-WSManCredSSP -Role Server -Force","type":"","command_line_args":"","exit_status":[],"script_type":"npsscript"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"03c4a91c-b246-4b6e-a940-1198b7af0428"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"AddToDomain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"76b341af-861f-4c31-9c14-3ebd30eada4a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"Wait for Machine to Join domain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"#script\nsleep(60)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"4f8db3c8-5510-49a6-9b16-fbbed7bb328e"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"InitializeDisk","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"ab8634dc-4d33-4e75-8db2-1fdc1fd5e167"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"3d0ed35b-17b6-440f-9743-a729c578e14a"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"InstallSQL","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"6ef2f5be-f50f-4b0c-b523-4459fd31357b"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"ApplyOSBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"f50ba5dc-64ed-4aa4-96f3-c691f73c9bb7"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"ApplySQLBPG","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"5ce63dbe-a3d9-4b4b-ba2f-afdb60edeb56"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"38ba6066-9f80-44e1-bc11-2f8d1265b728"},"retries":"0","name":"FirewallRules","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"6cd43065-dde9-49c7-bbcc-75b7add191de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"1e76b3a6-eef7-4cbd-93c5-b059691b7449"}],"name":"b58c360f_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"87d54973_dag_cloned_1","uuid":"57d6df18-0255-4972-98bb-1a3f7cf0a911"},"uuid":"57c2a8e1-0dcc-41ec-bde6-13e7453bf26b"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"VMware_MSSQLPackage","uuid":"d2f557a2-1b5e-4c16-82eb-b3c9a7595a67"},"retries":"0","name":"c5e51cfd_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"09d82125-8d20-492e-bd7c-4645fe84e748"}],"name":"8cc4ed37_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"c5e51cfd_dag_cloned_1","uuid":"09d82125-8d20-492e-bd7c-4645fe84e748"},"uuid":"6416a780-38dc-4ac4-986d-67155ee86638"}},"variable_list":[],"description":""}],"client_attrs":{"66aa5276-841d-4e36-882f-f9dabfe971fb":{"y":100,"x":480},"38ba6066-9f80-44e1-bc11-2f8d1265b728":{"y":100,"x":480}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1550129844573765","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"62d54341-b91e-469d-bddc-cdb2500b8db4","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":1,"creation_time":"1550129705920167","name":"SQLMOE"}}