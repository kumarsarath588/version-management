{"status":{"description":"* [HYCU](https:\/\/@@{HYCU.address}@@:8443)","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"620edf05-8b94-4630-bb89-d84e797d3e09","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"ee91a012-c77b-431e-816d-2ca5d2e64a0e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"e20cbb61_dag"}],"description":"","message_list":[],"uuid":"607399d2-8f5f-4890-9bb2-c6e0c2587198","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e20cbb61_dag","uuid":"ee91a012-c77b-431e-816d-2ca5d2e64a0e"},"name":"9368a69c_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"f855d95d-734d-47ed-83c3-9a1034560b5a","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"02012e96-b23a-45c0-bee6-0336f4ff5c66","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"395e33b6_dag"}],"description":"","message_list":[],"uuid":"ad34fedb-f6c2-472d-a950-1fcd0c466306","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"395e33b6_dag","uuid":"02012e96-b23a-45c0-bee6-0336f4ff5c66"},"name":"cc274171_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"8a66bfcd-e63c-49f1-8b4c-273b019b3dc7","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"06ed14d6-64f1-400c-ba66-3b93278ddd8c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"260516ed_dag"}],"description":"","message_list":[],"uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"260516ed_dag","uuid":"06ed14d6-64f1-400c-ba66-3b93278ddd8c"},"name":"b77a0435_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"dfdb2c08-d256-420c-b1b0-c319992ba6d6","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"673158fd-2daf-4aca-8ec2-36c17af2a31b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"eeeab6e2_dag"}],"description":"","message_list":[],"uuid":"8451b951-3a83-405d-bf49-ac51a9f99685","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"eeeab6e2_dag","uuid":"673158fd-2daf-4aca-8ec2-36c17af2a31b"},"name":"97b28e71_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"db775308-ee87-493a-aca6-f988ad0bc23e","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"ff8d656f-c091-466e-82df-4a41425ac682","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"443c3cae_dag"}],"description":"","message_list":[],"uuid":"acc14606-6e4f-4e49-adc1-003886f21586","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"443c3cae_dag","uuid":"ff8d656f-c091-466e-82df-4a41425ac682"},"name":"0203ed8c_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"45a9b8dc-fea0-400f-b62f-ed792043856a","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"DAG","uuid":"2271d9ea-a813-4ab4-8edc-2059abb75d77","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"c7f27453-48da-42a3-9af2-351aa5ac2b81"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"c7f27453-48da-42a3-9af2-351aa5ac2b81","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"22640444-1046-4be5-a592-3072b04a9279","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"2271d9ea-a813-4ab4-8edc-2059abb75d77"},"name":"SYS_GEN__Runbook_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}}],"message_list":[],"uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"3c1e8aa9-13dd-453d-a4ce-4a4e3620fac4","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"TARGET_IQN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"dd685249-87fd-47f6-909b-0caedf173490","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"INITIATOR_IQN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"c24617c5-ae0f-44ba-9695-ad4ea55ae2e3","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"CONTAINER_UUID"}],"name":"HYCU"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"5266fd60-47ad-4671-a235-994b2a87503d","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"4bef38f3-739f-48c6-9f30-6d26db954c4d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"b9a13ab3-0d57-48b0-a4a9-d3d2356417fe"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"2b38cf30-b165-49b0-93ea-2fa0e1a5be9b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"b9a13ab3-0d57-48b0-a4a9-d3d2356417fe"},"edge_type":"inherent","type":"","uuid":"8bc65565-ec81-42a3-b5b3-3c548deea486","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"2b38cf30-b165-49b0-93ea-2fa0e1a5be9b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"b9a13ab3-0d57-48b0-a4a9-d3d2356417fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"hycu-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"2b38cf30-b165-49b0-93ea-2fa0e1a5be9b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"71e63988-7b64-460d-8552-ca040fe5e0b9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"4bef38f3-739f-48c6-9f30-6d26db954c4d"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for powering on an application","message_list":[],"uuid":"27d1838f-cd3e-42df-89d6-f865b3f93c7a","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"d0e0a816-51d9-408e-b9b9-97f2eb1c85f0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"4ccfebce-cf92-4a1a-b70b-645f59bfc0e8"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"2b32f04e-e9b6-4c7f-a200-000d3d03f95b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"4ccfebce-cf92-4a1a-b70b-645f59bfc0e8"},"edge_type":"inherent","type":"","uuid":"3ee947a8-60db-4dee-bcfa-a0ee11ec413e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"2b32f04e-e9b6-4c7f-a200-000d3d03f95b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"4ccfebce-cf92-4a1a-b70b-645f59bfc0e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"2b32f04e-e9b6-4c7f-a200-000d3d03f95b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"00e08693-e89a-473e-8d6e-e75d4fa633f8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"d0e0a816-51d9-408e-b9b9-97f2eb1c85f0"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for restarting an application","message_list":[],"uuid":"a5a7b9fe-25c0-4abb-b569-1a518366e7ba","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"08043732-f667-42e8-8ee8-6bb643c42794","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"074818a1-bddb-42d4-83b3-579ffb57cda0"},{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1452c6d6-9311-4f9a-9eed-35b34061e7bc"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"074818a1-bddb-42d4-83b3-579ffb57cda0"},"edge_type":"inherent","type":"","uuid":"19428f25-566f-406d-a7aa-897325cd9e2c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1452c6d6-9311-4f9a-9eed-35b34061e7bc"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"074818a1-bddb-42d4-83b3-579ffb57cda0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"1452c6d6-9311-4f9a-9eed-35b34061e7bc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_CalmDeploymentHYCU_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"80c46341-43f6-4751-b29e-ca02bf87f401","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"08043732-f667-42e8-8ee8-6bb643c42794"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for suspending an application","message_list":[],"uuid":"63c0cf26-74ba-4843-a4f3-f01f312542df","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"48367c7d-465d-4f7d-bfce-843eb4476cd9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"eb8ac33b-4603-413b-80b3-00182a060cac","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"48367c7d-465d-4f7d-bfce-843eb4476cd9"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for modifying an application","message_list":[],"uuid":"c8a4c4ab-e422-47b5-8fa9-e578fdf7e69b","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"37b326ec-9dc5-415a-928d-7cf762c91644","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"dc9a7d9c-aee8-404a-acea-35f26ca7ad8d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"37b326ec-9dc5-415a-928d-7cf762c91644"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for powering off an application","message_list":[],"uuid":"62708e87-b326-43d9-8c93-c1e5108e9421","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"a7e12af4-4519-4538-9a0e-f70b10d06d20","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"4de0e29a-c71d-44dd-a860-3851808d088b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"4de0e29a-c71d-44dd-a860-3851808d088b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"d4cc9b63-32b5-45d6-833e-f735707dd456","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"a7e12af4-4519-4538-9a0e-f70b10d06d20"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"613a33e1-e30b-4d4c-8268-1604cc43be07","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"ca98d830-e072-40a2-af71-a57333bb1cb0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"7fee7bda-98d8-4699-8f3c-948088ecf5cd"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"7fee7bda-98d8-4699-8f3c-948088ecf5cd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"09caca52-99ff-4911-a0cd-88ee2e652f1f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"ca98d830-e072-40a2-af71-a57333bb1cb0"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"7f61ac9e-651e-498e-bae7-03e4a89b0968","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"DAG","uuid":"85de6cdf-f304-4b3a-94b8-c4932bcf34c9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"539bff8c-b0fc-4974-b7e1-c20ec5676a87"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"539bff8c-b0fc-4974-b7e1-c20ec5676a87","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"f0ffaa85-ff3f-4839-822f-eaec0380aaac","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"85de6cdf-f304-4b3a-94b8-c4932bcf34c9"},"name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}}],"message_list":[],"uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"3755dc62-8992-4e36-ab88-202269abd0ee"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"hycu-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}}]}},"variable_list":[],"name":"CalmDeploymentHYCU"}],"credential_definition_list":[{"username":"hycu","description":"","state":"ACTIVE","message_list":[],"uuid":"3755dc62-8992-4e36-ab88-202269abd0ee","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"credentialsHYCU"},{"username":"admin","description":"","state":"ACTIVE","message_list":[],"uuid":"f2a5c419-e6ae-41b7-871c-341e504b29f5","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"NTX_CREDENTIALS"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"ffadebaf-3d43-4dd7-b547-90a577911063","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"0346e1d2-c104-477c-853b-8ed7d35e7f23","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"882f1b5c-0312-4da6-95f0-b973c2d6296c"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"099d412b-6057-4eab-be43-e5c21f84d84a"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1ca56cc5-7100-43b0-91e7-ac67c86f4632"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"9e1f8ded-1835-4a41-9c92-0144c10d2d1e"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"db45ad92-0ff2-4250-8c7a-b2f53e3385f7"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"fc5d41eb-9053-4f5e-9570-7320e1d9abaf"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"db45ad92-0ff2-4250-8c7a-b2f53e3385f7"},"edge_type":"inherent","type":"","uuid":"c0b90324-79f6-4567-909b-ae10c6d7112b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"fc5d41eb-9053-4f5e-9570-7320e1d9abaf"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"9e1f8ded-1835-4a41-9c92-0144c10d2d1e"},"edge_type":"inherent","type":"","uuid":"d92e3281-8f12-4a26-a84a-5a3469bf001f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"db45ad92-0ff2-4250-8c7a-b2f53e3385f7"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1ca56cc5-7100-43b0-91e7-ac67c86f4632"},"edge_type":"inherent","type":"","uuid":"2b0764aa-d96d-4737-a59a-e81529370a57","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"9e1f8ded-1835-4a41-9c92-0144c10d2d1e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"882f1b5c-0312-4da6-95f0-b973c2d6296c"},"edge_type":"inherent","type":"","uuid":"3f8d0fb4-f389-468c-9fce-7b454fd2521e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1ca56cc5-7100-43b0-91e7-ac67c86f4632"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"882f1b5c-0312-4da6-95f0-b973c2d6296c"},"edge_type":"inherent","type":"","uuid":"14f724d2-fac2-4072-aabe-137f76693ad8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"099d412b-6057-4eab-be43-e5c21f84d84a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"099d412b-6057-4eab-be43-e5c21f84d84a"},"edge_type":"inherent","type":"","uuid":"16877fa5-98d8-47cc-a3cb-800e9ceeb9b3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"1ca56cc5-7100-43b0-91e7-ac67c86f4632"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"882f1b5c-0312-4da6-95f0-b973c2d6296c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"099d412b-6057-4eab-be43-e5c21f84d84a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"434bb81a-b33e-4255-99f7-128b64194500"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1ca56cc5-7100-43b0-91e7-ac67c86f4632","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"71e63988-7b64-460d-8552-ca040fe5e0b9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9e1f8ded-1835-4a41-9c92-0144c10d2d1e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"0dbdbb11-b2de-4389-ae09-64b44a7495e1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"db45ad92-0ff2-4250-8c7a-b2f53e3385f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"607399d2-8f5f-4890-9bb2-c6e0c2587198"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fc5d41eb-9053-4f5e-9570-7320e1d9abaf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"297771a4-8cbe-4711-a5ce-30aeda13e079","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"0346e1d2-c104-477c-853b-8ed7d35e7f23"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for starting an application","message_list":[],"uuid":"873c7a0a-240e-4cdd-9d12-6941a0744f58","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"9b14dc29-cf0a-4617-97ed-acaff4d51faf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"c7a0bd9a-ea9f-485f-9f48-900036ba2cd1"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d9094b77-7b82-4224-ab7c-9a1e86788e12"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"c7a0bd9a-ea9f-485f-9f48-900036ba2cd1"},"edge_type":"inherent","type":"","uuid":"96b1d3a3-4f89-4e51-9e03-993e393e26df","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d9094b77-7b82-4224-ab7c-9a1e86788e12"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c7a0bd9a-ea9f-485f-9f48-900036ba2cd1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"00e08693-e89a-473e-8d6e-e75d4fa633f8"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d9094b77-7b82-4224-ab7c-9a1e86788e12","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"aa86a552-0484-45c3-9dab-f4ecb453fdff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"9b14dc29-cf0a-4617-97ed-acaff4d51faf"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for restarting an application","message_list":[],"uuid":"3130db23-0f82-45a8-82eb-7b0eedab54b1","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"8544f13d-e17f-4ea7-b397-779dd22ad41a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"6d381f27-92d0-465e-8043-0cd9b622920b"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"1aac66fb-24de-4a74-99cf-2480ef9d1945"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"6d381f27-92d0-465e-8043-0cd9b622920b"},"edge_type":"inherent","type":"","uuid":"76b91ad6-5c09-4329-875a-6e13489d3cea","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"1aac66fb-24de-4a74-99cf-2480ef9d1945"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6d381f27-92d0-465e-8043-0cd9b622920b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"80c46341-43f6-4751-b29e-ca02bf87f401"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1aac66fb-24de-4a74-99cf-2480ef9d1945","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"acc14606-6e4f-4e49-adc1-003886f21586"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"8597444e-ad7c-43e6-b8b4-5d9809f94e7c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"8544f13d-e17f-4ea7-b397-779dd22ad41a"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for stopping an application","message_list":[],"uuid":"013fe7e1-fdee-4243-a7ab-83e1d55e09c5","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"80f9b4d2-ce97-4545-9373-eb311eebdefc","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"67f27824-7097-4c86-93c0-997fbd92c5ef"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"ed2d7a43-0757-47e3-9ba4-b80684c94dd6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"67f27824-7097-4c86-93c0-997fbd92c5ef"},"edge_type":"inherent","type":"","uuid":"b221eebd-ec08-4e6c-8b43-ca51afab2d00","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"ed2d7a43-0757-47e3-9ba4-b80684c94dd6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"67f27824-7097-4c86-93c0-997fbd92c5ef","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ed2d7a43-0757-47e3-9ba4-b80684c94dd6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"d4cc9b63-32b5-45d6-833e-f735707dd456"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"e35e31e7-36f0-41ae-83f8-68682aad9f3b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"80f9b4d2-ce97-4545-9373-eb311eebdefc"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"fd98e97c-f560-4979-b6da-d25548f47d82","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"b374091b-e44e-42f3-940e-135e41fdbeb0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"15eab26e-97d3-426f-9493-3e99f98df280"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"949a67f5-754a-4840-8293-4637bcfdecc8"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"f37ce9ef-34de-4988-9a87-c300974f66db"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"83f92c95-b50e-4093-a1a0-49f72d927497"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"69274f9d-5886-4583-b1c7-da79118ab93e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"15eab26e-97d3-426f-9493-3e99f98df280"},"edge_type":"inherent","type":"","uuid":"ecadfd1e-8b51-4532-8390-2c3994adf65f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"949a67f5-754a-4840-8293-4637bcfdecc8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"949a67f5-754a-4840-8293-4637bcfdecc8"},"edge_type":"inherent","type":"","uuid":"4b04f7e2-4d57-4d72-bd04-cd502da31234","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"f37ce9ef-34de-4988-9a87-c300974f66db"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"f37ce9ef-34de-4988-9a87-c300974f66db"},"edge_type":"inherent","type":"","uuid":"2237f49e-60ba-4483-ad11-cf3974355be4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"83f92c95-b50e-4093-a1a0-49f72d927497"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"83f92c95-b50e-4093-a1a0-49f72d927497"},"edge_type":"inherent","type":"","uuid":"f7597a3d-5b91-4d00-8380-1d6a73f08873","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"69274f9d-5886-4583-b1c7-da79118ab93e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"15eab26e-97d3-426f-9493-3e99f98df280","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"949a67f5-754a-4840-8293-4637bcfdecc8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"ad34fedb-f6c2-472d-a950-1fcd0c466306"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f37ce9ef-34de-4988-9a87-c300974f66db","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"60656a94-a3fd-4332-9eb7-9fa02b565f15"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"83f92c95-b50e-4093-a1a0-49f72d927497","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"09caca52-99ff-4911-a0cd-88ee2e652f1f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"69274f9d-5886-4583-b1c7-da79118ab93e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"f007d2b8-3b15-4f09-a32c-0e545760df99","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"b374091b-e44e-42f3-940e-135e41fdbeb0"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for scaleout","message_list":[],"uuid":"67c83e1b-1ed0-4848-b7c9-eed4edc493c9","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"63b03374-2356-43f5-bba7-421516b06e92","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"747c1617-62b4-4f90-b371-304705f7bb71"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"SCALING","uuid":"747c1617-62b4-4f90-b371-304705f7bb71","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"2503e2e2-b0c1-4fd9-8e02-de95b11d2683","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"a81622bf-3f1d-4162-aa60-a032fec4e1e5","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"63b03374-2356-43f5-bba7-421516b06e92"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for scalein","message_list":[],"uuid":"06ca1dd6-5e38-4b98-a2e1-007cd34e69f3","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"ec20195d-2fa1-40bd-ab2a-bf3adf0f968b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"81364009-ea25-4b29-87b0-89004d310112"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"SCALING","uuid":"81364009-ea25-4b29-87b0-89004d310112","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"f8617e82-01d5-4307-8e61-6a38fe7a5884","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"43e19117-750c-4734-8014-33eb91a200d0","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"ec20195d-2fa1-40bd-ab2a-bf3adf0f968b"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ebae51ec-29d5-46bd-b6fe-b273d122b0c7","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DAG","uuid":"bf20f79c-6762-469c-8f14-0ff7ee1f4d29","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"e95574bd-40cd-49c3-8f3d-bf7844282926"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"b6e84f3e-280b-474b-afcf-8f60918cfcfd"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"bbd84e11-e0b6-4b01-bb4f-4361fae85a0f"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"af1b2a57-9be9-4914-9878-137155cb99d8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"e95574bd-40cd-49c3-8f3d-bf7844282926"},"edge_type":"inherent","type":"","uuid":"44751317-de2a-48fa-8d81-a30659af4932","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"b6e84f3e-280b-474b-afcf-8f60918cfcfd"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"bbd84e11-e0b6-4b01-bb4f-4361fae85a0f"},"edge_type":"inherent","type":"","uuid":"fe7a7c45-5f71-472a-ada1-f77168b530cb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"af1b2a57-9be9-4914-9878-137155cb99d8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"b6e84f3e-280b-474b-afcf-8f60918cfcfd"},"edge_type":"inherent","type":"","uuid":"cddab695-e8f3-4688-973d-5fe0be82e78e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"bbd84e11-e0b6-4b01-bb4f-4361fae85a0f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e95574bd-40cd-49c3-8f3d-bf7844282926","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"22640444-1046-4be5-a592-3072b04a9279"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"b6e84f3e-280b-474b-afcf-8f60918cfcfd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bbd84e11-e0b6-4b01-bb4f-4361fae85a0f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"f0ffaa85-ff3f-4839-822f-eaec0380aaac"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"af1b2a57-9be9-4914-9878-137155cb99d8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"5746e190-b24d-44c0-82ff-48f6fb6f19a7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"bf20f79c-6762-469c-8f14-0ff7ee1f4d29"},"name":"SYS_GEN__Runbook_Deployment_03860391_4233_4777_9f8a_2f7debbc8547"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"03860391-4233-4777-9f8a-2f7debbc8547","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"}],"substrate_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"d0f2c1f8_deployment"}],"description":"","action_list":[{"description":"","message_list":[],"uuid":"8cd4b5da-2188-424e-9a41-cd27a790a183","name":"Add ABS Target","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"0fa03b72-577c-423a-927d-695d48880cd8","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get Initiator IQN","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face"},{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"},{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"},{"kind":"app_task","name":"Add ABS Target","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"},"edge_type":"user_defined","type":"","uuid":"2c37e3a4-4898-4594-a738-314053447253","to_task_reference":{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"}},{"from_task_reference":{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"},"edge_type":"user_defined","type":"","uuid":"d7b0a825-2c10-45b7-9a11-c609b689ef4b","to_task_reference":{"kind":"app_task","name":"Add ABS Target","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c"}},{"from_task_reference":{"kind":"app_task","name":"Get Initiator IQN","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face"},"edge_type":"user_defined","type":"","uuid":"c65e20c3-6e95-4a1a-a434-a4c174668205","to_task_reference":{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"795298d9_dag"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ntime = 5\nresponse = ''\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/iscsiinitiator\"\n\ntry:\n  response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n  get_iscsiinitiator = json.loads(response.content)\n  iqn = get_iscsiinitiator[\"entities\"][0][\"initiatorname\"]\nexcept Exception as e:\n  if response == \"\":\n    print \"ERROR: No response form HYCU controller or controller not reachable.\"\n  else:\n    get_iscsiinitiator = json.loads(response.content)\n    status = get_iscsiinitiator['message']['titleDescription']\n    print \"ERROR Message: {0}: Response code:({1}).\".format(status,response.status_code)\n    exit(1)\n\nprint \"INFO: Initiator Name successfully aquired: {}.\".format(iqn)\n\nprint \"INITIATOR_IQN=\" + iqn\n","eval_variables":["INITIATOR_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Get Initiator IQN"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nhycu = '@@{HYCU_HOSTNAME}@@'\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntime = 30\nstatus ={'200':'INFO: UUID sucessfully aquired.','201':'INFO: Container succesfully created.','401':'ERROR: Invalid username or password for storage cluster.','202':'ERROR: Creating Storage Container','422':'A storage container already exists' }\ncount = 1\nfinish = 13\nkey = ''\n\nif hycu == \"\" :\n    hycu = 'HYCU_Controller-'\n\nstorage_container_name = hycu + \"-HYCU-CONTAINER\"\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/storage_containers\"\n\nprint \"Creating Container for ABS target: {}.\".format(storage_container_name)\n\npayload = {\n  \"compression_delay_in_secs\": 3600,\n  \"compression_enabled\": \"true\",\n  \"enable_software_encryption\": \"false\",\n  \"finger_print_on_write\": \"off\",\n  \"name\": storage_container_name\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(api_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"201\":\n      break\n  else:\n    print \"Retrying in 5 seconds.\"\n    sleep (5)\n  if count == finish:\n    print \"ERROR: Failed to create Container '{}'. Terminating\".format(storage_container_name)\n    exit(1)\n    \ncount = 1\n\nuuid_url = api_url + \"\/?search_string=\" + storage_container_name\n\nwhile (True):\n  count += 1\n  response = urlreq(uuid_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"200\":\n    break\n  else:\n    print \"INFO: Retrying in 5 seconds\"\n    sleep(5)\n  if count == finish:\n    print \"ERROR: Failed to get Container '{}' UUID. Terminating\".format(storage_container_name)\n    exit(1)\n  \nstorage_containers = json.loads(response.content)\nstorage_container_uuid = storage_containers[\"entities\"][0][\"storage_container_uuid\"]\n\nprint (status[key]) + \" Container name: '{0}', uuid:'{1}'\".format(storage_container_name, storage_container_uuid)\nprint \"CONTAINER_UUID=\" + storage_container_uuid","eval_variables":["CONTAINER_UUID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create Container"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"f84879cb-db00-4c20-8a9e-107109d87210","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#script\n\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\nstorage_container_uuid = '@@{CONTAINER_UUID}@@'\nvgname = 'HYCU-Volume-Group'\ntarget_vg_size = (@@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024)*1.7\niqn = '@@{INITIATOR_IQN}@@'\ncount = 1\nfinish = 13\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/\"\n\ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    vgname = vgname + '-' + iqn\n\nprint \"INFO: Creating volume group '{}'.\".format(vgname)\n\ncreate_vg_url = api_url + \"volume_groups\"\npayload = {\n  \"disk_list\": [{\n    \"create_config\": {\n      \"size\": target_vg_size,\n      \"storage_container_uuid\": storage_container_uuid\n      },\n    \"index\": 0\n    }],\n    \"is_shared\": True,\n    \"name\": vgname\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(create_vg_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\n  if response.status_code == 201:\n    print \"INFO: Volume group '{}' successfully created\".format(vgname)\n    break\n  else:\n    print \"ERROR: creation of volume group '{}' failed. Retrying in 5 seconds.\".format(vgname)\n    sleep(5)\n  if count == finish:\n    print \"ERROR: creation of volume group '{}' failed. Terminating.\".format(vgname)\n    exit(1)\n\nvg_create_status = json.loads(response.content)\ntask_uuid = vg_create_status['task_uuid']\n\nsleep(5)\n\ncheck_vg_creation_url = api_url + \"tasks\/\" + task_uuid\nresponse = urlreq(check_vg_creation_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvg_create_status = json.loads(response.content)\n\nif vg_create_status['progress_status'] != \"Succeeded\":\n  print \"ERROR: creation of volume group '{}' failed.\".format(vgname)\n  exit(1)\nelse:\n  print \"INFO: creation of volume group '{}' Successful.\".format(vgname)\n    \ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    iscsi_target=vg[\"iscsi_target\"]\n    vgUUID=vg['uuid']\n\nprint \"INFO: Attaching VG {} to node.\".format(vgname)\n\nattach_url = check_vg_url + \"\/\" + vgUUID + \"\/open\"\n\npayload = {\n  \"iscsi_client\": {\n    \"client_address\": iqn\n  },\n  \"operation\": \"ATTACH\"\n}\n\nresponse = urlreq(attach_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\nif response.status_code != 201:\n  print \"ERROR: Attaching vg '{}' failed.\".format(vgname)\n  print response.status_code\nelse:\n  attach_status = json.loads(response.content)\n  status = str(attach_status['value'])\n  if status == 'True':\n    print \"INFO: Attaching vg '{}' Successful.\".format(vgname)\n    print \"TARGET_IQN=iqn.2010-06.com.nutanix:\" + iscsi_target\n  else:\n    print \"ERROR: Attaching vg '{}' failed.\".format(vgname)","eval_variables":["TARGET_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create VG"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nhycu_username = 'admin'\nhycu_password = 'admin'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntarget_name = \"NutanixABS\"\ndata_service_port = \"3260\"\ntarget_iqn = \"@@{TARGET_IQN}@@\"\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\ncount = 1\nfinish = 6\n\niscsi_api =  prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/cluster\/\"\nhycu_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\" + \"\/targets\"\n\nprint \"INFO: Aquiring iSCSI Data Services IP from '{}' storage cluster\".format(prism_ip)\nresponse = urlreq(iscsi_api, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\niscsi = json.loads(response.content)\ndataIP = iscsi['cluster_external_data_services_ipaddress']\nexternalIP = iscsi['cluster_external_ipaddress']\n\nif dataIP != None:\n  print \"INFO: Data Service IP aquired '{}'\".format(dataIP)\nelse:\n  print \"INFO: Data Service IP does not exists on this storage cluster, using cluster virutal IP\".format(externalIP)\n  dataIP = externalIP\n    \nprint \"INFO: Checking existance of target on HYCU '{}'\".format(hycu_ip)\n\nresponse = urlreq(hycu_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\ntargets = json.loads(response.content)\n\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    target_name = '@@{HYCU_HOSTNAME}@@' + \"-\" + target_name\n\nprint \"Creating target '{}' on controller\".format(target_name)\n\npayload ={\n  \"name\": target_name,\n  \"description\": \"\",\n  \"targetType\": \"I_SCSI\",\n  \"allowedBackupStreams\": 1,\n  \"encryption\": \"False\",\n  \"iScsiStorageDetails\": {\n    \"port\": data_service_port,\n    \"address\": dataIP,\n    \"chap\": \"False\",\n    \"targetname\": target_iqn,\n    \"username\": \"\",\n    \"password\": \"\",\n    \"mutualChap\": \"False\"\n    }\n}\n\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(hycu_url, verb='POST', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n\njobs_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\n  if response.status_code != 200:\n    print \"ERROR: Failed to get job status '{}'. Retrying in 5 seconds.\".format(job_uuid)\n    count +=1\n    sleep(5)\n  if response.status_code == 500:\n    print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n    count += 1\n    sleep(5)\n  job_status = json.loads(response.content)\n  if job_status[\"entities\"][0][\"status\"] == \"OK\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful.\".format(target_name,job_uuid)\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful with warning.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n    print \"ERROR: Adding ABS Target '{0}', uuid '{1}' failed.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    exit(1)\n  else:\n    print \"INFO: Getting job status '{}' in-progress sleeping for 5 seconds.\".format(job_uuid)\n    sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add ABS Target"}],"description":"","message_list":[],"uuid":"b15514e5-ca81-44c2-94de-d8bc42ff108d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"795298d9_dag","uuid":"0fa03b72-577c-423a-927d-695d48880cd8"},"name":"33f47972_runbook"}},{"description":"","message_list":[],"uuid":"16ce4c1d-d645-4195-8b03-3af51b4559b7","name":"Add AFS Target","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"c979660b-2481-41ce-892c-10d417336974","child_tasks_local_reference_list":[{"kind":"app_task","name":"Add AFS Target","uuid":"ac96368c-c035-4d44-bc75-4f1826fa08b2"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"b9d7912e_dag"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"ac96368c-c035-4d44-bc75-4f1826fa08b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\nafs_type = \"@@{NTX_EXISTING_AFS_TYPE}@@\"\nafs_host = \"@@{NTX_EXISTING_AFS_HOST}@@\"\nafs_sharedpath = \"@@{NTX_EXISTING_AFS_SHARED_PATH}@@\"\nsmb_username = \"@@{NTX_EXISTING_SMB_USERNAME}@@\"\nsmb_password = \"@@{NTX_EXISTING_SMB_PASSWORD}@@\"\nsmb_domain = \"@@{NTX_EXISTING_SMB_DOMAIN}@@\"\ntarget_size = @@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024\ntarget_name = \"AFS\" + afs_type + \"Target\"\ncount = 0\nfinish = 6\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nafs_type = afs_type.upper()\n\nif afs_type == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_TYPE' is a mandatory variable. Terminating\"\n  exit(1)\n      \nif afs_host == \"\" and afs_sharedpath == \"\" and target_name == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_HOST', 'NTX_EXISTING_AFS_SHARED_PATH', 'TARGET_NAME' are a mandatory variable. Terminating.\"\n  exit(1)\n  \nif afs_type == 'NFS':\n  print \"INFO: Creating NFS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"NFS\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"nfsFileSystemDetails\": {\n      \"address\": afs_host,\n      \"sharedPath\": afs_sharedpath\n    },\n    \"advertisedCapacityInBytes\": target_size\n  }\n\nelif afs_type == 'SMB':\n  print \"INFO: Creating ABS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"SMB\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"smbFileSystemDetails\": {\n      \"username\": smb_username,\n      \"password\": smb_password,\n      \"domain\": smb_domain,\n      \"sharedPath\": afs_sharedpath,\n      \"address\": afs_host\n    }\n  }\n  \nelse:\n  print \"ERROR: 'NTX_EXISTING_AFS_TYPE' can only be 'SMB\/NFS'.\".format(afs_type)\n  exit(1)\n   \ncheck_target_url = api_url + \"\/targets\"\nresponse = urlreq(check_target_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\ntargets = json.loads(response.content)\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    print \"ERROR: Target with name {} already exists.\".format(target_name)\n    exit(1)\n\n\ncreate_target_url = api_url + \"\/targets\"\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n  \n\njobs_url = api_url + \"\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding target '{}' successful.\".format(target_name)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding target '{}' successful with Warning\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding target '{}' failed.\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Adding target '{}' in-progress retrying in 5 seconds.\".format(target_name)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add AFS Target"}],"description":"","message_list":[],"uuid":"efce5ae7-e6ca-4b83-95b3-d51dc1225f63","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"dab8c9e8-f508-42d5-bd6c-cae4bc43854c","value":"SMB","label":"","state":"ACTIVE","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{"type":"PREDEFINED","choices":["SMB","NFS"]},"name":"NTX_EXISTING_AFS_TYPE"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"07b4e858-1e3b-4af8-aec4-382b0b4ef7fd","value":"10.169.27.176","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_AFS_HOST"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"9d9fa7cb-072c-4231-9669-c7495c7a5904","value":"\/create","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_AFS_SHARED_PATH"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"a16be3fe-12e2-4a06-aedb-9999bb9b26c5","value":"amsdemo.ct","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_SMB_DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"0305612f-3ccd-45a9-8d73-f66023eb0b6e","value":"administrator","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_EXISTING_SMB_USERNAME"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d7a39a47-b683-4ceb-aea7-f86e98534e2d","value":"","label":"","state":"ACTIVE","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"a51aa92c-21dc-4c23-8dad-711be58d1aa6"},"type":""},"editables":{"value":true},"is_hidden":false,"type":"SECRET","options":{},"name":"NTX_EXISTING_SMB_PASSWORD"}],"main_task_local_reference":{"kind":"app_task","name":"b9d7912e_dag","uuid":"c979660b-2481-41ce-892c-10d417336974"},"name":"9b3988f4_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"ca7f8265-1079-463f-88f6-8e5c24172fd2","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"eaaf0819-895f-4ca2-aac2-4320c3cb1ff3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"313901d6-22b7-4484-a5a3-938e07108d2e"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"c5dd5191-2305-4408-8ac2-6a311561c7b3"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"e802edf7-37cf-4e05-9386-ee3ec7f9b316"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"55e3b31a-e540-4c13-b168-1321ce42c3a5"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b5d711f3-dc2b-4585-8b09-ca19bd6db5a0"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7c91e258-115c-4c8e-8623-acfa5362ebe6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b5d711f3-dc2b-4585-8b09-ca19bd6db5a0"},"edge_type":"inherent","type":"","uuid":"e1d4b7b8-6f92-4376-ba24-c724e0ce4918","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7c91e258-115c-4c8e-8623-acfa5362ebe6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"55e3b31a-e540-4c13-b168-1321ce42c3a5"},"edge_type":"inherent","type":"","uuid":"b399b34b-1832-4a04-818c-d46b948e2f7f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b5d711f3-dc2b-4585-8b09-ca19bd6db5a0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"e802edf7-37cf-4e05-9386-ee3ec7f9b316"},"edge_type":"inherent","type":"","uuid":"e038532f-339a-47fc-99f1-d3ba19c7b7dc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"55e3b31a-e540-4c13-b168-1321ce42c3a5"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"313901d6-22b7-4484-a5a3-938e07108d2e"},"edge_type":"inherent","type":"","uuid":"6c6e084c-9e60-4e2e-bdda-0e4a404ce013","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"e802edf7-37cf-4e05-9386-ee3ec7f9b316"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"313901d6-22b7-4484-a5a3-938e07108d2e"},"edge_type":"inherent","type":"","uuid":"b00c9e57-4191-4630-9832-0318a1b2255d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"c5dd5191-2305-4408-8ac2-6a311561c7b3"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"c5dd5191-2305-4408-8ac2-6a311561c7b3"},"edge_type":"inherent","type":"","uuid":"608f98a7-ed29-4d9f-9cb1-ef514d47c1e8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"e802edf7-37cf-4e05-9386-ee3ec7f9b316"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"313901d6-22b7-4484-a5a3-938e07108d2e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_03860391_4233_4777_9f8a_2f7debbc8547"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c5dd5191-2305-4408-8ac2-6a311561c7b3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"434bb81a-b33e-4255-99f7-128b64194500"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e802edf7-37cf-4e05-9386-ee3ec7f9b316","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"71e63988-7b64-460d-8552-ca040fe5e0b9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"55e3b31a-e540-4c13-b168-1321ce42c3a5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"0dbdbb11-b2de-4389-ae09-64b44a7495e1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b5d711f3-dc2b-4585-8b09-ca19bd6db5a0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"607399d2-8f5f-4890-9bb2-c6e0c2587198"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7c91e258-115c-4c8e-8623-acfa5362ebe6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"6355ccf2-23a5-492f-9107-248bd145620e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"eaaf0819-895f-4ca2-aac2-4320c3cb1ff3"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}},{"description":"System action for starting an application","message_list":[],"uuid":"e7060b99-914c-44d9-837b-eec1ed64b013","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"42a46bcd-dee9-445c-bc1a-58c9f6d7f260","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"a736c3ee-651d-4c73-b578-d73183baf3ea"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7b388a16-843f-4a48-b43d-d75c42515473"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"a736c3ee-651d-4c73-b578-d73183baf3ea"},"edge_type":"inherent","type":"","uuid":"587f96b4-02af-4881-8b6b-be436edf8cfa","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7b388a16-843f-4a48-b43d-d75c42515473"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a736c3ee-651d-4c73-b578-d73183baf3ea","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"00e08693-e89a-473e-8d6e-e75d4fa633f8"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7b388a16-843f-4a48-b43d-d75c42515473","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"7fb870c5-66f0-42c3-bdfd-bc168d9c6f7f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"42a46bcd-dee9-445c-bc1a-58c9f6d7f260"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}},{"description":"System action for restarting an application","message_list":[],"uuid":"2ecaca7d-54f1-48d1-adb6-38561764dc22","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"07ea5eb3-cac4-42ae-840d-8bbbb3384e44","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"9011e25d-53d1-4655-a40f-8e17523ce5e8"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"ce465848-825d-47ea-96cf-01559c9790f8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"9011e25d-53d1-4655-a40f-8e17523ce5e8"},"edge_type":"inherent","type":"","uuid":"7a765396-3388-4dbc-8938-1410c1a56d0b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"ce465848-825d-47ea-96cf-01559c9790f8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9011e25d-53d1-4655-a40f-8e17523ce5e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"80c46341-43f6-4751-b29e-ca02bf87f401"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ce465848-825d-47ea-96cf-01559c9790f8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"acc14606-6e4f-4e49-adc1-003886f21586"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"6ab87965-cbe3-4a76-853b-922ac5b60f86","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"07ea5eb3-cac4-42ae-840d-8bbbb3384e44"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}},{"description":"System action for stopping an application","message_list":[],"uuid":"30b851da-e3eb-4697-bf41-a420b69e48fd","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"325671f9-a2e3-4187-8161-176c085579da","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"bd0fa284-d62c-4d04-b457-3306d8aeac10"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"5eb8adfb-7670-4927-b8ae-ccabf4a6e1b2"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"bd0fa284-d62c-4d04-b457-3306d8aeac10"},"edge_type":"inherent","type":"","uuid":"32e81209-7715-4650-828e-dcca824d4e51","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"5eb8adfb-7670-4927-b8ae-ccabf4a6e1b2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bd0fa284-d62c-4d04-b457-3306d8aeac10","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5eb8adfb-7670-4927-b8ae-ccabf4a6e1b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"d4cc9b63-32b5-45d6-833e-f735707dd456"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"}],"description":"","message_list":[],"uuid":"5f2f7a83-8b79-46e4-8ce3-da497a272cfc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"325671f9-a2e3-4187-8161-176c085579da"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"cb8a9a10-dad9-47fb-b4e6-76de03152cb7","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"8318f9e5-8591-4af3-98d8-b0890615f41d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"966369c8-40c0-4cdb-af7c-19fb29370172"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"1c685c15-c3c1-44a2-ba3d-f37345fd9bf2"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"8fa93f88-f15a-4f6e-ac92-1e65634e21f4"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"9a1c32f1-8ba7-4510-9557-14e612c7f94b"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"a8094f97-eb46-4a5e-91ce-689ac07447e0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"966369c8-40c0-4cdb-af7c-19fb29370172"},"edge_type":"inherent","type":"","uuid":"172249d8-b556-45d0-b8a6-297f5afc7a7a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"1c685c15-c3c1-44a2-ba3d-f37345fd9bf2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"1c685c15-c3c1-44a2-ba3d-f37345fd9bf2"},"edge_type":"inherent","type":"","uuid":"f8fc6879-f262-4839-948b-8d3ce7495d03","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"8fa93f88-f15a-4f6e-ac92-1e65634e21f4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"8fa93f88-f15a-4f6e-ac92-1e65634e21f4"},"edge_type":"inherent","type":"","uuid":"74e5c82d-8a57-48a6-a348-5fe5ccf5a265","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"9a1c32f1-8ba7-4510-9557-14e612c7f94b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"9a1c32f1-8ba7-4510-9557-14e612c7f94b"},"edge_type":"inherent","type":"","uuid":"ba17c2e0-c2b1-4944-8249-a1fa37bb2087","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"a8094f97-eb46-4a5e-91ce-689ac07447e0"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"966369c8-40c0-4cdb-af7c-19fb29370172","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1c685c15-c3c1-44a2-ba3d-f37345fd9bf2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"ad34fedb-f6c2-472d-a950-1fcd0c466306"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8fa93f88-f15a-4f6e-ac92-1e65634e21f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"60656a94-a3fd-4332-9eb7-9fa02b565f15"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9a1c32f1-8ba7-4510-9557-14e612c7f94b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"09caca52-99ff-4911-a0cd-88ee2e652f1f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"a8094f97-eb46-4a5e-91ce-689ac07447e0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"7b72b6cd-96b2-4411-8999-413d712cbfff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"8318f9e5-8591-4af3-98d8-b0890615f41d"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"20bd7a4b-2e80-474a-96f7-407431ecc830","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"},"retries":"0","description":"","type":"DAG","uuid":"3eb2cfed-e440-4be5-8f87-730015e29795","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"3e73d021-be70-4f3d-8e52-d98aed6c87a4"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"ed02da57-ea3a-4b5d-b593-19144f887f4b"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"69b8f29a-f8c8-4b66-a6d6-d7f82d093559"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"1a6b03da-0bf7-47c0-b3c0-001cdf5b78ba"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"3e73d021-be70-4f3d-8e52-d98aed6c87a4"},"edge_type":"inherent","type":"","uuid":"0dbd4a95-167a-4fcb-bdb6-57e9eb4325a0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"ed02da57-ea3a-4b5d-b593-19144f887f4b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"69b8f29a-f8c8-4b66-a6d6-d7f82d093559"},"edge_type":"inherent","type":"","uuid":"c2d32a4d-d1fe-470e-92a0-5b18f4f23505","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547","uuid":"1a6b03da-0bf7-47c0-b3c0-001cdf5b78ba"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"ed02da57-ea3a-4b5d-b593-19144f887f4b"},"edge_type":"inherent","type":"","uuid":"510864fd-fae3-45c2-8202-bea63f6a4ec3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"69b8f29a-f8c8-4b66-a6d6-d7f82d093559"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3e73d021-be70-4f3d-8e52-d98aed6c87a4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"22640444-1046-4be5-a592-3072b04a9279"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"ed02da57-ea3a-4b5d-b593-19144f887f4b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"69b8f29a-f8c8-4b66-a6d6-d7f82d093559","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a","uuid":"f0ffaa85-ff3f-4839-822f-eaec0380aaac"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_d9d5c647_b26b_4297_b8a8_a0d7d186997a"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"d0f2c1f8_deployment","uuid":"03860391-4233-4777-9f8a-2f7debbc8547"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"1a6b03da-0bf7-47c0-b3c0-001cdf5b78ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_03860391_4233_4777_9f8a_2f7debbc8547"}],"description":"","message_list":[],"uuid":"062613ec-e459-4219-a097-d75dd819983a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca","uuid":"3eb2cfed-e440-4be5-8f87-730015e29795"},"name":"SYS_GEN__Runbook_Application_c9d9ca31_923b_4d8e_9e0e_2597f211d9ca"}}],"message_list":[],"uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"cfc2cb8f-2f1e-4048-b4f5-faa2bce103be","value":"calm-hycu","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_HOSTNAME"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"db788a33-66d3-48ed-b62d-a0908953dbdc","value":"10.46.6.211","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"cffcbcde-ce0f-4489-947d-f381c8cefe13","value":"24","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_SUBNET_PREFIX"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"6c5f3ca7-5e87-4387-adc5-e9c048aac6e6","value":"10.46.6.1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_GATEWAY"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"cf75909e-fceb-4acf-b104-1ebcfe0b2ee8","value":"8.8.8.8","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_DNS"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"e6aded13-4c68-4d6b-837e-ed6fc68487d6","value":"nutanix.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"HYCU_DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f4635ffd-aebf-48e6-97bb-d8ede33d5776","value":"https:\/\/10.46.34.87:9440","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_PRODUCTION_CLUSTERS_URL"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"573e0565-cb94-4f81-8ba1-8261b96659a6","value":"https:\/\/10.46.34.88:9440","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NTX_STORAGE_CLUSTER_URL"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"e31b89b9-6af4-4964-990a-7f9f1cf155a0","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"STORAGE_SIZE_TB"}],"name":"Default"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"3755dc62-8992-4e36-ab88-202269abd0ee"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"b0624261-3e72-411d-9fb1-bf60d59b152b","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"a21d2fc7-dbf5-45c9-b9ab-d37857d7ec6f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"67427751-3803-4064-abbe-8636c6117c98"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"67427751-3803-4064-abbe-8636c6117c98","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},"edge_type":"user_defined","type":"","uuid":"43d2101b-4200-4e07-aa6c-9cd24f048531","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},"edge_type":"user_defined","type":"","uuid":"fd05b7b2-afa5-4d69-bb04-1b1e3d0156b9","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"7191788a-fa92-4fe2-af96-f557c004936c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"359c0337-de9c-493c-b5b7-5fc5c45dd302","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"111396b0-8f22-4664-a47e-fc8ee4fc51d2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba"},"name":"79a2ab44_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_4e1e1969_559f_4cfb_9226_2fda448dba81"}],"description":"","message_list":[],"uuid":"0dbdbb11-b2de-4389-ae09-64b44a7495e1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"a21d2fc7-dbf5-45c9-b9ab-d37857d7ec6f"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for creating an application","message_list":[],"uuid":"8e55388e-feb4-4dc0-9612-787938241dd4","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"9fd0d7e6-748c-47b5-9102-f49a9d4c67b0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"802d666a-9517-44c6-9749-274c633c5149"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b2cd8fed-703e-4274-9e3c-353ae87295fa"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b9a77f16-bfc0-4963-8e5f-f97706fab066"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b2cd8fed-703e-4274-9e3c-353ae87295fa"},"edge_type":"inherent","type":"","uuid":"11b3914c-5eab-4efe-ad68-efe38b9b53c1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b9a77f16-bfc0-4963-8e5f-f97706fab066"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"802d666a-9517-44c6-9749-274c633c5149"},"edge_type":"inherent","type":"","uuid":"c94a870a-12f0-44a0-bd0b-47e8782cd344","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b2cd8fed-703e-4274-9e3c-353ae87295fa"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"802d666a-9517-44c6-9749-274c633c5149","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"0dbdbb11-b2de-4389-ae09-64b44a7495e1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b2cd8fed-703e-4274-9e3c-353ae87295fa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"9368a69c_runbook","uuid":"607399d2-8f5f-4890-9bb2-c6e0c2587198"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b9a77f16-bfc0-4963-8e5f-f97706fab066","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"be6629d7-ce10-4189-9e59-ffd3af4e6797","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"9fd0d7e6-748c-47b5-9102-f49a9d4c67b0"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"8932c83b-7f61-445c-88b5-df6ec96537b1","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"ee88adec-6656-480c-9d44-ef28d923fd9f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"6be572a4-374b-48b2-97ce-1e6a02832ff2"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"6be572a4-374b-48b2-97ce-1e6a02832ff2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},"edge_type":"user_defined","type":"","uuid":"43d2101b-4200-4e07-aa6c-9cd24f048531","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},"edge_type":"user_defined","type":"","uuid":"fd05b7b2-afa5-4d69-bb04-1b1e3d0156b9","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"7191788a-fa92-4fe2-af96-f557c004936c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"359c0337-de9c-493c-b5b7-5fc5c45dd302","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"111396b0-8f22-4664-a47e-fc8ee4fc51d2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba"},"name":"79a2ab44_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_4e1e1969_559f_4cfb_9226_2fda448dba81"}],"description":"","message_list":[],"uuid":"60656a94-a3fd-4332-9eb7-9fa02b565f15","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"ee88adec-6656-480c-9d44-ef28d923fd9f"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"ce5444c1-9f04-4ef3-b44a-487557c9b599","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"eab3c6f1-2ae8-4817-8a1b-d55978b8aa22","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"52f1f7a9-dd8d-45d9-a7be-5d9c1b342c5e"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d7ba5d90-ead4-4986-8151-a2102a4afa23"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"56ea5a33-c6fa-4b06-a943-0fa93aa74600"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"52f1f7a9-dd8d-45d9-a7be-5d9c1b342c5e"},"edge_type":"inherent","type":"","uuid":"84f24764-d643-4a54-a3e5-1b18c30f9e7d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d7ba5d90-ead4-4986-8151-a2102a4afa23"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d7ba5d90-ead4-4986-8151-a2102a4afa23"},"edge_type":"inherent","type":"","uuid":"a8c7cf29-540b-4e2b-a626-dd5882c1366a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"56ea5a33-c6fa-4b06-a943-0fa93aa74600"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"52f1f7a9-dd8d-45d9-a7be-5d9c1b342c5e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d7ba5d90-ead4-4986-8151-a2102a4afa23","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cc274171_runbook","uuid":"ad34fedb-f6c2-472d-a950-1fcd0c466306"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"56ea5a33-c6fa-4b06-a943-0fa93aa74600","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"60656a94-a3fd-4332-9eb7-9fa02b565f15"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}],"description":"","message_list":[],"uuid":"b9157f97-1177-4545-a808-15c3903a6b49","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"eab3c6f1-2ae8-4817-8a1b-d55978b8aa22"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"e8e0fb9b-7553-424c-ab64-c22d1a25a68a","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"97db2511-985c-4e8e-be6b-699a144525a0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7cea9de7-9322-4182-9ea8-15c086060e19"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"65ba7e57-1c4c-4f7d-95ea-1b72f6bb7175"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"7cea9de7-9322-4182-9ea8-15c086060e19"},"edge_type":"inherent","type":"","uuid":"2fd4d256-9898-4d41-9536-27c41527100e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"65ba7e57-1c4c-4f7d-95ea-1b72f6bb7175"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7cea9de7-9322-4182-9ea8-15c086060e19","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"22640444-1046-4be5-a592-3072b04a9279"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"},{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"65ba7e57-1c4c-4f7d-95ea-1b72f6bb7175","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4e1e1969_559f_4cfb_9226_2fda448dba81"}],"description":"","message_list":[],"uuid":"685aeff8-9b6d-436e-9de8-21fae01f9928","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"97db2511-985c-4e8e-be6b-699a144525a0"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for starting an application","message_list":[],"uuid":"36bc5d92-8ba8-4cba-b78d-4e875096d451","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"e736a5bd-e016-4e0c-ad3e-01b55419dead","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"b07596c9-9811-4c7a-9337-4dabfbaaae4b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b07596c9-9811-4c7a-9337-4dabfbaaae4b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b77a0435_runbook","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"44a529a9-b99b-44a1-858f-ac7b1601c879","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"e736a5bd-e016-4e0c-ad3e-01b55419dead"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for restarting an application","message_list":[],"uuid":"03f3cfc6-7e71-488b-b417-01f1e92ab0b4","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"ed1de577-7cd8-41a7-870a-0c0d78d30757","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"d8926be1-0f85-4b1c-bf06-9572bed8077f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d8926be1-0f85-4b1c-bf06-9572bed8077f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0203ed8c_runbook","uuid":"acc14606-6e4f-4e49-adc1-003886f21586"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"6bc0b50e-6059-41db-96bd-09d541379f41","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"ed1de577-7cd8-41a7-870a-0c0d78d30757"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}},{"description":"System action for stopping an application","message_list":[],"uuid":"c9a86ae6-5640-40c2-9911-01060875e415","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"50ac8d2e-527d-410c-9f5c-bb76166106c8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30","uuid":"0f8aabdb-7836-41f2-8c37-373a232a9dbd"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0f8aabdb-7836-41f2-8c37-373a232a9dbd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"97b28e71_runbook","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_2821ab52_00e2_41a8_9d47_1d8272e2ae30"}],"description":"","message_list":[],"uuid":"35506eb9-2beb-4ac8-b620-eafb28317c08","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4e1e1969_559f_4cfb_9226_2fda448dba81","uuid":"50ac8d2e-527d-410c-9f5c-bb76166106c8"},"name":"SYS_GEN__Runbook_Package_4e1e1969_559f_4cfb_9226_2fda448dba81"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"}],"uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},"edge_type":"user_defined","type":"","uuid":"43d2101b-4200-4e07-aa6c-9cd24f048531","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},"edge_type":"user_defined","type":"","uuid":"fd05b7b2-afa5-4d69-bb04-1b1e3d0156b9","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"530e63bc_dag"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"HYCU Services"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"7191788a-fa92-4fe2-af96-f557c004936c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Production Cluster"},{"target_any_local_reference":{"kind":"app_service","name":"HYCU","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","description":"","type":"EXEC","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Storage Cluster"}],"description":"","message_list":[],"uuid":"359c0337-de9c-493c-b5b7-5fc5c45dd302","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d"},"name":"359cb705_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","description":"","type":"DAG","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0f2f0fe8_dag"}],"description":"","message_list":[],"uuid":"111396b0-8f22-4664-a47e-fc8ee4fc51d2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba"},"name":"79a2ab44_runbook"}},"variable_list":[],"name":"SetHYCU"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"ae38e92a-25ee-47c1-8b82-b621405f1d27","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"fb36a74b-6736-42a7-a8e3-3cc375660faf","child_tasks_local_reference_list":[{"kind":"app_task","name":"Image Fetch task for VM","uuid":"8b116c9e-be99-4abb-aaea-74f504bc47e6"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"SUBSTRATE_IMAGE_FETCH","uuid":"8b116c9e-be99-4abb-aaea-74f504bc47e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"","name":"HYCU_3_5_1","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.1\/hycu-3.5.1-742.qcow2","version":{"product_version":"3.5.1","type":"","product_name":"HYCU"},"architecture":"X86_64","type":""},"description":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Image Fetch task for VM"}],"description":"","message_list":[],"uuid":"434bb81a-b33e-4255-99f7-128b64194500","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"fb36a74b-6736-42a7-a8e3-3cc375660faf"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for creating an application","message_list":[],"uuid":"b6607c7c-8dad-46c6-aef7-d536c1e5bcd1","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"a9c3ab28-c510-4afb-a3ba-1da448cfb86e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"aa4ac741-c5ff-466b-b155-c65ef9c6ccc9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"},{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"aa4ac741-c5ff-466b-b155-c65ef9c6ccc9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"434bb81a-b33e-4255-99f7-128b64194500"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"0f7f3b72-54d2-458f-ae4c-a15cd0f7c761","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"a9c3ab28-c510-4afb-a3ba-1da448cfb86e"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for starting an application","message_list":[],"uuid":"816eba1a-b512-4b7b-97a7-0d6f903fae88","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"0c2177e9-e2a8-465c-9baa-1486245df56b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"9efa11a7-87f6-4e66-8e43-1d93ce4f5f10","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"0c2177e9-e2a8-465c-9baa-1486245df56b"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for restarting an application","message_list":[],"uuid":"e1269935-fb7a-496a-849f-f7e0b296412c","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"eceb102e-52d3-4363-8be7-d314fd9691f8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"3469d224-cc12-4309-b32a-b50326912345","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"eceb102e-52d3-4363-8be7-d314fd9691f8"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for stopping an application","message_list":[],"uuid":"44e56c43-325c-4f2f-8eae-d998ecb76d96","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"96d2c34d-e64b-4cb7-b2c3-8f2a19815a1a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"cb9326da-e049-4e6f-9700-7424dbd8876e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"96d2c34d-e64b-4cb7-b2c3-8f2a19815a1a"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"3b7c1ee1-8fcb-49dc-b583-fb48bc3ef59f","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"ce38f3d2-efaa-485b-a2ac-8294ca1eab6a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"f1a85fa6-b11e-4fc8-8573-5ca6378cc4f3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"ce38f3d2-efaa-485b-a2ac-8294ca1eab6a"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ffc5776d-3d17-46e4-9256-e064cde5aeb2","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"retries":"0","description":"","type":"DAG","uuid":"0d6acae0-c743-440e-b1cf-33dcb9592052","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}],"description":"","message_list":[],"uuid":"7468a4c0-4756-400b-a658-b4552c44b888","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4","uuid":"0d6acae0-c743-440e-b1cf-33dcb9592052"},"name":"SYS_GEN__Runbook_Package_fd579126_44ff_0c0d_bfe9_99cb7906c8b4"}}],"message_list":[],"service_local_reference_list":[],"uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4","state":"ACTIVE","version":"","editables":{},"type":"SUBSTRATE_IMAGE","options":{"type":"","name":"HYCU_3_5_1","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.1\/hycu-3.5.1-742.qcow2","version":{"product_version":"3.5.1","type":"","product_name":"HYCU"},"architecture":"X86_64","type":""},"description":""},"variable_list":[],"name":"HYCU_3_5_1"}]},"name":"HYCU X DPaaS on Nutanix Storage 2"},"spec":{"name":"HYCU X DPaaS on Nutanix Storage 2","resources":{"service_definition_list":[{"singleton":false,"name":"HYCU","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"ee91a012-c77b-431e-816d-2ca5d2e64a0e","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"e20cbb61_dag"}],"description":"","uuid":"607399d2-8f5f-4890-9bb2-c6e0c2587198","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e20cbb61_dag","uuid":"ee91a012-c77b-431e-816d-2ca5d2e64a0e"},"name":"9368a69c_runbook"},"type":"system","uuid":"620edf05-8b94-4630-bb89-d84e797d3e09"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"02012e96-b23a-45c0-bee6-0336f4ff5c66","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"395e33b6_dag"}],"description":"","uuid":"ad34fedb-f6c2-472d-a950-1fcd0c466306","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"395e33b6_dag","uuid":"02012e96-b23a-45c0-bee6-0336f4ff5c66"},"name":"cc274171_runbook"},"type":"system","uuid":"f855d95d-734d-47ed-83c3-9a1034560b5a"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"06ed14d6-64f1-400c-ba66-3b93278ddd8c","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"260516ed_dag"}],"description":"","uuid":"b5c5c997-b7dd-4083-acef-8f550eeeeefe","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"260516ed_dag","uuid":"06ed14d6-64f1-400c-ba66-3b93278ddd8c"},"name":"b77a0435_runbook"},"type":"system","uuid":"8a66bfcd-e63c-49f1-8b4c-273b019b3dc7"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"673158fd-2daf-4aca-8ec2-36c17af2a31b","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"eeeab6e2_dag"}],"description":"","uuid":"8451b951-3a83-405d-bf49-ac51a9f99685","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"eeeab6e2_dag","uuid":"673158fd-2daf-4aca-8ec2-36c17af2a31b"},"name":"97b28e71_runbook"},"type":"system","uuid":"dfdb2c08-d256-420c-b1b0-c319992ba6d6"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"ff8d656f-c091-466e-82df-4a41425ac682","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"443c3cae_dag"}],"description":"","uuid":"acc14606-6e4f-4e49-adc1-003886f21586","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"443c3cae_dag","uuid":"ff8d656f-c091-466e-82df-4a41425ac682"},"name":"0203ed8c_runbook"},"type":"system","uuid":"db775308-ee87-493a-aca6-f988ad0bc23e"}],"description":"","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","uuid":"3c1e8aa9-13dd-453d-a4ce-4a4e3620fac4","name":"TARGET_IQN","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"dd685249-87fd-47f6-909b-0caedf173490","name":"INITIATOR_IQN","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"c24617c5-ae0f-44ba-9695-ad4ea55ae2e3","name":"CONTAINER_UUID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","description":""}],"depends_on_list":[]}],"substrate_definition_list":[{"name":"CalmDeploymentHYCU","action_list":[],"uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"3755dc62-8992-4e36-ab88-202269abd0ee"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"hycu-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{HYCU_IP}@@"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nbootcmd:\n- \/opt\/grizzly\/bin\/cloud_init_setup.sh @@{HYCU_HOSTNAME}@@ @@{HYCU_IP}@@\/@@{HYCU_SUBNET_PREFIX}@@ @@{HYCU_GATEWAY}@@ @@{HYCU_DNS}@@ @@{HYCU_DOMAIN}@@"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","name":"HYCU_3_5_1","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":32768,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"hycu","uuid":"3755dc62-8992-4e36-ab88-202269abd0ee","name":"credentialsHYCU","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"49899671-dee4-4cf2-870e-1879b6501b5a"}}},"type":"PASSWORD","description":""},{"username":"admin","uuid":"f2a5c419-e6ae-41b7-871c-341e504b29f5","name":"NTX_CREDENTIALS","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"8cd3ebd5-5212-4d21-94a6-f591102731a2"}}},"type":"PASSWORD","description":""}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"d0f2c1f8_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"}],"description":"","published_service_local_reference_list":[],"min_replicas":"1","depends_on_list":[],"max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"CalmDeploymentHYCU","uuid":"d9d5c647-b26b-4297-b8a8-a0d7d186997a"},"type":"GREENFIELD","variable_list":[],"uuid":"03860391-4233-4777-9f8a-2f7debbc8547"}],"description":"","action_list":[{"description":"","name":"Add ABS Target","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"0fa03b72-577c-423a-927d-695d48880cd8","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get Initiator IQN","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face"},{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"},{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"},{"kind":"app_task","name":"Add ABS Target","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c"}],"attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"},"edge_type":"user_defined","type":"","uuid":"2c37e3a4-4898-4594-a738-314053447253","to_task_reference":{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"}},{"from_task_reference":{"kind":"app_task","name":"Create VG","uuid":"f84879cb-db00-4c20-8a9e-107109d87210"},"edge_type":"user_defined","type":"","uuid":"d7b0a825-2c10-45b7-9a11-c609b689ef4b","to_task_reference":{"kind":"app_task","name":"Add ABS Target","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c"}},{"from_task_reference":{"kind":"app_task","name":"Get Initiator IQN","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face"},"edge_type":"user_defined","type":"","uuid":"c65e20c3-6e95-4a1a-a434-a4c174668205","to_task_reference":{"kind":"app_task","name":"Create Container","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"795298d9_dag"},{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"014bd7a9-b88d-41df-a8e2-c16fb734face","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ntime = 5\nresponse = ''\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/iscsiinitiator\"\n\ntry:\n  response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n  get_iscsiinitiator = json.loads(response.content)\n  iqn = get_iscsiinitiator[\"entities\"][0][\"initiatorname\"]\nexcept Exception as e:\n  if response == \"\":\n    print \"ERROR: No response form HYCU controller or controller not reachable.\"\n  else:\n    get_iscsiinitiator = json.loads(response.content)\n    status = get_iscsiinitiator['message']['titleDescription']\n    print \"ERROR Message: {0}: Response code:({1}).\".format(status,response.status_code)\n    exit(1)\n\nprint \"INFO: Initiator Name successfully aquired: {}.\".format(iqn)\n\nprint \"INITIATOR_IQN=\" + iqn\n","eval_variables":["INITIATOR_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Get Initiator IQN"},{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"5cb03ef5-17b8-464e-8cf6-36025b930ead","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nhycu = '@@{HYCU_HOSTNAME}@@'\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntime = 30\nstatus ={'200':'INFO: UUID sucessfully aquired.','201':'INFO: Container succesfully created.','401':'ERROR: Invalid username or password for storage cluster.','202':'ERROR: Creating Storage Container','422':'A storage container already exists' }\ncount = 1\nfinish = 13\nkey = ''\n\nif hycu == \"\" :\n    hycu = 'HYCU_Controller-'\n\nstorage_container_name = hycu + \"-HYCU-CONTAINER\"\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/storage_containers\"\n\nprint \"Creating Container for ABS target: {}.\".format(storage_container_name)\n\npayload = {\n  \"compression_delay_in_secs\": 3600,\n  \"compression_enabled\": \"true\",\n  \"enable_software_encryption\": \"false\",\n  \"finger_print_on_write\": \"off\",\n  \"name\": storage_container_name\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(api_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"201\":\n      break\n  else:\n    print \"Retrying in 5 seconds.\"\n    sleep (5)\n  if count == finish:\n    print \"ERROR: Failed to create Container '{}'. Terminating\".format(storage_container_name)\n    exit(1)\n    \ncount = 1\n\nuuid_url = api_url + \"\/?search_string=\" + storage_container_name\n\nwhile (True):\n  count += 1\n  response = urlreq(uuid_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False, timeout=time)\n  key = response.status_code\n  key = str(key)\n  print (status[key])\n  if key == \"200\":\n    break\n  else:\n    print \"INFO: Retrying in 5 seconds\"\n    sleep(5)\n  if count == finish:\n    print \"ERROR: Failed to get Container '{}' UUID. Terminating\".format(storage_container_name)\n    exit(1)\n  \nstorage_containers = json.loads(response.content)\nstorage_container_uuid = storage_containers[\"entities\"][0][\"storage_container_uuid\"]\n\nprint (status[key]) + \" Container name: '{0}', uuid:'{1}'\".format(storage_container_name, storage_container_uuid)\nprint \"CONTAINER_UUID=\" + storage_container_uuid","eval_variables":["CONTAINER_UUID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Create Container"},{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"f84879cb-db00-4c20-8a9e-107109d87210","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"#script\n\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\nstorage_container_uuid = '@@{CONTAINER_UUID}@@'\nvgname = 'HYCU-Volume-Group'\ntarget_vg_size = (@@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024)*1.7\niqn = '@@{INITIATOR_IQN}@@'\ncount = 1\nfinish = 13\n\napi_url = prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/\"\n\ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    vgname = vgname + '-' + iqn\n\nprint \"INFO: Creating volume group '{}'.\".format(vgname)\n\ncreate_vg_url = api_url + \"volume_groups\"\npayload = {\n  \"disk_list\": [{\n    \"create_config\": {\n      \"size\": target_vg_size,\n      \"storage_container_uuid\": storage_container_uuid\n      },\n    \"index\": 0\n    }],\n    \"is_shared\": True,\n    \"name\": vgname\n}\n\nwhile(True):\n  count += 1\n  response = urlreq(create_vg_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\n  if response.status_code == 201:\n    print \"INFO: Volume group '{}' successfully created\".format(vgname)\n    break\n  else:\n    print \"ERROR: creation of volume group '{}' failed. Retrying in 5 seconds.\".format(vgname)\n    sleep(5)\n  if count == finish:\n    print \"ERROR: creation of volume group '{}' failed. Terminating.\".format(vgname)\n    exit(1)\n\nvg_create_status = json.loads(response.content)\ntask_uuid = vg_create_status['task_uuid']\n\nsleep(5)\n\ncheck_vg_creation_url = api_url + \"tasks\/\" + task_uuid\nresponse = urlreq(check_vg_creation_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvg_create_status = json.loads(response.content)\n\nif vg_create_status['progress_status'] != \"Succeeded\":\n  print \"ERROR: creation of volume group '{}' failed.\".format(vgname)\n  exit(1)\nelse:\n  print \"INFO: creation of volume group '{}' Successful.\".format(vgname)\n    \ncheck_vg_url = api_url + \"volume_groups\"\nresponse = urlreq(check_vg_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\nvgs = json.loads(response.content)\n\nfor vg in vgs['entities']:\n  if vg['name'] == vgname:\n    iscsi_target=vg[\"iscsi_target\"]\n    vgUUID=vg['uuid']\n\nprint \"INFO: Attaching VG {} to node.\".format(vgname)\n\nattach_url = check_vg_url + \"\/\" + vgUUID + \"\/open\"\n\npayload = {\n  \"iscsi_client\": {\n    \"client_address\": iqn\n  },\n  \"operation\": \"ATTACH\"\n}\n\nresponse = urlreq(attach_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False)\nif response.status_code != 201:\n  print \"ERROR: Attaching vg '{}' failed.\".format(vgname)\n  print response.status_code\nelse:\n  attach_status = json.loads(response.content)\n  status = str(attach_status['value'])\n  if status == 'True':\n    print \"INFO: Attaching vg '{}' Successful.\".format(vgname)\n    print \"TARGET_IQN=iqn.2010-06.com.nutanix:\" + iscsi_target\n  else:\n    print \"ERROR: Attaching vg '{}' failed.\".format(vgname)","eval_variables":["TARGET_IQN"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"name":"Create VG"},{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"15584b0a-e2be-41be-9f7a-15860f848c0c","child_tasks_local_reference_list":[],"attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nhycu_username = 'admin'\nhycu_password = 'admin'\nusername = '@@{NTX_CREDENTIALS.username}@@'\npassword = '@@{NTX_CREDENTIALS.secret}@@'\ntarget_name = \"NutanixABS\"\ndata_service_port = \"3260\"\ntarget_iqn = \"@@{TARGET_IQN}@@\"\nprism_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\ncount = 1\nfinish = 6\n\niscsi_api =  prism_ip + \"\/PrismGateway\/services\/rest\/v2.0\/cluster\/\"\nhycu_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\" + \"\/targets\"\n\nprint \"INFO: Aquiring iSCSI Data Services IP from '{}' storage cluster\".format(prism_ip)\nresponse = urlreq(iscsi_api, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\niscsi = json.loads(response.content)\ndataIP = iscsi['cluster_external_data_services_ipaddress']\nexternalIP = iscsi['cluster_external_ipaddress']\n\nif dataIP != None:\n  print \"INFO: Data Service IP aquired '{}'\".format(dataIP)\nelse:\n  print \"INFO: Data Service IP does not exists on this storage cluster, using cluster virutal IP\".format(externalIP)\n  dataIP = externalIP\n    \nprint \"INFO: Checking existance of target on HYCU '{}'\".format(hycu_ip)\n\nresponse = urlreq(hycu_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\ntargets = json.loads(response.content)\n\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    target_name = '@@{HYCU_HOSTNAME}@@' + \"-\" + target_name\n\nprint \"Creating target '{}' on controller\".format(target_name)\n\npayload ={\n  \"name\": target_name,\n  \"description\": \"\",\n  \"targetType\": \"I_SCSI\",\n  \"allowedBackupStreams\": 1,\n  \"encryption\": \"False\",\n  \"iScsiStorageDetails\": {\n    \"port\": data_service_port,\n    \"address\": dataIP,\n    \"chap\": \"False\",\n    \"targetname\": target_iqn,\n    \"username\": \"\",\n    \"password\": \"\",\n    \"mutualChap\": \"False\"\n    }\n}\n\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(hycu_url, verb='POST', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n\njobs_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=hycu_username, passwd=hycu_password, verify=False)\n  if response.status_code != 200:\n    print \"ERROR: Failed to get job status '{}'. Retrying in 5 seconds.\".format(job_uuid)\n    count +=1\n    sleep(5)\n  if response.status_code == 500:\n    print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n    count += 1\n    sleep(5)\n  job_status = json.loads(response.content)\n  if job_status[\"entities\"][0][\"status\"] == \"OK\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful.\".format(target_name,job_uuid)\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n    print \"INFO: Adding ABS target '{0}', uuid '{1}' successful with warning.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    break\n  elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n    print \"ERROR: Adding ABS Target '{0}', uuid '{1}' failed.\".format(target_name,job_uuid)\n    print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n    exit(1)\n  else:\n    print \"INFO: Getting job status '{}' in-progress sleeping for 5 seconds.\".format(job_uuid)\n    sleep(5)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"Add ABS Target"}],"description":"","uuid":"b15514e5-ca81-44c2-94de-d8bc42ff108d","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"795298d9_dag","uuid":"0fa03b72-577c-423a-927d-695d48880cd8"},"name":"33f47972_runbook"},"type":"user","uuid":"8cd4b5da-2188-424e-9a41-cd27a790a183"},{"description":"","name":"Add AFS Target","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"c979660b-2481-41ce-892c-10d417336974","child_tasks_local_reference_list":[{"kind":"app_task","name":"Add AFS Target","uuid":"ac96368c-c035-4d44-bc75-4f1826fa08b2"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"b9d7912e_dag"},{"target_any_local_reference":{"kind":"app_service","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30","name":"Nutanix"},"retries":"0","description":"","uuid":"ac96368c-c035-4d44-bc75-4f1826fa08b2","child_tasks_local_reference_list":[],"attrs":{"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\nafs_type = \"@@{NTX_EXISTING_AFS_TYPE}@@\"\nafs_host = \"@@{NTX_EXISTING_AFS_HOST}@@\"\nafs_sharedpath = \"@@{NTX_EXISTING_AFS_SHARED_PATH}@@\"\nsmb_username = \"@@{NTX_EXISTING_SMB_USERNAME}@@\"\nsmb_password = \"@@{NTX_EXISTING_SMB_PASSWORD}@@\"\nsmb_domain = \"@@{NTX_EXISTING_SMB_DOMAIN}@@\"\ntarget_size = @@{STORAGE_SIZE_TB}@@*1024*1024*1024*1024\ntarget_name = \"AFS\" + afs_type + \"Target\"\ncount = 0\nfinish = 6\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nafs_type = afs_type.upper()\n\nif afs_type == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_TYPE' is a mandatory variable. Terminating\"\n  exit(1)\n      \nif afs_host == \"\" and afs_sharedpath == \"\" and target_name == \"\":\n  print \"INFO: 'NTX_EXISTING_AFS_HOST', 'NTX_EXISTING_AFS_SHARED_PATH', 'TARGET_NAME' are a mandatory variable. Terminating.\"\n  exit(1)\n  \nif afs_type == 'NFS':\n  print \"INFO: Creating NFS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"NFS\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"nfsFileSystemDetails\": {\n      \"address\": afs_host,\n      \"sharedPath\": afs_sharedpath\n    },\n    \"advertisedCapacityInBytes\": target_size\n  }\n\nelif afs_type == 'SMB':\n  print \"INFO: Creating ABS target '{}'.\".format(target_name)\n  payload = {\n    \"name\": target_name,\n    \"description\": \"\",\n    \"targetType\": \"SMB\",\n    \"allowedBackupStreams\": 1,\n    \"encryption\": \"False\",\n    \"smbFileSystemDetails\": {\n      \"username\": smb_username,\n      \"password\": smb_password,\n      \"domain\": smb_domain,\n      \"sharedPath\": afs_sharedpath,\n      \"address\": afs_host\n    }\n  }\n  \nelse:\n  print \"ERROR: 'NTX_EXISTING_AFS_TYPE' can only be 'SMB\/NFS'.\".format(afs_type)\n  exit(1)\n   \ncheck_target_url = api_url + \"\/targets\"\nresponse = urlreq(check_target_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\ntargets = json.loads(response.content)\nfor target in targets['entities']:\n  if target['name'] == target_name:\n    print \"ERROR: Target with name {} already exists.\".format(target_name)\n    exit(1)\n\n\ncreate_target_url = api_url + \"\/targets\"\ntry:\n  headers = {'content-type': \"application\/json\"}\n  response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers)\n  if response.status_code != 202:\n    print \"ERROR: creation of target '{}' failed.\".format(target_name)\n  target_create_status = json.loads(response.content)\n  job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n  print \"ERROR: Creation of target '{}' failed, check username\/password\".format(target_name)\n  print e.message\n  exit(1)\n  \n\njobs_url = api_url + \"\/jobs\/\" + job_uuid\n\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding target '{}' successful.\".format(target_name)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding target '{}' successful with Warning\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding target '{}' failed.\".format(target_name)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Adding target '{}' in-progress retrying in 5 seconds.\".format(target_name)\n      sleep(5)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"Add AFS Target"}],"description":"","uuid":"efce5ae7-e6ca-4b83-95b3-d51dc1225f63","variable_list":[{"val_type":"STRING","uuid":"dab8c9e8-f508-42d5-bd6c-cae4bc43854c","name":"NTX_EXISTING_AFS_TYPE","value":"SMB","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"type":"LOCAL","options":{"choices":["SMB","NFS"]},"description":""},{"val_type":"STRING","uuid":"07b4e858-1e3b-4af8-aec4-382b0b4ef7fd","name":"NTX_EXISTING_AFS_HOST","value":"10.169.27.176","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"9d9fa7cb-072c-4231-9669-c7495c7a5904","name":"NTX_EXISTING_AFS_SHARED_PATH","value":"\/create","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"a16be3fe-12e2-4a06-aedb-9999bb9b26c5","name":"NTX_EXISTING_SMB_DOMAIN","value":"amsdemo.ct","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"0305612f-3ccd-45a9-8d73-f66023eb0b6e","name":"NTX_EXISTING_SMB_USERNAME","value":"administrator","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"d7a39a47-b683-4ceb-aea7-f86e98534e2d","name":"NTX_EXISTING_SMB_PASSWORD","label":"","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"bbf14afe-84eb-4705-a2f3-a6e4fe225487"}},"editables":{"value":true},"type":"SECRET","description":""}],"main_task_local_reference":{"kind":"app_task","name":"b9d7912e_dag","uuid":"c979660b-2481-41ce-892c-10d417336974"},"name":"9b3988f4_runbook"},"type":"user","uuid":"16ce4c1d-d645-4195-8b03-3af51b4559b7"}],"name":"Default","variable_list":[{"val_type":"STRING","uuid":"cfc2cb8f-2f1e-4048-b4f5-faa2bce103be","name":"HYCU_HOSTNAME","value":"calm-hycu","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"db788a33-66d3-48ed-b62d-a0908953dbdc","name":"HYCU_IP","value":"10.46.6.211","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"cffcbcde-ce0f-4489-947d-f381c8cefe13","name":"HYCU_SUBNET_PREFIX","value":"24","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"6c5f3ca7-5e87-4387-adc5-e9c048aac6e6","name":"HYCU_GATEWAY","value":"10.46.6.1","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"cf75909e-fceb-4acf-b104-1ebcfe0b2ee8","name":"HYCU_DNS","value":"8.8.8.8","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"e6aded13-4c68-4d6b-837e-ed6fc68487d6","name":"HYCU_DOMAIN","value":"nutanix.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"f4635ffd-aebf-48e6-97bb-d8ede33d5776","name":"NTX_PRODUCTION_CLUSTERS_URL","value":"https:\/\/10.46.34.87:9440","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"573e0565-cb94-4f81-8ba1-8261b96659a6","name":"NTX_STORAGE_CLUSTER_URL","value":"https:\/\/10.46.34.88:9440","label":"","editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"e31b89b9-6af4-4964-990a-7f9f1cf155a0","name":"STORAGE_SIZE_TB","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""}],"uuid":"c9d9ca31-923b-4d8e-9e0e-2597f211d9ca"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"credentialsHYCU","uuid":"3755dc62-8992-4e36-ab88-202269abd0ee"},"package_definition_list":[{"uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Nutanix","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"}],"name":"SetHYCU","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","name":"530e63bc_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"HYCU Services","uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},"edge_type":"user_defined","type":"","uuid":"43d2101b-4200-4e07-aa6c-9cd24f048531","to_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"}},{"from_task_reference":{"kind":"app_task","name":"Production Cluster","uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},"edge_type":"user_defined","type":"","uuid":"fd05b7b2-afa5-4d69-bb04-1b1e3d0156b9","to_task_reference":{"kind":"app_task","name":"Storage Cluster","uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","name":"HYCU Services","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\ncount = 1\nfinish = 9\ntime = 5\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\/administration\/httpserver\"\n\nprint \"INFO: Check availability of HYCU services.\"\nsleep(120)\nwhile(count < finish):\n  try:\n    response = urlreq(api_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, timeout=time, verify=False)\n    get_api_status = json.loads(response.content)\n    if get_api_status[\"message\"][\"type\"] == \"OK\":\n      print \"INFO: HYCU services are up.\"\n      break\n  except Exception as e:\n    print \"INFO: Waiting for HYCU to start service.\"\n    sleep(10)\n    count += 1\n\nif count == finish:\n  print \"ERROR: Timout waiting for HYCU service '{}'.\".format(hycu_ip)\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"aa7fb818-780f-469c-ba6d-51427f259e4e"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","name":"Production Cluster","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ips = '@@{NTX_PRODUCTION_CLUSTERS_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\ncount = 1\nfinish = 13\ntime = 30\nresponse = ''\n\nif pe_ips == \"\":\n  \"INFO: 'NTX_PRODUCTION_CLUSTER_URL' were not specified exiting.\".format(pe_ip) \n  exit(0)\n  \nif pe_username == \"\" and pe_password == \"\":\n  \"ERROR: 'NTX_PRISM_USER_FOR_HYCU' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip) \n  exit(1)\n\napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\nprint \"INFO: Adding prod clusters '{}'.\".format(pe_ips)\n\nfor pe_ip in pe_ips.split(\",\"):\n  pe_ip = str.strip(pe_ip)\n  count += 1\n  if pe_ip == \"\":\n    print \"WARNING: Wrong entry on position: '{}', enrty will be skipped.\".format(count)\n    continue\n\n  payload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n  }\n\n  create_target_url = api_url + \"\/administration\/clusters\"\n  try:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=time)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n    target_create_status = json.loads(response.content)\n    job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\n  except Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n      exit(1)\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \n  count = 1\n  jobs_url = api_url + \"\/jobs\/\" + job_uuid\n  while(True or count < finish):\n    response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n    if response.status_code != 200:\n      print \"ERROR: Failed to get job status '{}'.\".format(job_uuid)\n      if response.status_code == 500:\n        print \"ERROR: Server internal error, retrying in 5 seconds\".format(job_uuid)\n        count += 1\n        sleep(5)\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: Addition of Cluster '{}' in-progress sleeping for 5 seconds.\".format(pe_ip)\n      sleep(5)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"7191788a-fa92-4fe2-af96-f557c004936c"},{"target_any_local_reference":{"kind":"app_service","name":"Nutanix","uuid":"2821ab52-00e2-41a8-9d47-1d8272e2ae30"},"retries":"0","name":"Storage Cluster","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\n\nhycu_ip = '@@{HYCU_IP}@@'\nusername = 'admin'\npassword = 'admin'\npe_ip = '@@{NTX_STORAGE_CLUSTER_URL}@@'\npe_username = '@@{NTX_CREDENTIALS.username}@@'\npe_password = '@@{NTX_CREDENTIALS.secret}@@'\nresponse = ''\ncount = 1\nfinish = 13\n\nif pe_ip == \"\":\n  print \"ERROR: 'NTX_STORAGE_CLUSTER_URL' should not be empty\".format(pe_ip)\n  exit(1)\n  \nif pe_username == \"\" or pe_password == \"\":\n  print \"ERROR: 'NTX_CREDENTIALS' should not be empty, plese fill in the PRISM credentials for hycu\".format(pe_ip)\n  exit(1)\n  \napi_url = \"https:\/\/\" + hycu_ip + \":8443\/rest\/v1.0\"\n\npayload = {\n    \"username\": pe_username,\n    \"url\": pe_ip,\n    \"hypervisorType\": \"KVM\",\n    \"password\": pe_password\n}\n\ncreate_target_url = api_url + \"\/administration\/clusters\"\n\ntry:\n    headers = {'content-type': \"application\/json\"}\n    response = urlreq(create_target_url, verb='POST', auth=\"BASIC\", user=username, passwd=password, params=json.dumps(payload), verify=False, headers=headers, timeout=30)\n    if response.status_code != 202:\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n    else:\n      target_create_status = json.loads(response.content)\n      job_uuid = target_create_status[\"entities\"][0][\"jobUuid\"]\nexcept Exception as e:\n    if response == \"\":\n      print \"ERROR: No response form HYCU controller.\"\n    else:\n      target_create_status = json.loads(response.content)\n      status = target_create_status['message']['detailsDescription']\n      print \"ERROR Message: '{}'.\".format(status)\n      exit(1)\n  \njobs_url = api_url + \"\/jobs\/\" + job_uuid\nwhile(True or count < finish):\n  response = urlreq(jobs_url, verb='GET', auth=\"BASIC\", user=username, passwd=password, verify=False)\n  if response.status_code == 200:\n    job_status = json.loads(response.content)\n    if job_status[\"entities\"][0][\"status\"] == \"OK\":\n      print \"INFO: Adding cluster '{}' successful.\".format(pe_ip)\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"WARNING\":\n      print \"INFO: Adding cluster '{0}' successful with Warning\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      break\n    elif job_status[\"entities\"][0][\"status\"] == \"ABORTED\" or job_status[\"entities\"][0][\"status\"] == \"FATAL\" or job_status[\"entities\"][0][\"status\"] == \"ERROR\":\n      print \"ERROR: Adding cluster '{}' failed.\".format(pe_ip)\n      print job_status[\"entities\"][0][\"taskExitMessage\"][\"debug\"]\n      exit(1)\n    else:\n      print \"INFO: creation of Cluster '{}' in-progress retrying in 5 seconds.\".format(pe_ip)\n      sleep(5)\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"deb6d48d-743c-4249-83bc-e504ea0b472d"}],"name":"359cb705_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"530e63bc_dag","uuid":"bcdfa9cd-575d-4cb9-8ba6-a4eedc05185d"},"uuid":"359c0337-de9c-493c-b5b7-5fc5c45dd302"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"SetHYCU","uuid":"4e1e1969-559f-4cfb-9226-2fda448dba81"},"retries":"0","name":"0f2f0fe8_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba"}],"name":"79a2ab44_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"0f2f0fe8_dag","uuid":"dfd2db3a-26f4-46b5-b57a-b8b68299a4ba"},"uuid":"111396b0-8f22-4664-a47e-fc8ee4fc51d2"}},"variable_list":[],"description":""},{"name":"HYCU_3_5_1","type":"SUBSTRATE_IMAGE","uuid":"fd579126-44ff-0c0d-bfe9-99cb7906c8b4","variable_list":[],"options":{"name":"HYCU_3_5_1","resources":{"image_type":"DISK_IMAGE","source_uri":"https:\/\/repository.comtrade.com\/hycu\/v3.5.1\/hycu-3.5.1-742.qcow2","version":{"product_version":"3.5.1","product_name":"HYCU"},"architecture":"X86_64"}}}],"client_attrs":{"03860391-4233-4777-9f8a-2f7debbc8547":{"y":313.2204776583,"x":699.4158597946}}},"description":"* [HYCU](https:\/\/@@{HYCU.address}@@:8443)"},"api_version":"3.0","metadata":{"last_update_time":"1555518957785342","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"828d8f9b-e266-4d35-9763-d0c71ef07220","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":7,"creation_time":"1555506398673244","name":"HYCU X DPaaS on Nutanix Storage 2"}}