{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"64343b5e-3c92-47fa-b36d-224d0154270c","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"5ace4070-601a-4e58-974d-7944f16061e7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0bfadcbf_dag"}],"description":"","message_list":[],"uuid":"3422170a-ccab-48a0-9257-4d77667cb21b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0bfadcbf_dag","uuid":"5ace4070-601a-4e58-974d-7944f16061e7"},"name":"975ed99a_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"44ca06c5-382c-4263-90d0-ce7b9d69301e","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"a6ac8d3a-8668-4559-9bb7-da1832dd2abf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"9ade3d68_dag"}],"description":"","message_list":[],"uuid":"e2b1f50f-fdd6-4bfe-bb8f-41e4dee5d761","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9ade3d68_dag","uuid":"a6ac8d3a-8668-4559-9bb7-da1832dd2abf"},"name":"cf884050_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"d582d21c-e9ec-4dfb-88a4-ba47b86abaed","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"60a1dc83-8d37-4485-b388-ae61918dfe48","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"1124d60e_dag"}],"description":"","message_list":[],"uuid":"c64bf612-bfa8-463a-9ae0-75129c63447b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"1124d60e_dag","uuid":"60a1dc83-8d37-4485-b388-ae61918dfe48"},"name":"6bcf94d3_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"b2a36069-b3dc-4e91-9114-10e8ddf98ca8","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"d28405e9-c3da-452f-af2f-8a914122a66a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"0ae24e3c_dag"}],"description":"","message_list":[],"uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0ae24e3c_dag","uuid":"d28405e9-c3da-452f-af2f-8a914122a66a"},"name":"84c12573_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"fc4f66e6-95ec-4374-bb2d-4ec15a9cee86","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"69e97197-880c-43d8-9514-d13cf5785ec0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"bf858e3b_dag"}],"description":"","message_list":[],"uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"bf858e3b_dag","uuid":"69e97197-880c-43d8-9514-d13cf5785ec0"},"name":"6e2e5ff2_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"089e4ac9-6bca-42da-b4d0-f9d330cf3d0b","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"DAG","uuid":"9511602b-f8d0-484b-9553-cdd819f0f2f5","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"f13e43f7-f73c-4006-b69b-b9a5fd0bf514"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"f13e43f7-f73c-4006-b69b-b9a5fd0bf514","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"c867d919-3e88-468e-a850-f8eec07c4e37","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"9511602b-f8d0-484b-9553-cdd819f0f2f5"},"name":"SYS_GEN__Runbook_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}}],"message_list":[],"uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"c81be680-c873-4ba5-8830-8ad1016a5a4c","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"CLEANUP_OPERATION_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f3f93ce3-f5bb-443c-a503-2b4768c09f5c","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"CLUSTER_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d0c9c0c2-d8b2-4d97-8273-acc437f921dc","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"COMPUTE_PROF_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"cbf3f400-824d-41e7-8f76-a19d857f668e","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"CREATE_OPERATION_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"37f6002c-3ff6-4bb8-b1f9-a7e698355f55","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DB_ENTITY_NAME"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"692cf8c1-7279-4e8e-a9cb-d51b5716480c","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DB_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"0e9479d5-4c56-4dd5-90eb-5a181ecb5c1f","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DB_PARAM_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b6a52a51-ae40-40ab-85c5-25cd60baddb5","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DB_SERVER_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"4151a923-5f76-40d2-9ecb-62c2bb400371","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DB_SERVER_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"703dcde5-af56-403d-95fb-587cab7e6099","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"DEREGISTER_OPERATION_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"8b239de6-2219-444c-9b92-f6d3d078a998","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"NETWORK_PROF_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"48fda59b-1430-4818-9496-0939ed37afcf","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"SLA_ID"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"85e5ac80-2c0d-4b3d-835d-36aec0b909f3","value":"","label":"","state":"ACTIVE","attrs":{},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"SOFTWARE_PROF_ID"}],"name":"Era"},{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"e2aa7a44-43ee-465c-8917-0dd61824587e","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"e01f9c47-1593-4699-85c2-71de405b80d8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6fba9cbb_dag"}],"description":"","message_list":[],"uuid":"ddb2efee-8caa-4863-8640-846d8537636b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6fba9cbb_dag","uuid":"e01f9c47-1593-4699-85c2-71de405b80d8"},"name":"01945104_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"a71aa0f4-eab5-43b0-8017-8393b655ae60","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"87e3187f-f059-4f84-aad9-22cabb5cc4b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8bee20f0_dag"}],"description":"","message_list":[],"uuid":"64bfbc2d-a728-4cd9-b7ad-48ebf7938286","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8bee20f0_dag","uuid":"87e3187f-f059-4f84-aad9-22cabb5cc4b2"},"name":"fe42eb38_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ecb1c050-daec-4b59-8986-13989ef93d24","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"07229351-3023-46d7-a401-1f4cd7aed572","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"04cc6e24_dag"}],"description":"","message_list":[],"uuid":"ddc30b6c-82ce-49f4-8702-3cfa064cc6c4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"04cc6e24_dag","uuid":"07229351-3023-46d7-a401-1f4cd7aed572"},"name":"ffd25064_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"6e97d035-31b5-4953-880c-92929333d3fa","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"cd2013e9-46b9-4536-b6b2-c33f6da26b5e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"9d7e4dfb_dag"}],"description":"","message_list":[],"uuid":"a181756b-5479-4633-8eb8-8af46dce1c20","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9d7e4dfb_dag","uuid":"cd2013e9-46b9-4536-b6b2-c33f6da26b5e"},"name":"ef6acd35_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"e45a6dbd-73ae-403b-98a8-2068da9615a9","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"1c013ee9-cd7f-4ef1-8ee5-ee23bf171136","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"897e9b24_dag"}],"description":"","message_list":[],"uuid":"770735bf-263e-4611-9590-79fffa50157f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"897e9b24_dag","uuid":"1c013ee9-cd7f-4ef1-8ee5-ee23bf171136"},"name":"b81e8f8b_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"9d13b32d-334e-404e-8408-93e1d5dcda53","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"DAG","uuid":"f20584e9-b197-4238-b9a5-61d0d02ae025","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"04c08059-d1ef-468d-8ab8-77410401a16e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"04c08059-d1ef-468d-8ab8-77410401a16e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"6fd65dab-480f-4dca-8947-bc09a1b0f3c0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"f20584e9-b197-4238-b9a5-61d0d02ae025"},"name":"SYS_GEN__Runbook_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}}],"message_list":[],"uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[],"name":"Postgres"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"02a1f600-22fe-4944-9617-0b68d2941cea","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"5f49481e-3532-40aa-800c-23b7bc2ff70c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Provision_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"89744ba2-00ef-455f-b137-34aa40558a74"},{"kind":"app_task","name":"SYS_GEN__check_login_for_EraServer_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"2d6f76ca-8ee8-4030-96ab-c37a7d8c71eb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Provision_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"89744ba2-00ef-455f-b137-34aa40558a74"},"edge_type":"inherent","type":"","uuid":"a8ad4a60-7167-420a-af5e-88f034745953","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_EraServer_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"2d6f76ca-8ee8-4030-96ab-c37a7d8c71eb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"PROVISION_EXISTING_MACHINE","uuid":"89744ba2-00ef-455f-b137-34aa40558a74","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{era_ip}@@"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Existing_Machine_Provision_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"2d6f76ca-8ee8-4030-96ab-c37a7d8c71eb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{ip_address}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_EraServer_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"000af92b-71df-4b49-babd-92c65f0b87aa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"5f49481e-3532-40aa-800c-23b7bc2ff70c"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for powering on an application","message_list":[],"uuid":"bfe5dd69-bc59-431e-b469-1a72df745bec","name":"action_poweron","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"eee763f9-1280-4b9b-a353-cf04ad3ad647","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Operation_PowerOn_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"a8142151-6620-46c7-b429-ac11669e95dd"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"EXISTING_MACHINE_OPERATION","uuid":"a8142151-6620-46c7-b429-ac11669e95dd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Existing_Machine_Operation_PowerOn_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"475e551c-9d87-46e4-9405-4262470afb76","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"eee763f9-1280-4b9b-a353-cf04ad3ad647"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ec931c98-dcb6-4dc3-ab22-da250a457e9b","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"da88d84e-2fb2-45d4-97cd-7407b7649011","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Operation_Restart_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"dd1327c6-b609-48a8-806d-f16323f2fac3"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"EXISTING_MACHINE_OPERATION","uuid":"dd1327c6-b609-48a8-806d-f16323f2fac3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Existing_Machine_Operation_Restart_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"25eef5ec-45a8-4eb1-b4df-604b3df77464","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"da88d84e-2fb2-45d4-97cd-7407b7649011"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for suspending an application","message_list":[],"uuid":"92fde7a7-bf39-4e87-a7b3-f6f8e46894f1","name":"action_suspend","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"49c17b3c-8eb5-4db3-8401-a3a7dcb693c2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"0e75311b-586c-4ca1-b98f-afb3ba7a0bd8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"49c17b3c-8eb5-4db3-8401-a3a7dcb693c2"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for modifying an application","message_list":[],"uuid":"71930e63-f162-4091-b9b1-1590d30b3391","name":"action_modify","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"cc8cf811-4e99-4394-a538-ec006db9cdf5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"eb71b15d-54ef-449c-83f4-6318a193665f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"cc8cf811-4e99-4394-a538-ec006db9cdf5"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for powering off an application","message_list":[],"uuid":"5a7994bb-a45c-4df8-b0de-f55f368a3e25","name":"action_poweroff","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"c1f813bc-f5e4-476a-9b5b-9c6eddafaade","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Operation_PowerOff_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"b5272bea-1f91-4f10-a3e6-c82f1f7b6855"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"EXISTING_MACHINE_OPERATION","uuid":"b5272bea-1f91-4f10-a3e6-c82f1f7b6855","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Existing_Machine_Operation_PowerOff_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"95851546-8796-4f60-be97-dcd768d01159","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"c1f813bc-f5e4-476a-9b5b-9c6eddafaade"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"396b0472-8645-4dcb-bd63-99f2ebd081d3","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"d90030ee-77f5-43b3-abae-12088bf3fdd3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Existing_Machine_Delete_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"028f0346-2ace-4d57-82f4-a2db20f485d2"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"EXISTING_MACHINE_DELETE","uuid":"028f0346-2ace-4d57-82f4-a2db20f485d2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Existing_Machine_Delete_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"2a8240e8-4655-49b6-bd96-ee0e19578451","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"d90030ee-77f5-43b3-abae-12088bf3fdd3"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"7c11e628-5a36-422e-aa29-d7ec154fd70d","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"DAG","uuid":"a946d441-2d0c-4aec-8566-8041b1c3c86e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"179b3f3d-95aa-4d74-a268-4bfaad2250c2"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"179b3f3d-95aa-4d74-a268-4bfaad2250c2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"86048503-785c-4ba8-84ea-8302c6e3921b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"a946d441-2d0c-4aec-8566-8041b1c3c86e"},"name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}}],"message_list":[],"uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"era_creds","uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"address":true}},"os_type":"Linux","type":"EXISTING_VM","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{era_ip}@@"},"variable_list":[],"name":"EraServer"},{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"ba3ba937-9efc-4083-9ea7-218d09569944","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"79848aab-5a2b-4565-8b8a-20f35d943e44","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"87e41828-f375-477a-9966-143227485a49"},{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"5390da30-3785-42fc-b7b8-21f74e8ff84a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"87e41828-f375-477a-9966-143227485a49"},"edge_type":"inherent","type":"","uuid":"b0cb9426-0360-4e32-84d2-cc0c236e8359","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"5390da30-3785-42fc-b7b8-21f74e8ff84a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"87e41828-f375-477a-9966-143227485a49","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"lin-@@{calm_array_index}@@-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":8192,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{db_server_creds.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Centos-7.4-1801-01","uuid":"96e7ffa6-6457-4932-a9e8-ba009cd88ddf"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"5390da30-3785-42fc-b7b8-21f74e8ff84a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"9cae2053-726f-410a-83c6-13d016460aec","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"79848aab-5a2b-4565-8b8a-20f35d943e44"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for powering on an application","message_list":[],"uuid":"f638dc69-b1f3-430e-92a1-16b9c43a46a6","name":"action_poweron","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"1fe4384a-be89-456b-b8da-5cba89077212","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"d229a47e-aa8a-4c15-b0c8-65c44c9c7ac7"},{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"cffbae4e-7e33-4a6c-ab6c-70256f149c59"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"d229a47e-aa8a-4c15-b0c8-65c44c9c7ac7"},"edge_type":"inherent","type":"","uuid":"6b580c63-b1f5-4095-8bc2-ad81f012371c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"cffbae4e-7e33-4a6c-ab6c-70256f149c59"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"d229a47e-aa8a-4c15-b0c8-65c44c9c7ac7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"cffbae4e-7e33-4a6c-ab6c-70256f149c59","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"33239ac3-4246-4949-9afb-903796b40bb8","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"1fe4384a-be89-456b-b8da-5cba89077212"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for restarting an application","message_list":[],"uuid":"204086f9-f475-43ba-9c99-cbe76202afc8","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"8640be46-0797-4863-8d32-0d201be80a14","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"b6041519-96ee-4c2d-969b-059d25bb85a5"},{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"bc177a35-a8fe-44fb-bc10-8ac504c67d77"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"b6041519-96ee-4c2d-969b-059d25bb85a5"},"edge_type":"inherent","type":"","uuid":"11f64521-59f4-4bf2-a298-d7b046349c93","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"bc177a35-a8fe-44fb-bc10-8ac504c67d77"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"b6041519-96ee-4c2d-969b-059d25bb85a5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"bc177a35-a8fe-44fb-bc10-8ac504c67d77","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_Era_PostgreSQL_DB_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"7f0938cd-0a81-4560-a736-1844b4130708","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"8640be46-0797-4863-8d32-0d201be80a14"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for suspending an application","message_list":[],"uuid":"75de08d5-8328-40ea-8556-85badf503bce","name":"action_suspend","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"a2540e27-0d25-47c1-a557-37e2743f2328","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"d3fdd63e-3b97-4b14-beba-74f2861c21a1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"a2540e27-0d25-47c1-a557-37e2743f2328"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for modifying an application","message_list":[],"uuid":"d22952ef-103b-4251-8767-661e65986be5","name":"action_modify","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"80986a9d-b727-4500-9183-2e0388309771","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"e59020af-b902-43b1-8cb5-4eb62ff9ec9f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"80986a9d-b727-4500-9183-2e0388309771"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for powering off an application","message_list":[],"uuid":"1bcd0c4e-8f92-4050-adf6-36c16f79530f","name":"action_poweroff","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"dae3bf93-7270-4bc5-8cfe-faaba53635b8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"9c37ceb1-9736-44bc-ba4b-a93ae14c0fa9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"9c37ceb1-9736-44bc-ba4b-a93ae14c0fa9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"b7450fe9-9aa8-48ec-97fb-544e79c1746d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"dae3bf93-7270-4bc5-8cfe-faaba53635b8"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"0e4474f3-671f-475a-a769-8450ddc8e7cf","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"15523608-a710-4f41-b585-c6980ceb55bd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"dc667de2-01c2-4ddd-9b70-af8b6f4b89cb"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"dc667de2-01c2-4ddd-9b70-af8b6f4b89cb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"87fdf839-2eee-4939-9609-6a99bd2472d3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"15523608-a710-4f41-b585-c6980ceb55bd"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"7fee1274-8ea0-4b1e-b759-19247e5b1808","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"DAG","uuid":"69b5bbf5-ee54-4260-b0dc-d9541754c4c2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"fb5a52a7-e841-4560-9ca4-1c9ea5bfc52d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"fb5a52a7-e841-4560-9ca4-1c9ea5bfc52d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"50c21930-ada7-491a-8920-1928274d7b39","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"69b5bbf5-ee54-4260-b0dc-d9541754c4c2"},"name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}}],"message_list":[],"uuid":"c570effa-047b-405e-965e-acfcfca59ab7","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"0":{"data_source_reference":true,"device_properties":{"disk_address":{"adapter_type":true},"device_type":true}}}},"categories":true,"name":true}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"lin-@@{calm_array_index}@@-@@{calm_time}@@","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":2,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":8192,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{db_server_creds.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Centos-7.4-1801-01","uuid":"96e7ffa6-6457-4932-a9e8-ba009cd88ddf"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":1,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":2,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":3,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":4,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":5,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":6,"type":""}}},{"data_source_reference":null,"type":"","disk_size_mib":8192,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":7,"type":""}}}]}},"variable_list":[],"name":"Era_PostgreSQL_DB"}],"credential_definition_list":[{"username":"centos","description":"","state":"ACTIVE","message_list":[],"uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"KEY","name":"db_server_creds"},{"username":"admin","description":"","state":"ACTIVE","message_list":[],"uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"era_creds"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"ffcbbcea-0ee5-4ead-8dbc-020c6d5d212c","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"a8df0bd7-4bb7-41af-a478-66ef076505e0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"995a86df-571c-4d3b-8b87-931da8c232f2"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"398624f9-6201-4854-aecc-edc970a27ca8"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"1a6c5f6d-cc50-4ce4-b46a-98e60688171b"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"e8be6c03-a06b-4857-9a1d-f01975a0742b"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"8e5e4f75-880b-4d3e-8017-c9c3a63a6e99"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"e8be6c03-a06b-4857-9a1d-f01975a0742b"},"edge_type":"inherent","type":"","uuid":"72b66959-b384-4507-b90b-2954b7af4a42","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"8e5e4f75-880b-4d3e-8017-c9c3a63a6e99"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"1a6c5f6d-cc50-4ce4-b46a-98e60688171b"},"edge_type":"inherent","type":"","uuid":"02955d85-8153-4274-964a-00b4f77eafe3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"e8be6c03-a06b-4857-9a1d-f01975a0742b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"995a86df-571c-4d3b-8b87-931da8c232f2"},"edge_type":"inherent","type":"","uuid":"af8b6ebf-0c4f-43b1-90f8-984d9ff43d16","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"398624f9-6201-4854-aecc-edc970a27ca8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"398624f9-6201-4854-aecc-edc970a27ca8"},"edge_type":"inherent","type":"","uuid":"b22e17d6-4a82-4139-a9f1-bef30b76c4b5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"1a6c5f6d-cc50-4ce4-b46a-98e60688171b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"995a86df-571c-4d3b-8b87-931da8c232f2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"398624f9-6201-4854-aecc-edc970a27ca8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"9cae2053-726f-410a-83c6-13d016460aec"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1a6c5f6d-cc50-4ce4-b46a-98e60688171b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"93a6f6c0-4975-4ff0-8198-be426c904884"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e8be6c03-a06b-4857-9a1d-f01975a0742b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"01945104_runbook","uuid":"ddb2efee-8caa-4863-8640-846d8537636b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8e5e4f75-880b-4d3e-8017-c9c3a63a6e99","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"35bbac19-caac-44b8-82ea-59e4709b9d6c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"a8df0bd7-4bb7-41af-a478-66ef076505e0"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for starting an application","message_list":[],"uuid":"9664c4d6-bf6b-409e-8626-7dcbd3f3d2ce","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"c0021728-2cdd-4c5b-a1b5-52ee731bc631","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"fdc6ed96-0260-499f-a799-d647bc2b6b4e"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"38dbaf69-7d52-4b2b-b272-f2db05c70f9e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"fdc6ed96-0260-499f-a799-d647bc2b6b4e"},"edge_type":"inherent","type":"","uuid":"dad9b45e-063b-4466-90ff-7f5a0ba118a8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"38dbaf69-7d52-4b2b-b272-f2db05c70f9e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fdc6ed96-0260-499f-a799-d647bc2b6b4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"33239ac3-4246-4949-9afb-903796b40bb8"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"38dbaf69-7d52-4b2b-b272-f2db05c70f9e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"6a70d3cb-6499-4746-a67e-1b6e83c7d8fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"c0021728-2cdd-4c5b-a1b5-52ee731bc631"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for restarting an application","message_list":[],"uuid":"7c65ddcd-7ef0-4c21-a921-146e25fd035b","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"dc411ec8-823a-40f8-a088-3cebee39bd44","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"13d4f84f-bf60-46cb-832e-5460c7b8e96a"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"8a93229d-5bb5-4df3-a951-f204d882f024"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"13d4f84f-bf60-46cb-832e-5460c7b8e96a"},"edge_type":"inherent","type":"","uuid":"38aa7310-eef3-4f0b-a3de-636d30a5e38e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"8a93229d-5bb5-4df3-a951-f204d882f024"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"13d4f84f-bf60-46cb-832e-5460c7b8e96a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"7f0938cd-0a81-4560-a736-1844b4130708"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8a93229d-5bb5-4df3-a951-f204d882f024","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ffd25064_runbook","uuid":"ddc30b6c-82ce-49f4-8702-3cfa064cc6c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"f6a831f3-9229-4fdf-ac9c-bea3dc5b31f0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"dc411ec8-823a-40f8-a088-3cebee39bd44"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for stopping an application","message_list":[],"uuid":"776c4951-4055-4c63-8927-16a9d59ef41f","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"f1d467ae-c8e0-450a-8caa-d3a5de947b01","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"d2f5229d-fa68-41d5-bd1a-4cb013684019"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"09fc4868-8c34-4ff1-86d5-3d447de384d6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"d2f5229d-fa68-41d5-bd1a-4cb013684019"},"edge_type":"inherent","type":"","uuid":"2b85ec5f-ee70-48d5-896a-0a7dd4f99760","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"09fc4868-8c34-4ff1-86d5-3d447de384d6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d2f5229d-fa68-41d5-bd1a-4cb013684019","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"09fc4868-8c34-4ff1-86d5-3d447de384d6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"b7450fe9-9aa8-48ec-97fb-544e79c1746d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"}],"description":"","message_list":[],"uuid":"f22e3ce4-fb94-4e67-b9da-7a8770aa257b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"f1d467ae-c8e0-450a-8caa-d3a5de947b01"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"2ece59e0-f426-483b-9fc2-fb1956eb9e27","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"c7f24f6e-ea0b-49b5-9688-b0942b217e70","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"df441ae3-47cd-41d3-b117-647276b5dec7"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"2e9c9c04-a2b7-4a5f-8216-5d4d14007260"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"0dac990f-4193-4a80-be66-166e41b0fe1c"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c1a72b7a-c8af-4888-b748-ba1fef9e57b2"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"662c41d3-3ac2-480a-99fe-f30c20bf9b53"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"df441ae3-47cd-41d3-b117-647276b5dec7"},"edge_type":"inherent","type":"","uuid":"b1f31a76-763a-4840-946f-7bbe73aa8324","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"2e9c9c04-a2b7-4a5f-8216-5d4d14007260"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"2e9c9c04-a2b7-4a5f-8216-5d4d14007260"},"edge_type":"inherent","type":"","uuid":"52d60ce6-ff36-4526-b364-923b3f02dfa0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"0dac990f-4193-4a80-be66-166e41b0fe1c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c1a72b7a-c8af-4888-b748-ba1fef9e57b2"},"edge_type":"inherent","type":"","uuid":"c9a823e6-6150-4f67-a94d-d35189748ad8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"662c41d3-3ac2-480a-99fe-f30c20bf9b53"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"0dac990f-4193-4a80-be66-166e41b0fe1c"},"edge_type":"inherent","type":"","uuid":"1ce014af-a54c-4204-bd21-b78c2674de85","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c1a72b7a-c8af-4888-b748-ba1fef9e57b2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"df441ae3-47cd-41d3-b117-647276b5dec7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2e9c9c04-a2b7-4a5f-8216-5d4d14007260","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fe42eb38_runbook","uuid":"64bfbc2d-a728-4cd9-b7ad-48ebf7938286"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0dac990f-4193-4a80-be66-166e41b0fe1c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ccf65645-5d70-4051-b0e4-be2b0310c4c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c1a72b7a-c8af-4888-b748-ba1fef9e57b2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"87fdf839-2eee-4939-9609-6a99bd2472d3"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"662c41d3-3ac2-480a-99fe-f30c20bf9b53","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760"}],"description":"","message_list":[],"uuid":"4dce005a-8686-45f8-ae27-56db9100e3fa","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"c7f24f6e-ea0b-49b5-9688-b0942b217e70"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for scaleout","message_list":[],"uuid":"71465c0e-8031-4bcd-86ce-1934edea92bf","name":"action_scaleout","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"2be0f710-79ad-49bf-ac65-0670113e7e8a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"bdf7ec0c-9cf9-4a05-b55c-d8e81e49b5e8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"SCALING","uuid":"bdf7ec0c-9cf9-4a05-b55c-d8e81e49b5e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_55d915ec_e34e_4bd5_aa49_1f070f437760"}],"description":"","message_list":[],"uuid":"6c9de036-16f6-416f-a2d1-43ad06f7aadb","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"51b34097-74af-4849-a71c-507a3b8f6f71","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"2be0f710-79ad-49bf-ac65-0670113e7e8a"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for scalein","message_list":[],"uuid":"3acf7e15-61de-4e4c-8c24-6de9835b3e8c","name":"action_scalein","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"6dbd849e-8939-404c-919c-e2d53aada77b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"bdbdb427-93b3-40d7-b889-c23379d5f6f4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"SCALING","uuid":"bdbdb427-93b3-40d7-b889-c23379d5f6f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_55d915ec_e34e_4bd5_aa49_1f070f437760"}],"description":"","message_list":[],"uuid":"e9d3b52b-88c5-41f6-9a0e-29bf431638de","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"0f85ab61-5e5d-4dad-a640-7e2718b64054","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"6dbd849e-8939-404c-919c-e2d53aada77b"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"60b5eae4-2634-4ed5-94c1-e08f1b4e17a0","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DAG","uuid":"a5b83d7a-b751-4214-a938-2a6ba98fdbb6","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"0f011edd-35c0-4466-a0c0-828add5aeda0"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"8cf867ec-5645-46e9-b9f4-d6cbecaddb9e"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"15196a72-b8c5-4a57-8395-90a327c62246"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"b7909ef6-a4cc-4612-bc1c-8638780cc652"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"0f011edd-35c0-4466-a0c0-828add5aeda0"},"edge_type":"inherent","type":"","uuid":"f3ca58d7-a25c-461b-ae14-32bcd7e72058","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"8cf867ec-5645-46e9-b9f4-d6cbecaddb9e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"15196a72-b8c5-4a57-8395-90a327c62246"},"edge_type":"inherent","type":"","uuid":"b6e6313b-fde0-42c3-92df-779ad18f0f0d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"b7909ef6-a4cc-4612-bc1c-8638780cc652"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"8cf867ec-5645-46e9-b9f4-d6cbecaddb9e"},"edge_type":"inherent","type":"","uuid":"8d3da597-2a5d-430d-b68c-220e939ceedc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"15196a72-b8c5-4a57-8395-90a327c62246"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0f011edd-35c0-4466-a0c0-828add5aeda0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"6fd65dab-480f-4dca-8947-bc09a1b0f3c0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"8cf867ec-5645-46e9-b9f4-d6cbecaddb9e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"15196a72-b8c5-4a57-8395-90a327c62246","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"50c21930-ada7-491a-8920-1928274d7b39"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"b7909ef6-a4cc-4612-bc1c-8638780cc652","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760"}],"description":"","message_list":[],"uuid":"34317a93-c05b-494d-a03e-a3171d067c88","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"a5b83d7a-b751-4214-a938-2a6ba98fdbb6"},"name":"SYS_GEN__Runbook_Deployment_55d915ec_e34e_4bd5_aa49_1f070f437760"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"845d9203-370b-404b-a82d-1a49c9598d2a","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{"min_replicas":true,"max_replicas":true},"package_local_reference_list":[{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"}],"substrate_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"f6be2786_deployment"},{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"53d30a6b-392e-47f6-b882-95532b014fab","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"df0687ea-f7bd-4d13-8be5-5fefbe420796","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"56f5c45c-2130-45fb-9ebc-5cd5cd66100f"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"430a5909-8175-46d0-85f1-2a54cf805605"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"eccc7e05-febd-4a40-a9d4-0f2e4c002f81"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c94aee14-f4fd-44fa-98d2-136b7aca444a"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0ec78b73-3e41-4b26-a3b7-d3d0fb9541e7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c94aee14-f4fd-44fa-98d2-136b7aca444a"},"edge_type":"inherent","type":"","uuid":"1f1d0109-1a5e-45cf-967b-7643125a6c50","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0ec78b73-3e41-4b26-a3b7-d3d0fb9541e7"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"eccc7e05-febd-4a40-a9d4-0f2e4c002f81"},"edge_type":"inherent","type":"","uuid":"9e83fe8c-661b-4db4-95b3-2aca5dd076d6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c94aee14-f4fd-44fa-98d2-136b7aca444a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"56f5c45c-2130-45fb-9ebc-5cd5cd66100f"},"edge_type":"inherent","type":"","uuid":"098d4285-7fb8-40f3-9771-f39661b7f0a9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"430a5909-8175-46d0-85f1-2a54cf805605"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"430a5909-8175-46d0-85f1-2a54cf805605"},"edge_type":"inherent","type":"","uuid":"87d06424-091a-4df8-83e7-3f0bb042cf91","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"eccc7e05-febd-4a40-a9d4-0f2e4c002f81"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"56f5c45c-2130-45fb-9ebc-5cd5cd66100f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"430a5909-8175-46d0-85f1-2a54cf805605","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"000af92b-71df-4b49-babd-92c65f0b87aa"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"eccc7e05-febd-4a40-a9d4-0f2e4c002f81","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"14ac593b-8661-4fde-a5a2-1659da90bd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c94aee14-f4fd-44fa-98d2-136b7aca444a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"975ed99a_runbook","uuid":"3422170a-ccab-48a0-9257-4d77667cb21b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0ec78b73-3e41-4b26-a3b7-d3d0fb9541e7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"76dca32d-57e0-4088-982f-1c11f87c85c5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"df0687ea-f7bd-4d13-8be5-5fefbe420796"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for starting an application","message_list":[],"uuid":"176336b4-b441-4db2-8201-32558972ec31","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"7eb5e027-cfee-4871-98f5-9777fa83478e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"688076f4-2b0d-41fa-9943-78a11fceb677"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"56cf410e-68e5-4193-b6c6-92196f086ebf"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"688076f4-2b0d-41fa-9943-78a11fceb677"},"edge_type":"inherent","type":"","uuid":"cca73519-eb9e-4a46-a6ac-d30a3bacd26a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"56cf410e-68e5-4193-b6c6-92196f086ebf"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"688076f4-2b0d-41fa-9943-78a11fceb677","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"475e551c-9d87-46e4-9405-4262470afb76"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"56cf410e-68e5-4193-b6c6-92196f086ebf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"71fc4821-a96a-44fb-8e96-f7f9479ede4b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"7eb5e027-cfee-4871-98f5-9777fa83478e"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for restarting an application","message_list":[],"uuid":"ec0f19cd-4b11-45a5-a6b0-da0da8363814","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"5045a3b9-ed6f-4b87-991a-56730bc00faa","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"6097d29a-683d-4db7-b585-e534b3918701"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"a55961e2-4556-47c5-ba4c-93090bb01b4b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"6097d29a-683d-4db7-b585-e534b3918701"},"edge_type":"inherent","type":"","uuid":"ead15932-4843-4b55-9680-b8f6a3dededa","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"a55961e2-4556-47c5-ba4c-93090bb01b4b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6097d29a-683d-4db7-b585-e534b3918701","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"25eef5ec-45a8-4eb1-b4df-604b3df77464"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a55961e2-4556-47c5-ba4c-93090bb01b4b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6bcf94d3_runbook","uuid":"c64bf612-bfa8-463a-9ae0-75129c63447b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"63b595f4-2e8c-403e-89bf-aab2a35ed049","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"5045a3b9-ed6f-4b87-991a-56730bc00faa"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for stopping an application","message_list":[],"uuid":"a24597bf-e12f-4ae1-a31a-33384c79aea6","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"4be2ac70-e48c-4b13-8269-c04ec397b30f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0e469bfe-1933-473e-a5ec-fab29be7e1ca"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"96106c97-9f33-4dd0-b758-a3d46ca2e706"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0e469bfe-1933-473e-a5ec-fab29be7e1ca"},"edge_type":"inherent","type":"","uuid":"e2da5667-fedc-4a0c-9ef4-c8980dffd44d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"96106c97-9f33-4dd0-b758-a3d46ca2e706"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0e469bfe-1933-473e-a5ec-fab29be7e1ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"96106c97-9f33-4dd0-b758-a3d46ca2e706","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"95851546-8796-4f60-be97-dcd768d01159"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"40638b2e-e0cc-4940-bba3-40e97f83c3ae","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"4be2ac70-e48c-4b13-8269-c04ec397b30f"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"623ab1f5-5d67-476f-ac00-de2e6b045a87","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"de8589e5-f912-46aa-a32d-618547db2568","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"16b3efec-094c-46d4-a993-4a7a976a2a56"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"2488ed49-47a3-43fe-b3b7-d673b04386a2"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c6fe0eee-a854-48b5-af4c-9e838606574d"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"525eaf59-4c01-4b58-a6e3-550d8ea9ea1a"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"4caac54b-d5a8-444e-9b73-72d1ff11de44"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"16b3efec-094c-46d4-a993-4a7a976a2a56"},"edge_type":"inherent","type":"","uuid":"973baba7-126e-4cef-960c-adb689d0841c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"2488ed49-47a3-43fe-b3b7-d673b04386a2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"2488ed49-47a3-43fe-b3b7-d673b04386a2"},"edge_type":"inherent","type":"","uuid":"d4cc84c8-ea43-494b-8549-9217cb7d2846","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c6fe0eee-a854-48b5-af4c-9e838606574d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"525eaf59-4c01-4b58-a6e3-550d8ea9ea1a"},"edge_type":"inherent","type":"","uuid":"bdb955bf-7cba-436e-b515-fc6eff191e24","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"4caac54b-d5a8-444e-9b73-72d1ff11de44"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c6fe0eee-a854-48b5-af4c-9e838606574d"},"edge_type":"inherent","type":"","uuid":"e1cade94-2a44-4a5f-b515-d404f367f402","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"525eaf59-4c01-4b58-a6e3-550d8ea9ea1a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"16b3efec-094c-46d4-a993-4a7a976a2a56","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2488ed49-47a3-43fe-b3b7-d673b04386a2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cf884050_runbook","uuid":"e2b1f50f-fdd6-4bfe-bb8f-41e4dee5d761"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c6fe0eee-a854-48b5-af4c-9e838606574d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"b44d1a41-efaa-461c-abba-29b64026c5a1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"525eaf59-4c01-4b58-a6e3-550d8ea9ea1a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"2a8240e8-4655-49b6-bd96-ee0e19578451"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"4caac54b-d5a8-444e-9b73-72d1ff11de44","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}],"description":"","message_list":[],"uuid":"6cae832b-24bd-41b3-a3c8-2c6db0715ac5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"de8589e5-f912-46aa-a32d-618547db2568"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for scaleout","message_list":[],"uuid":"0034b47f-6365-4ef6-8c54-b2aec9cfced4","name":"action_scaleout","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"dd3ee10c-3a9c-4696-9760-26dfc18e0ae1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"366bb1ab-7486-4270-806e-f9da8f433cac"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"SCALING","uuid":"366bb1ab-7486-4270-806e-f9da8f433cac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}],"description":"","message_list":[],"uuid":"72519407-aae5-4f36-96d5-75c177a99c0f","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"8c8ebe70-6a16-41d9-bc27-25d7c1152821","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"dd3ee10c-3a9c-4696-9760-26dfc18e0ae1"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for scalein","message_list":[],"uuid":"8cdce251-3a60-4c52-ba52-21b44c91a0a6","name":"action_scalein","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"2c9f04de-badd-4557-af94-f1362b894b75","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"54ccf28a-d27e-40d1-95af-9f709555caa9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"SCALING","uuid":"54ccf28a-d27e-40d1-95af-9f709555caa9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}],"description":"","message_list":[],"uuid":"374b438e-5145-43a2-8318-1940ef83a7bb","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d105243e-46be-4042-b12d-d0d8f3aae56c","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"2c9f04de-badd-4557-af94-f1362b894b75"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"239cb3df-aa77-40b2-9fb3-f60c2773c409","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DAG","uuid":"7326ddf1-8465-4f05-9c56-f2a97e134d63","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"7f42009e-0ed9-423d-8079-a34035b7d64e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"6d3963b8-7cbc-4a8d-8411-1ed9afe1266f"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"97523c3c-88e3-4a60-9632-9c4c1d97f138"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"cd1a9beb-6892-41a0-9cfb-74b19da7b679"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"7f42009e-0ed9-423d-8079-a34035b7d64e"},"edge_type":"inherent","type":"","uuid":"4fda19cc-6be5-46e4-a84d-ea927fecd9c7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"6d3963b8-7cbc-4a8d-8411-1ed9afe1266f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"97523c3c-88e3-4a60-9632-9c4c1d97f138"},"edge_type":"inherent","type":"","uuid":"8e6cb8f9-738c-4b31-83a0-f55fca7b0ca7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"cd1a9beb-6892-41a0-9cfb-74b19da7b679"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"6d3963b8-7cbc-4a8d-8411-1ed9afe1266f"},"edge_type":"inherent","type":"","uuid":"f9ca231c-4a5e-4216-bc96-481f5ecf9f62","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"97523c3c-88e3-4a60-9632-9c4c1d97f138"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7f42009e-0ed9-423d-8079-a34035b7d64e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c867d919-3e88-468e-a850-f8eec07c4e37"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"6d3963b8-7cbc-4a8d-8411-1ed9afe1266f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"97523c3c-88e3-4a60-9632-9c4c1d97f138","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"86048503-785c-4ba8-84ea-8302c6e3921b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"cd1a9beb-6892-41a0-9cfb-74b19da7b679","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}],"description":"","message_list":[],"uuid":"dfb98569-4737-4df0-b34d-dd1e63b29bf1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"7326ddf1-8465-4f05-9c56-f2a97e134d63"},"name":"SYS_GEN__Runbook_Deployment_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"}],"substrate_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"f9a4c530_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"b1283a77-1ac7-4fdf-806f-c5ac5376f9aa","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"b704f673-49f4-4b91-91f1-9f8f9728ad9f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"04d17bf4-e77d-4620-aab7-38e35f760740"},{"kind":"app_task","name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"0a4bb1fd-0321-49c7-9c50-42a64ee28d7d"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c95f4787-89dd-4708-b47a-02269172ac73"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"c2b3131e-4de2-4df1-9efb-67988f9a4bc0"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"469cb2ae-b46e-4727-bd9b-9b4d0440fbb0"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c463d368-60a3-481d-8d54-46accbc2ca68"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"a6d847b9-c7ff-40d5-a708-533c428be656"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"3f130470-3a51-4f08-866a-73f5a6e7ce18"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"83d8e143-2add-4777-b65c-4f372e7811b9"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"0a251232-bb22-4b3c-a294-e6092f18f1d5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"3f130470-3a51-4f08-866a-73f5a6e7ce18"},"edge_type":"inherent","type":"","uuid":"02a7311e-cb56-45d0-afcf-b19ace12ca6a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"0a251232-bb22-4b3c-a294-e6092f18f1d5"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"469cb2ae-b46e-4727-bd9b-9b4d0440fbb0"},"edge_type":"inherent","type":"","uuid":"f23e9123-ce9d-4d6c-8a96-ce84dd89bf93","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"3f130470-3a51-4f08-866a-73f5a6e7ce18"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"04d17bf4-e77d-4620-aab7-38e35f760740"},"edge_type":"inherent","type":"","uuid":"4f6fb39b-2083-4bb8-b3ac-6d7bf2af4e58","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c95f4787-89dd-4708-b47a-02269172ac73"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"c95f4787-89dd-4708-b47a-02269172ac73"},"edge_type":"inherent","type":"","uuid":"770ee9ff-7bb8-4827-8c12-aed3eff9dcda","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"469cb2ae-b46e-4727-bd9b-9b4d0440fbb0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"a6d847b9-c7ff-40d5-a708-533c428be656"},"edge_type":"inherent","type":"","uuid":"ab4a9424-06d6-4b4b-8948-209f91757432","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"83d8e143-2add-4777-b65c-4f372e7811b9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c463d368-60a3-481d-8d54-46accbc2ca68"},"edge_type":"inherent","type":"","uuid":"6d830039-0fb9-40c3-9f8d-b5d0307e856e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"a6d847b9-c7ff-40d5-a708-533c428be656"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"0a4bb1fd-0321-49c7-9c50-42a64ee28d7d"},"edge_type":"inherent","type":"","uuid":"d24d6e41-60f9-4d0d-8280-817eb93c5259","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"c2b3131e-4de2-4df1-9efb-67988f9a4bc0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"c2b3131e-4de2-4df1-9efb-67988f9a4bc0"},"edge_type":"inherent","type":"","uuid":"14bd54f1-fa9d-4897-84b0-c651804ecb18","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c463d368-60a3-481d-8d54-46accbc2ca68"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"04d17bf4-e77d-4620-aab7-38e35f760740","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"0a4bb1fd-0321-49c7-9c50-42a64ee28d7d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c95f4787-89dd-4708-b47a-02269172ac73","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"9cae2053-726f-410a-83c6-13d016460aec"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c2b3131e-4de2-4df1-9efb-67988f9a4bc0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"000af92b-71df-4b49-babd-92c65f0b87aa"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"469cb2ae-b46e-4727-bd9b-9b4d0440fbb0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"93a6f6c0-4975-4ff0-8198-be426c904884"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c463d368-60a3-481d-8d54-46accbc2ca68","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"14ac593b-8661-4fde-a5a2-1659da90bd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a6d847b9-c7ff-40d5-a708-533c428be656","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"975ed99a_runbook","uuid":"3422170a-ccab-48a0-9257-4d77667cb21b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3f130470-3a51-4f08-866a-73f5a6e7ce18","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"01945104_runbook","uuid":"ddb2efee-8caa-4863-8640-846d8537636b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"83d8e143-2add-4777-b65c-4f372e7811b9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0a251232-bb22-4b3c-a294-e6092f18f1d5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"1c90e116-bd04-4dc0-8a67-e8bbfe483885","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"b704f673-49f4-4b91-91f1-9f8f9728ad9f"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}},{"description":"System action for starting an application","message_list":[],"uuid":"0c9f8e76-fb4d-4402-8dd5-4d395e05649f","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"987f8d04-05da-417c-8298-f773ab18ff7e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"990b7046-57c0-4101-9b0c-332205a8f45b"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"76f9b317-e1ea-472c-a78c-7008d3be3c87"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"4b0279a7-d835-426a-8890-7a898a8870cc"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"5d97882c-2e31-4632-ae6b-7232787b4298"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"990b7046-57c0-4101-9b0c-332205a8f45b"},"edge_type":"inherent","type":"","uuid":"cd6ff48a-c8a8-44be-9231-1d47a214c886","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"4b0279a7-d835-426a-8890-7a898a8870cc"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"76f9b317-e1ea-472c-a78c-7008d3be3c87"},"edge_type":"inherent","type":"","uuid":"72dcf7c6-813c-44ed-b608-644f6fe9f191","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"5d97882c-2e31-4632-ae6b-7232787b4298"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"990b7046-57c0-4101-9b0c-332205a8f45b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"33239ac3-4246-4949-9afb-903796b40bb8"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"76f9b317-e1ea-472c-a78c-7008d3be3c87","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"475e551c-9d87-46e4-9405-4262470afb76"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4b0279a7-d835-426a-8890-7a898a8870cc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5d97882c-2e31-4632-ae6b-7232787b4298","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"b24143f0-a02e-4ea2-991e-8ca3e8d75da6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"987f8d04-05da-417c-8298-f773ab18ff7e"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}},{"description":"System action for restarting an application","message_list":[],"uuid":"dba708ce-372a-4da9-8888-f96382787d15","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"af7c4ab8-c61c-4bfa-964c-cb7d24f19988","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"43021b13-cce8-4d90-958e-a38963db9316"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"5fb471e4-580a-4ea9-84d7-55bd02a438b1"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"33b748e6-fd72-4552-b672-d8aa5b3b16e6"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"7645d0bf-a75e-41f9-94bc-b484c89cba77"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"43021b13-cce8-4d90-958e-a38963db9316"},"edge_type":"inherent","type":"","uuid":"118c9ef3-be0b-438a-86da-ba78f4296076","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"7645d0bf-a75e-41f9-94bc-b484c89cba77"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"5fb471e4-580a-4ea9-84d7-55bd02a438b1"},"edge_type":"inherent","type":"","uuid":"64dcf239-2549-4fb1-bc33-dfa7444eba32","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"33b748e6-fd72-4552-b672-d8aa5b3b16e6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"43021b13-cce8-4d90-958e-a38963db9316","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"7f0938cd-0a81-4560-a736-1844b4130708"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5fb471e4-580a-4ea9-84d7-55bd02a438b1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"25eef5ec-45a8-4eb1-b4df-604b3df77464"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"33b748e6-fd72-4552-b672-d8aa5b3b16e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6bcf94d3_runbook","uuid":"c64bf612-bfa8-463a-9ae0-75129c63447b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7645d0bf-a75e-41f9-94bc-b484c89cba77","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ffd25064_runbook","uuid":"ddc30b6c-82ce-49f4-8702-3cfa064cc6c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"785d9b27-204c-4b0d-a06a-c64f9b06b9fc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"af7c4ab8-c61c-4bfa-964c-cb7d24f19988"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}},{"description":"System action for stopping an application","message_list":[],"uuid":"cf0f8db5-a843-43d3-904a-12ce725837cc","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"33aab7dc-e108-4c7c-9cd9-c19b4f8941e1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"5cbeeb8e-3fc4-46ac-9daa-e6a53d74e8a1"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0865873f-80d1-4eaf-b793-185459c5a786"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"549f1629-5789-4fa8-8694-196136b2dd70"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"66cf8826-4482-4dfa-9e1b-94c829ad1824"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"5cbeeb8e-3fc4-46ac-9daa-e6a53d74e8a1"},"edge_type":"inherent","type":"","uuid":"20f647c2-1530-419d-b055-71690256f0f7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"549f1629-5789-4fa8-8694-196136b2dd70"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"0865873f-80d1-4eaf-b793-185459c5a786"},"edge_type":"inherent","type":"","uuid":"8be7237e-9dd6-4bc2-b4b9-4da4b10187c4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"66cf8826-4482-4dfa-9e1b-94c829ad1824"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5cbeeb8e-3fc4-46ac-9daa-e6a53d74e8a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0865873f-80d1-4eaf-b793-185459c5a786","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"549f1629-5789-4fa8-8694-196136b2dd70","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"b7450fe9-9aa8-48ec-97fb-544e79c1746d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"66cf8826-4482-4dfa-9e1b-94c829ad1824","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"95851546-8796-4f60-be97-dcd768d01159"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"}],"description":"","message_list":[],"uuid":"97e5d30a-e6c9-4247-a96f-ae0500f82c37","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"33aab7dc-e108-4c7c-9cd9-c19b4f8941e1"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"fc534e2e-1869-4123-aaca-9f21fd9c4b37","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"53028999-59ff-4d84-9351-a361c128bafa","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c2ae526d-0af1-4a7d-9eb1-617c719a15dd"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"54f61cf6-24b7-4d6f-8e1e-c64f4ac893c8"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"04949de2-4bc8-4740-b777-425507f17605"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"9df0981a-4ab6-4414-a8ee-8b8f6c1e8d4e"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"f9b57f63-db9c-499f-a54d-bfbdbb860d33"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ea514e13-4d5f-45a7-a3e4-9c603bf4f0dc"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"2a944604-51f4-4b2a-b7c5-7f4ca480f414"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"0be96e4c-f257-4693-b61b-c1ae2687c288"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"ddb2cc09-3c09-4da8-9112-37bb5da19a67"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"66514623-e3e1-4352-9898-186b56d54681"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"54f61cf6-24b7-4d6f-8e1e-c64f4ac893c8"},"edge_type":"inherent","type":"","uuid":"80a99d3d-1803-428f-9a5f-5adca8050ec5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"9df0981a-4ab6-4414-a8ee-8b8f6c1e8d4e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"9df0981a-4ab6-4414-a8ee-8b8f6c1e8d4e"},"edge_type":"inherent","type":"","uuid":"1bdbe4d8-91c0-437a-ab9d-4e5b8ed3d6bc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ea514e13-4d5f-45a7-a3e4-9c603bf4f0dc"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"2a944604-51f4-4b2a-b7c5-7f4ca480f414"},"edge_type":"inherent","type":"","uuid":"55163244-5c67-4667-8f93-27cb75bbb4aa","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"ddb2cc09-3c09-4da8-9112-37bb5da19a67"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ea514e13-4d5f-45a7-a3e4-9c603bf4f0dc"},"edge_type":"inherent","type":"","uuid":"bd6a13ef-136f-480f-9e99-66db27102f00","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"2a944604-51f4-4b2a-b7c5-7f4ca480f414"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c2ae526d-0af1-4a7d-9eb1-617c719a15dd"},"edge_type":"inherent","type":"","uuid":"c0f8b5fb-f373-4267-8566-95ff44bd93fb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"04949de2-4bc8-4740-b777-425507f17605"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"04949de2-4bc8-4740-b777-425507f17605"},"edge_type":"inherent","type":"","uuid":"f2a01093-1745-4de2-b05b-23599fe61329","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"f9b57f63-db9c-499f-a54d-bfbdbb860d33"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"0be96e4c-f257-4693-b61b-c1ae2687c288"},"edge_type":"inherent","type":"","uuid":"2c7ac19e-4526-4659-8057-b9fca997be5f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"66514623-e3e1-4352-9898-186b56d54681"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"f9b57f63-db9c-499f-a54d-bfbdbb860d33"},"edge_type":"inherent","type":"","uuid":"de9a3b39-7ef6-4d16-ac4d-c4defeeca9a8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"0be96e4c-f257-4693-b61b-c1ae2687c288"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c2ae526d-0af1-4a7d-9eb1-617c719a15dd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"54f61cf6-24b7-4d6f-8e1e-c64f4ac893c8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"04949de2-4bc8-4740-b777-425507f17605","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cf884050_runbook","uuid":"e2b1f50f-fdd6-4bfe-bb8f-41e4dee5d761"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9df0981a-4ab6-4414-a8ee-8b8f6c1e8d4e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fe42eb38_runbook","uuid":"64bfbc2d-a728-4cd9-b7ad-48ebf7938286"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f9b57f63-db9c-499f-a54d-bfbdbb860d33","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"b44d1a41-efaa-461c-abba-29b64026c5a1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ea514e13-4d5f-45a7-a3e4-9c603bf4f0dc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ccf65645-5d70-4051-b0e4-be2b0310c4c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2a944604-51f4-4b2a-b7c5-7f4ca480f414","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"87fdf839-2eee-4939-9609-6a99bd2472d3"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0be96e4c-f257-4693-b61b-c1ae2687c288","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"2a8240e8-4655-49b6-bd96-ee0e19578451"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"ddb2cc09-3c09-4da8-9112-37bb5da19a67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"66514623-e3e1-4352-9898-186b56d54681","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"}],"description":"","message_list":[],"uuid":"58682d31-aeec-452a-b133-d2c0eb683ebb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"53028999-59ff-4d84-9351-a361c128bafa"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"beeb3137-b833-4282-b4ba-6b186b4d7fee","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118"},"retries":"0","description":"","type":"DAG","uuid":"c0db7f10-6f1c-47f8-937c-2bc465483cef","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"452ead79-e89b-4eaf-b8cf-12ca3ec690ba"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"b280fccc-df6e-4709-9cc6-e68bb2953bf6"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"cf2538b1-1cb0-4aff-b51e-d273208e564a"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c192f8f1-5e68-47ce-9bcd-3ccb440e75bf"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"baf9ff34-8952-4ebd-a42c-306a963534a9"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"cd69009e-3d40-42f1-b5ea-f2afe3c4d8f6"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"de94265c-516c-4a49-8dc0-a4f47e440a08"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"92c89ce7-5940-4b56-ad7b-645457a124f0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"452ead79-e89b-4eaf-b8cf-12ca3ec690ba"},"edge_type":"inherent","type":"","uuid":"875b7f56-910a-483a-96ea-0a3d00382df6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"cf2538b1-1cb0-4aff-b51e-d273208e564a"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"cd69009e-3d40-42f1-b5ea-f2afe3c4d8f6"},"edge_type":"inherent","type":"","uuid":"207351e7-33f1-46e0-ad7e-a0c5f2a6b390","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760","uuid":"92c89ce7-5940-4b56-ad7b-645457a124f0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"cf2538b1-1cb0-4aff-b51e-d273208e564a"},"edge_type":"inherent","type":"","uuid":"e31c9fae-c89b-49f8-adba-6398d0c9c859","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"cd69009e-3d40-42f1-b5ea-f2afe3c4d8f6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"b280fccc-df6e-4709-9cc6-e68bb2953bf6"},"edge_type":"inherent","type":"","uuid":"3a222e69-59da-4a8b-a56f-53a2308cc05c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c192f8f1-5e68-47ce-9bcd-3ccb440e75bf"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"baf9ff34-8952-4ebd-a42c-306a963534a9"},"edge_type":"inherent","type":"","uuid":"2e63573c-18f4-43ea-9c18-37a817d0c31a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97","uuid":"de94265c-516c-4a49-8dc0-a4f47e440a08"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c192f8f1-5e68-47ce-9bcd-3ccb440e75bf"},"edge_type":"inherent","type":"","uuid":"5db61c87-7e38-4108-baf5-833a7205e81b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"baf9ff34-8952-4ebd-a42c-306a963534a9"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"452ead79-e89b-4eaf-b8cf-12ca3ec690ba","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"6fd65dab-480f-4dca-8947-bc09a1b0f3c0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b280fccc-df6e-4709-9cc6-e68bb2953bf6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c867d919-3e88-468e-a850-f8eec07c4e37"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"cf2538b1-1cb0-4aff-b51e-d273208e564a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"c192f8f1-5e68-47ce-9bcd-3ccb440e75bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"baf9ff34-8952-4ebd-a42c-306a963534a9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7","uuid":"86048503-785c-4ba8-84ea-8302c6e3921b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_ab9f4298_70d9_45d4_a175_1b75fa6a8bf7"},{"target_any_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cd69009e-3d40-42f1-b5ea-f2afe3c4d8f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4","uuid":"50c21930-ada7-491a-8920-1928274d7b39"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_a1b913ee_dbad_4d23_88ee_86bc78ea9eb4"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f9a4c530_deployment","uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"de94265c-516c-4a49-8dc0-a4f47e440a08","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_61a62ae3_79c4_49d8_9355_1b1e3dd1aa97"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"f6be2786_deployment","uuid":"845d9203-370b-404b-a82d-1a49c9598d2a"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"92c89ce7-5940-4b56-ad7b-645457a124f0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_55d915ec_e34e_4bd5_aa49_1f070f437760"}],"description":"","message_list":[],"uuid":"7d8439ef-9716-4cad-9595-3fa5a7d5e3c2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9","uuid":"c0db7f10-6f1c-47f8-937c-2bc465483cef"},"name":"SYS_GEN__Runbook_Application_1aa800e6_3061_4105_b1f5_3bfcac5d4bc9"}}],"message_list":[],"uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"99cb38fe-da8b-4a0c-8383-ee8f041089b7","value":"oscar_django_@@{calm_time(\"%Y%m%d%H%M\")}@@","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"db_name"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"52dd4747-70c4-4f0b-b467-b4b28d07fd63","value":"","label":"","state":"ACTIVE","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"04eb1f29-6da8-4af9-b243-7c9b7804822e"},"type":""},"editables":{"value":true},"is_hidden":false,"type":"SECRET","options":{},"name":"db_password"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f1c2f8a5-4e27-42be-b20e-4ad9e3a9af0e","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDUm18acWv344TgOXBuOnozuSXytDuqKFVE0+x7CK\/dZ6Y331lBF+f8AE\/Ng3tzxvCDUeth3pa7XO\/Y95zc+hTLGROBmWdgidfykBi2FeQ6hZOcsUDslPUL3Ig8UpPzbOva276YP3266+1BGjLi14neBSJvpSV2DvXQovMb57mhAWs9BlVj3UIviHBMQYXc9RUiyoTBYphqQi5THsQafEFEA+3EJ\/NLhqF4CTRZoxMk+VDZbQCCYk0SNEDvDnhEUCIQW1KDg8HDaHrCcRE8DKwi1dgDjASwcUeDuaFto0WrUaj8FdOvaIwjLKYC9DUgsPel+FOLNkg0cPi0vuXb1CGZ era@domain.com","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"db_public_key"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"6d359546-4b9b-4ab1-880b-05c1412bf96c","value":"10.46.35.84","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"era_ip"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"cb886d4e-827f-4068-b102-90e7405a5e6a","value":"GOLD","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"sla_name"}],"name":"Nutanix"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"era_creds","uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"be6faf67-6df9-40b7-a756-91cbcd89bcb7","name":"action_install","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"5a72283f-8ebc-4506-8ffb-b093e32624d1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"37f114d9-1658-4e2a-b31e-b016241f109c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"37f114d9-1658-4e2a-b31e-b016241f109c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d","child_tasks_local_reference_list":[{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},"edge_type":"user_defined","type":"","uuid":"9c675ed4-df64-4491-97ff-002c4e71a676","to_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"}},{"from_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},"edge_type":"user_defined","type":"","uuid":"d8ac5b8e-1d0e-4e74-956b-b827cbd84df8","to_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"}},{"from_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},"edge_type":"user_defined","type":"","uuid":"518dae99-d316-4088-8d2f-6eb6cd27e82d","to_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"}},{"from_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},"edge_type":"user_defined","type":"","uuid":"66692439-5052-4ba4-8f20-f572ed35c3bf","to_task_reference":{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}},{"from_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},"edge_type":"user_defined","type":"","uuid":"56f51094-b224-41d1-a06e-239a3699da63","to_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7bd63f34_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/clusters\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLUSTER_ID={0}\".format(json.loads(resp.content)[0]['id'])","eval_variables":["CLUSTER_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetClusterID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Software&name=@@{software_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"SOFTWARE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Compute&name=@@{compute_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"COMPUTE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Network&name=@@{network_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"NETWORK_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Database_Parameter&name=@@{database_parameter}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DB_PARAM_ID={0}\".format(json.loads(resp.content)['id'])","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[{"message":"Macro may be incorrect, no variable with name \"software_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"compute_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"network_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"database_parameter\" on entity or action.","reason":"INVALID_MACRO","details":[]}],"variable_list":[],"name":"GetProfileIDs"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get the list of SLAs\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/slas\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nfor sla in json.loads(resp.content):\n  if sla['name'] == \"@@{sla_name}@@\":\n    print \"SLA_ID={0}\".format(sla['id'])","eval_variables":["SLA_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetSLAID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the URL and payload\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/provision\"\npayload = {\n  \"databaseName\": \"@@{db_name}@@\",\n  \"databaseType\": \"postgres_database\",\n  \"databaseDescription\": \"Postgres database provisioned by Calm Application @@{calm_application_name}@@\",\n  \"clusterId\": \"@@{CLUSTER_ID}@@\",\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"provisionInfo\": [\n    {\n      \"name\": \"application_type\",\n      \"value\": \"postgres_database\"\n    },\n    {\n      \"name\": \"listener_port\",\n      \"value\": \"5432\"\n    },\n    {\n      \"name\": \"database_size\",\n      \"value\": \"200\"\n    },\n    {\n      \"name\": \"working_dir\",\n      \"value\": \"\/tmp\"\n    },\n    {\n      \"name\": \"auto_tune_staging_drive\",\n      \"value\": True\n    },\n    {\n      \"name\": \"db_password\",\n      \"value\": \"@@{db_password}@@\"\n    },\n    {\n      \"name\": \"dbserver_name\",\n      \"value\": \"PostgreSQL-@@{calm_time}@@\"\n    },\n    {\n      \"name\": \"dbserver_description\",\n      \"value\": \"Postgres database server provisioned by Calm Application @@{calm_application_name}@@\"\n    },\n    {\n      \"name\": \"ssh_public_key\",\n      \"value\": \"@@{db_public_key}@@\"\n    }\n  ],\n  \"timeMachineInfo\": {\n    \"name\": \"PostgreSQL-@@{calm_time}@@_TM\",\n    \"description\": \"PostgreSQL-@@{calm_time}@@ time machine\",\n    \"slaId\": \"@@{SLA_ID}@@\",\n    \"schedule\": {\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 30\n      },\n      \"snapshotTimeOfDay\": {\n        \"hours\": 1,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"SUNDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 1\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 1\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"month\": \"DECEMBER\",\n        \"dayOfMonth\": 1\n      }\n    }\n  }\n}\n\n# Make the call and set the response operation ID to the variable\nresp = urlreq(url, verb='POST', auth='BASIC', user=era_user, passwd=era_pass, params=json.dumps(payload), headers=headers)\nprint \"CREATE_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CREATE_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ProvisionDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CREATE_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 60 seconds.\"\n  sleep(60)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 20 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)\n\n# Get the newly provision DB Entity Name and set it to a variable\nprint \"DB_ENTITY_NAME={0}\".format(json.loads(resp.content)['entityName'])","eval_variables":["DB_ENTITY_NAME"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorOperation"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/name\/@@{DB_ENTITY_NAME}@@?detailed=true\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\nresp_out = json.loads(resp.content)\nprint \"DB_SERVER_IP={0}\".format(resp_out['hostIP'])\nprint \"DB_ID={0}\".format(resp_out['id'])\nprint \"DB_SERVER_ID={0}\".format(resp_out['primaryHost'])","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetDatabaseInfo"}],"description":"","message_list":[],"uuid":"94d7aab1-1a70-4965-af7b-e3ac2b2ac80c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7bd63f34_dag","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d"},"name":"a56589a3_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841","child_tasks_local_reference_list":[{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},"edge_type":"user_defined","type":"","uuid":"8b1670f7-68bd-4749-8299-da8ebb4e879b","to_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"}},{"from_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},"edge_type":"user_defined","type":"","uuid":"0376a301-29f9-4250-a971-de9496c40aee","to_task_reference":{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}},{"from_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},"edge_type":"user_defined","type":"","uuid":"2540b67e-0e3f-43e2-a470-01b1a73365fe","to_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"99b487fd_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"404d2266-074c-4678-b572-a8c781b396ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/@@{DB_ID}@@?storage-cleanup=true&tm-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLEANUP_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CLEANUP_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CleanupDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorCleanupOp"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?cleanup=true&storage-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["DEREGISTER_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"DeregisterDBServer"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"837d1b59-b924-43f3-9c71-de7462431307","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorDeregOp"}],"description":"","message_list":[],"uuid":"8c51440b-5445-47a1-bbd0-ad5f1dec99c7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"99b487fd_dag","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841"},"name":"a8f36ab1_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_7d150efa_42c7_4000_94fc_6cad1ee69f15"}],"description":"","message_list":[],"uuid":"14ac593b-8661-4fde-a5a2-1659da90bd81","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"5a72283f-8ebc-4506-8ffb-b093e32624d1"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for creating an application","message_list":[],"uuid":"eef5e78f-4f7c-4721-94de-41f309e755cd","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"e461ca84-a400-4e0f-91f2-414bdd2db7be","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c98d7bbd-7ace-46b1-9052-d543129d7706"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"14883b78-a456-4921-b86c-13d5f0dcb708"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"12131fe0-2a23-4227-8572-da8d29f88a2e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"14883b78-a456-4921-b86c-13d5f0dcb708"},"edge_type":"inherent","type":"","uuid":"45d18c35-01e8-4e7a-be9f-955af434c02b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"12131fe0-2a23-4227-8572-da8d29f88a2e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c98d7bbd-7ace-46b1-9052-d543129d7706"},"edge_type":"inherent","type":"","uuid":"2d53c727-48d4-427b-b624-4735d52d53f0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"14883b78-a456-4921-b86c-13d5f0dcb708"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c98d7bbd-7ace-46b1-9052-d543129d7706","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"14ac593b-8661-4fde-a5a2-1659da90bd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"14883b78-a456-4921-b86c-13d5f0dcb708","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"975ed99a_runbook","uuid":"3422170a-ccab-48a0-9257-4d77667cb21b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"12131fe0-2a23-4227-8572-da8d29f88a2e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"ee624e8e-d998-491d-8222-2cde11d1532e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"e461ca84-a400-4e0f-91f2-414bdd2db7be"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"4a718d64-eacf-432f-bb69-7c63a1f3aebd","name":"action_uninstall","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"ab367c30-c6dd-4fdc-bfaa-a19d3dfdfc8d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"7b0c826e-2197-4311-8e72-8c269dd5e382"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"7b0c826e-2197-4311-8e72-8c269dd5e382","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d","child_tasks_local_reference_list":[{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},"edge_type":"user_defined","type":"","uuid":"9c675ed4-df64-4491-97ff-002c4e71a676","to_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"}},{"from_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},"edge_type":"user_defined","type":"","uuid":"d8ac5b8e-1d0e-4e74-956b-b827cbd84df8","to_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"}},{"from_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},"edge_type":"user_defined","type":"","uuid":"518dae99-d316-4088-8d2f-6eb6cd27e82d","to_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"}},{"from_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},"edge_type":"user_defined","type":"","uuid":"66692439-5052-4ba4-8f20-f572ed35c3bf","to_task_reference":{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}},{"from_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},"edge_type":"user_defined","type":"","uuid":"56f51094-b224-41d1-a06e-239a3699da63","to_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7bd63f34_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/clusters\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLUSTER_ID={0}\".format(json.loads(resp.content)[0]['id'])","eval_variables":["CLUSTER_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetClusterID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Software&name=@@{software_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"SOFTWARE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Compute&name=@@{compute_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"COMPUTE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Network&name=@@{network_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"NETWORK_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Database_Parameter&name=@@{database_parameter}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DB_PARAM_ID={0}\".format(json.loads(resp.content)['id'])","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[{"message":"Macro may be incorrect, no variable with name \"software_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"compute_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"network_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"database_parameter\" on entity or action.","reason":"INVALID_MACRO","details":[]}],"variable_list":[],"name":"GetProfileIDs"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get the list of SLAs\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/slas\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nfor sla in json.loads(resp.content):\n  if sla['name'] == \"@@{sla_name}@@\":\n    print \"SLA_ID={0}\".format(sla['id'])","eval_variables":["SLA_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetSLAID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the URL and payload\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/provision\"\npayload = {\n  \"databaseName\": \"@@{db_name}@@\",\n  \"databaseType\": \"postgres_database\",\n  \"databaseDescription\": \"Postgres database provisioned by Calm Application @@{calm_application_name}@@\",\n  \"clusterId\": \"@@{CLUSTER_ID}@@\",\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"provisionInfo\": [\n    {\n      \"name\": \"application_type\",\n      \"value\": \"postgres_database\"\n    },\n    {\n      \"name\": \"listener_port\",\n      \"value\": \"5432\"\n    },\n    {\n      \"name\": \"database_size\",\n      \"value\": \"200\"\n    },\n    {\n      \"name\": \"working_dir\",\n      \"value\": \"\/tmp\"\n    },\n    {\n      \"name\": \"auto_tune_staging_drive\",\n      \"value\": True\n    },\n    {\n      \"name\": \"db_password\",\n      \"value\": \"@@{db_password}@@\"\n    },\n    {\n      \"name\": \"dbserver_name\",\n      \"value\": \"PostgreSQL-@@{calm_time}@@\"\n    },\n    {\n      \"name\": \"dbserver_description\",\n      \"value\": \"Postgres database server provisioned by Calm Application @@{calm_application_name}@@\"\n    },\n    {\n      \"name\": \"ssh_public_key\",\n      \"value\": \"@@{db_public_key}@@\"\n    }\n  ],\n  \"timeMachineInfo\": {\n    \"name\": \"PostgreSQL-@@{calm_time}@@_TM\",\n    \"description\": \"PostgreSQL-@@{calm_time}@@ time machine\",\n    \"slaId\": \"@@{SLA_ID}@@\",\n    \"schedule\": {\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 30\n      },\n      \"snapshotTimeOfDay\": {\n        \"hours\": 1,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"SUNDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 1\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 1\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"month\": \"DECEMBER\",\n        \"dayOfMonth\": 1\n      }\n    }\n  }\n}\n\n# Make the call and set the response operation ID to the variable\nresp = urlreq(url, verb='POST', auth='BASIC', user=era_user, passwd=era_pass, params=json.dumps(payload), headers=headers)\nprint \"CREATE_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CREATE_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ProvisionDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CREATE_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 60 seconds.\"\n  sleep(60)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 20 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)\n\n# Get the newly provision DB Entity Name and set it to a variable\nprint \"DB_ENTITY_NAME={0}\".format(json.loads(resp.content)['entityName'])","eval_variables":["DB_ENTITY_NAME"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorOperation"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/name\/@@{DB_ENTITY_NAME}@@?detailed=true\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\nresp_out = json.loads(resp.content)\nprint \"DB_SERVER_IP={0}\".format(resp_out['hostIP'])\nprint \"DB_ID={0}\".format(resp_out['id'])\nprint \"DB_SERVER_ID={0}\".format(resp_out['primaryHost'])","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetDatabaseInfo"}],"description":"","message_list":[],"uuid":"94d7aab1-1a70-4965-af7b-e3ac2b2ac80c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7bd63f34_dag","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d"},"name":"a56589a3_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841","child_tasks_local_reference_list":[{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},"edge_type":"user_defined","type":"","uuid":"8b1670f7-68bd-4749-8299-da8ebb4e879b","to_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"}},{"from_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},"edge_type":"user_defined","type":"","uuid":"0376a301-29f9-4250-a971-de9496c40aee","to_task_reference":{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}},{"from_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},"edge_type":"user_defined","type":"","uuid":"2540b67e-0e3f-43e2-a470-01b1a73365fe","to_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"99b487fd_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"404d2266-074c-4678-b572-a8c781b396ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/@@{DB_ID}@@?storage-cleanup=true&tm-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLEANUP_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CLEANUP_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CleanupDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorCleanupOp"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?cleanup=true&storage-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["DEREGISTER_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"DeregisterDBServer"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"837d1b59-b924-43f3-9c71-de7462431307","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorDeregOp"}],"description":"","message_list":[],"uuid":"8c51440b-5445-47a1-bbd0-ad5f1dec99c7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"99b487fd_dag","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841"},"name":"a8f36ab1_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_7d150efa_42c7_4000_94fc_6cad1ee69f15"}],"description":"","message_list":[],"uuid":"b44d1a41-efaa-461c-abba-29b64026c5a1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"ab367c30-c6dd-4fdc-bfaa-a19d3dfdfc8d"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"847e2761-2300-4111-ab80-b2d61f47ee41","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"d795b342-7df0-49e6-b0e8-083ac0e9f972","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"654a8fdf-5d5b-4b58-84ee-96dc4dc8c2bf"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"ed2adad0-f24d-4d45-9770-8fc08866979d"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"5fd4570e-1af9-4f0d-9214-d256edb261de"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"654a8fdf-5d5b-4b58-84ee-96dc4dc8c2bf"},"edge_type":"inherent","type":"","uuid":"dedebfc8-e879-466c-a37c-07f3dc47ca1c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"ed2adad0-f24d-4d45-9770-8fc08866979d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"ed2adad0-f24d-4d45-9770-8fc08866979d"},"edge_type":"inherent","type":"","uuid":"d953dee3-33ef-4f84-9891-8cd653228151","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"5fd4570e-1af9-4f0d-9214-d256edb261de"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"654a8fdf-5d5b-4b58-84ee-96dc4dc8c2bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ed2adad0-f24d-4d45-9770-8fc08866979d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"cf884050_runbook","uuid":"e2b1f50f-fdd6-4bfe-bb8f-41e4dee5d761"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5fd4570e-1af9-4f0d-9214-d256edb261de","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"b44d1a41-efaa-461c-abba-29b64026c5a1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}],"description":"","message_list":[],"uuid":"7700f1fc-8bad-4674-a159-c76b4b7b12f0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"d795b342-7df0-49e6-b0e8-083ac0e9f972"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"77a9f6ce-8859-4f95-a0a0-95735da725e3","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"c78c35e2-13fc-4b83-b4c0-60647e34f65f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"59d1c211-5c80-4548-85e4-8f8b4b4ac3fe"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"98669da5-929b-4594-be12-47e932331845"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"59d1c211-5c80-4548-85e4-8f8b4b4ac3fe"},"edge_type":"inherent","type":"","uuid":"ab127fd1-b706-4999-a02c-ec10057f6156","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"98669da5-929b-4594-be12-47e932331845"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"59d1c211-5c80-4548-85e4-8f8b4b4ac3fe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"c867d919-3e88-468e-a850-f8eec07c4e37"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"},{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"98669da5-929b-4594-be12-47e932331845","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_7d150efa_42c7_4000_94fc_6cad1ee69f15"}],"description":"","message_list":[],"uuid":"112360d9-1d0d-46f7-84b7-ffffcf4f3b35","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"c78c35e2-13fc-4b83-b4c0-60647e34f65f"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for starting an application","message_list":[],"uuid":"682afd13-daf1-4c27-9b02-cf2f9fa7f9c6","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"1dfba7b5-6ea0-488a-9deb-c0284b8942b3","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"8c8abf9c-204a-4287-9219-e8951109c58e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8c8abf9c-204a-4287-9219-e8951109c58e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"78951763-71b2-436e-b13c-6c39e0b84168","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"1dfba7b5-6ea0-488a-9deb-c0284b8942b3"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for restarting an application","message_list":[],"uuid":"dba577ff-c720-4e3c-827f-1a355fb0c155","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"0cb5cb47-0104-43fc-9fd0-339335d0e2d7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"ef383235-39cb-45e1-b5aa-42ad98d4beb8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ef383235-39cb-45e1-b5aa-42ad98d4beb8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6bcf94d3_runbook","uuid":"c64bf612-bfa8-463a-9ae0-75129c63447b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"89a72af2-b644-4cc7-9481-ac25642653ff","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"0cb5cb47-0104-43fc-9fd0-339335d0e2d7"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}},{"description":"System action for stopping an application","message_list":[],"uuid":"a3d9d814-facb-4fa1-9595-ea3fd59596b9","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"3efc93b9-80d8-4c65-97f6-762a71039ef4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7","uuid":"3abb8ef8-b258-4657-834a-e5ad80d888b9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3abb8ef8-b258-4657-834a-e5ad80d888b9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_6602b714_ec35_4ba2_b560_dd1297ba1be7"}],"description":"","message_list":[],"uuid":"3da738ef-e1a0-43f5-b092-82bc3c2d6d06","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15","uuid":"3efc93b9-80d8-4c65-97f6-762a71039ef4"},"name":"SYS_GEN__Runbook_Package_7d150efa_42c7_4000_94fc_6cad1ee69f15"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"}],"uuid":"c7335191-0431-4f1e-9a10-4945aa63f273","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d","child_tasks_local_reference_list":[{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},"edge_type":"user_defined","type":"","uuid":"9c675ed4-df64-4491-97ff-002c4e71a676","to_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"}},{"from_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},"edge_type":"user_defined","type":"","uuid":"d8ac5b8e-1d0e-4e74-956b-b827cbd84df8","to_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"}},{"from_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},"edge_type":"user_defined","type":"","uuid":"518dae99-d316-4088-8d2f-6eb6cd27e82d","to_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"}},{"from_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},"edge_type":"user_defined","type":"","uuid":"66692439-5052-4ba4-8f20-f572ed35c3bf","to_task_reference":{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}},{"from_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},"edge_type":"user_defined","type":"","uuid":"56f51094-b224-41d1-a06e-239a3699da63","to_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7bd63f34_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/clusters\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLUSTER_ID={0}\".format(json.loads(resp.content)[0]['id'])","eval_variables":["CLUSTER_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetClusterID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Software&name=@@{software_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"SOFTWARE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Compute&name=@@{compute_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"COMPUTE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Network&name=@@{network_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"NETWORK_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Database_Parameter&name=@@{database_parameter}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DB_PARAM_ID={0}\".format(json.loads(resp.content)['id'])","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[{"message":"Macro may be incorrect, no variable with name \"software_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"compute_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"network_profile\" on entity or action.","reason":"INVALID_MACRO","details":[]},{"message":"Macro may be incorrect, no variable with name \"database_parameter\" on entity or action.","reason":"INVALID_MACRO","details":[]}],"variable_list":[],"name":"GetProfileIDs"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get the list of SLAs\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/slas\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nfor sla in json.loads(resp.content):\n  if sla['name'] == \"@@{sla_name}@@\":\n    print \"SLA_ID={0}\".format(sla['id'])","eval_variables":["SLA_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetSLAID"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the URL and payload\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/provision\"\npayload = {\n  \"databaseName\": \"@@{db_name}@@\",\n  \"databaseType\": \"postgres_database\",\n  \"databaseDescription\": \"Postgres database provisioned by Calm Application @@{calm_application_name}@@\",\n  \"clusterId\": \"@@{CLUSTER_ID}@@\",\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"provisionInfo\": [\n    {\n      \"name\": \"application_type\",\n      \"value\": \"postgres_database\"\n    },\n    {\n      \"name\": \"listener_port\",\n      \"value\": \"5432\"\n    },\n    {\n      \"name\": \"database_size\",\n      \"value\": \"200\"\n    },\n    {\n      \"name\": \"working_dir\",\n      \"value\": \"\/tmp\"\n    },\n    {\n      \"name\": \"auto_tune_staging_drive\",\n      \"value\": True\n    },\n    {\n      \"name\": \"db_password\",\n      \"value\": \"@@{db_password}@@\"\n    },\n    {\n      \"name\": \"dbserver_name\",\n      \"value\": \"PostgreSQL-@@{calm_time}@@\"\n    },\n    {\n      \"name\": \"dbserver_description\",\n      \"value\": \"Postgres database server provisioned by Calm Application @@{calm_application_name}@@\"\n    },\n    {\n      \"name\": \"ssh_public_key\",\n      \"value\": \"@@{db_public_key}@@\"\n    }\n  ],\n  \"timeMachineInfo\": {\n    \"name\": \"PostgreSQL-@@{calm_time}@@_TM\",\n    \"description\": \"PostgreSQL-@@{calm_time}@@ time machine\",\n    \"slaId\": \"@@{SLA_ID}@@\",\n    \"schedule\": {\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 30\n      },\n      \"snapshotTimeOfDay\": {\n        \"hours\": 1,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"SUNDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 1\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 1\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"month\": \"DECEMBER\",\n        \"dayOfMonth\": 1\n      }\n    }\n  }\n}\n\n# Make the call and set the response operation ID to the variable\nresp = urlreq(url, verb='POST', auth='BASIC', user=era_user, passwd=era_pass, params=json.dumps(payload), headers=headers)\nprint \"CREATE_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CREATE_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ProvisionDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CREATE_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 60 seconds.\"\n  sleep(60)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 20 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)\n\n# Get the newly provision DB Entity Name and set it to a variable\nprint \"DB_ENTITY_NAME={0}\".format(json.loads(resp.content)['entityName'])","eval_variables":["DB_ENTITY_NAME"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorOperation"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/name\/@@{DB_ENTITY_NAME}@@?detailed=true\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\nresp_out = json.loads(resp.content)\nprint \"DB_SERVER_IP={0}\".format(resp_out['hostIP'])\nprint \"DB_ID={0}\".format(resp_out['id'])\nprint \"DB_SERVER_ID={0}\".format(resp_out['primaryHost'])","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"GetDatabaseInfo"}],"description":"","message_list":[],"uuid":"94d7aab1-1a70-4965-af7b-e3ac2b2ac80c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7bd63f34_dag","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d"},"name":"a56589a3_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","description":"","type":"DAG","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841","child_tasks_local_reference_list":[{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},"edge_type":"user_defined","type":"","uuid":"8b1670f7-68bd-4749-8299-da8ebb4e879b","to_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"}},{"from_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},"edge_type":"user_defined","type":"","uuid":"0376a301-29f9-4250-a971-de9496c40aee","to_task_reference":{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}},{"from_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},"edge_type":"user_defined","type":"","uuid":"2540b67e-0e3f-43e2-a470-01b1a73365fe","to_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"99b487fd_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"404d2266-074c-4678-b572-a8c781b396ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/@@{DB_ID}@@?storage-cleanup=true&tm-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLEANUP_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CLEANUP_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CleanupDB"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorCleanupOp"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"SET_VARIABLE","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?cleanup=true&storage-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["DEREGISTER_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"DeregisterDBServer"},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","description":"","type":"EXEC","uuid":"837d1b59-b924-43f3-9c71-de7462431307","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"MonitorDeregOp"}],"description":"","message_list":[],"uuid":"8c51440b-5445-47a1-bbd0-ad5f1dec99c7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"99b487fd_dag","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841"},"name":"a8f36ab1_runbook"}},"variable_list":[],"name":"EraPackage"},{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"6b754d53-bd77-4c70-b165-a956971b1c74","name":"action_install","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"3736ecdd-ba54-44c4-bc6b-47a6cb22bb61","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"fb44a91d-623d-4c18-82c4-7d05e7a9807b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"fb44a91d-623d-4c18-82c4-7d05e7a9807b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},"edge_type":"user_defined","type":"","uuid":"15a858f9-21a9-4af2-b3b7-c0158e330a15","to_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"}},{"from_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},"edge_type":"user_defined","type":"","uuid":"ae98312a-8435-4013-9e5f-b06eebdbec01","to_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"}},{"from_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},"edge_type":"user_defined","type":"","uuid":"8775602d-8ff8-40f9-a262-6a1ca888a105","to_task_reference":{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"58ca4a03_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"ea837437-401b-47d8-968a-947870787e2d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nsudo yum -y upgrade\nsudo curl -O http:\/\/dl.fedoraproject.org\/pub\/epel\/7\/x86_64\/e\/epel-release-7-10.noarch.rpm\nsudo rpm --import https:\/\/www.elrepo.org\/RPM-GPG-KEY-elrepo.org\nsudo rpm -Uvh http:\/\/www.elrepo.org\/elrepo-release-7.0-3.el7.elrepo.noarch.rpm \nsudo rpm -ihv epel-release-7-10.noarch.rpm \n\nsudo yum update -y\nsudo yum -y install htop wget iotop xfs* bc unzip lvm2*\n\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/sysconfig\/selinux\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/selinux\/config\nsudo setenforce 0\n\necho \"System packages are installed\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install System Packages"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############\n#\n# LVM setup script for PostgreSQL . 4 disks for DATA and 2 for logs\n# Data disks are 60GB | Log disks are 20GB \n#\n#############\n\n\n#PGSQL data\nsudo pvcreate \/dev\/sdb \/dev\/sdc \/dev\/sdd \/dev\/sde\nsudo vgcreate pgDataVG \/dev\/sdb \/dev\/sdd \/dev\/sdc \/dev\/sde\nsudo lvcreate -l 100%FREE -i4 -I1M -n pgDataLV pgDataVG          ## Use 1MB to avoid IO amplification \n#lvcreate -l 100%FREE -i4 -I4M -n pgDataLV pgDataVG\n\n\n#PGSQL logs\nsudo pvcreate \/dev\/sdf \/dev\/sdg \nsudo vgcreate pgLogVG \/dev\/sdf \/dev\/sdg\nsudo lvcreate -l 100%FREE -i2 -I1M -n pgLogLV pgLogVG            ## Use 1MB to avoid IO amplification\n#lvcreate -l 100%FREE -i2 -I4M -n pgLogLV pgLogVG\n\n\n#Disable LVM read ahead\nsudo lvchange -r 0 \/dev\/pgDataVG\/pgDataLV\nsudo lvchange -r 0 \/dev\/pgLogVG\/pgLogLV\n\n\n#Format LVMs with ext4 and use nodiscard to make sure format time is fast on Nutanix due to SCSI unmap\nsudo mkfs.ext4 -E nodiscard \/dev\/pgDataVG\/pgDataLV\nsudo mkfs.ext4 -E nodiscard \/dev\/pgLogVG\/pgLogLV\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create Disk Setup"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"1d268a54-65a0-4895-9dce-177329767be0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\nsudo wget -c https:\/\/download.postgresql.org\/pub\/repos\/yum\/9.6\/redhat\/rhel-7-x86_64\/pgdg-centos96-9.6-3.noarch.rpm\nsudo yum -y install pgdg-centos96-9.6-3.noarch.rpm\nsudo rpm --import http:\/\/packages.2ndquadrant.com\/repmgr\/RPM-GPG-KEY-repmgr\nsudo yum install -y http:\/\/packages.2ndquadrant.com\/repmgr\/yum-repo-rpms\/repmgr-rhel-1.0-1.noarch.rpm\n\n# Install PostgreSQL\nsudo yum -y install postgresql96 postgresql96-contrib postgresql96-server postgresql96-devel postgresql96-plpython\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install Postgresql"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\n#run initdb\nsudo \/usr\/pgsql-9.6\/bin\/postgresql96-setup initdb\n\n#start and stop postgresql to make sure DB creates the required directories\nsudo systemctl start postgresql-9.6.service\nsudo systemctl stop postgresql-9.6.service\n\n##copy the created postgres directory to a temp directory\n\nsudo mkdir \/tmp\/pgsql\n\nsudo mv \/var\/lib\/pgsql\/9.6\/data \/tmp\/pgsql\n\n#Create directory , fix permissions and Mount LVM\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/\nsudo mount -o noatime,barrier=0 \/dev\/pgDataVG\/pgDataLV \/var\/lib\/pgsql\/9.6\/data\/ \n\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\nsudo mount -o noatime,barrier=0 \/dev\/pgLogVG\/pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\n\nsudo chown -R postgres:postgres \/var\/lib\/pgsql\/9.6\/data\/\n\n#move the xlog to the new LVM\nsudo find \/tmp\/pgsql\/data\/pg_xlog -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\/ {} +\n\n#remove pg_xlog from temp dir to avoid being copied again\nsudo rm -rf \/tmp\/pgsql\/data\/pg_xlog\n\n#move the pgsql directory to the LVM\nsudo find \/tmp\/pgsql\/data -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/ {} +\n\nsudo chmod -R 0700 \/var\/lib\/pgsql\/9.6\/data\n\n#enable service on boot\nsudo systemctl enable postgresql-9.6.service\n\n#add mount points to \/etc\/fstab\necho \"\/dev\/mapper\/pgDataVG-pgDataLV \/var\/lib\/pgsql\/9.6\/data ext4 rw,seclabel,noatime,nobarrier,stripe=4096,data=ordered 0 0\" | sudo tee -a \/etc\/fstab\necho \"\/dev\/mapper\/pgLogVG-pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog ext4 rw,seclabel,noatime,nobarrier,stripe=2048,data=ordered 0 0\" | sudo tee -a  \/etc\/fstab\n\n\nsudo systemctl status postgresql-9.6\nsudo systemctl restart postgresql-9.6\nsudo systemctl status postgresql-9.6\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Setup Postgresql"}],"description":"","message_list":[],"uuid":"02e6d2b5-6cd4-48e9-ab55-c6beedbb419e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"58ca4a03_dag","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079"},"name":"8b1f1a7b_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ee8bedbe_dag"}],"description":"","message_list":[],"uuid":"5f5b3313-dadc-4be3-b89d-e81d087960ed","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"ee8bedbe_dag","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f"},"name":"faacff5d_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}],"description":"","message_list":[],"uuid":"93a6f6c0-4975-4ff0-8198-be426c904884","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"3736ecdd-ba54-44c4-bc6b-47a6cb22bb61"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for creating an application","message_list":[],"uuid":"46ffa731-65d2-41c6-b9e7-6844dc3569c0","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"682f429d-8b63-4523-8247-5cffaeec5a89","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"f3532ee7-4054-4dac-9852-a8f38bacbaf6"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"087c3b16-279e-4f07-af9f-176ad308b894"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"c8eec6ef-a890-4eca-8819-a51b68993120"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"087c3b16-279e-4f07-af9f-176ad308b894"},"edge_type":"inherent","type":"","uuid":"ffeb3f11-ad99-4aad-811b-d5589b6cbda3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"c8eec6ef-a890-4eca-8819-a51b68993120"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"f3532ee7-4054-4dac-9852-a8f38bacbaf6"},"edge_type":"inherent","type":"","uuid":"4393afcd-83b1-4e1b-ab94-e0fe853f430a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"087c3b16-279e-4f07-af9f-176ad308b894"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f3532ee7-4054-4dac-9852-a8f38bacbaf6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"93a6f6c0-4975-4ff0-8198-be426c904884"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"087c3b16-279e-4f07-af9f-176ad308b894","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"01945104_runbook","uuid":"ddb2efee-8caa-4863-8640-846d8537636b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c8eec6ef-a890-4eca-8819-a51b68993120","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"c06ff9e6-7119-4c56-969a-bbad7f0ed839","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"682f429d-8b63-4523-8247-5cffaeec5a89"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"5de2bdbd-6ee4-4044-86b7-eafa2c75f2f3","name":"action_uninstall","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"4fca52b2-25e5-485e-a43e-a8d270f3630f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"249c4ac0-bee6-4c47-b87b-7fd9fd6a38e6"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"249c4ac0-bee6-4c47-b87b-7fd9fd6a38e6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},"edge_type":"user_defined","type":"","uuid":"15a858f9-21a9-4af2-b3b7-c0158e330a15","to_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"}},{"from_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},"edge_type":"user_defined","type":"","uuid":"ae98312a-8435-4013-9e5f-b06eebdbec01","to_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"}},{"from_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},"edge_type":"user_defined","type":"","uuid":"8775602d-8ff8-40f9-a262-6a1ca888a105","to_task_reference":{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"58ca4a03_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"ea837437-401b-47d8-968a-947870787e2d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nsudo yum -y upgrade\nsudo curl -O http:\/\/dl.fedoraproject.org\/pub\/epel\/7\/x86_64\/e\/epel-release-7-10.noarch.rpm\nsudo rpm --import https:\/\/www.elrepo.org\/RPM-GPG-KEY-elrepo.org\nsudo rpm -Uvh http:\/\/www.elrepo.org\/elrepo-release-7.0-3.el7.elrepo.noarch.rpm \nsudo rpm -ihv epel-release-7-10.noarch.rpm \n\nsudo yum update -y\nsudo yum -y install htop wget iotop xfs* bc unzip lvm2*\n\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/sysconfig\/selinux\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/selinux\/config\nsudo setenforce 0\n\necho \"System packages are installed\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install System Packages"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############\n#\n# LVM setup script for PostgreSQL . 4 disks for DATA and 2 for logs\n# Data disks are 60GB | Log disks are 20GB \n#\n#############\n\n\n#PGSQL data\nsudo pvcreate \/dev\/sdb \/dev\/sdc \/dev\/sdd \/dev\/sde\nsudo vgcreate pgDataVG \/dev\/sdb \/dev\/sdd \/dev\/sdc \/dev\/sde\nsudo lvcreate -l 100%FREE -i4 -I1M -n pgDataLV pgDataVG          ## Use 1MB to avoid IO amplification \n#lvcreate -l 100%FREE -i4 -I4M -n pgDataLV pgDataVG\n\n\n#PGSQL logs\nsudo pvcreate \/dev\/sdf \/dev\/sdg \nsudo vgcreate pgLogVG \/dev\/sdf \/dev\/sdg\nsudo lvcreate -l 100%FREE -i2 -I1M -n pgLogLV pgLogVG            ## Use 1MB to avoid IO amplification\n#lvcreate -l 100%FREE -i2 -I4M -n pgLogLV pgLogVG\n\n\n#Disable LVM read ahead\nsudo lvchange -r 0 \/dev\/pgDataVG\/pgDataLV\nsudo lvchange -r 0 \/dev\/pgLogVG\/pgLogLV\n\n\n#Format LVMs with ext4 and use nodiscard to make sure format time is fast on Nutanix due to SCSI unmap\nsudo mkfs.ext4 -E nodiscard \/dev\/pgDataVG\/pgDataLV\nsudo mkfs.ext4 -E nodiscard \/dev\/pgLogVG\/pgLogLV\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create Disk Setup"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"1d268a54-65a0-4895-9dce-177329767be0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\nsudo wget -c https:\/\/download.postgresql.org\/pub\/repos\/yum\/9.6\/redhat\/rhel-7-x86_64\/pgdg-centos96-9.6-3.noarch.rpm\nsudo yum -y install pgdg-centos96-9.6-3.noarch.rpm\nsudo rpm --import http:\/\/packages.2ndquadrant.com\/repmgr\/RPM-GPG-KEY-repmgr\nsudo yum install -y http:\/\/packages.2ndquadrant.com\/repmgr\/yum-repo-rpms\/repmgr-rhel-1.0-1.noarch.rpm\n\n# Install PostgreSQL\nsudo yum -y install postgresql96 postgresql96-contrib postgresql96-server postgresql96-devel postgresql96-plpython\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install Postgresql"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\n#run initdb\nsudo \/usr\/pgsql-9.6\/bin\/postgresql96-setup initdb\n\n#start and stop postgresql to make sure DB creates the required directories\nsudo systemctl start postgresql-9.6.service\nsudo systemctl stop postgresql-9.6.service\n\n##copy the created postgres directory to a temp directory\n\nsudo mkdir \/tmp\/pgsql\n\nsudo mv \/var\/lib\/pgsql\/9.6\/data \/tmp\/pgsql\n\n#Create directory , fix permissions and Mount LVM\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/\nsudo mount -o noatime,barrier=0 \/dev\/pgDataVG\/pgDataLV \/var\/lib\/pgsql\/9.6\/data\/ \n\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\nsudo mount -o noatime,barrier=0 \/dev\/pgLogVG\/pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\n\nsudo chown -R postgres:postgres \/var\/lib\/pgsql\/9.6\/data\/\n\n#move the xlog to the new LVM\nsudo find \/tmp\/pgsql\/data\/pg_xlog -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\/ {} +\n\n#remove pg_xlog from temp dir to avoid being copied again\nsudo rm -rf \/tmp\/pgsql\/data\/pg_xlog\n\n#move the pgsql directory to the LVM\nsudo find \/tmp\/pgsql\/data -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/ {} +\n\nsudo chmod -R 0700 \/var\/lib\/pgsql\/9.6\/data\n\n#enable service on boot\nsudo systemctl enable postgresql-9.6.service\n\n#add mount points to \/etc\/fstab\necho \"\/dev\/mapper\/pgDataVG-pgDataLV \/var\/lib\/pgsql\/9.6\/data ext4 rw,seclabel,noatime,nobarrier,stripe=4096,data=ordered 0 0\" | sudo tee -a \/etc\/fstab\necho \"\/dev\/mapper\/pgLogVG-pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog ext4 rw,seclabel,noatime,nobarrier,stripe=2048,data=ordered 0 0\" | sudo tee -a  \/etc\/fstab\n\n\nsudo systemctl status postgresql-9.6\nsudo systemctl restart postgresql-9.6\nsudo systemctl status postgresql-9.6\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Setup Postgresql"}],"description":"","message_list":[],"uuid":"02e6d2b5-6cd4-48e9-ab55-c6beedbb419e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"58ca4a03_dag","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079"},"name":"8b1f1a7b_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ee8bedbe_dag"}],"description":"","message_list":[],"uuid":"5f5b3313-dadc-4be3-b89d-e81d087960ed","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"ee8bedbe_dag","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f"},"name":"faacff5d_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}],"description":"","message_list":[],"uuid":"ccf65645-5d70-4051-b0e4-be2b0310c4c4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"4fca52b2-25e5-485e-a43e-a8d270f3630f"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"3ed58d57-4a69-41ac-a354-eee58be1d33f","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"a46ace60-a348-41d7-8e2e-4683eee71131","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"bdf40f15-0307-410d-8744-20a37ff53a8e"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"4b4b7deb-a1b2-48b0-8644-5ad72aee4530"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"1d2c2f59-535c-42e3-9c48-ff0ad6b3b9cf"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"bdf40f15-0307-410d-8744-20a37ff53a8e"},"edge_type":"inherent","type":"","uuid":"af16448a-dbec-4e9b-b7ea-fc313254ceb2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"4b4b7deb-a1b2-48b0-8644-5ad72aee4530"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"4b4b7deb-a1b2-48b0-8644-5ad72aee4530"},"edge_type":"inherent","type":"","uuid":"1b97281c-b9c4-47a6-b2ce-54d613127324","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"1d2c2f59-535c-42e3-9c48-ff0ad6b3b9cf"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"bdf40f15-0307-410d-8744-20a37ff53a8e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4b4b7deb-a1b2-48b0-8644-5ad72aee4530","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fe42eb38_runbook","uuid":"64bfbc2d-a728-4cd9-b7ad-48ebf7938286"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1d2c2f59-535c-42e3-9c48-ff0ad6b3b9cf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ccf65645-5d70-4051-b0e4-be2b0310c4c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}],"description":"","message_list":[],"uuid":"2a5856be-af62-4dd8-a89b-87e101b7f070","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"a46ace60-a348-41d7-8e2e-4683eee71131"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"5b4485d0-b17a-48cf-be87-0c4fc8db0b62","name":"action_soft_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"492fdc6c-88d4-4825-9f5a-fcaf767d3045","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"2228fc8c-a9f9-4cf6-9a9c-519a25ca030e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"3b20e123-cab2-49a4-9f33-0684d368095b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"2228fc8c-a9f9-4cf6-9a9c-519a25ca030e"},"edge_type":"inherent","type":"","uuid":"c5276fba-cd35-468d-a061-3dee642889ab","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"3b20e123-cab2-49a4-9f33-0684d368095b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2228fc8c-a9f9-4cf6-9a9c-519a25ca030e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"6fd65dab-480f-4dca-8947-bc09a1b0f3c0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"},{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"3b20e123-cab2-49a4-9f33-0684d368095b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}],"description":"","message_list":[],"uuid":"ff6025d0-f946-4468-b0ea-1baf57928294","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"492fdc6c-88d4-4825-9f5a-fcaf767d3045"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for starting an application","message_list":[],"uuid":"9da2a81b-90a4-4597-8b8c-15f42abf88b6","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"af4e855e-dd87-4239-a2a5-17ead5d48873","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"a739fd7b-cbe7-4455-9117-c96ac64322c4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a739fd7b-cbe7-4455-9117-c96ac64322c4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"60c6ab34-dfed-404c-8e47-b98fc20b9ff6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"af4e855e-dd87-4239-a2a5-17ead5d48873"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for restarting an application","message_list":[],"uuid":"edfd3419-515e-4983-b19f-07a6d2d405b8","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"09c8b130-af51-41a6-a308-9dc02c50f492","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"192a40d8-d707-4e6c-8b92-10755948739d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"192a40d8-d707-4e6c-8b92-10755948739d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"ffd25064_runbook","uuid":"ddc30b6c-82ce-49f4-8702-3cfa064cc6c4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"025e62bb-5392-4a72-bff7-1f072ebd8604","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"09c8b130-af51-41a6-a308-9dc02c50f492"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}},{"description":"System action for stopping an application","message_list":[],"uuid":"2208ff0c-fef9-48d7-80b3-059d7a3575b8","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"ece9157d-71ed-409f-a4df-c0dd7fa33a55","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548","uuid":"64ad2b0e-688d-4436-8a65-6406e49f7f82"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"64ad2b0e-688d-4436-8a65-6406e49f7f82","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_06f3fc75_64a7_46fe_b061_62f48048a548"}],"description":"","message_list":[],"uuid":"352231b4-ab02-4467-bcff-f0b0ebc7241b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8","uuid":"ece9157d-71ed-409f-a4df-c0dd7fa33a55"},"name":"SYS_GEN__Runbook_Package_2338f9d7_6e48_4ed5_84e0_c7fea732d1d8"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"}],"uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Install System Packages","uuid":"ea837437-401b-47d8-968a-947870787e2d"},"edge_type":"user_defined","type":"","uuid":"15a858f9-21a9-4af2-b3b7-c0158e330a15","to_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"}},{"from_task_reference":{"kind":"app_task","name":"Create Disk Setup","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},"edge_type":"user_defined","type":"","uuid":"ae98312a-8435-4013-9e5f-b06eebdbec01","to_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"}},{"from_task_reference":{"kind":"app_task","name":"Install Postgresql","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},"edge_type":"user_defined","type":"","uuid":"8775602d-8ff8-40f9-a262-6a1ca888a105","to_task_reference":{"kind":"app_task","name":"Setup Postgresql","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"58ca4a03_dag"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"ea837437-401b-47d8-968a-947870787e2d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nsudo yum -y upgrade\nsudo curl -O http:\/\/dl.fedoraproject.org\/pub\/epel\/7\/x86_64\/e\/epel-release-7-10.noarch.rpm\nsudo rpm --import https:\/\/www.elrepo.org\/RPM-GPG-KEY-elrepo.org\nsudo rpm -Uvh http:\/\/www.elrepo.org\/elrepo-release-7.0-3.el7.elrepo.noarch.rpm \nsudo rpm -ihv epel-release-7-10.noarch.rpm \n\nsudo yum update -y\nsudo yum -y install htop wget iotop xfs* bc unzip lvm2*\n\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/sysconfig\/selinux\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/selinux\/config\nsudo setenforce 0\n\necho \"System packages are installed\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install System Packages"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n##############\n#\n# LVM setup script for PostgreSQL . 4 disks for DATA and 2 for logs\n# Data disks are 60GB | Log disks are 20GB \n#\n#############\n\n\n#PGSQL data\nsudo pvcreate \/dev\/sdb \/dev\/sdc \/dev\/sdd \/dev\/sde\nsudo vgcreate pgDataVG \/dev\/sdb \/dev\/sdd \/dev\/sdc \/dev\/sde\nsudo lvcreate -l 100%FREE -i4 -I1M -n pgDataLV pgDataVG          ## Use 1MB to avoid IO amplification \n#lvcreate -l 100%FREE -i4 -I4M -n pgDataLV pgDataVG\n\n\n#PGSQL logs\nsudo pvcreate \/dev\/sdf \/dev\/sdg \nsudo vgcreate pgLogVG \/dev\/sdf \/dev\/sdg\nsudo lvcreate -l 100%FREE -i2 -I1M -n pgLogLV pgLogVG            ## Use 1MB to avoid IO amplification\n#lvcreate -l 100%FREE -i2 -I4M -n pgLogLV pgLogVG\n\n\n#Disable LVM read ahead\nsudo lvchange -r 0 \/dev\/pgDataVG\/pgDataLV\nsudo lvchange -r 0 \/dev\/pgLogVG\/pgLogLV\n\n\n#Format LVMs with ext4 and use nodiscard to make sure format time is fast on Nutanix due to SCSI unmap\nsudo mkfs.ext4 -E nodiscard \/dev\/pgDataVG\/pgDataLV\nsudo mkfs.ext4 -E nodiscard \/dev\/pgLogVG\/pgLogLV\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Create Disk Setup"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"1d268a54-65a0-4895-9dce-177329767be0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\nsudo wget -c https:\/\/download.postgresql.org\/pub\/repos\/yum\/9.6\/redhat\/rhel-7-x86_64\/pgdg-centos96-9.6-3.noarch.rpm\nsudo yum -y install pgdg-centos96-9.6-3.noarch.rpm\nsudo rpm --import http:\/\/packages.2ndquadrant.com\/repmgr\/RPM-GPG-KEY-repmgr\nsudo yum install -y http:\/\/packages.2ndquadrant.com\/repmgr\/yum-repo-rpms\/repmgr-rhel-1.0-1.noarch.rpm\n\n# Install PostgreSQL\nsudo yum -y install postgresql96 postgresql96-contrib postgresql96-server postgresql96-devel postgresql96-plpython\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install Postgresql"},{"target_any_local_reference":{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"retries":"0","description":"","type":"EXEC","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n\n#run initdb\nsudo \/usr\/pgsql-9.6\/bin\/postgresql96-setup initdb\n\n#start and stop postgresql to make sure DB creates the required directories\nsudo systemctl start postgresql-9.6.service\nsudo systemctl stop postgresql-9.6.service\n\n##copy the created postgres directory to a temp directory\n\nsudo mkdir \/tmp\/pgsql\n\nsudo mv \/var\/lib\/pgsql\/9.6\/data \/tmp\/pgsql\n\n#Create directory , fix permissions and Mount LVM\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/\nsudo mount -o noatime,barrier=0 \/dev\/pgDataVG\/pgDataLV \/var\/lib\/pgsql\/9.6\/data\/ \n\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\nsudo mount -o noatime,barrier=0 \/dev\/pgLogVG\/pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\n\nsudo chown -R postgres:postgres \/var\/lib\/pgsql\/9.6\/data\/\n\n#move the xlog to the new LVM\nsudo find \/tmp\/pgsql\/data\/pg_xlog -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\/ {} +\n\n#remove pg_xlog from temp dir to avoid being copied again\nsudo rm -rf \/tmp\/pgsql\/data\/pg_xlog\n\n#move the pgsql directory to the LVM\nsudo find \/tmp\/pgsql\/data -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/ {} +\n\nsudo chmod -R 0700 \/var\/lib\/pgsql\/9.6\/data\n\n#enable service on boot\nsudo systemctl enable postgresql-9.6.service\n\n#add mount points to \/etc\/fstab\necho \"\/dev\/mapper\/pgDataVG-pgDataLV \/var\/lib\/pgsql\/9.6\/data ext4 rw,seclabel,noatime,nobarrier,stripe=4096,data=ordered 0 0\" | sudo tee -a \/etc\/fstab\necho \"\/dev\/mapper\/pgLogVG-pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog ext4 rw,seclabel,noatime,nobarrier,stripe=2048,data=ordered 0 0\" | sudo tee -a  \/etc\/fstab\n\n\nsudo systemctl status postgresql-9.6\nsudo systemctl restart postgresql-9.6\nsudo systemctl status postgresql-9.6\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Setup Postgresql"}],"description":"","message_list":[],"uuid":"02e6d2b5-6cd4-48e9-ab55-c6beedbb419e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"58ca4a03_dag","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079"},"name":"8b1f1a7b_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PG_Package","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","description":"","type":"DAG","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ee8bedbe_dag"}],"description":"","message_list":[],"uuid":"5f5b3313-dadc-4be3-b89d-e81d087960ed","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"ee8bedbe_dag","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f"},"name":"faacff5d_runbook"}},"variable_list":[],"name":"PG_Package"}]},"name":"EraPG_OLD"},"spec":{"name":"EraPG_OLD","resources":{"client_attrs":{"988419c0-c80d-4ab2-8d98-145f3443cb8b":{"y":244,"x":509},"None":{"y":443,"x":658.75},"845d9203-370b-404b-a82d-1a49c9598d2a":{"y":240,"x":793.75}},"service_definition_list":[{"singleton":false,"uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","action_list":[{"uuid":"64343b5e-3c92-47fa-b36d-224d0154270c","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0bfadcbf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"5ace4070-601a-4e58-974d-7944f16061e7"}],"name":"975ed99a_runbook","uuid":"3422170a-ccab-48a0-9257-4d77667cb21b","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0bfadcbf_dag","uuid":"5ace4070-601a-4e58-974d-7944f16061e7"},"description":""},"type":"system","description":"System action for creating an application"},{"uuid":"44ca06c5-382c-4263-90d0-ce7b9d69301e","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9ade3d68_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"a6ac8d3a-8668-4559-9bb7-da1832dd2abf"}],"name":"cf884050_runbook","uuid":"e2b1f50f-fdd6-4bfe-bb8f-41e4dee5d761","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9ade3d68_dag","uuid":"a6ac8d3a-8668-4559-9bb7-da1832dd2abf"},"description":""},"type":"system","description":"System action for deleting an application. Deletes created VMs as well"},{"uuid":"d582d21c-e9ec-4dfb-88a4-ba47b86abaed","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1124d60e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"60a1dc83-8d37-4485-b388-ae61918dfe48"}],"name":"6bcf94d3_runbook","uuid":"c64bf612-bfa8-463a-9ae0-75129c63447b","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"1124d60e_dag","uuid":"60a1dc83-8d37-4485-b388-ae61918dfe48"},"description":""},"type":"system","description":"System action for restarting an application"},{"uuid":"b2a36069-b3dc-4e91-9114-10e8ddf98ca8","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0ae24e3c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"d28405e9-c3da-452f-af2f-8a914122a66a"}],"name":"84c12573_runbook","uuid":"26927e7f-62fa-4b64-8d1d-43ba597b051d","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"0ae24e3c_dag","uuid":"d28405e9-c3da-452f-af2f-8a914122a66a"},"description":""},"type":"system","description":"System action for starting an application"},{"uuid":"fc4f66e6-95ec-4374-bb2d-4ec15a9cee86","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"bf858e3b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"69e97197-880c-43d8-9514-d13cf5785ec0"}],"name":"6e2e5ff2_runbook","uuid":"0d5ace14-4d41-4e03-8679-82e02459c7c2","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"bf858e3b_dag","uuid":"69e97197-880c-43d8-9514-d13cf5785ec0"},"description":""},"type":"system","description":"System action for stopping an application"}],"description":"","depends_on_list":[],"port_list":[],"tier":"","variable_list":[{"val_type":"STRING","description":"","name":"CLEANUP_OPERATION_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"c81be680-c873-4ba5-8830-8ad1016a5a4c"},{"val_type":"STRING","description":"","name":"CLUSTER_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"f3f93ce3-f5bb-443c-a503-2b4768c09f5c"},{"val_type":"STRING","description":"","name":"COMPUTE_PROF_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"d0c9c0c2-d8b2-4d97-8273-acc437f921dc"},{"val_type":"STRING","description":"","name":"CREATE_OPERATION_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"cbf3f400-824d-41e7-8f76-a19d857f668e"},{"val_type":"STRING","description":"","name":"DB_ENTITY_NAME","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"37f6002c-3ff6-4bb8-b1f9-a7e698355f55"},{"val_type":"STRING","description":"","name":"DB_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"692cf8c1-7279-4e8e-a9cb-d51b5716480c"},{"val_type":"STRING","description":"","name":"DB_PARAM_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"0e9479d5-4c56-4dd5-90eb-5a181ecb5c1f"},{"val_type":"STRING","description":"","name":"DB_SERVER_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"b6a52a51-ae40-40ab-85c5-25cd60baddb5"},{"val_type":"STRING","description":"","name":"DB_SERVER_IP","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"4151a923-5f76-40d2-9ecb-62c2bb400371"},{"val_type":"STRING","description":"","name":"DEREGISTER_OPERATION_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"703dcde5-af56-403d-95fb-587cab7e6099"},{"val_type":"STRING","description":"","name":"NETWORK_PROF_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"8b239de6-2219-444c-9b92-f6d3d078a998"},{"val_type":"STRING","description":"","name":"SLA_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"48fda59b-1430-4818-9496-0939ed37afcf"},{"val_type":"STRING","description":"","name":"SOFTWARE_PROF_ID","value":"","label":"","attrs":{"type":""},"type":"LOCAL","uuid":"85e5ac80-2c0d-4b3d-835d-36aec0b909f3"}],"name":"Era"},{"singleton":false,"uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","action_list":[{"uuid":"e2aa7a44-43ee-465c-8917-0dd61824587e","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6fba9cbb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"e01f9c47-1593-4699-85c2-71de405b80d8"}],"name":"01945104_runbook","uuid":"ddb2efee-8caa-4863-8640-846d8537636b","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6fba9cbb_dag","uuid":"e01f9c47-1593-4699-85c2-71de405b80d8"},"description":""},"type":"system","description":"System action for creating an application"},{"uuid":"a71aa0f4-eab5-43b0-8017-8393b655ae60","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8bee20f0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"87e3187f-f059-4f84-aad9-22cabb5cc4b2"}],"name":"fe42eb38_runbook","uuid":"64bfbc2d-a728-4cd9-b7ad-48ebf7938286","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8bee20f0_dag","uuid":"87e3187f-f059-4f84-aad9-22cabb5cc4b2"},"description":""},"type":"system","description":"System action for deleting an application. Deletes created VMs as well"},{"uuid":"ecb1c050-daec-4b59-8986-13989ef93d24","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"04cc6e24_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"07229351-3023-46d7-a401-1f4cd7aed572"}],"name":"ffd25064_runbook","uuid":"ddc30b6c-82ce-49f4-8702-3cfa064cc6c4","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"04cc6e24_dag","uuid":"07229351-3023-46d7-a401-1f4cd7aed572"},"description":""},"type":"system","description":"System action for restarting an application"},{"uuid":"6e97d035-31b5-4953-880c-92929333d3fa","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9d7e4dfb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"cd2013e9-46b9-4536-b6b2-c33f6da26b5e"}],"name":"ef6acd35_runbook","uuid":"a181756b-5479-4633-8eb8-8af46dce1c20","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9d7e4dfb_dag","uuid":"cd2013e9-46b9-4536-b6b2-c33f6da26b5e"},"description":""},"type":"system","description":"System action for starting an application"},{"uuid":"e45a6dbd-73ae-403b-98a8-2068da9615a9","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"897e9b24_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"uuid":"1c013ee9-cd7f-4ef1-8ee5-ee23bf171136"}],"name":"b81e8f8b_runbook","uuid":"770735bf-263e-4611-9590-79fffa50157f","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"897e9b24_dag","uuid":"1c013ee9-cd7f-4ef1-8ee5-ee23bf171136"},"description":""},"type":"system","description":"System action for stopping an application"}],"description":"","depends_on_list":[],"port_list":[],"tier":"","variable_list":[],"name":"Postgres"}],"substrate_definition_list":[{"name":"EraServer","action_list":[],"description":"","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"era_creds","uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true},"create_spec":{"address":true}},"os_type":"Linux","type":"EXISTING_VM","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{era_ip}@@"},"variable_list":[],"uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},{"name":"Era_PostgreSQL_DB","action_list":[],"description":"","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"editables":{"readiness_probe":{"connection_type":true,"retries":true,"delay_secs":true,"connection_port":true},"create_spec":{"categories":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{"0":{"data_source_reference":true,"device_properties":{"device_type":true,"disk_address":{"adapter_type":true}}}}},"name":true}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"lin-@@{calm_array_index}@@-@@{calm_time}@@","resources":{"nic_list":[{"subnet_reference":{"uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"}}],"num_vcpus_per_socket":2,"num_sockets":2,"memory_size_mib":8192,"boot_config":{"boot_device":{"disk_address":{"device_index":0,"adapter_type":"SCSI"}}},"guest_customization":{"cloud_init":{"user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{db_server_creds.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"}},"account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","disk_list":[{"data_source_reference":{"kind":"image","name":"Centos-7.4-1801-01","uuid":"96e7ffa6-6457-4932-a9e8-ba009cd88ddf"},"device_properties":{"disk_address":{"device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":1,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":2,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":3,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":4,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":5,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":6,"adapter_type":"SCSI"}},"disk_size_mib":8192},{"device_properties":{"device_type":"DISK","disk_address":{"device_index":7,"adapter_type":"SCSI"}},"disk_size_mib":8192}]}},"variable_list":[],"uuid":"c570effa-047b-405e-965e-acfcfca59ab7"}],"credential_definition_list":[{"username":"centos","description":"","name":"db_server_creds","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"c2fa8ccc-b43d-4d14-b38a-25130fb6c158"}}},"editables":{"username":true,"secret":true},"type":"KEY","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"},{"username":"admin","description":"","name":"era_creds","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"51cbb30d-9606-43a6-9e62-e209dc3b86ff"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2"}],"package_definition_list":[{"uuid":"c7335191-0431-4f1e-9a10-4945aa63f273","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"}],"description":"","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","name":"7bd63f34_dag","message_list":[],"uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d","child_tasks_local_reference_list":[{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"},{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"GetClusterID","uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7"},"edge_type":"user_defined","type":"","uuid":"72b9aa01-2972-4280-91d8-21b165b66206","to_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"}},{"from_task_reference":{"kind":"app_task","name":"GetProfileIDs","uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7"},"edge_type":"user_defined","type":"","uuid":"73baad5d-4866-41b4-944a-9141759b25b3","to_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"}},{"from_task_reference":{"kind":"app_task","name":"GetSLAID","uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f"},"edge_type":"user_defined","type":"","uuid":"fd15cf9d-bdb3-4809-93fa-9625724a8ef2","to_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"}},{"from_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"},"edge_type":"user_defined","type":"","uuid":"d490c2d7-943c-472a-924d-67b690ac51e1","to_task_reference":{"kind":"app_task","name":"GetDatabaseInfo","uuid":"3ae140df-818a-4886-92d5-a55ed41112f4"}},{"from_task_reference":{"kind":"app_task","name":"ProvisionDB","uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0"},"edge_type":"user_defined","type":"","uuid":"8ba89a0c-a18c-44c8-87e1-7cc8f58c1caf","to_task_reference":{"kind":"app_task","name":"MonitorOperation","uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"GetClusterID","message_list":[],"uuid":"1d66065d-1370-4c31-8104-d60a906ccdd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/clusters\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLUSTER_ID={0}\".format(json.loads(resp.content)[0]['id'])","eval_variables":["CLUSTER_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"GetDatabaseInfo","message_list":[],"uuid":"3ae140df-818a-4886-92d5-a55ed41112f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/name\/@@{DB_ENTITY_NAME}@@?detailed=true\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\nresp_out = json.loads(resp.content)\nprint \"DB_SERVER_IP={0}\".format(resp_out['hostIP'])\nprint \"DB_ID={0}\".format(resp_out['id'])\nprint \"DB_SERVER_ID={0}\".format(resp_out['primaryHost'])","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"GetProfileIDs","message_list":[],"uuid":"62361e7f-cd9b-4518-bd45-5e3b94936dd7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Software&name=@@{software_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"SOFTWARE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Compute&name=@@{compute_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"COMPUTE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Network&name=@@{network_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"NETWORK_PROF_ID={0}\".format(json.loads(resp.content)['id'])\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Database_Parameter&name=@@{database_parameter}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DB_PARAM_ID={0}\".format(json.loads(resp.content)['id'])","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"GetSLAID","message_list":[],"uuid":"f3a360da-57d6-4a3f-9bc3-bf8230b5c50f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get the list of SLAs\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/slas\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nfor sla in json.loads(resp.content):\n  if sla['name'] == \"@@{sla_name}@@\":\n    print \"SLA_ID={0}\".format(sla['id'])","eval_variables":["SLA_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"MonitorOperation","message_list":[],"uuid":"8f2f8c4a-85c3-4b90-bb29-c8327d43059e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CREATE_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 60 seconds.\"\n  sleep(60)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 20 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)\n\n# Get the newly provision DB Entity Name and set it to a variable\nprint \"DB_ENTITY_NAME={0}\".format(json.loads(resp.content)['entityName'])","eval_variables":["DB_ENTITY_NAME"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"ProvisionDB","message_list":[],"uuid":"e420fac4-fa4f-4abf-9072-76234466dcd0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the URL and payload\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/provision\"\npayload = {\n  \"databaseName\": \"@@{db_name}@@\",\n  \"databaseType\": \"postgres_database\",\n  \"databaseDescription\": \"Postgres database provisioned by Calm Application @@{calm_application_name}@@\",\n  \"clusterId\": \"@@{CLUSTER_ID}@@\",\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"provisionInfo\": [\n    {\n      \"name\": \"application_type\",\n      \"value\": \"postgres_database\"\n    },\n    {\n      \"name\": \"listener_port\",\n      \"value\": \"5432\"\n    },\n    {\n      \"name\": \"database_size\",\n      \"value\": \"200\"\n    },\n    {\n      \"name\": \"working_dir\",\n      \"value\": \"\/tmp\"\n    },\n    {\n      \"name\": \"auto_tune_staging_drive\",\n      \"value\": True\n    },\n    {\n      \"name\": \"db_password\",\n      \"value\": \"@@{db_password}@@\"\n    },\n    {\n      \"name\": \"dbserver_name\",\n      \"value\": \"PostgreSQL-@@{calm_time}@@\"\n    },\n    {\n      \"name\": \"dbserver_description\",\n      \"value\": \"Postgres database server provisioned by Calm Application @@{calm_application_name}@@\"\n    },\n    {\n      \"name\": \"ssh_public_key\",\n      \"value\": \"@@{db_public_key}@@\"\n    }\n  ],\n  \"timeMachineInfo\": {\n    \"name\": \"PostgreSQL-@@{calm_time}@@_TM\",\n    \"description\": \"PostgreSQL-@@{calm_time}@@ time machine\",\n    \"slaId\": \"@@{SLA_ID}@@\",\n    \"schedule\": {\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 30\n      },\n      \"snapshotTimeOfDay\": {\n        \"hours\": 1,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"SUNDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 1\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 1\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"month\": \"DECEMBER\",\n        \"dayOfMonth\": 1\n      }\n    }\n  }\n}\n\n# Make the call and set the response operation ID to the variable\nresp = urlreq(url, verb='POST', auth='BASIC', user=era_user, passwd=era_pass, params=json.dumps(payload), headers=headers)\nprint \"CREATE_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CREATE_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""}],"name":"a56589a3_runbook","uuid":"94d7aab1-1a70-4965-af7b-e3ac2b2ac80c","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"7bd63f34_dag","uuid":"0e177570-fed4-4981-afb8-b9923a0e1b2d"},"message_list":[],"variable_list":[],"description":""},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"},"retries":"0","name":"99b487fd_dag","message_list":[],"uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841","child_tasks_local_reference_list":[{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CleanupDB","uuid":"404d2266-074c-4678-b572-a8c781b396ca"},"edge_type":"user_defined","type":"","uuid":"c1bec018-d971-48e4-9a8d-9e8190a238cd","to_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"}},{"from_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"},"edge_type":"user_defined","type":"","uuid":"db4020c2-b5a3-4a84-8ab1-4cee7d027ea9","to_task_reference":{"kind":"app_task","name":"MonitorDeregOp","uuid":"837d1b59-b924-43f3-9c71-de7462431307"}},{"from_task_reference":{"kind":"app_task","name":"MonitorCleanupOp","uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6"},"edge_type":"user_defined","type":"","uuid":"059dee76-ffa8-45ea-9796-1c511ebff628","to_task_reference":{"kind":"app_task","name":"DeregisterDBServer","uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"CleanupDB","message_list":[],"uuid":"404d2266-074c-4678-b572-a8c781b396ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/@@{DB_ID}@@?storage-cleanup=true&tm-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"CLEANUP_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["CLEANUP_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"DeregisterDBServer","message_list":[],"uuid":"00f5a7e0-7314-4deb-876f-d0d94319f92c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?cleanup=true&storage-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nprint \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])","eval_variables":["DEREGISTER_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"MonitorCleanupOp","message_list":[],"uuid":"0e2b8697-062d-4ff3-9835-cb6555a2f9a6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"Era","uuid":"3c6249c0-13e6-45a3-9068-aa6889e2a0b1"},"retries":"0","name":"MonitorDeregOp","message_list":[],"uuid":"837d1b59-b924-43f3-9c71-de7462431307","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"description":""}],"name":"a8f36ab1_runbook","uuid":"8c51440b-5445-47a1-bbd0-ad5f1dec99c7","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"99b487fd_dag","uuid":"f7b97a15-f6e8-47ba-b437-b68ae8ac7841"},"message_list":[],"variable_list":[],"description":""}},"variable_list":[],"name":"EraPackage"},{"uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Postgres","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"}],"description":"","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","name":"58ca4a03_dag","message_list":[],"uuid":"e1d62980-f773-47fd-b553-9531e1fb1079","child_tasks_local_reference_list":[{"kind":"app_task","uuid":"ea837437-401b-47d8-968a-947870787e2d"},{"kind":"app_task","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},{"kind":"app_task","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},{"kind":"app_task","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","uuid":"ea837437-401b-47d8-968a-947870787e2d"},"uuid":"56b15a2e-857f-8b7c-5c54-361845d0aa9f","to_task_reference":{"kind":"app_task","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"}},{"from_task_reference":{"kind":"app_task","uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},"uuid":"523547e8-36f0-a840-5d60-772cd46baead","to_task_reference":{"kind":"app_task","uuid":"1d268a54-65a0-4895-9dce-177329767be0"}},{"from_task_reference":{"kind":"app_task","uuid":"1d268a54-65a0-4895-9dce-177329767be0"},"uuid":"7e4989fd-19da-1dd0-ed1c-9d7a1fb256ba","to_task_reference":{"kind":"app_task","uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"name":"Install System Packages","child_tasks_local_reference_list":[],"attrs":{"login_credential_local_reference":{"kind":"app_credential","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"},"script_type":"sh","script":"#!\/bin\/bash\n\nsudo yum -y upgrade\nsudo curl -O http:\/\/dl.fedoraproject.org\/pub\/epel\/7\/x86_64\/e\/epel-release-7-10.noarch.rpm\nsudo rpm --import https:\/\/www.elrepo.org\/RPM-GPG-KEY-elrepo.org\nsudo rpm -Uvh http:\/\/www.elrepo.org\/elrepo-release-7.0-3.el7.elrepo.noarch.rpm \nsudo rpm -ihv epel-release-7-10.noarch.rpm \n\nsudo yum update -y\nsudo yum -y install htop wget iotop xfs* bc unzip lvm2*\n\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/sysconfig\/selinux\nsudo sed -i 's\/^SELINUX=.*\/SELINUX=disabled\/' \/etc\/selinux\/config\nsudo setenforce 0\n\necho \"System packages are installed\"\n"},"type":"EXEC","variable_list":[],"uuid":"ea837437-401b-47d8-968a-947870787e2d"},{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"name":"Create Disk Setup","child_tasks_local_reference_list":[],"attrs":{"script":"#!\/bin\/bash\n\n##############\n#\n# LVM setup script for PostgreSQL . 4 disks for DATA and 2 for logs\n# Data disks are 60GB | Log disks are 20GB \n#\n#############\n\n\n#PGSQL data\nsudo pvcreate \/dev\/sdb \/dev\/sdc \/dev\/sdd \/dev\/sde\nsudo vgcreate pgDataVG \/dev\/sdb \/dev\/sdd \/dev\/sdc \/dev\/sde\nsudo lvcreate -l 100%FREE -i4 -I1M -n pgDataLV pgDataVG          ## Use 1MB to avoid IO amplification \n#lvcreate -l 100%FREE -i4 -I4M -n pgDataLV pgDataVG\n\n\n#PGSQL logs\nsudo pvcreate \/dev\/sdf \/dev\/sdg \nsudo vgcreate pgLogVG \/dev\/sdf \/dev\/sdg\nsudo lvcreate -l 100%FREE -i2 -I1M -n pgLogLV pgLogVG            ## Use 1MB to avoid IO amplification\n#lvcreate -l 100%FREE -i2 -I4M -n pgLogLV pgLogVG\n\n\n#Disable LVM read ahead\nsudo lvchange -r 0 \/dev\/pgDataVG\/pgDataLV\nsudo lvchange -r 0 \/dev\/pgLogVG\/pgLogLV\n\n\n#Format LVMs with ext4 and use nodiscard to make sure format time is fast on Nutanix due to SCSI unmap\nsudo mkfs.ext4 -E nodiscard \/dev\/pgDataVG\/pgDataLV\nsudo mkfs.ext4 -E nodiscard \/dev\/pgLogVG\/pgLogLV\n\n\n","script_type":"sh","login_credential_local_reference":{"kind":"app_credential","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"}},"type":"EXEC","variable_list":[],"uuid":"6a43784a-79b0-4351-83ad-1e1f592aac91"},{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"name":"Install Postgresql","child_tasks_local_reference_list":[],"attrs":{"login_credential_local_reference":{"kind":"app_credential","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"},"script_type":"sh","script":"#!\/bin\/bash\n\n\nsudo wget -c https:\/\/download.postgresql.org\/pub\/repos\/yum\/9.6\/redhat\/rhel-7-x86_64\/pgdg-centos96-9.6-3.noarch.rpm\nsudo yum -y install pgdg-centos96-9.6-3.noarch.rpm\nsudo rpm --import http:\/\/packages.2ndquadrant.com\/repmgr\/RPM-GPG-KEY-repmgr\nsudo yum install -y http:\/\/packages.2ndquadrant.com\/repmgr\/yum-repo-rpms\/repmgr-rhel-1.0-1.noarch.rpm\n\n# Install PostgreSQL\nsudo yum -y install postgresql96 postgresql96-contrib postgresql96-server postgresql96-devel postgresql96-plpython\n\n\n"},"type":"EXEC","variable_list":[],"uuid":"1d268a54-65a0-4895-9dce-177329767be0"},{"target_any_local_reference":{"kind":"app_service","uuid":"ef15e333-eee3-4a0f-a8ca-ecdeeb09c0ca"},"name":"Setup Postgresql","child_tasks_local_reference_list":[],"attrs":{"login_credential_local_reference":{"kind":"app_credential","uuid":"9c4753d0-81a1-4a0b-9fff-f1e024884e8b"},"script_type":"sh","script":"#!\/bin\/bash\n\n\n#run initdb\nsudo \/usr\/pgsql-9.6\/bin\/postgresql96-setup initdb\n\n#start and stop postgresql to make sure DB creates the required directories\nsudo systemctl start postgresql-9.6.service\nsudo systemctl stop postgresql-9.6.service\n\n##copy the created postgres directory to a temp directory\n\nsudo mkdir \/tmp\/pgsql\n\nsudo mv \/var\/lib\/pgsql\/9.6\/data \/tmp\/pgsql\n\n#Create directory , fix permissions and Mount LVM\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/\nsudo mount -o noatime,barrier=0 \/dev\/pgDataVG\/pgDataLV \/var\/lib\/pgsql\/9.6\/data\/ \n\nsudo mkdir \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\nsudo mount -o noatime,barrier=0 \/dev\/pgLogVG\/pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\n\nsudo chown -R postgres:postgres \/var\/lib\/pgsql\/9.6\/data\/\n\n#move the xlog to the new LVM\nsudo find \/tmp\/pgsql\/data\/pg_xlog -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/pg_xlog\/ {} +\n\n#remove pg_xlog from temp dir to avoid being copied again\nsudo rm -rf \/tmp\/pgsql\/data\/pg_xlog\n\n#move the pgsql directory to the LVM\nsudo find \/tmp\/pgsql\/data -maxdepth 1 -mindepth 1 -exec mv -t \/var\/lib\/pgsql\/9.6\/data\/ {} +\n\nsudo chmod -R 0700 \/var\/lib\/pgsql\/9.6\/data\n\n#enable service on boot\nsudo systemctl enable postgresql-9.6.service\n\n#add mount points to \/etc\/fstab\necho \"\/dev\/mapper\/pgDataVG-pgDataLV \/var\/lib\/pgsql\/9.6\/data ext4 rw,seclabel,noatime,nobarrier,stripe=4096,data=ordered 0 0\" | sudo tee -a \/etc\/fstab\necho \"\/dev\/mapper\/pgLogVG-pgLogLV \/var\/lib\/pgsql\/9.6\/data\/pg_xlog ext4 rw,seclabel,noatime,nobarrier,stripe=2048,data=ordered 0 0\" | sudo tee -a  \/etc\/fstab\n\n\nsudo systemctl status postgresql-9.6\nsudo systemctl restart postgresql-9.6\nsudo systemctl status postgresql-9.6\n"},"type":"EXEC","variable_list":[],"uuid":"8e17ff83-e62d-48cf-b740-cc812b37817d"}],"name":"8b1f1a7b_runbook","uuid":"02e6d2b5-6cd4-48e9-ab55-c6beedbb419e","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"58ca4a03_dag","uuid":"e1d62980-f773-47fd-b553-9531e1fb1079"},"message_list":[],"variable_list":[],"description":""},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"},"retries":"0","name":"ee8bedbe_dag","message_list":[],"uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"description":""}],"name":"faacff5d_runbook","uuid":"5f5b3313-dadc-4be3-b89d-e81d087960ed","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"ee8bedbe_dag","uuid":"c8ea310f-35a7-4389-9f60-0d185c91f67f"},"message_list":[],"variable_list":[],"description":""}},"variable_list":[],"name":"PG_Package"}],"app_profile_list":[{"deployment_create_list":[{"uuid":"845d9203-370b-404b-a82d-1a49c9598d2a","name":"f6be2786_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"Package2","uuid":"cd9c0805-6bb5-4762-b9f1-9e84cd444a9f"}],"published_service_local_reference_list":[],"editables":{"min_replicas":true,"max_replicas":true},"depends_on_list":[],"max_replicas":"1","type":"GREENFIELD","substrate_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB","uuid":"c570effa-047b-405e-965e-acfcfca59ab7"},"min_replicas":"1","variable_list":[],"description":""},{"uuid":"988419c0-c80d-4ab2-8d98-145f3443cb8b","name":"f9a4c530_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"EraPackage","uuid":"c7335191-0431-4f1e-9a10-4945aa63f273"}],"depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","type":"GREENFIELD","substrate_local_reference":{"kind":"app_substrate","name":"EraServer","uuid":"0e6783a0-8b98-4ee3-86fd-6a36a773af83"},"min_replicas":"1","variable_list":[],"description":""}],"uuid":"cb363b29-5e49-4752-a487-b38ff5d9d118","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","name":"db_name","description":"","value":"oscar_django_@@{calm_time(\"%Y%m%d%H%M\")}@@","label":"","editables":{"value":true},"type":"LOCAL","uuid":"99cb38fe-da8b-4a0c-8383-ee8f041089b7"},{"val_type":"STRING","description":"","name":"db_password","label":"","attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"879849f2-54a0-4977-9b75-4dcfc66cf1e8"}},"editables":{"value":true},"type":"SECRET","uuid":"52dd4747-70c4-4f0b-b467-b4b28d07fd63"},{"val_type":"STRING","description":"","name":"db_public_key","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDUm18acWv344TgOXBuOnozuSXytDuqKFVE0+x7CK\/dZ6Y331lBF+f8AE\/Ng3tzxvCDUeth3pa7XO\/Y95zc+hTLGROBmWdgidfykBi2FeQ6hZOcsUDslPUL3Ig8UpPzbOva276YP3266+1BGjLi14neBSJvpSV2DvXQovMb57mhAWs9BlVj3UIviHBMQYXc9RUiyoTBYphqQi5THsQafEFEA+3EJ\/NLhqF4CTRZoxMk+VDZbQCCYk0SNEDvDnhEUCIQW1KDg8HDaHrCcRE8DKwi1dgDjASwcUeDuaFto0WrUaj8FdOvaIwjLKYC9DUgsPel+FOLNkg0cPi0vuXb1CGZ era@domain.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","uuid":"f1c2f8a5-4e27-42be-b20e-4ad9e3a9af0e"},{"val_type":"STRING","description":"","name":"era_ip","value":"10.46.35.84","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","uuid":"6d359546-4b9b-4ab1-880b-05c1412bf96c"},{"val_type":"STRING","description":"","name":"sla_name","value":"GOLD","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","uuid":"cb886d4e-827f-4068-b102-90e7405a5e6a"}],"description":""}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"era_creds","uuid":"4be718e2-28c8-4504-954a-3f0996f20fe2"},"type":"USER"},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1549979644725487","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"adca7962-16c3-44cf-ad5c-0d3d87951b60","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":0,"creation_time":"1549979644725487","name":"EraPG_OLD"}}