{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"c7b8229b-e6d9-4b35-af08-14724b648d0e","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"de8d6091-7b10-4968-8b66-3cf78d650eea","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8c0b7aac_dag_cloned_1"}],"description":"","message_list":[],"uuid":"0b8b8429-5dab-462f-9482-792a0b5ba119","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8c0b7aac_dag_cloned_1","uuid":"de8d6091-7b10-4968-8b66-3cf78d650eea"},"name":"e336f5a5_runbook_cloned_0"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"eab9ca40-29c7-43b2-b017-89cb8a653b7d","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"9e9d25b6-b405-440b-868a-389e50372788","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"9c114dea_dag_cloned_1"}],"description":"","message_list":[],"uuid":"527ff26c-88fc-498b-9975-d213b4a73158","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9c114dea_dag_cloned_1","uuid":"9e9d25b6-b405-440b-868a-389e50372788"},"name":"bc52929d_runbook_cloned_0"}},{"description":"System action for starting an application","message_list":[],"uuid":"646fbe19-bced-48e7-9a1e-e473375dbab8","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"a5ad0ec4-479c-4c77-99d3-6d5c4d0d5f33","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6aaef5c4_dag_cloned_1"}],"description":"","message_list":[],"uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6aaef5c4_dag_cloned_1","uuid":"a5ad0ec4-479c-4c77-99d3-6d5c4d0d5f33"},"name":"6664cdf0_runbook_cloned_0"}},{"description":"System action for stopping an application","message_list":[],"uuid":"3705bbd3-f324-403a-8c72-80577b96a5b0","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"ecd13299-39e1-49f5-bb40-fe94bf744bb2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"44b9e532_dag_cloned_1"}],"description":"","message_list":[],"uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"44b9e532_dag_cloned_1","uuid":"ecd13299-39e1-49f5-bb40-fe94bf744bb2"},"name":"850d536e_runbook_cloned_0"}},{"description":"System action for restarting an application","message_list":[],"uuid":"865e174f-ce9c-468a-8897-1ef5ef50f8dc","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"1830a725-116c-4308-9a56-15a9473181c1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3bbf6d30_dag_cloned_1"}],"description":"","message_list":[],"uuid":"3792ddf9-0d7d-49f0-bec8-94bc5f19cd81","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3bbf6d30_dag_cloned_1","uuid":"1830a725-116c-4308-9a56-15a9473181c1"},"name":"3b4902aa_runbook_cloned_0"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"741d44e5-cfd9-4141-9f6c-59c857c20ffd","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"DAG","uuid":"cea421a7-9d30-400f-93b1-2166d6f800ef","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"0143abda-3cf8-40c7-bd10-5dc042e11f99"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"0143abda-3cf8-40c7-bd10-5dc042e11f99","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"fb1af71b-13a3-489e-9e51-db11507e3e94","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"cea421a7-9d30-400f-93b1-2166d6f800ef"},"name":"SYS_GEN__Runbook_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}}],"message_list":[],"uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[],"name":"PaloAlto"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","message_list":[],"uuid":"1a90ed96-8b37-4a40-8892-7b4329df667c","name":"pre_action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"c4c13c72-6d29-45c1-a94a-9710009cab67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"acf0981a_dag"}],"description":"","message_list":[],"uuid":"be24eea4-35ec-4bda-bfe5-1b49f6862de4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"acf0981a_dag","uuid":"c4c13c72-6d29-45c1-a94a-9710009cab67"},"name":"6b1e4203_runbook"}},{"description":"","message_list":[],"uuid":"d00f7ee9-5d05-4bce-8cb9-9f615e49808f","name":"post_action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"fragment","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"09b92e15-09a1-4270-80b7-c1921719ac4c","child_tasks_local_reference_list":[{"kind":"app_task","name":"DeleteCategoriesNFChain","uuid":"4a353af5-7bf2-4cd8-a6f7-a7dea6afdece"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"cb997dd5_dag"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"EXEC","uuid":"4a353af5-7bf2-4cd8-a6f7-a7dea6afdece","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"prism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n\n\ndef deleteconfig(api_url):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\n  if r.ok:\n    return r\n  else:\n    print \"Delete request failed\", r.content\n    \n\nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_exists = False\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nif len(nf_list['entities']) > 0:\n  for i in nf_list['entities']:\n    if i['status']['name'] == nf_chain_name:\n      nf_exists = True\n      nf_uuid = i['metadata']['uuid']\n      break\n\n    \nprint \"Deleting service chain\"\nif nf_exists and @@{calm_array_index}@@ == 0:\n  service_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/{1}'.format(prism_ip, nf_uuid)\n  deleteconfig(api_url=service_chain_api)\n\nsleep(30)\n\nprint \"Delete @@{platform.metadata.categories.network_function_provider}@@ network function provider category\"\ncategory_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider\/@@{platform.metadata.categories.network_function_provider}@@'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=category_api)\n\n\nprint \"Deleting network function provider category\"\ncategorykey_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=categorykey_api)\n\n\n    \n\n\n\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"DeleteCategoriesNFChain"}],"description":"","message_list":[],"uuid":"61951a77-c517-444b-ab51-3067c8f7ca5a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"cb997dd5_dag","uuid":"09b92e15-09a1-4270-80b7-c1921719ac4c"},"name":"8ea1ed98_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"ee024deb-1fd9-4c48-9688-60c5ae0e7a0b","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"99d27cd3-3b39-41ea-a07e-ba77b9e2cbbd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"e6560bc2-bffb-49c1-8055-45e1d8dc7aa9"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"a4ac0df9-ffe2-4bf1-a27b-ace7bb6b336f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"e6560bc2-bffb-49c1-8055-45e1d8dc7aa9"},"edge_type":"inherent","type":"","uuid":"0cc7bf12-bc5b-49b5-8804-157a2e8a1200","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"a4ac0df9-ffe2-4bf1-a27b-ace7bb6b336f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"e6560bc2-bffb-49c1-8055-45e1d8dc7aa9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"PaloAlto-@@{calm_array_index}@@","categories":{"network_function_provider":"PaloAlto"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","subnet_reference":null,"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":9216,"power_state":"ON","hardware_clock_timezone":"","guest_customization":null,"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"PA-VM-KVM-8.0.5.qcow2","uuid":"e41a24b8-b79c-42fe-a0e9-ece0ec9612ca"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"a4ac0df9-ffe2-4bf1-a27b-ace7bb6b336f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"49ae8f1d-5df7-4c8b-a1cc-9527ba523110","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"99d27cd3-3b39-41ea-a07e-ba77b9e2cbbd"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for powering on an application","message_list":[],"uuid":"bb2878d0-8964-4e02-bee2-e1a39f3615a3","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"9d0598a9-5fe4-4037-a190-c472c7bfce2c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"7d501df2-0edb-4be9-a994-b72999a917dc"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"33733913-dc1f-4b89-87c6-a9bab793ee33"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"7d501df2-0edb-4be9-a994-b72999a917dc"},"edge_type":"inherent","type":"","uuid":"b1b00852-f4d7-405b-9566-d97daae8e6cb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"33733913-dc1f-4b89-87c6-a9bab793ee33"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"7d501df2-0edb-4be9-a994-b72999a917dc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"33733913-dc1f-4b89-87c6-a9bab793ee33","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"3add8d24-5bad-4ba0-9a7b-419bb2de949c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"9d0598a9-5fe4-4037-a190-c472c7bfce2c"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for restarting an application","message_list":[],"uuid":"69c878fc-0a08-4975-af17-9e153ae8c1f8","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"d2874f94-bda9-4131-9ac1-51f1b527be74","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"5c3e69bf-1813-4cd6-8a07-f309559f0817"},{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"579585df-cb5a-49fe-9c54-96dffcc3573a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"5c3e69bf-1813-4cd6-8a07-f309559f0817"},"edge_type":"inherent","type":"","uuid":"2b041005-ea0d-4eda-8de0-418b8f09b984","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"579585df-cb5a-49fe-9c54-96dffcc3573a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"5c3e69bf-1813-4cd6-8a07-f309559f0817","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"579585df-cb5a-49fe-9c54-96dffcc3573a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_PaloAltoVM_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"b92892a0-48cc-453c-95bc-647e474e7fdd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d2874f94-bda9-4131-9ac1-51f1b527be74"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for suspending an application","message_list":[],"uuid":"4bac624b-9daa-4e52-a8f6-7f1fe44d1805","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"721ab0aa-6d13-4baa-9c2d-11503c4406a1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"fec66700-9d7b-400e-8090-33f937948875","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"721ab0aa-6d13-4baa-9c2d-11503c4406a1"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for modifying an application","message_list":[],"uuid":"830c8c64-454a-41bb-ab1e-7a0caa586b09","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"22c8b7c8-735d-4681-a732-8213c9b89b59","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"08bd4a5c-e13d-4169-9956-2b40ed95113d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"22c8b7c8-735d-4681-a732-8213c9b89b59"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for powering off an application","message_list":[],"uuid":"c4990fc3-533d-4aae-af96-9b6d5e40918c","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"7e9a05be-15b5-46f4-9c04-33902bc3ef34","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"c6acd6f8-39f1-495a-907e-50dfefc0bdf8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"c6acd6f8-39f1-495a-907e-50dfefc0bdf8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"648d71ef-2580-437b-9b4c-9dcf3295a80c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"7e9a05be-15b5-46f4-9c04-33902bc3ef34"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"48106d7f-e0fe-4f9c-9e0e-1e467de52648","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"6ce5cf5f-f1dc-4f0a-a21f-1c298b898217","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"a12599e5-79de-4b78-933d-f2427fbbd9d4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"a12599e5-79de-4b78-933d-f2427fbbd9d4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"c5559b44-4b72-4fc1-b89d-ec8c330dae62","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"6ce5cf5f-f1dc-4f0a-a21f-1c298b898217"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"f2f00877-7492-4723-9cf8-88a2419b6f89","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"DAG","uuid":"ac42f975-520b-43cc-8d71-61ddc85bf7c4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"55ddaaf5-2ddc-4727-b557-56ffe3c0dd9b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"55ddaaf5-2ddc-4727-b557-56ffe3c0dd9b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"be1c2606-1e47-4dcd-bc3c-30790e797595","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"ac42f975-520b-43cc-8d71-61ddc85bf7c4"},"name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}}],"message_list":[],"uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372","state":"ACTIVE","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"600","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"PaloAlto-@@{calm_array_index}@@","categories":{"network_function_provider":"PaloAlto"},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","subnet_reference":null,"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","subnet_reference":null,"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"serial_port_list":[],"gpu_list":[],"memory_size_mib":9216,"power_state":"ON","hardware_clock_timezone":"","guest_customization":null,"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"PA-VM-KVM-8.0.5.qcow2","uuid":"e41a24b8-b79c-42fe-a0e9-ece0ec9612ca"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]}},"variable_list":[],"name":"PaloAltoVM"}],"credential_definition_list":[{"username":"admin","description":"","state":"ACTIVE","message_list":[],"uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"admin"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"467b7c81-f317-4ef0-9c4c-305b9b6de916","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"14788e67-aaf4-4b7e-90bd-64104bfdb5b8","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"e9c150f5-3402-4c6b-bc18-4c39c53cc131"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d24ab1a1-b101-4685-ab17-6331acf4b1eb"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"5c5054db-4dc9-4f20-8c51-114d17682d1f"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"1c1d9004-3876-490e-a4e7-9adfa163d075"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"c02db672-41c8-4546-a274-7538b967d773"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"1f387c56-72af-4666-8c43-706787c2dedb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d24ab1a1-b101-4685-ab17-6331acf4b1eb"},"edge_type":"inherent","type":"","uuid":"e9cab274-14c3-4cfd-bfd8-27710d8b1c14","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"5c5054db-4dc9-4f20-8c51-114d17682d1f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"c02db672-41c8-4546-a274-7538b967d773"},"edge_type":"inherent","type":"","uuid":"2bb422be-347a-4f2a-a351-593030ca5463","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"1f387c56-72af-4666-8c43-706787c2dedb"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"1c1d9004-3876-490e-a4e7-9adfa163d075"},"edge_type":"inherent","type":"","uuid":"3edbae61-a894-451f-833f-81a965c80000","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"c02db672-41c8-4546-a274-7538b967d773"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"5c5054db-4dc9-4f20-8c51-114d17682d1f"},"edge_type":"inherent","type":"","uuid":"f436a46b-3ee1-4e3f-a6d2-a23cbf9695ca","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"1c1d9004-3876-490e-a4e7-9adfa163d075"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"e9c150f5-3402-4c6b-bc18-4c39c53cc131"},"edge_type":"inherent","type":"","uuid":"c32151ed-eccb-4964-8d4d-9c2596f01df2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d24ab1a1-b101-4685-ab17-6331acf4b1eb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"e9c150f5-3402-4c6b-bc18-4c39c53cc131","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d24ab1a1-b101-4685-ab17-6331acf4b1eb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6b1e4203_runbook","uuid":"be24eea4-35ec-4bda-bfe5-1b49f6862de4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5c5054db-4dc9-4f20-8c51-114d17682d1f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"49ae8f1d-5df7-4c8b-a1cc-9527ba523110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1c1d9004-3876-490e-a4e7-9adfa163d075","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"af496f18-cb13-492e-937a-8bf255e19443"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c02db672-41c8-4546-a274-7538b967d773","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"0b8b8429-5dab-462f-9482-792a0b5ba119"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1f387c56-72af-4666-8c43-706787c2dedb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"e88b3739-2a57-4a78-8fc7-d8a15110f46f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"14788e67-aaf4-4b7e-90bd-64104bfdb5b8"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for starting an application","message_list":[],"uuid":"64f79a78-2d9d-4b68-baa2-4001865dcbc0","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"9bfd3831-efc5-4bf0-b6e5-cf6f1e24c0c0","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"fd802a4b-eee1-4cd2-b12a-97bbe942081e"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"7d2275c0-5649-4382-8103-7fa721208c5a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"fd802a4b-eee1-4cd2-b12a-97bbe942081e"},"edge_type":"inherent","type":"","uuid":"e713735b-4bad-43a1-b31a-ad2ba499d60e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"7d2275c0-5649-4382-8103-7fa721208c5a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fd802a4b-eee1-4cd2-b12a-97bbe942081e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"3add8d24-5bad-4ba0-9a7b-419bb2de949c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7d2275c0-5649-4382-8103-7fa721208c5a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"fad11b84-6042-4c3e-b64d-8577d51d38ac","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"9bfd3831-efc5-4bf0-b6e5-cf6f1e24c0c0"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for restarting an application","message_list":[],"uuid":"bb563fff-af97-4dd4-96e0-748a0aa916a6","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"b2662ca7-6bae-4444-86d6-4ebd6dcd15fb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"457b453b-5369-486e-9b0b-15da205c7c6e"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"42ce1cb6-63a0-4fd2-817c-66068eda9f28"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"457b453b-5369-486e-9b0b-15da205c7c6e"},"edge_type":"inherent","type":"","uuid":"7aa6dd28-dc94-45bd-b656-0f4ea05ea17c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"42ce1cb6-63a0-4fd2-817c-66068eda9f28"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"457b453b-5369-486e-9b0b-15da205c7c6e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"b92892a0-48cc-453c-95bc-647e474e7fdd"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"42ce1cb6-63a0-4fd2-817c-66068eda9f28","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"3792ddf9-0d7d-49f0-bec8-94bc5f19cd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"dd8f0fe8-bcf4-42b1-8cab-43b517b16618","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"b2662ca7-6bae-4444-86d6-4ebd6dcd15fb"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for stopping an application","message_list":[],"uuid":"3cc264c8-a10c-4adf-b37a-1ea27b5df200","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"738187e2-df95-45d0-9186-b14e3eda585f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"cd1088b3-353e-4499-bb8c-fe31e9563dff"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"eaaf5486-753a-4f3b-bf3f-2c1e735f3ef1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"cd1088b3-353e-4499-bb8c-fe31e9563dff"},"edge_type":"inherent","type":"","uuid":"5c992f0c-5cb1-4592-8e25-bb8c8779d1f6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"eaaf5486-753a-4f3b-bf3f-2c1e735f3ef1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"cd1088b3-353e-4499-bb8c-fe31e9563dff","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"eaaf5486-753a-4f3b-bf3f-2c1e735f3ef1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"648d71ef-2580-437b-9b4c-9dcf3295a80c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"f5c3917b-fe3c-4f7b-ba54-cfeacf60f57c","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"738187e2-df95-45d0-9186-b14e3eda585f"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"1f97f957-6acc-422d-8464-e59ef111d1f0","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"7baac010-00b4-4d66-ab0f-ef94edd72859","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"41813502-daff-4b2c-a98e-8852956d3dac"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e22cb2c8-4e91-4a20-b90c-36dbfbf8f997"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"8d3a3e1e-da71-415b-ae03-e4fa65a601a0"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d38d84c9-723e-4e4b-bc9d-df96adafa5e2"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"02cf58d2-7c7b-4122-a5a7-b100e40d8e9b"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"c5fc4730-eede-48a0-a585-1611d07516b6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d38d84c9-723e-4e4b-bc9d-df96adafa5e2"},"edge_type":"inherent","type":"","uuid":"292156f0-111c-4f7d-8058-4e78ccabca6b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"02cf58d2-7c7b-4122-a5a7-b100e40d8e9b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"41813502-daff-4b2c-a98e-8852956d3dac"},"edge_type":"inherent","type":"","uuid":"8c84484d-69d9-4530-8afc-a3289907862c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e22cb2c8-4e91-4a20-b90c-36dbfbf8f997"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e22cb2c8-4e91-4a20-b90c-36dbfbf8f997"},"edge_type":"inherent","type":"","uuid":"9f24cfb3-5142-4f16-baac-81e1100ff292","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"8d3a3e1e-da71-415b-ae03-e4fa65a601a0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"02cf58d2-7c7b-4122-a5a7-b100e40d8e9b"},"edge_type":"inherent","type":"","uuid":"359397f0-80f5-462a-9715-19a05706ee43","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"c5fc4730-eede-48a0-a585-1611d07516b6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"8d3a3e1e-da71-415b-ae03-e4fa65a601a0"},"edge_type":"inherent","type":"","uuid":"101389e4-24e2-46cf-b833-29e8e38d74bf","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"d38d84c9-723e-4e4b-bc9d-df96adafa5e2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"41813502-daff-4b2c-a98e-8852956d3dac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e22cb2c8-4e91-4a20-b90c-36dbfbf8f997","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"527ff26c-88fc-498b-9975-d213b4a73158"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8d3a3e1e-da71-415b-ae03-e4fa65a601a0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"03942067-4b02-4694-b2b0-5e9b33da28d6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d38d84c9-723e-4e4b-bc9d-df96adafa5e2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"c5559b44-4b72-4fc1-b89d-ec8c330dae62"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"02cf58d2-7c7b-4122-a5a7-b100e40d8e9b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8ea1ed98_runbook","uuid":"61951a77-c517-444b-ab51-3067c8f7ca5a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"c5fc4730-eede-48a0-a585-1611d07516b6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"c0873801-8380-4417-b9cc-59f6a01d7785","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"7baac010-00b4-4d66-ab0f-ef94edd72859"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for scaleout","message_list":[],"uuid":"a3ddce21-69d0-412e-bafa-f42214f42407","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"ce9bd506-4169-45f0-8a08-bfacb00f3000","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"dc0ba255-9137-42c0-9198-22a6890e5274"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SCALING","uuid":"dc0ba255-9137-42c0-9198-22a6890e5274","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"e26cab39-064f-4afa-a69d-575570c1b84d","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"b84ca19a-1e3c-4094-8677-766693d40a55","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"ce9bd506-4169-45f0-8a08-bfacb00f3000"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for scalein","message_list":[],"uuid":"502e2ea1-3cf4-4c9f-8611-471ed0027351","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"5871d15d-1b6b-4129-8f20-16600c00e689","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"b155df15-a49b-4c4b-8298-0877d20762be"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SCALING","uuid":"b155df15-a49b-4c4b-8298-0877d20762be","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"ebc43069-8d55-4716-851a-fb82e9d63af5","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"62a6d508-6a01-49ca-a5e4-5174bcd87051","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"5871d15d-1b6b-4129-8f20-16600c00e689"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"2ff80a40-e928-4bb8-8e80-bafca8b126a8","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DAG","uuid":"691bd5f6-de7f-4f8a-90bf-fb9cfbe6361c","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"a1369774-ae94-4288-b9f5-fa0ec05caf79"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"b5e73b17-0f79-421c-9eec-e437c0181aa2"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f3a0bd28-8520-4d21-8c6f-354e040f37d5"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"08c63eb8-b8e6-476c-a009-2e36eb9d67e8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"a1369774-ae94-4288-b9f5-fa0ec05caf79"},"edge_type":"inherent","type":"","uuid":"ca8c593e-a1bc-43ca-9137-0d51fcab83cf","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"b5e73b17-0f79-421c-9eec-e437c0181aa2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f3a0bd28-8520-4d21-8c6f-354e040f37d5"},"edge_type":"inherent","type":"","uuid":"92953598-f0ff-4822-bd7e-469e8368e306","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"08c63eb8-b8e6-476c-a009-2e36eb9d67e8"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"b5e73b17-0f79-421c-9eec-e437c0181aa2"},"edge_type":"inherent","type":"","uuid":"48cf49ae-8f18-40d9-8d7a-637347f6c0e2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f3a0bd28-8520-4d21-8c6f-354e040f37d5"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a1369774-ae94-4288-b9f5-fa0ec05caf79","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"fb1af71b-13a3-489e-9e51-db11507e3e94"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"b5e73b17-0f79-421c-9eec-e437c0181aa2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f3a0bd28-8520-4d21-8c6f-354e040f37d5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"be1c2606-1e47-4dcd-bc3c-30790e797595"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"08c63eb8-b8e6-476c-a009-2e36eb9d67e8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"2d29135b-8f87-453a-8850-14875fc708e4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"691bd5f6-de7f-4f8a-90bf-fb9cfbe6361c"},"name":"SYS_GEN__Runbook_Deployment_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf","min_replicas":"@@{COUNT}@@","state":"ACTIVE","max_replicas":"99","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"}],"substrate_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"85789db9_deployment_cloned_0"}],"description":"","action_list":[{"description":"This action is used to scaleup the no of palo alto vms on the cluster","message_list":[],"uuid":"f205bf76-d7a5-452d-9d53-5caa76fa577e","name":"ScaleUp","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"285d0ab8-95f8-4e18-a30d-9dc164cfa952","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOut","uuid":"dca545bb-ae85-4c48-a097-03990e075876"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"47593285_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SCALING","uuid":"dca545bb-ae85-4c48-a097-03990e075876","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{SCALEOUT_COUNT}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ScaleOut"}],"description":"","message_list":[],"uuid":"b15e6666-a361-429d-901f-74fcafbdb9a7","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"a634422c-b4cb-4192-94df-1ddd24167691","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"SCALEOUT_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"47593285_dag","uuid":"285d0ab8-95f8-4e18-a30d-9dc164cfa952"},"name":"e47f3869_runbook"}},{"description":"This action is used to scale down the no of palo alto vms on the cluster","message_list":[],"uuid":"289da664-61ff-4539-aff0-3e0b8e1e861a","name":"ScaleDown","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"77f27dec-4073-4080-bdf2-9f22c2e42200","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleIn","uuid":"b0158410-309b-4a65-9380-50b76feafb7f"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6e05e2e2_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SCALING","uuid":"b0158410-309b-4a65-9380-50b76feafb7f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{SCALEIN_COUNT}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ScaleIn"}],"description":"","message_list":[],"uuid":"52cd7034-f25f-4548-a684-a2a5253f3d92","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"fce51d7a-7bc9-48b0-95ac-f83f09685859","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"SCALEIN_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"6e05e2e2_dag","uuid":"77f27dec-4073-4080-bdf2-9f22c2e42200"},"name":"aa73d797_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"9273a09e-6254-49f3-bad6-c3708e87d875","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"af50fa26-3c6e-4cda-91ce-599bfca486bd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"d4ff33a2-b2ed-4a34-b1ff-2d97119e1f5c"},{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"68f934c2-06a5-42f3-950b-ea61f2d7c256"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f9fc2643-10cf-40e1-a2c4-a1713081ea4f"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"acb181de-4efa-4ee8-b255-11f3e5a2023d"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"d08f5f8d-8989-47d3-875b-df2fb8cc5f01"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"5455c7ae-b87e-48fb-8ab6-6424b78d4d52"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"68f934c2-06a5-42f3-950b-ea61f2d7c256"},"edge_type":"inherent","type":"","uuid":"ddbb358e-144b-4a21-9a10-7c3055e94a7d","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f9fc2643-10cf-40e1-a2c4-a1713081ea4f"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"d08f5f8d-8989-47d3-875b-df2fb8cc5f01"},"edge_type":"inherent","type":"","uuid":"90e62e46-daef-41c7-a98e-48c63fb942bd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"5455c7ae-b87e-48fb-8ab6-6424b78d4d52"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"acb181de-4efa-4ee8-b255-11f3e5a2023d"},"edge_type":"inherent","type":"","uuid":"36b69170-f7c7-4cec-89df-ab6d09aeec4f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"d08f5f8d-8989-47d3-875b-df2fb8cc5f01"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"f9fc2643-10cf-40e1-a2c4-a1713081ea4f"},"edge_type":"inherent","type":"","uuid":"0ec7e6a1-9ca9-4cc0-9a2e-088920462f85","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"acb181de-4efa-4ee8-b255-11f3e5a2023d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"d4ff33a2-b2ed-4a34-b1ff-2d97119e1f5c"},"edge_type":"inherent","type":"","uuid":"2f741a08-5e69-4f3c-9861-b7e1b4305c45","to_task_reference":{"kind":"app_task","name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"68f934c2-06a5-42f3-950b-ea61f2d7c256"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"d4ff33a2-b2ed-4a34-b1ff-2d97119e1f5c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_0bc13395_bd68_41c0_838f_e0b240d7ebbf"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"68f934c2-06a5-42f3-950b-ea61f2d7c256","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6b1e4203_runbook","uuid":"be24eea4-35ec-4bda-bfe5-1b49f6862de4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__pre_create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f9fc2643-10cf-40e1-a2c4-a1713081ea4f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"49ae8f1d-5df7-4c8b-a1cc-9527ba523110"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"acb181de-4efa-4ee8-b255-11f3e5a2023d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"af496f18-cb13-492e-937a-8bf255e19443"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d08f5f8d-8989-47d3-875b-df2fb8cc5f01","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"0b8b8429-5dab-462f-9482-792a0b5ba119"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"5455c7ae-b87e-48fb-8ab6-6424b78d4d52","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"7278c87b-a2fe-402e-99be-a0dbf5651a09","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"af50fa26-3c6e-4cda-91ce-599bfca486bd"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}},{"description":"System action for starting an application","message_list":[],"uuid":"144ee410-83dd-4a2c-b21f-1a7ddb13fff7","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"b418c2e6-f4c2-44e1-993b-0559ca2efe03","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"21f99c1c-04ce-4ad5-b19d-d828ac93513f"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"fea89467-89ab-4818-a3ff-012e6675b578"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"21f99c1c-04ce-4ad5-b19d-d828ac93513f"},"edge_type":"inherent","type":"","uuid":"7a92602c-96ac-4bcf-8a6f-239b0e788617","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"fea89467-89ab-4818-a3ff-012e6675b578"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"21f99c1c-04ce-4ad5-b19d-d828ac93513f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"3add8d24-5bad-4ba0-9a7b-419bb2de949c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fea89467-89ab-4818-a3ff-012e6675b578","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"34e19bf1-0a64-4009-a136-8b8c9b282d56","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"b418c2e6-f4c2-44e1-993b-0559ca2efe03"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}},{"description":"System action for restarting an application","message_list":[],"uuid":"d0782230-c2e8-4e8d-a4f8-5fbc015d93cb","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"7526be74-0d6b-4c45-9405-115da2652bdb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"39ea5cda-5fb8-45a9-a327-4c83ece9b046"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"3cd08c81-569b-4414-8fdf-d28a9de03d05"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"39ea5cda-5fb8-45a9-a327-4c83ece9b046"},"edge_type":"inherent","type":"","uuid":"a3064960-d38e-4c39-8d85-77163945a09c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"3cd08c81-569b-4414-8fdf-d28a9de03d05"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"39ea5cda-5fb8-45a9-a327-4c83ece9b046","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"b92892a0-48cc-453c-95bc-647e474e7fdd"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"3cd08c81-569b-4414-8fdf-d28a9de03d05","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"3792ddf9-0d7d-49f0-bec8-94bc5f19cd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"9062cf8c-1116-4b93-8897-a0b16617ac55","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"7526be74-0d6b-4c45-9405-115da2652bdb"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}},{"description":"System action for stopping an application","message_list":[],"uuid":"8258ad16-09b5-4ee8-a97d-38d9f86b6e7c","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"2e09e15d-646e-4560-93a5-a211391ee1cb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"a03ca434-29d2-4efe-9603-577b59c9c1d3"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"9a256f00-438a-47c5-a83c-76fd1f8ec647"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"a03ca434-29d2-4efe-9603-577b59c9c1d3"},"edge_type":"inherent","type":"","uuid":"6e5d0101-3dc3-4b48-9a2e-3c8f03321348","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"9a256f00-438a-47c5-a83c-76fd1f8ec647"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a03ca434-29d2-4efe-9603-577b59c9c1d3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9a256f00-438a-47c5-a83c-76fd1f8ec647","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"648d71ef-2580-437b-9b4c-9dcf3295a80c"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"}],"description":"","message_list":[],"uuid":"20b15007-b2b9-4c2f-9cf9-34e754f0a43b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"2e09e15d-646e-4560-93a5-a211391ee1cb"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"fb2c0c38-9afa-4b91-9e51-aac545df0f5e","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"34366050-a42c-4570-bb89-ea2a7c3133c7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"39a1a803-36d4-4b52-88b4-8e2beb5fbde6"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"57846402-01b0-421b-acfe-65fc83ecea8e"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"c998923e-0be6-4dd3-b26e-e5c60bec799c"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"91819007-2d19-4a68-a0b5-0087466e8e45"},{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"aa05bdbb-3eb2-4258-ad71-fcf9b4bc6c67"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"e8cd6497-9c96-480b-9bb4-16a36de17190"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"91819007-2d19-4a68-a0b5-0087466e8e45"},"edge_type":"inherent","type":"","uuid":"853d6215-d34b-445c-874d-525eeae63170","to_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"aa05bdbb-3eb2-4258-ad71-fcf9b4bc6c67"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"39a1a803-36d4-4b52-88b4-8e2beb5fbde6"},"edge_type":"inherent","type":"","uuid":"ea5c6629-aa93-4cf6-aace-ca392fc08f9f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"57846402-01b0-421b-acfe-65fc83ecea8e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"57846402-01b0-421b-acfe-65fc83ecea8e"},"edge_type":"inherent","type":"","uuid":"9be68e9f-d0a7-46bc-a5a4-0fcc7bf4b64b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"c998923e-0be6-4dd3-b26e-e5c60bec799c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"aa05bdbb-3eb2-4258-ad71-fcf9b4bc6c67"},"edge_type":"inherent","type":"","uuid":"fb78e611-e760-44fb-916f-cae50d64c826","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"e8cd6497-9c96-480b-9bb4-16a36de17190"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"c998923e-0be6-4dd3-b26e-e5c60bec799c"},"edge_type":"inherent","type":"","uuid":"0b4e8ced-6b41-40af-9b8c-9906f70937a3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"91819007-2d19-4a68-a0b5-0087466e8e45"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"39a1a803-36d4-4b52-88b4-8e2beb5fbde6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"57846402-01b0-421b-acfe-65fc83ecea8e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"527ff26c-88fc-498b-9975-d213b4a73158"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c998923e-0be6-4dd3-b26e-e5c60bec799c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"03942067-4b02-4694-b2b0-5e9b33da28d6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"91819007-2d19-4a68-a0b5-0087466e8e45","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"c5559b44-4b72-4fc1-b89d-ec8c330dae62"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"aa05bdbb-3eb2-4258-ad71-fcf9b4bc6c67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"8ea1ed98_runbook","uuid":"61951a77-c517-444b-ab51-3067c8f7ca5a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__post_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"e8cd6497-9c96-480b-9bb4-16a36de17190","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"4443b052-49c9-4bd2-a1ea-6406762b5443","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"34366050-a42c-4570-bb89-ea2a7c3133c7"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"fb255ffc-dee5-45f6-a836-4bdb84b028fa","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"AHV","uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"},"retries":"0","description":"","type":"DAG","uuid":"2d488a5e-4004-4d8f-b4ab-13a6d9075e33","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"6e095fed-4c7c-4224-a15e-5ad3ae764b77"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"ce27cc59-3b7d-4eac-b849-58517d3deae2"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"22c7061d-8cb0-4fe4-97a8-62311d69549f"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"169ef175-ebfc-4aab-ab8e-d4e8a5740c98"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"6e095fed-4c7c-4224-a15e-5ad3ae764b77"},"edge_type":"inherent","type":"","uuid":"2bb87450-d7c1-46de-83bb-6a05ef1c699a","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"ce27cc59-3b7d-4eac-b849-58517d3deae2"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"22c7061d-8cb0-4fe4-97a8-62311d69549f"},"edge_type":"inherent","type":"","uuid":"5ee1c7a0-0443-4b39-9a5f-d4edbee308da","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf","uuid":"169ef175-ebfc-4aab-ab8e-d4e8a5740c98"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"ce27cc59-3b7d-4eac-b849-58517d3deae2"},"edge_type":"inherent","type":"","uuid":"a48b9e71-b0a1-49cf-9e8d-e011bc7606ce","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"22c7061d-8cb0-4fe4-97a8-62311d69549f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6e095fed-4c7c-4224-a15e-5ad3ae764b77","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"fb1af71b-13a3-489e-9e51-db11507e3e94"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"ce27cc59-3b7d-4eac-b849-58517d3deae2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"22c7061d-8cb0-4fe4-97a8-62311d69549f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372","uuid":"be1c2606-1e47-4dcd-bc3c-30790e797595"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_9b6bcf31_6f97_4e66_ae3c_488ae8297372"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"85789db9_deployment_cloned_0","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"169ef175-ebfc-4aab-ab8e-d4e8a5740c98","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_0bc13395_bd68_41c0_838f_e0b240d7ebbf"}],"description":"","message_list":[],"uuid":"42b3636d-003e-4fbe-9629-1e2b579cdff2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_dfe81851_caf1_48cf_bf41_c46f54113591","uuid":"2d488a5e-4004-4d8f-b4ab-13a6d9075e33"},"name":"SYS_GEN__Runbook_Application_dfe81851_caf1_48cf_bf41_c46f54113591"}}],"message_list":[],"uuid":"dfe81851-caf1-48cf-bf41-c46f54113591","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"de5b83ea-3b05-461e-b37f-4740cc0cf8af","value":"1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"COUNT"}],"name":"AHV"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"c214d5e8-625b-4267-a21f-6b85292e42df","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"fa583732-45e3-4dad-8bcd-a1ffe5f84816","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"147203b4-4d13-4d37-ac04-30b7ba770cc9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"147203b4-4d13-4d37-ac04-30b7ba770cc9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},"edge_type":"user_defined","type":"","uuid":"dc4ec850-7b16-400e-b4d4-29a7e49c6850","to_task_reference":{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"print \"Palo alto configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': 'admin', 'password': 'admin'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Print the config\npayload = {'type': 'config', 'action': 'show', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Set automatic mac detection to yes\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\", 'element':\"<auto-mac-detect>yes<\/auto-mac-detect>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n#Enable and Configure the interfaces for lldp\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create Virtual wire\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='default-vwire']\", 'element':\"<tag-allowed>1233<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create trust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='trust']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create untrust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='untrust']\", 'element':\"<network><virtual-wire><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create the tags\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/tag\/entry[@name='TIER:WEB']\", 'element':\"<color>color2<\/color>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n\n#Create Dynamic Address groups and associate filters\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/address-group\/entry[@name='WebServers']\", 'element':\"<dynamic><filter>'TIER:WEB'<\/filter><\/dynamic>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create Security Policy\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/rulebase\/security\/rules\/entry[@name='From_Tier_Web']\", 'element':\"<to><member>untrust<\/member><\/to><from><member>trust<\/member><\/from><source><member>WebServers<\/member><\/source><destination><member>any<\/member><\/destination><source-user><member>any<\/member><\/source-user><category><member>any<\/member><\/category><application><member>any<\/member><\/application><service><member>application-default<\/member><\/service><hip-profiles><member>any<\/member><\/hip-profiles><action>allow<\/action><log-start>yes<\/log-start>\"}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(10)\n\n#Commit the changes\npayload = {'type': 'commit', 'cmd': '<commit><\/commit>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePAN"}],"description":"","message_list":[],"uuid":"85855dd6-0084-472a-8e34-9e7e6fa40105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"e24403c8-f3dd-4570-a2c1-3053929e2bcb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e"},"name":"1d6d9396_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_330800cb_73ab_4d55_af69_8a7ee474f94e"}],"description":"","message_list":[],"uuid":"af496f18-cb13-492e-937a-8bf255e19443","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"fa583732-45e3-4dad-8bcd-a1ffe5f84816"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for creating an application","message_list":[],"uuid":"d34c09f8-62cd-404f-b8c3-8609b1345337","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"e2ed6030-fa82-4b7e-ab11-1febc4dd36fe","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"fe468e62-e1f7-4add-aadc-84952052a308"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e8490d65-b3c1-4768-80e6-aaa1510b4273"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"2acacca8-faeb-42db-9a58-eee7ddb8c25d"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e8490d65-b3c1-4768-80e6-aaa1510b4273"},"edge_type":"inherent","type":"","uuid":"1062db79-347c-49f4-b34f-2d91231820bf","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"2acacca8-faeb-42db-9a58-eee7ddb8c25d"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"fe468e62-e1f7-4add-aadc-84952052a308"},"edge_type":"inherent","type":"","uuid":"29fbe60c-dfc7-4f6a-86b6-e411cb8a5e23","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e8490d65-b3c1-4768-80e6-aaa1510b4273"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fe468e62-e1f7-4add-aadc-84952052a308","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"af496f18-cb13-492e-937a-8bf255e19443"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e8490d65-b3c1-4768-80e6-aaa1510b4273","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"e336f5a5_runbook_cloned_0","uuid":"0b8b8429-5dab-462f-9482-792a0b5ba119"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2acacca8-faeb-42db-9a58-eee7ddb8c25d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"518244dc-0bc2-483d-91e5-bba61c6f6a7e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"e2ed6030-fa82-4b7e-ab11-1febc4dd36fe"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"a1a24baa-5057-4596-b72d-033d981cd52e","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"68498583-05de-4163-9a8e-a4288740dcd9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"2444f815-9cb3-4f3c-9e46-cbb8bf9d9cc8"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"2444f815-9cb3-4f3c-9e46-cbb8bf9d9cc8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},"edge_type":"user_defined","type":"","uuid":"dc4ec850-7b16-400e-b4d4-29a7e49c6850","to_task_reference":{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"print \"Palo alto configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': 'admin', 'password': 'admin'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Print the config\npayload = {'type': 'config', 'action': 'show', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Set automatic mac detection to yes\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\", 'element':\"<auto-mac-detect>yes<\/auto-mac-detect>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n#Enable and Configure the interfaces for lldp\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create Virtual wire\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='default-vwire']\", 'element':\"<tag-allowed>1233<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create trust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='trust']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create untrust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='untrust']\", 'element':\"<network><virtual-wire><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create the tags\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/tag\/entry[@name='TIER:WEB']\", 'element':\"<color>color2<\/color>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n\n#Create Dynamic Address groups and associate filters\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/address-group\/entry[@name='WebServers']\", 'element':\"<dynamic><filter>'TIER:WEB'<\/filter><\/dynamic>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create Security Policy\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/rulebase\/security\/rules\/entry[@name='From_Tier_Web']\", 'element':\"<to><member>untrust<\/member><\/to><from><member>trust<\/member><\/from><source><member>WebServers<\/member><\/source><destination><member>any<\/member><\/destination><source-user><member>any<\/member><\/source-user><category><member>any<\/member><\/category><application><member>any<\/member><\/application><service><member>application-default<\/member><\/service><hip-profiles><member>any<\/member><\/hip-profiles><action>allow<\/action><log-start>yes<\/log-start>\"}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(10)\n\n#Commit the changes\npayload = {'type': 'commit', 'cmd': '<commit><\/commit>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePAN"}],"description":"","message_list":[],"uuid":"85855dd6-0084-472a-8e34-9e7e6fa40105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"e24403c8-f3dd-4570-a2c1-3053929e2bcb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e"},"name":"1d6d9396_runbook_cloned_0"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_330800cb_73ab_4d55_af69_8a7ee474f94e"}],"description":"","message_list":[],"uuid":"03942067-4b02-4694-b2b0-5e9b33da28d6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"68498583-05de-4163-9a8e-a4288740dcd9"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"d2cdd9a4-a329-4d0d-9dd9-aaf3e505ce5c","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"306716bb-56ff-4d2f-a5ad-4ca09ba30284","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"0d1d8db9-b617-4594-8254-8cddfe9bfbbf"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"b72c783d-190f-47ac-a593-a02dae083a2e"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"24ef5c8c-89db-4b3b-b1d2-297fe4fcb4ac"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"0d1d8db9-b617-4594-8254-8cddfe9bfbbf"},"edge_type":"inherent","type":"","uuid":"e6d6e21c-1b51-4197-8e73-e8356127db5c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"b72c783d-190f-47ac-a593-a02dae083a2e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"b72c783d-190f-47ac-a593-a02dae083a2e"},"edge_type":"inherent","type":"","uuid":"a9b1a1de-8207-455f-914c-59132d5a4b6c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"24ef5c8c-89db-4b3b-b1d2-297fe4fcb4ac"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0d1d8db9-b617-4594-8254-8cddfe9bfbbf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b72c783d-190f-47ac-a593-a02dae083a2e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"bc52929d_runbook_cloned_0","uuid":"527ff26c-88fc-498b-9975-d213b4a73158"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"24ef5c8c-89db-4b3b-b1d2-297fe4fcb4ac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"03942067-4b02-4694-b2b0-5e9b33da28d6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}],"description":"","message_list":[],"uuid":"d40bf5e2-a25a-4f21-b098-70aae261584a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"306716bb-56ff-4d2f-a5ad-4ca09ba30284"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"c7680dfb-dfc4-4c9f-95f4-1a94ec3b0a25","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"5202d1a5-755d-4261-aeaa-fba06118ce97","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"4e7d358e-0253-493d-9bcd-219760b78bbf"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"ac845732-f3ac-41e4-af2c-42636bae98a2"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"4e7d358e-0253-493d-9bcd-219760b78bbf"},"edge_type":"inherent","type":"","uuid":"2d73b2e5-2572-4b3f-871f-2d2694d5cfae","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"ac845732-f3ac-41e4-af2c-42636bae98a2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4e7d358e-0253-493d-9bcd-219760b78bbf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"fb1af71b-13a3-489e-9e51-db11507e3e94"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"},{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"ac845732-f3ac-41e4-af2c-42636bae98a2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_330800cb_73ab_4d55_af69_8a7ee474f94e"}],"description":"","message_list":[],"uuid":"5386cac3-c4ae-49f7-968a-360550382bb4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"5202d1a5-755d-4261-aeaa-fba06118ce97"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for starting an application","message_list":[],"uuid":"6f3de18a-8f29-48f6-bb8b-68f68cafb868","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"34541b69-9a60-47b9-b210-4225475875fe","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"c405a2bc-35e0-44bf-a579-a43b4d5e0e05"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c405a2bc-35e0-44bf-a579-a43b4d5e0e05","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"6664cdf0_runbook_cloned_0","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"def70848-7a53-423a-adaa-b03f0d97414e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"34541b69-9a60-47b9-b210-4225475875fe"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for restarting an application","message_list":[],"uuid":"aecfc47c-97d1-436c-b2a9-ff76a9a8d985","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"5a445ebc-ba2b-4eb5-b301-3b25b9184199","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"e4eb7ee7-1e75-453d-9847-13b212ecfe99"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e4eb7ee7-1e75-453d-9847-13b212ecfe99","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"3b4902aa_runbook_cloned_0","uuid":"3792ddf9-0d7d-49f0-bec8-94bc5f19cd81"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"5a4d2a0c-ab21-46e8-8174-509bdef4da2d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"5a445ebc-ba2b-4eb5-b301-3b25b9184199"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}},{"description":"System action for stopping an application","message_list":[],"uuid":"dade7e6b-3223-4625-8889-f086f84e6f55","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"a9c03c0a-e9ce-40e9-8519-a76d351e819f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027","uuid":"32fb3862-bb5b-4781-be1f-432997f842f4"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"32fb3862-bb5b-4781-be1f-432997f842f4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"850d536e_runbook_cloned_0","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_4c0298d6_afe8_4e25_90a8_26972f7d4027"}],"description":"","message_list":[],"uuid":"cfacad01-8958-4b2e-ba2c-8c94ee55deab","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_330800cb_73ab_4d55_af69_8a7ee474f94e","uuid":"a9c03c0a-e9ce-40e9-8519-a76d351e819f"},"name":"SYS_GEN__Runbook_Package_330800cb_73ab_4d55_af69_8a7ee474f94e"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"}],"uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},"edge_type":"user_defined","type":"","uuid":"dc4ec850-7b16-400e-b4d4-29a7e49c6850","to_task_reference":{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"3a805182_dag_cloned_1"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"CreateNFChain"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","description":"","type":"EXEC","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"print \"Palo alto configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': 'admin', 'password': 'admin'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Print the config\npayload = {'type': 'config', 'action': 'show', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Set automatic mac detection to yes\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\", 'element':\"<auto-mac-detect>yes<\/auto-mac-detect>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n#Enable and Configure the interfaces for lldp\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create Virtual wire\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='default-vwire']\", 'element':\"<tag-allowed>1233<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create trust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='trust']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create untrust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='untrust']\", 'element':\"<network><virtual-wire><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create the tags\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/tag\/entry[@name='TIER:WEB']\", 'element':\"<color>color2<\/color>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n\n#Create Dynamic Address groups and associate filters\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/address-group\/entry[@name='WebServers']\", 'element':\"<dynamic><filter>'TIER:WEB'<\/filter><\/dynamic>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create Security Policy\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/rulebase\/security\/rules\/entry[@name='From_Tier_Web']\", 'element':\"<to><member>untrust<\/member><\/to><from><member>trust<\/member><\/from><source><member>WebServers<\/member><\/source><destination><member>any<\/member><\/destination><source-user><member>any<\/member><\/source-user><category><member>any<\/member><\/category><application><member>any<\/member><\/application><service><member>application-default<\/member><\/service><hip-profiles><member>any<\/member><\/hip-profiles><action>allow<\/action><log-start>yes<\/log-start>\"}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(10)\n\n#Commit the changes\npayload = {'type': 'commit', 'cmd': '<commit><\/commit>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"ConfigurePAN"}],"description":"","message_list":[],"uuid":"85855dd6-0084-472a-8e34-9e7e6fa40105","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e"},"name":"18da9439_runbook_cloned_0"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","description":"","type":"DAG","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"8d843173_dag_cloned_1"}],"description":"","message_list":[],"uuid":"e24403c8-f3dd-4570-a2c1-3053929e2bcb","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e"},"name":"1d6d9396_runbook_cloned_0"}},"variable_list":[],"name":"Configuration"}]},"name":"PaloAlto_Final"},"spec":{"name":"PaloAlto_Final","resources":{"service_definition_list":[{"singleton":false,"name":"PaloAlto","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","name":"PaloAlto"},"retries":"0","description":"","uuid":"de8d6091-7b10-4968-8b66-3cf78d650eea","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"8c0b7aac_dag_cloned_1"}],"description":"","uuid":"0b8b8429-5dab-462f-9482-792a0b5ba119","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"8c0b7aac_dag_cloned_1","uuid":"de8d6091-7b10-4968-8b66-3cf78d650eea"},"name":"e336f5a5_runbook_cloned_0"},"type":"system","uuid":"c7b8229b-e6d9-4b35-af08-14724b648d0e"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","name":"PaloAlto"},"retries":"0","description":"","uuid":"9e9d25b6-b405-440b-868a-389e50372788","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"9c114dea_dag_cloned_1"}],"description":"","uuid":"527ff26c-88fc-498b-9975-d213b4a73158","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"9c114dea_dag_cloned_1","uuid":"9e9d25b6-b405-440b-868a-389e50372788"},"name":"bc52929d_runbook_cloned_0"},"type":"system","uuid":"eab9ca40-29c7-43b2-b017-89cb8a653b7d"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","name":"PaloAlto"},"retries":"0","description":"","uuid":"a5ad0ec4-479c-4c77-99d3-6d5c4d0d5f33","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6aaef5c4_dag_cloned_1"}],"description":"","uuid":"c2c0a5c7-a891-4c83-8b6f-ad67398326fc","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6aaef5c4_dag_cloned_1","uuid":"a5ad0ec4-479c-4c77-99d3-6d5c4d0d5f33"},"name":"6664cdf0_runbook_cloned_0"},"type":"system","uuid":"646fbe19-bced-48e7-9a1e-e473375dbab8"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","name":"PaloAlto"},"retries":"0","description":"","uuid":"ecd13299-39e1-49f5-bb40-fe94bf744bb2","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"44b9e532_dag_cloned_1"}],"description":"","uuid":"9cdd7a9f-c25b-4455-b519-f1d3018d6332","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"44b9e532_dag_cloned_1","uuid":"ecd13299-39e1-49f5-bb40-fe94bf744bb2"},"name":"850d536e_runbook_cloned_0"},"type":"system","uuid":"3705bbd3-f324-403a-8c72-80577b96a5b0"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","name":"PaloAlto"},"retries":"0","description":"","uuid":"1830a725-116c-4308-9a56-15a9473181c1","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"3bbf6d30_dag_cloned_1"}],"description":"","uuid":"3792ddf9-0d7d-49f0-bec8-94bc5f19cd81","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"3bbf6d30_dag_cloned_1","uuid":"1830a725-116c-4308-9a56-15a9473181c1"},"name":"3b4902aa_runbook_cloned_0"},"type":"system","uuid":"865e174f-ce9c-468a-8897-1ef5ef50f8dc"}],"description":"","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027","port_list":[],"tier":"","variable_list":[],"depends_on_list":[]}],"substrate_definition_list":[{"name":"PaloAltoVM","action_list":[{"description":"","name":"pre_action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372","name":"PaloAltoVM"},"retries":"0","description":"","uuid":"c4c13c72-6d29-45c1-a94a-9710009cab67","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"acf0981a_dag"}],"description":"","uuid":"be24eea4-35ec-4bda-bfe5-1b49f6862de4","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"acf0981a_dag","uuid":"c4c13c72-6d29-45c1-a94a-9710009cab67"},"name":"6b1e4203_runbook"},"type":"fragment","uuid":"1a90ed96-8b37-4a40-8892-7b4329df667c"},{"description":"","name":"post_action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372","name":"PaloAltoVM"},"retries":"0","description":"","uuid":"09b92e15-09a1-4270-80b7-c1921719ac4c","child_tasks_local_reference_list":[{"kind":"app_task","name":"DeleteCategoriesNFChain","uuid":"4a353af5-7bf2-4cd8-a6f7-a7dea6afdece"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"cb997dd5_dag"},{"target_any_local_reference":{"kind":"app_substrate","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372","name":"PaloAltoVM"},"retries":"0","description":"","uuid":"4a353af5-7bf2-4cd8-a6f7-a7dea6afdece","child_tasks_local_reference_list":[],"attrs":{"script":"prism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n\n\ndef deleteconfig(api_url):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='DELETE', headers=headers, verify=False)\n  if r.ok:\n    return r\n  else:\n    print \"Delete request failed\", r.content\n    \n\nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_exists = False\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nif len(nf_list['entities']) > 0:\n  for i in nf_list['entities']:\n    if i['status']['name'] == nf_chain_name:\n      nf_exists = True\n      nf_uuid = i['metadata']['uuid']\n      break\n\n    \nprint \"Deleting service chain\"\nif nf_exists and @@{calm_array_index}@@ == 0:\n  service_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/{1}'.format(prism_ip, nf_uuid)\n  deleteconfig(api_url=service_chain_api)\n\nsleep(30)\n\nprint \"Delete @@{platform.metadata.categories.network_function_provider}@@ network function provider category\"\ncategory_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider\/@@{platform.metadata.categories.network_function_provider}@@'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=category_api)\n\n\nprint \"Deleting network function provider category\"\ncategorykey_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/categories\/network_function_provider'.format(prism_ip)\nif @@{calm_array_index}@@ == 0:\n  deleteconfig(api_url=categorykey_api)\n\n\n    \n\n\n\n","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"DeleteCategoriesNFChain"}],"description":"","uuid":"61951a77-c517-444b-ab51-3067c8f7ca5a","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"cb997dd5_dag","uuid":"09b92e15-09a1-4270-80b7-c1921719ac4c"},"name":"8ea1ed98_runbook"},"type":"fragment","uuid":"d00f7ee9-5d05-4bce-8cb9-9f615e49808f"}],"uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"600","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","type":"AHV_VM","create_spec":{"name":"PaloAlto-@@{calm_array_index}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3"},"type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"EGRESS","mac_address":"","type":""},{"nic_type":"NETWORK_FUNCTION_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"TAP","mac_address":"","type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":9216,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":null,"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","name":"PA-VM-KVM-8.0.5.qcow2","uuid":"e41a24b8-b79c-42fe-a0e9-ece0ec9612ca"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"network_function_provider":"PaloAlto"}},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"admin","uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3","name":"admin","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"71c875a8-cd8e-4dbe-8953-5532fa096607"}}},"type":"PASSWORD","description":""}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"85789db9_deployment_cloned_0","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"}],"description":"","published_service_local_reference_list":[],"min_replicas":"@@{COUNT}@@","depends_on_list":[],"max_replicas":"99","substrate_local_reference":{"kind":"app_substrate","name":"PaloAltoVM","uuid":"9b6bcf31-6f97-4e66-ae3c-488ae8297372"},"type":"GREENFIELD","variable_list":[],"uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf"}],"description":"","action_list":[{"description":"This action is used to scaleup the no of palo alto vms on the cluster","name":"ScaleUp","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"285d0ab8-95f8-4e18-a30d-9dc164cfa952","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleOut","uuid":"dca545bb-ae85-4c48-a097-03990e075876"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"47593285_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf","name":"85789db9_deployment_cloned_0"},"retries":"0","description":"","uuid":"dca545bb-ae85-4c48-a097-03990e075876","child_tasks_local_reference_list":[],"attrs":{"scaling_count":"@@{SCALEOUT_COUNT}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[],"name":"ScaleOut"}],"description":"","uuid":"b15e6666-a361-429d-901f-74fcafbdb9a7","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","uuid":"a634422c-b4cb-4192-94df-1ddd24167691","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","name":"SCALEOUT_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"47593285_dag","uuid":"285d0ab8-95f8-4e18-a30d-9dc164cfa952"},"name":"e47f3869_runbook"},"type":"user","uuid":"f205bf76-d7a5-452d-9d53-5caa76fa577e"},{"description":"This action is used to scale down the no of palo alto vms on the cluster","name":"ScaleDown","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"77f27dec-4073-4080-bdf2-9f22c2e42200","child_tasks_local_reference_list":[{"kind":"app_task","name":"ScaleIn","uuid":"b0158410-309b-4a65-9380-50b76feafb7f"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6e05e2e2_dag"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","uuid":"0bc13395-bd68-41c0-838f-e0b240d7ebbf","name":"85789db9_deployment_cloned_0"},"retries":"0","description":"","uuid":"b0158410-309b-4a65-9380-50b76feafb7f","child_tasks_local_reference_list":[],"attrs":{"scaling_count":"@@{SCALEIN_COUNT}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","type":"SCALING","variable_list":[],"name":"ScaleIn"}],"description":"","uuid":"52cd7034-f25f-4548-a684-a2a5253f3d92","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","uuid":"fce51d7a-7bc9-48b0-95ac-f83f09685859","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","name":"SCALEIN_COUNT"}],"main_task_local_reference":{"kind":"app_task","name":"6e05e2e2_dag","uuid":"77f27dec-4073-4080-bdf2-9f22c2e42200"},"name":"aa73d797_runbook"},"type":"user","uuid":"289da664-61ff-4539-aff0-3e0b8e1e861a"}],"name":"AHV","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","uuid":"de5b83ea-3b05-461e-b37f-4740cc0cf8af","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","name":"COUNT"}],"uuid":"dfe81851-caf1-48cf-bf41-c46f54113591"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"admin","uuid":"657daf5b-0fa0-4dc8-95e6-963d33a048d3"},"package_definition_list":[{"uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"}],"name":"Configuration","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","name":"3a805182_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateNFChain","uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},"edge_type":"user_defined","type":"","uuid":"dc4ec850-7b16-400e-b4d4-29a7e49c6850","to_task_reference":{"kind":"app_task","name":"ConfigurePAN","uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","name":"CreateNFChain","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"\nprism_ip = \"127.0.0.1\"\ncluster_name = \"@@{platform.status.cluster_reference.name}@@\"\nnf_chain_name = \"DEFAULT_CHAIN\"\n\ndef crudops(api_url, payload):\n  jwt = '@@{calm_jwt}@@'\n  headers = {'Content-Type': 'application\/json',  'Accept':'application\/json', 'Authorization': 'Bearer {}'.format(jwt)}\n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False)\n  if r.ok:\n    resp = json.loads(r.content)\n    return resp\n  else:\n    print \"Post request failed\", r.content\n    exit(1)\n\n\nprint \"Get cluster list\"\ncluster_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/clusters\/list'.format(prism_ip)\npayload = {\"kind\": \"cluster\"}\ncluster_list = crudops(api_url=cluster_api, payload=payload)\nfor i in cluster_list['entities']:\n  if i['spec']['name'] == cluster_name:\n    print i\n    cluster_uuid = i['metadata']['uuid']\n    break\n\n    \nprint \"Get NF list\"\nnf_list_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains\/list'.format(prism_ip)\npayload = {}\nnf_list = crudops(api_url=nf_list_api, payload=payload)\nnf_exists = False\nfor i in nf_list['entities']:\n  if i['status']['name'] == nf_chain_name:\n    print i\n    nf_exists = True\n    nf_uuid = i['metadata']['uuid']\n    break\n    \nprint \"Creating\/Updating service chain\"\nservice_chain_api = 'https:\/\/{0}:9440\/api\/nutanix\/v3\/network_function_chains'.format(prism_ip)\npayload = {\n\"spec\": {\n\"name\": nf_chain_name,\n\"resources\": {\n\"network_function_list\": [\n{\n\"network_function_type\": \"INLINE\",\n\"category_filter\": {\n\"type\": \"CATEGORIES_MATCH_ANY\",\n\"params\": {\"network_function_provider\": [\"PaloAlto\"]}\n}\n}\n]\n},\n\"cluster_reference\": {\n\"kind\": \"cluster\",\n\"name\": cluster_name,\n\"uuid\": cluster_uuid\n}\n},\n\"api_version\": \"3.1.0\",\n\"metadata\": {\n\"kind\": \"network_function_chain\"\n}\n}\n\nif not nf_exists and @@{calm_array_index}@@ == 0:\n  crudops(api_url=service_chain_api, payload=payload)\n  print \"Created service chain\"\nelse:\n  print \"Not creating chain as chain exists\"\n  \n"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"d6454b65-4fe4-438c-a7bd-dbbcca54ad37"},{"target_any_local_reference":{"kind":"app_service","name":"PaloAlto","uuid":"4c0298d6-afe8-4e25-90a8-26972f7d4027"},"retries":"0","name":"ConfigurePAN","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"print \"Palo alto configuration\"\ndef postrequest(api_url,payload):\n  r = urlreq(api_url, verb='POST',auth=\"BASIC\", params=payload, user='admin', passwd='admin', verify=False)\n  if 'success' in r.content:\n    return r.content\n  else:\n    print \"PAN API configuration failed\",r.content\n    exit(1)\n\n\nurl1 = \"https:\/\/@@{address}@@\/api\"\n#Get the auth key for making API requests\npayload = {'type': 'keygen', 'user': 'admin', 'password': 'admin'}\nkey_str = postrequest(api_url=url1,payload=payload)\nkey = key_str.split('<key>')[1].split('<\/key>')[0]\n\n#Print the config\npayload = {'type': 'config', 'action': 'show', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Set automatic mac detection to yes\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/deviceconfig\/setting\", 'element':\"<auto-mac-detect>yes<\/auto-mac-detect>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n#Enable and Configure the interfaces for lldp\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/1']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/interface\/ethernet\/entry[@name='ethernet1\/2']\", 'element':\"<link-state>up<\/link-state><virtual-wire><lldp><enable>no<\/enable><\/lldp><\/virtual-wire>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create Virtual wire\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/network\/virtual-wire\/entry[@name='default-vwire']\", 'element':\"<tag-allowed>1233<\/tag-allowed><interface1>ethernet1\/1<\/interface1><interface2>ethernet1\/2<\/interface2>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create trust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='trust']\", 'element':\"<network><virtual-wire><member>ethernet1\/1<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#create untrust zone\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/zone\/entry[@name='untrust']\", 'element':\"<network><virtual-wire><member>ethernet1\/2<\/member><\/virtual-wire><\/network>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create the tags\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/tag\/entry[@name='TIER:WEB']\", 'element':\"<color>color2<\/color>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n\n\n#Create Dynamic Address groups and associate filters\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/address-group\/entry[@name='WebServers']\", 'element':\"<dynamic><filter>'TIER:WEB'<\/filter><\/dynamic>\"}\nprint postrequest(api_url=url1,payload=payload)\n\n#Create Security Policy\npayload = {'type': 'config', 'action': 'set', 'key':key, 'xpath':\"\/config\/devices\/entry[@name='localhost.localdomain']\/vsys\/entry[@name='vsys1']\/rulebase\/security\/rules\/entry[@name='From_Tier_Web']\", 'element':\"<to><member>untrust<\/member><\/to><from><member>trust<\/member><\/from><source><member>WebServers<\/member><\/source><destination><member>any<\/member><\/destination><source-user><member>any<\/member><\/source-user><category><member>any<\/member><\/category><application><member>any<\/member><\/application><service><member>application-default<\/member><\/service><hip-profiles><member>any<\/member><\/hip-profiles><action>allow<\/action><log-start>yes<\/log-start>\"}\nprint postrequest(api_url=url1,payload=payload)\n\nsleep(10)\n\n#Commit the changes\npayload = {'type': 'commit', 'cmd': '<commit><\/commit>', 'key':key}\nprint postrequest(api_url=url1,payload=payload)\n"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"04bdc1ff-7dbb-4987-8277-d0a7425ce012"}],"name":"18da9439_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"3a805182_dag_cloned_1","uuid":"8c407fe5-1f80-4934-8a4b-072227274d2e"},"uuid":"85855dd6-0084-472a-8e34-9e7e6fa40105"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Configuration","uuid":"330800cb-73ab-4d55-af69-8a7ee474f94e"},"retries":"0","name":"8d843173_dag_cloned_1","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e"}],"name":"1d6d9396_runbook_cloned_0","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"8d843173_dag_cloned_1","uuid":"6580c2f1-5546-4324-aab9-52da8dbfe08e"},"uuid":"e24403c8-f3dd-4570-a2c1-3053929e2bcb"}},"variable_list":[],"description":""}],"client_attrs":{"None":{"y":-80,"x":669},"0bc13395-bd68-41c0-838f-e0b240d7ebbf":{"y":-175,"x":371}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1554797794333458","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"9055fb5a-fcc1-4081-8b18-6a513bf6decf","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":1,"creation_time":"1554797741008562","name":"PaloAlto_Final"}}