{"status":{"description":"","source_mpi":"","state":"DRAFT","is_cloned":false,"message_list":[{"message":"Credential is invalid","reason":"INVALID_CREDENTIAL","details":[{"attribute_name":"default_credential"}]}],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"cca7912f-b73e-4ddf-a427-51c286a1e163","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"7cafa0ae-670c-4c2b-9a80-7a888f3b0fff","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"b6eb43c5_dag"}],"description":"","message_list":[],"uuid":"ee20fe08-1ecd-4c9f-a051-408161f19578","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"b6eb43c5_dag","uuid":"7cafa0ae-670c-4c2b-9a80-7a888f3b0fff"},"name":"211de55f_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"c326a0fb-7ea8-463e-8932-2fe7be27c5e9","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"e7b9fd8b-119f-4665-84c6-d3b94932f4a3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"b1da642f_dag"}],"description":"","message_list":[],"uuid":"17c9a148-5df4-4353-9b83-d67d3d00ee1f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"b1da642f_dag","uuid":"e7b9fd8b-119f-4665-84c6-d3b94932f4a3"},"name":"699e66a4_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"bf380435-5821-4f88-b5cc-6274784fac08","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"87cb3208-9694-4fe1-ac93-7f2cf7f9f1d8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6a68a4f3_dag"}],"description":"","message_list":[],"uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6a68a4f3_dag","uuid":"87cb3208-9694-4fe1-ac93-7f2cf7f9f1d8"},"name":"408cca6c_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"2d7ac1b7-3577-4ce6-b39e-389d5f9a1338","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"3298452c-84f0-4802-ad04-67a760ecb31d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"85adf10a_dag"}],"description":"","message_list":[],"uuid":"874eae0e-1dd8-46e3-be05-86a769d65282","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"85adf10a_dag","uuid":"3298452c-84f0-4802-ad04-67a760ecb31d"},"name":"24e83ad4_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"97fc2b57-fe62-44b1-bde5-765f3cc7af65","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"cd5dd738-a6b6-40dc-904a-cad381a1a8c6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7746f699_dag"}],"description":"","message_list":[],"uuid":"ca4119dc-cca5-49a2-9f94-1f0606b7e784","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7746f699_dag","uuid":"cd5dd738-a6b6-40dc-904a-cad381a1a8c6"},"name":"fbc98650_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"63bf3bd3-cea3-48fa-bdec-5c413df6588c","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"DAG","uuid":"1af9ad29-4eb2-4c6f-b423-651c436c5f02","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"01081723-d55e-4a79-868a-a9a50d90d65d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"01081723-d55e-4a79-868a-a9a50d90d65d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"7085ef03-ae38-4259-9dd3-7f3d880585e9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"1af9ad29-4eb2-4c6f-b423-651c436c5f02"},"name":"SYS_GEN__Runbook_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}}],"message_list":[],"uuid":"95663329-a75f-494a-a153-763ff6ed5bc1","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"fbcc8205-3412-4292-90a3-653656ab3170","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"71f281e6-fd7d-45dc-9b06-c812565f876e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"d9cca195-83ce-4171-b526-205acd503e89"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"a619afe6-192c-4706-a727-ff815a6f5ffb"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Provision_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"d9cca195-83ce-4171-b526-205acd503e89"},"edge_type":"inherent","type":"","uuid":"44de3d33-48c6-46aa-91c7-9ab4b18f8991","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"a619afe6-192c-4706-a727-ff815a6f5ffb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"PROVISION_VCENTER","uuid":"d9cca195-83ce-4171-b526-205acd503e89","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"MSSQL-@@{calm_unique}@@","storage_pod":"PS_DatastoreCluster","drs_mode":true,"cluster":"NTNX-Cluster","host":"","clone_is_template":false,"template":"5025abd2-fe16-33dc-5b2d-e413d4735883","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":6144,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":{"dns_primary":"172.23.0.23","is_domain":true,"dns_secondary":"172.23.0.10","product_id":"","command_list":[],"dns_search_path":[],"auto_logon":false,"login_count":1,"domain":"ntnx.test","computer_name":"@@{name}@@","organization_name":"Nutanix","network_settings":[{"is_dhcp":false,"gateway_default":"172.23.0.1","name":"Change_Me","gateway_alternate":"","subnet_mask":"255.255.0.0","ip":"@@{SQL_IP}@@","type":""}],"domain_password":null,"full_name":"DEMO","domain_user":"Administrator","timezone":"110","dns_tertiary":"","password":null,"type":"","workgroup":""}},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":51200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":153600,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":307200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":307200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":102400,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":102400,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":204800,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":204800,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Provision_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"a619afe6-192c-4706-a727-ff815a6f5ffb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"7f826793-736b-4ec0-9ac4-274b124e8cc2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"71f281e6-fd7d-45dc-9b06-c812565f876e"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for powering on an application","message_list":[],"uuid":"7f20f7f1-a61f-4943-9e37-70f8341c8f34","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"f4996583-d774-4fda-b3d7-fbab80840124","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"d85e3f27-82f1-4c2a-b6d9-a1f66c762df2"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"cf0c7815-c038-440d-a620-cfc988b22f98"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_PowerOn_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"d85e3f27-82f1-4c2a-b6d9-a1f66c762df2"},"edge_type":"inherent","type":"","uuid":"e33926bc-3c95-448c-9d71-b5eabf880cb9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"cf0c7815-c038-440d-a620-cfc988b22f98"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"d85e3f27-82f1-4c2a-b6d9-a1f66c762df2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_PowerOn_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"cf0c7815-c038-440d-a620-cfc988b22f98","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"9a767166-de16-4d77-9c9a-f0442f2de04f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"f4996583-d774-4fda-b3d7-fbab80840124"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for restarting an application","message_list":[],"uuid":"da760e95-8498-481e-852b-10ddf9963466","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"1685b397-1405-4d2c-afcf-4b0b5285d328","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart7e844bc0_3280_4127_9087_325652cd16d3","uuid":"c5b197f0-54cb-4db3-8c81-ec06071b3d93"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"183ff439-6aef-45b1-b7c9-21c2323de3e5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Restart7e844bc0_3280_4127_9087_325652cd16d3","uuid":"c5b197f0-54cb-4db3-8c81-ec06071b3d93"},"edge_type":"inherent","type":"","uuid":"eac5adaa-0a00-476b-981b-4e825ac7fd78","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"183ff439-6aef-45b1-b7c9-21c2323de3e5"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"c5b197f0-54cb-4db3-8c81-ec06071b3d93","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Restart7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"183ff439-6aef-45b1-b7c9-21c2323de3e5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.ipAddressList[0]}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ESXi_MSSQL_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"ffe81b90-174d-494a-b278-af23855b39de","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"1685b397-1405-4d2c-afcf-4b0b5285d328"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for suspending an application","message_list":[],"uuid":"dbeb5387-6341-4056-9550-fd6c7ba6daa3","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"207e51e9-d6a1-415c-9f29-1e9b545a4002","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"3f72b84e-62d1-436e-ad05-584ac587394b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"207e51e9-d6a1-415c-9f29-1e9b545a4002"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for modifying an application","message_list":[],"uuid":"2f07a891-ffff-482f-bd53-eccb88474b0b","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"a95558d8-e18e-4c02-bc2f-4fff26864a92","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"bb84dd8b-744a-4b56-922a-de617539f3f0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"a95558d8-e18e-4c02-bc2f-4fff26864a92"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for powering off an application","message_list":[],"uuid":"48653350-43cc-4493-8a57-62d24e8951a4","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"e872cc7e-788c-40a4-a7e1-7d34e97e78e4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Operation_Poweroff_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"fd8f2b59-05a1-4bb1-bb9c-393fc30e8dfe"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"VMOPERATION_VCENTER","uuid":"fd8f2b59-05a1-4bb1-bb9c-393fc30e8dfe","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Operation_Poweroff_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"09bdcdf9-5715-4213-a07f-7319443c367b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e872cc7e-788c-40a4-a7e1-7d34e97e78e4"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"889f25e1-adb3-4598-849f-88974e470e09","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"70d34fd2-4534-4cdb-8fbb-2305409fe9a1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Vmware_Delete_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e7f2b2fe-c4f2-4132-8dbc-dc5aee6ed18b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DELETE_VCENTER","uuid":"e7f2b2fe-c4f2-4132-8dbc-dc5aee6ed18b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Vmware_Delete_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"903346bf-3f3a-4d54-a59c-f844a3b03909","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"70d34fd2-4534-4cdb-8fbb-2305409fe9a1"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"6bb9317f-8cf4-48c0-a177-ff74b02b1bad","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"DAG","uuid":"6150c5fb-51b8-444e-b08a-589eb9de3ffb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"7fdb7998-3e30-4eeb-821e-62e14e60467d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"7fdb7998-3e30-4eeb-821e-62e14e60467d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"05567d7c-bf17-443d-b3da-0dd72593524f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"6150c5fb-51b8-444e-b08a-589eb9de3ffb"},"name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}}],"message_list":[{"message":"admin password is a required field","reason":"EMPTY_VALUE","details":[{"attribute_name":"password"}]},{"message":"domain user password is a required field","reason":"EMPTY_VALUE","details":[{"attribute_name":"domain_password"}]}],"uuid":"7e844bc0-3280-4127-9087-325652cd16d3","state":"DRAFT","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"300","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6"}},"editables":{"create_spec":{"resources":{"guest_customization":{"windows_data":{"network_settings":{"0":{"ip":true,"gateway_default":true,"subnet_mask":true}}}},"disk_list":{},"nic_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_unique}@@","storage_pod":"PS_DatastoreCluster","drs_mode":true,"cluster":"NTNX-Cluster","host":"","clone_is_template":false,"template":"5025abd2-fe16-33dc-5b2d-e413d4735883","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"controller_list":[],"memory_size_mib":6144,"power_state":"poweron","guest_customization":{"type":"","cloud_init":"","linux_data":null,"customization_name":"","customization_type":"GUEST_OS_WINDOWS","windows_data":{"dns_primary":"172.23.0.23","is_domain":true,"dns_secondary":"172.23.0.10","product_id":"","command_list":[],"dns_search_path":[],"auto_logon":false,"login_count":1,"domain":"ntnx.test","computer_name":"@@{name}@@","organization_name":"Nutanix","network_settings":[{"is_dhcp":false,"gateway_default":"172.23.0.1","name":"Change_Me","gateway_alternate":"","subnet_mask":"255.255.0.0","ip":"@@{SQL_IP}@@","type":""}],"domain_password":null,"full_name":"DEMO","domain_user":"Administrator","timezone":"110","dns_tertiary":"","password":null,"type":"","workgroup":""}},"template_disk_list":[],"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"disk_size_mb":51200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":153600,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":307200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":307200,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":102400,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":102400,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":204800,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""},{"disk_size_mb":204800,"disk_mode":"persistent","adapter_type":"SCSI","iso_path":"","location":"","disk_type":"disk","type":""}]}},"variable_list":[],"name":"ESXi_MSSQL"}],"credential_definition_list":[{"username":"administrator","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"LOCAL"},{"username":"ntnx\\administrator","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"DOMAIN_CRED"},{"username":"ntnx\\administrator","description":"","state":"DRAFT","message_list":[{"message":"Secret value for credential is empty","reason":"EMPTY_VALUE","details":[{"attribute_name":"secret"}]}],"uuid":"f11f1a67-22ae-4398-b5b2-777347f1381b","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{},"type":"PASSWORD","name":"SQL_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"d54b23ea-3f45-49f4-be4e-02d6a1aead4f","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"e9797001-36b6-468c-ab0b-a88138d048da","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"1d9665e2-05b8-432a-a252-dd72be4de281"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e099ae93-2699-4256-ba8a-bd98e5f6b522"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"994bbd0d-8e08-4fb9-9fe0-47dc1d69b40e"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"a049d70c-9ca5-4e83-81ff-b6025fa02b75"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"4b3a905e-d82e-4b69-80be-03f20ae411b4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"a049d70c-9ca5-4e83-81ff-b6025fa02b75"},"edge_type":"inherent","type":"","uuid":"662bebc0-f7c2-4600-8e51-c6790d5fc645","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"4b3a905e-d82e-4b69-80be-03f20ae411b4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"994bbd0d-8e08-4fb9-9fe0-47dc1d69b40e"},"edge_type":"inherent","type":"","uuid":"4dcdb3da-0bb6-4042-a31b-6417ad8b87b3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"a049d70c-9ca5-4e83-81ff-b6025fa02b75"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e099ae93-2699-4256-ba8a-bd98e5f6b522"},"edge_type":"inherent","type":"","uuid":"46adb5b3-1534-43f0-95e5-06388b2ed1a7","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"994bbd0d-8e08-4fb9-9fe0-47dc1d69b40e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"1d9665e2-05b8-432a-a252-dd72be4de281"},"edge_type":"inherent","type":"","uuid":"94d98156-1afd-407d-8e3d-ab0212bd855e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e099ae93-2699-4256-ba8a-bd98e5f6b522"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"1d9665e2-05b8-432a-a252-dd72be4de281","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e099ae93-2699-4256-ba8a-bd98e5f6b522","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"7f826793-736b-4ec0-9ac4-274b124e8cc2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"994bbd0d-8e08-4fb9-9fe0-47dc1d69b40e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0325f9d1-14a3-43a4-8044-25ec782fa189"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a049d70c-9ca5-4e83-81ff-b6025fa02b75","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"211de55f_runbook","uuid":"ee20fe08-1ecd-4c9f-a051-408161f19578"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4b3a905e-d82e-4b69-80be-03f20ae411b4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"44a335b9-ff5e-4fae-93fa-78799da10ed6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"e9797001-36b6-468c-ab0b-a88138d048da"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for starting an application","message_list":[],"uuid":"4a5ce47e-1457-467f-b9f9-fa6ce5d87783","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"ba9df25b-d0a1-422d-9615-a8b4531bcf77","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"be28b409-9f1e-41ab-86f9-3c5a4cfb5074"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"54b2e3f7-0f57-4bef-a5f4-48c5d413b663"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"be28b409-9f1e-41ab-86f9-3c5a4cfb5074"},"edge_type":"inherent","type":"","uuid":"bd2d21db-aa83-453f-9825-051f6a521fb9","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"54b2e3f7-0f57-4bef-a5f4-48c5d413b663"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"be28b409-9f1e-41ab-86f9-3c5a4cfb5074","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"9a767166-de16-4d77-9c9a-f0442f2de04f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"54b2e3f7-0f57-4bef-a5f4-48c5d413b663","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"9e7278ee-d3b4-418c-8dce-a564e469b8d7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"ba9df25b-d0a1-422d-9615-a8b4531bcf77"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for restarting an application","message_list":[],"uuid":"83534ae3-7330-473c-b1f6-62903df21f83","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"5b63cce7-7a64-4499-a226-1748c5948b71","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"586a4118-4cf1-43fb-999e-26037269faa5"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6416b0ba-8049-4acb-9a3a-73478cdee721"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"586a4118-4cf1-43fb-999e-26037269faa5"},"edge_type":"inherent","type":"","uuid":"778e48c0-fca2-4b76-9956-196b4bcdba3c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6416b0ba-8049-4acb-9a3a-73478cdee721"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"586a4118-4cf1-43fb-999e-26037269faa5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"ffe81b90-174d-494a-b278-af23855b39de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6416b0ba-8049-4acb-9a3a-73478cdee721","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fbc98650_runbook","uuid":"ca4119dc-cca5-49a2-9f94-1f0606b7e784"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"0ca32fee-0352-4991-a807-bc3c6327a284","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"5b63cce7-7a64-4499-a226-1748c5948b71"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for stopping an application","message_list":[],"uuid":"f03398fc-360b-4ed1-bd03-7a9846e16b57","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"ea20fb25-b9bb-4672-b723-9c96a2081db7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"a4e00c76-ab80-41f7-a41b-69e7ad56ba05"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"ed287015-bd19-439b-a169-a4553a885514"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"a4e00c76-ab80-41f7-a41b-69e7ad56ba05"},"edge_type":"inherent","type":"","uuid":"cd0f252d-724e-48b2-9ae0-a9cb67dc45c1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"ed287015-bd19-439b-a169-a4553a885514"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a4e00c76-ab80-41f7-a41b-69e7ad56ba05","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ed287015-bd19-439b-a169-a4553a885514","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"09bdcdf9-5715-4213-a07f-7319443c367b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"e3bf9632-1f83-437d-beb7-c080e43bdf2e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"ea20fb25-b9bb-4672-b723-9c96a2081db7"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"311c4e9f-7dac-44c0-aa07-6c44b0e690b9","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"e2e8561f-e0eb-4e6f-9876-102da674c6b7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"ba40cab4-82d3-4c62-8a40-521732cc80f6"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"0bfaad2b-9ab1-43af-97a7-34e6f080c0a7"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"4c136e27-e0bf-4c50-8538-7a1dd4250be0"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"b4f654d5-c46d-4987-91db-79153513f969"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"c130151b-4b8d-4de6-bd9d-f014efcec0d4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"ba40cab4-82d3-4c62-8a40-521732cc80f6"},"edge_type":"inherent","type":"","uuid":"ae8d05ef-67a1-457c-9bbe-accace10fec5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"0bfaad2b-9ab1-43af-97a7-34e6f080c0a7"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"0bfaad2b-9ab1-43af-97a7-34e6f080c0a7"},"edge_type":"inherent","type":"","uuid":"0ce05ea2-2bd9-49bf-91f9-9501dde89229","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"4c136e27-e0bf-4c50-8538-7a1dd4250be0"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"b4f654d5-c46d-4987-91db-79153513f969"},"edge_type":"inherent","type":"","uuid":"b756bdfc-15e3-4334-bb70-3064e0b54351","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"c130151b-4b8d-4de6-bd9d-f014efcec0d4"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"4c136e27-e0bf-4c50-8538-7a1dd4250be0"},"edge_type":"inherent","type":"","uuid":"3a2ad0aa-7ee4-46f2-9ddd-793d3d9d1c4f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"b4f654d5-c46d-4987-91db-79153513f969"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"ba40cab4-82d3-4c62-8a40-521732cc80f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0bfaad2b-9ab1-43af-97a7-34e6f080c0a7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"699e66a4_runbook","uuid":"17c9a148-5df4-4353-9b83-d67d3d00ee1f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4c136e27-e0bf-4c50-8538-7a1dd4250be0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"26891638-8b4f-421e-a483-461bb7a9741e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b4f654d5-c46d-4987-91db-79153513f969","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"903346bf-3f3a-4d54-a59c-f844a3b03909"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"c130151b-4b8d-4de6-bd9d-f014efcec0d4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"68189381-49e5-4063-b3ef-49f04f81ca4e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"e2e8561f-e0eb-4e6f-9876-102da674c6b7"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for scaleout","message_list":[],"uuid":"cf92ec2a-c915-4d85-ab97-4e8446891e72","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"c2ac6438-260d-4c3b-8eae-6e3271e57c8e","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"2315a788-1a7e-43e7-a340-cf72ba288f3f"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"SCALING","uuid":"2315a788-1a7e-43e7-a340-cf72ba288f3f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"fd2c5c23-1e05-41af-a643-777e173c0d9a","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"36b3368a-d1f4-4b93-a030-74d23f3a7c33","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"c2ac6438-260d-4c3b-8eae-6e3271e57c8e"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for scalein","message_list":[],"uuid":"19de6a53-d19a-4030-8d0c-cf26692d97a0","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"f132c712-b751-4225-a25a-00a5bcdbfd86","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"79e76680-c22f-4177-bdcc-dd961950e169"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"SCALING","uuid":"79e76680-c22f-4177-bdcc-dd961950e169","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"96f26167-6f4f-484b-8c9c-39808fa8d31e","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"1ffcf689-4f13-4160-9f8f-c37add9aedec","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"f132c712-b751-4225-a25a-00a5bcdbfd86"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"0e2f8aba-7102-4bb7-a9bf-3d09053fa76f","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DAG","uuid":"3c631ba9-c0ec-4e0d-a81d-39e732703c10","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"982964f7-85d3-4c32-af1a-d8eda111791e"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"7f30252c-9679-405e-874b-948ed43d702c"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"28310886-e0a9-436a-b5bf-cc626ff7c759"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"640103b3-e03e-42b7-9de3-78a573aa2303"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"982964f7-85d3-4c32-af1a-d8eda111791e"},"edge_type":"inherent","type":"","uuid":"ffa76fba-7673-404e-9cdd-ca6e3ad0db79","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"7f30252c-9679-405e-874b-948ed43d702c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"7f30252c-9679-405e-874b-948ed43d702c"},"edge_type":"inherent","type":"","uuid":"41c45369-4926-4b31-9eea-0bec1c438900","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"28310886-e0a9-436a-b5bf-cc626ff7c759"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"28310886-e0a9-436a-b5bf-cc626ff7c759"},"edge_type":"inherent","type":"","uuid":"c11b3af0-655b-46d8-ac97-3f1eb2aa3b94","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"640103b3-e03e-42b7-9de3-78a573aa2303"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"982964f7-85d3-4c32-af1a-d8eda111791e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"7085ef03-ae38-4259-9dd3-7f3d880585e9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"7f30252c-9679-405e-874b-948ed43d702c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"28310886-e0a9-436a-b5bf-cc626ff7c759","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"05567d7c-bf17-443d-b3da-0dd72593524f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"640103b3-e03e-42b7-9de3-78a573aa2303","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"6b4b5fbc-b30b-4bbc-90b1-6a2ab0ab37ad","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"3c631ba9-c0ec-4e0d-a81d-39e732703c10"},"name":"SYS_GEN__Runbook_Deployment_bbcaa1bc_f914_40f3_831c_f89978255f7d"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d","min_replicas":"1","state":"DRAFT","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"}],"substrate_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"507775d8_deployment"}],"description":"","action_list":[{"description":"","message_list":[],"uuid":"ccac9bfe-d69e-4c31-b64e-03ff0f44b311","name":"Create new Database","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"10fca3dc-abf1-4eac-bb8e-1e38bd146c82","child_tasks_local_reference_list":[{"kind":"app_task","name":"NewDatabase","uuid":"f70a57ea-d0da-4f08-a20d-c4bb0d11c643"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"84fe0328_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"f70a57ea-d0da-4f08-a20d-c4bb0d11c643","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"[String]$dbname = \"@@{NewDatabaseName}@@\";\n \n# Open ADO.NET Connection with Windows authentification to local SQLSERVER.\n$con = New-Object Data.SqlClient.SqlConnection;\n$con.ConnectionString = \"Data Source=.;Initial Catalog=master;Integrated Security=True;\";\n$con.Open();\n \n# Select-Statement for AD group logins\n$sql = \"SELECT name\n        FROM sys.databases\n        WHERE name = '$dbname';\";\n \n# New command and reader.\n$cmd = New-Object Data.SqlClient.SqlCommand $sql, $con;\n$rd = $cmd.ExecuteReader();\nif ($rd.Read())\n{   \n    Write-Host \"Database $dbname already exists\";\n    Return;\n}\n \n$rd.Close();\n$rd.Dispose();\n \n# Create the database.\n$sql = \"CREATE DATABASE [$dbname];\"\n$cmd = New-Object Data.SqlClient.SqlCommand $sql, $con;\n$cmd.ExecuteNonQuery();     \nWrite-Host \"Database $dbname is created!\";\n \n \n# Close & Clear all objects.\n$cmd.Dispose();\n$con.Close();\n$con.Dispose();","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"NewDatabase"}],"description":"","message_list":[],"uuid":"04854a23-6b9a-4ab6-b509-a72e441f99d3","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"2ac7b711-c6a1-4587-9947-64e3d9f350fb","value":"","label":"","state":"NOT_VALIDATED","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"NewDatabaseName"}],"main_task_local_reference":{"kind":"app_task","name":"84fe0328_dag","uuid":"10fca3dc-abf1-4eac-bb8e-1e38bd146c82"},"name":"fb7c6306_runbook"}},{"description":"","message_list":[],"uuid":"ac2cc034-fc67-4749-b240-b295e55411ba","name":"Backup Database","state":"ACTIVE","critical":false,"attrs":{},"type":"user","runbook":{"task_definition_list":[{"retries":"0","description":"","type":"DAG","uuid":"8f74884b-9801-4f25-9c38-a61e58dcce9c","child_tasks_local_reference_list":[{"kind":"app_task","name":"BackupDatabase","uuid":"283539de-ccad-4437-beec-5eb8785e42b0"}],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"fdb433fe_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"283539de-ccad-4437-beec-5eb8785e42b0","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Backup-SqlDatabase -ServerInstance \".\" -Database \"@@{DatabaseName}@@\" -BackupFile \"R:\\SQLBACK\\Backup.@@{BackupName}@@.@@{DatabaseName}@@.bak\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"BackupDatabase"}],"description":"","message_list":[],"uuid":"57d15435-d3fd-4aec-9dc5-e7ebaabb8ae1","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"f4ef13f5-98a0-461a-982d-05e327392bc1","value":"","label":"","state":"NOT_VALIDATED","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DatabaseName"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"1ccd1b65-18de-4cc9-9783-16a5292d4a04","value":"","label":"","state":"NOT_VALIDATED","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"BackupName"}],"main_task_local_reference":{"kind":"app_task","name":"fdb433fe_dag","uuid":"8f74884b-9801-4f25-9c38-a61e58dcce9c"},"name":"72b8ab35_runbook"}},{"description":"System action for creating an application","message_list":[],"uuid":"1e4084f1-a5f5-423c-bbe1-694c8152fe38","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"edc52158-b7ac-48e7-a6c0-6365641f1afb","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"34bc5af2-8d2b-492a-8f8c-0737a3636b2b"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"41fe0338-fc6c-45ea-827c-f1b64e090c38"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"a537b693-a11d-41ef-b854-baed97daf203"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"37a22b63-58e9-4f65-b8d4-f7fa8e8db395"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"1ddc2e3e-2831-42f0-a959-ed6f717f0e2c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"37a22b63-58e9-4f65-b8d4-f7fa8e8db395"},"edge_type":"inherent","type":"","uuid":"9fdd310f-e23a-4775-8207-8183292481e3","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"1ddc2e3e-2831-42f0-a959-ed6f717f0e2c"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"a537b693-a11d-41ef-b854-baed97daf203"},"edge_type":"inherent","type":"","uuid":"f982a6a7-a4e2-4780-961c-497e76fa0b5b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"37a22b63-58e9-4f65-b8d4-f7fa8e8db395"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"41fe0338-fc6c-45ea-827c-f1b64e090c38"},"edge_type":"inherent","type":"","uuid":"b60ba5d2-cc2a-4dc0-a524-fc0162878fe8","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"a537b693-a11d-41ef-b854-baed97daf203"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"34bc5af2-8d2b-492a-8f8c-0737a3636b2b"},"edge_type":"inherent","type":"","uuid":"3e86fa76-6d6d-4879-b6d9-156eab6ee4d0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"41fe0338-fc6c-45ea-827c-f1b64e090c38"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"34bc5af2-8d2b-492a-8f8c-0737a3636b2b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_bbcaa1bc_f914_40f3_831c_f89978255f7d"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"41fe0338-fc6c-45ea-827c-f1b64e090c38","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"7f826793-736b-4ec0-9ac4-274b124e8cc2"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a537b693-a11d-41ef-b854-baed97daf203","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0325f9d1-14a3-43a4-8044-25ec782fa189"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"37a22b63-58e9-4f65-b8d4-f7fa8e8db395","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"211de55f_runbook","uuid":"ee20fe08-1ecd-4c9f-a051-408161f19578"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1ddc2e3e-2831-42f0-a959-ed6f717f0e2c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"075a86a1-eac7-4d89-88ca-1b906eb22a21","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"edc52158-b7ac-48e7-a6c0-6365641f1afb"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}},{"description":"System action for starting an application","message_list":[],"uuid":"6a075c76-4532-46df-93b6-41605949f3e9","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"ad6d82d2-95f1-4198-953b-5030991a250f","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"a307788b-0c5d-45e2-a810-4f47e95f2698"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6ee7d3f0-0b67-4605-b03f-5704744a33d6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"a307788b-0c5d-45e2-a810-4f47e95f2698"},"edge_type":"inherent","type":"","uuid":"2bfd62ec-0e01-425a-8897-5c1c19c3a0b1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6ee7d3f0-0b67-4605-b03f-5704744a33d6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a307788b-0c5d-45e2-a810-4f47e95f2698","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"9a767166-de16-4d77-9c9a-f0442f2de04f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6ee7d3f0-0b67-4605-b03f-5704744a33d6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"a28cbeb3-c2a4-413e-8f90-9aec93900d08","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"ad6d82d2-95f1-4198-953b-5030991a250f"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}},{"description":"System action for restarting an application","message_list":[],"uuid":"e4992ee4-4cfe-43d9-b88c-583961666498","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"b3ea1f21-d796-48c5-b424-9a2b017282ef","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"dfc61d13-f5d5-4e45-b2aa-12167cb41ad8"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"4762154e-5e9f-47d8-bfae-61e8bfe4d7d1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"dfc61d13-f5d5-4e45-b2aa-12167cb41ad8"},"edge_type":"inherent","type":"","uuid":"f3c5a22e-a20c-45af-ad01-3450d1823187","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"4762154e-5e9f-47d8-bfae-61e8bfe4d7d1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"dfc61d13-f5d5-4e45-b2aa-12167cb41ad8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"ffe81b90-174d-494a-b278-af23855b39de"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4762154e-5e9f-47d8-bfae-61e8bfe4d7d1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fbc98650_runbook","uuid":"ca4119dc-cca5-49a2-9f94-1f0606b7e784"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"1fad5fe0-5600-4679-83f8-77d60d1b92dd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"b3ea1f21-d796-48c5-b424-9a2b017282ef"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}},{"description":"System action for stopping an application","message_list":[],"uuid":"7913b6db-378c-4c4d-99ff-7091c155f71b","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"0aa560ba-c766-487c-aac9-deeeb8343c90","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"2387eea3-0068-4ceb-8cbf-feffa108b0ce"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"fd8c7c86-2ab4-436a-8f8f-9033cb582b8c"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"2387eea3-0068-4ceb-8cbf-feffa108b0ce"},"edge_type":"inherent","type":"","uuid":"968cf9ed-d3da-4b03-914e-b2e81af85e1b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"fd8c7c86-2ab4-436a-8f8f-9033cb582b8c"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"2387eea3-0068-4ceb-8cbf-feffa108b0ce","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fd8c7c86-2ab4-436a-8f8f-9033cb582b8c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"09bdcdf9-5715-4213-a07f-7319443c367b"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"}],"description":"","message_list":[],"uuid":"afaae58c-060a-4e78-a761-ead38e2fbfcf","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"0aa560ba-c766-487c-aac9-deeeb8343c90"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"83ca57db-2a32-4c19-9e6e-1dff949d98de","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"20e6727e-f255-4b18-a55c-6a5c90a10892","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"fd29eb6f-d0e2-4889-a137-28d24a118761"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"251a2df9-1b5e-4df4-a1f1-616c1cd7abf1"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"19418903-5bb9-42f7-9ed4-a2b8cc906def"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e05c6d81-f88e-44d5-8d24-b319dfd835bb"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"c3945b68-b50c-46b5-8770-703dbae3e158"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"fd29eb6f-d0e2-4889-a137-28d24a118761"},"edge_type":"inherent","type":"","uuid":"e5bb20b5-7f9d-4d24-ac26-e1a4b4dc7a72","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"251a2df9-1b5e-4df4-a1f1-616c1cd7abf1"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"251a2df9-1b5e-4df4-a1f1-616c1cd7abf1"},"edge_type":"inherent","type":"","uuid":"fd1e8aa2-fa65-46ad-9e6c-bb66c6db4786","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"19418903-5bb9-42f7-9ed4-a2b8cc906def"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e05c6d81-f88e-44d5-8d24-b319dfd835bb"},"edge_type":"inherent","type":"","uuid":"c829b51a-ec9a-40f1-a799-7cd563811130","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"c3945b68-b50c-46b5-8770-703dbae3e158"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"19418903-5bb9-42f7-9ed4-a2b8cc906def"},"edge_type":"inherent","type":"","uuid":"5edac591-2732-4ab4-8718-2dcac157ceb6","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"e05c6d81-f88e-44d5-8d24-b319dfd835bb"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fd29eb6f-d0e2-4889-a137-28d24a118761","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"251a2df9-1b5e-4df4-a1f1-616c1cd7abf1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"699e66a4_runbook","uuid":"17c9a148-5df4-4353-9b83-d67d3d00ee1f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"19418903-5bb9-42f7-9ed4-a2b8cc906def","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"26891638-8b4f-421e-a483-461bb7a9741e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e05c6d81-f88e-44d5-8d24-b319dfd835bb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"903346bf-3f3a-4d54-a59c-f844a3b03909"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"c3945b68-b50c-46b5-8770-703dbae3e158","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"33a8e733-2e46-4896-9c2d-208feb026838","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"20e6727e-f255-4b18-a55c-6a5c90a10892"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"b63576b9-17bc-4615-9df3-42146d2dab9b","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Default","uuid":"89dc7880-1951-4854-8f8b-99a1676dd983"},"retries":"0","description":"","type":"DAG","uuid":"aefe3efc-83ee-4be9-ac3b-c1e62e5063c2","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6b1ee0d1-3f3f-47b6-b192-806e79ca68aa"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0fdab43b-2903-40a8-9ba6-3807d1eff777"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"4a35b64f-c619-4e71-80e0-144f312c3165"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"dc18428b-bf34-4ec5-b664-e213f6326ce5"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"6b1ee0d1-3f3f-47b6-b192-806e79ca68aa"},"edge_type":"inherent","type":"","uuid":"dcceb417-41c6-4a74-b0eb-1f3a479840db","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0fdab43b-2903-40a8-9ba6-3807d1eff777"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0fdab43b-2903-40a8-9ba6-3807d1eff777"},"edge_type":"inherent","type":"","uuid":"51aa769e-1d30-470f-9867-86bc6a71ad8e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"4a35b64f-c619-4e71-80e0-144f312c3165"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"4a35b64f-c619-4e71-80e0-144f312c3165"},"edge_type":"inherent","type":"","uuid":"15444fe7-2d36-4298-a583-e04f9cc5ca52","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d","uuid":"dc18428b-bf34-4ec5-b664-e213f6326ce5"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"6b1ee0d1-3f3f-47b6-b192-806e79ca68aa","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"7085ef03-ae38-4259-9dd3-7f3d880585e9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"0fdab43b-2903-40a8-9ba6-3807d1eff777","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"4a35b64f-c619-4e71-80e0-144f312c3165","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_7e844bc0_3280_4127_9087_325652cd16d3","uuid":"05567d7c-bf17-443d-b3da-0dd72593524f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_7e844bc0_3280_4127_9087_325652cd16d3"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"507775d8_deployment","uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"dc18428b-bf34-4ec5-b664-e213f6326ce5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_bbcaa1bc_f914_40f3_831c_f89978255f7d"}],"description":"","message_list":[],"uuid":"752c039b-9f6c-477a-b91a-de8e9e38e38e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_89dc7880_1951_4854_8f8b_99a1676dd983","uuid":"aefe3efc-83ee-4be9-ac3b-c1e62e5063c2"},"name":"SYS_GEN__Runbook_Application_89dc7880_1951_4854_8f8b_99a1676dd983"}}],"message_list":[],"uuid":"89dc7880-1951-4854-8f8b-99a1676dd983","state":"DRAFT","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"771e7017-25a0-421c-99f4-c3b090878bcc","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"SQL_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"5cc50f21-8952-4757-a8f8-253f6d45ca89","value":"172.23.0.23","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"AD_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"1eca7425-edda-4016-bbec-63c62e82ca51","value":"ntnx.test","label":"","state":"ACTIVE","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"3b9fc45b-a068-4cc5-8f07-c6c179fca48e","value":"yes","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"INCLUDE_BPG"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"64de3b06-7214-43f5-b920-23934273b93a","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{},"is_hidden":false,"type":"LOCAL","options":{},"name":"BPG_RKTOOLS_URL"}],"name":"Default"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"92ca8984-6ccc-4e3b-8790-2d368c959ad3","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"727150ff-8f49-48d6-a48a-fe184b0e0120","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"7193a905-66fb-45bb-9c3f-ee4ddbd5c9b9"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"7193a905-66fb-45bb-9c3f-ee4ddbd5c9b9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},"edge_type":"user_defined","type":"","uuid":"8828aab6-fbae-43a8-a942-321497e45e28","to_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"}},{"from_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},"edge_type":"user_defined","type":"","uuid":"6fbc4af9-9e47-4611-880b-54035e854f66","to_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"}},{"from_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},"edge_type":"user_defined","type":"","uuid":"9568bf3f-e51a-4433-a737-cf0096040f10","to_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"}},{"from_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},"edge_type":"user_defined","type":"","uuid":"02941e9f-eac4-4b96-8845-5ab62f476864","to_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"}},{"from_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},"edge_type":"user_defined","type":"","uuid":"0c40cde3-c09b-4390-a66a-2765b25fcfe0","to_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"}},{"from_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},"edge_type":"user_defined","type":"","uuid":"c5c2633e-2a46-439f-a4ff-4ce11561a916","to_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"}},{"from_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},"edge_type":"user_defined","type":"","uuid":"286a1412-f467-4cfb-b91d-1ba4793c11bc","to_task_reference":{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"93946313_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"3159588c-841c-4108-95cc-df60ce625232","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add to Domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"sleep"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"initialize disk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"f500caf6-c384-42c2-984c-f390673f5338","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Sql Install"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply OS BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply Sql BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Firewallrules"}],"description":"","message_list":[],"uuid":"e18fbeeb-ce41-4e53-8901-e1e2898fb264","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"93946313_dag","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e"},"name":"b24859ac_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"744834e9-dfce-4913-871c-10df8f98348c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"224134c5_dag"}],"description":"","message_list":[],"uuid":"a01b92f3-90c9-4235-a3bf-5c4563ffedb6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"224134c5_dag","uuid":"744834e9-dfce-4913-871c-10df8f98348c"},"name":"03e9249d_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}],"description":"","message_list":[],"uuid":"0325f9d1-14a3-43a4-8044-25ec782fa189","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"727150ff-8f49-48d6-a48a-fe184b0e0120"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for creating an application","message_list":[],"uuid":"b60de284-86cf-499f-81b8-9c92b4148766","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"26794733-8995-4ae4-a858-62b1573b008b","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"9db895da-af48-4897-9aba-24a5cd285df3"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"97f89cc2-394c-4663-a1b6-a4f785027276"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"02adb3eb-29fa-4ea2-ba9e-7fb0e2391a62"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"97f89cc2-394c-4663-a1b6-a4f785027276"},"edge_type":"inherent","type":"","uuid":"03afeb8e-7d98-4a31-9e94-294a6387d44c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"02adb3eb-29fa-4ea2-ba9e-7fb0e2391a62"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"9db895da-af48-4897-9aba-24a5cd285df3"},"edge_type":"inherent","type":"","uuid":"6b5d0cfc-0901-4c47-8e2c-68697500bfb5","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"97f89cc2-394c-4663-a1b6-a4f785027276"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9db895da-af48-4897-9aba-24a5cd285df3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"0325f9d1-14a3-43a4-8044-25ec782fa189"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"97f89cc2-394c-4663-a1b6-a4f785027276","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"211de55f_runbook","uuid":"ee20fe08-1ecd-4c9f-a051-408161f19578"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"02adb3eb-29fa-4ea2-ba9e-7fb0e2391a62","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"8cd7d9b3-2ccb-4cd9-bab3-0276af1884c7","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"26794733-8995-4ae4-a858-62b1573b008b"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"6c3287ad-843e-4651-b386-81b902a53af4","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"e8bcdd85-9f9f-4ef8-b8eb-58e6d54239df","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"756fd048-23e2-46d6-8c8b-ac5402a1d86c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"756fd048-23e2-46d6-8c8b-ac5402a1d86c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},"edge_type":"user_defined","type":"","uuid":"8828aab6-fbae-43a8-a942-321497e45e28","to_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"}},{"from_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},"edge_type":"user_defined","type":"","uuid":"6fbc4af9-9e47-4611-880b-54035e854f66","to_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"}},{"from_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},"edge_type":"user_defined","type":"","uuid":"9568bf3f-e51a-4433-a737-cf0096040f10","to_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"}},{"from_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},"edge_type":"user_defined","type":"","uuid":"02941e9f-eac4-4b96-8845-5ab62f476864","to_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"}},{"from_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},"edge_type":"user_defined","type":"","uuid":"0c40cde3-c09b-4390-a66a-2765b25fcfe0","to_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"}},{"from_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},"edge_type":"user_defined","type":"","uuid":"c5c2633e-2a46-439f-a4ff-4ce11561a916","to_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"}},{"from_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},"edge_type":"user_defined","type":"","uuid":"286a1412-f467-4cfb-b91d-1ba4793c11bc","to_task_reference":{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"93946313_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"3159588c-841c-4108-95cc-df60ce625232","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add to Domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"sleep"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"initialize disk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"f500caf6-c384-42c2-984c-f390673f5338","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Sql Install"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply OS BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply Sql BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Firewallrules"}],"description":"","message_list":[],"uuid":"e18fbeeb-ce41-4e53-8901-e1e2898fb264","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"93946313_dag","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e"},"name":"b24859ac_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"744834e9-dfce-4913-871c-10df8f98348c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"224134c5_dag"}],"description":"","message_list":[],"uuid":"a01b92f3-90c9-4235-a3bf-5c4563ffedb6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"224134c5_dag","uuid":"744834e9-dfce-4913-871c-10df8f98348c"},"name":"03e9249d_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}],"description":"","message_list":[],"uuid":"26891638-8b4f-421e-a483-461bb7a9741e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"e8bcdd85-9f9f-4ef8-b8eb-58e6d54239df"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"95e9afbd-c554-4d6d-9bca-e7cb95032d9f","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"895a1422-2666-4df6-9e8b-1bda83df268a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"b3f1143a-9c23-4b76-91e9-04013938f864"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"32358d28-a499-42ed-bb94-d84c2192b0f6"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"f2c367c3-756d-45e7-88f4-2422d4c5baae"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"b3f1143a-9c23-4b76-91e9-04013938f864"},"edge_type":"inherent","type":"","uuid":"52276bc1-85ca-4626-b41b-3c8b20839222","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"32358d28-a499-42ed-bb94-d84c2192b0f6"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"32358d28-a499-42ed-bb94-d84c2192b0f6"},"edge_type":"inherent","type":"","uuid":"d583d2d6-578b-420b-877e-acc79b1e0183","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"f2c367c3-756d-45e7-88f4-2422d4c5baae"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b3f1143a-9c23-4b76-91e9-04013938f864","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"32358d28-a499-42ed-bb94-d84c2192b0f6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"699e66a4_runbook","uuid":"17c9a148-5df4-4353-9b83-d67d3d00ee1f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"f2c367c3-756d-45e7-88f4-2422d4c5baae","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"26891638-8b4f-421e-a483-461bb7a9741e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}],"description":"","message_list":[],"uuid":"63eebfd7-43d5-40a9-adfb-22d90b0230ca","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"895a1422-2666-4df6-9e8b-1bda83df268a"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"ebf886eb-99cd-4c18-a689-69ea9a83ff45","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"e7fa49e7-3bf2-4534-89c6-e12a9f310157","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"11ba3892-dded-4884-b925-bb87dac67f67"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"fc5612fd-83e1-412e-80b4-bd3f510a7f6f"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"11ba3892-dded-4884-b925-bb87dac67f67"},"edge_type":"inherent","type":"","uuid":"c54c78aa-ef83-4f09-845d-306d258b429e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"fc5612fd-83e1-412e-80b4-bd3f510a7f6f"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"11ba3892-dded-4884-b925-bb87dac67f67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"7085ef03-ae38-4259-9dd3-7f3d880585e9"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"},{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"fc5612fd-83e1-412e-80b4-bd3f510a7f6f","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}],"description":"","message_list":[],"uuid":"dd7d23c9-203a-464f-addd-e57696032494","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"e7fa49e7-3bf2-4534-89c6-e12a9f310157"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for starting an application","message_list":[],"uuid":"ce0d120c-e506-4a49-9110-ce61060bb9bc","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"d1db7f4f-c1ce-478f-9fe4-84e67d3d9f23","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"c00c7d21-aaa0-48ae-94c9-80f6d6a57e45"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c00c7d21-aaa0-48ae-94c9-80f6d6a57e45","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"408cca6c_runbook","uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"a3040fa3-8877-4cdf-ae8b-60720558959e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"d1db7f4f-c1ce-478f-9fe4-84e67d3d9f23"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for restarting an application","message_list":[],"uuid":"236c9e39-06f1-4f04-9f19-13e462edf776","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"e5c7db03-9898-4e41-beea-32bad289b1bf","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"9d9ae08e-1383-4565-bfa9-d004ad22460c"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"9d9ae08e-1383-4565-bfa9-d004ad22460c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"fbc98650_runbook","uuid":"ca4119dc-cca5-49a2-9f94-1f0606b7e784"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"1fe1c225-0826-49c5-aab7-5a735ea33ff4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"e5c7db03-9898-4e41-beea-32bad289b1bf"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}},{"description":"System action for stopping an application","message_list":[],"uuid":"9c17f298-5a22-4399-a93b-4ce8e8641eb3","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"ea2b422e-36e0-4286-b2bd-23bcc685aa90","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1","uuid":"d617edfb-f340-47a5-8fed-4a2604aa814d"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d617edfb-f340-47a5-8fed-4a2604aa814d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"24e83ad4_runbook","uuid":"874eae0e-1dd8-46e3-be05-86a769d65282"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_95663329_a75f_494a_a153_763ff6ed5bc1"}],"description":"","message_list":[],"uuid":"87e25d80-df3c-4dd8-8804-ca56f4bb6d99","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5","uuid":"ea2b422e-36e0-4286-b2bd-23bcc685aa90"},"name":"SYS_GEN__Runbook_Package_4507679b_9ddf_45e6_8f69_ae30e6eff5d5"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"}],"uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},"edge_type":"user_defined","type":"","uuid":"8828aab6-fbae-43a8-a942-321497e45e28","to_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"}},{"from_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},"edge_type":"user_defined","type":"","uuid":"6fbc4af9-9e47-4611-880b-54035e854f66","to_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"}},{"from_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},"edge_type":"user_defined","type":"","uuid":"9568bf3f-e51a-4433-a737-cf0096040f10","to_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"}},{"from_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},"edge_type":"user_defined","type":"","uuid":"02941e9f-eac4-4b96-8845-5ab62f476864","to_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"}},{"from_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},"edge_type":"user_defined","type":"","uuid":"0c40cde3-c09b-4390-a66a-2765b25fcfe0","to_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"}},{"from_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},"edge_type":"user_defined","type":"","uuid":"c5c2633e-2a46-439f-a4ff-4ce11561a916","to_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"}},{"from_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},"edge_type":"user_defined","type":"","uuid":"286a1412-f467-4cfb-b91d-1ba4793c11bc","to_task_reference":{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"93946313_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Enable Credssp"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"3159588c-841c-4108-95cc-df60ce625232","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Add to Domain"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"sleep"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"initialize disk"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"f500caf6-c384-42c2-984c-f390673f5338","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Sql Install"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply OS BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Apply Sql BPG"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","type":"EXEC","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Firewallrules"}],"description":"","message_list":[],"uuid":"e18fbeeb-ce41-4e53-8901-e1e2898fb264","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"93946313_dag","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e"},"name":"b24859ac_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","description":"","type":"DAG","uuid":"744834e9-dfce-4913-871c-10df8f98348c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"224134c5_dag"}],"description":"","message_list":[],"uuid":"a01b92f3-90c9-4235-a3bf-5c4563ffedb6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"224134c5_dag","uuid":"744834e9-dfce-4913-871c-10df8f98348c"},"name":"03e9249d_runbook"}},"variable_list":[],"name":"ESXi_MSSQL_Package"}]},"name":"Vpshere"},"spec":{"name":"Vpshere","resources":{"service_definition_list":[{"singleton":false,"uuid":"95663329-a75f-494a-a153-763ff6ed5bc1","action_list":[{"uuid":"cca7912f-b73e-4ddf-a427-51c286a1e163","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"7cafa0ae-670c-4c2b-9a80-7a888f3b0fff","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"b6eb43c5_dag"}],"uuid":"ee20fe08-1ecd-4c9f-a051-408161f19578","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"b6eb43c5_dag","uuid":"7cafa0ae-670c-4c2b-9a80-7a888f3b0fff"},"name":"211de55f_runbook"},"type":"system","description":"System action for creating an application"},{"uuid":"c326a0fb-7ea8-463e-8932-2fe7be27c5e9","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"e7b9fd8b-119f-4665-84c6-d3b94932f4a3","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"b1da642f_dag"}],"uuid":"17c9a148-5df4-4353-9b83-d67d3d00ee1f","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"b1da642f_dag","uuid":"e7b9fd8b-119f-4665-84c6-d3b94932f4a3"},"name":"699e66a4_runbook"},"type":"system","description":"System action for deleting an application. Deletes created VMs as well"},{"uuid":"bf380435-5821-4f88-b5cc-6274784fac08","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"87cb3208-9694-4fe1-ac93-7f2cf7f9f1d8","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"6a68a4f3_dag"}],"uuid":"50da06cb-a12e-4fdb-bf13-966e8363af99","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6a68a4f3_dag","uuid":"87cb3208-9694-4fe1-ac93-7f2cf7f9f1d8"},"name":"408cca6c_runbook"},"type":"system","description":"System action for starting an application"},{"uuid":"2d7ac1b7-3577-4ce6-b39e-389d5f9a1338","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"3298452c-84f0-4802-ad04-67a760ecb31d","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"85adf10a_dag"}],"uuid":"874eae0e-1dd8-46e3-be05-86a769d65282","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"85adf10a_dag","uuid":"3298452c-84f0-4802-ad04-67a760ecb31d"},"name":"24e83ad4_runbook"},"type":"system","description":"System action for stopping an application"},{"uuid":"97fc2b57-fe62-44b1-bde5-765f3cc7af65","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"cd5dd738-a6b6-40dc-904a-cad381a1a8c6","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"7746f699_dag"}],"uuid":"ca4119dc-cca5-49a2-9f94-1f0606b7e784","description":"","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7746f699_dag","uuid":"cd5dd738-a6b6-40dc-904a-cad381a1a8c6"},"name":"fbc98650_runbook"},"type":"system","description":"System action for restarting an application"}],"description":"","depends_on_list":[],"port_list":[],"tier":"","variable_list":[],"name":"MSSQL"}],"substrate_definition_list":[{"description":"","action_list":[],"uuid":"7e844bc0-3280-4127-9087-325652cd16d3","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"300","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6"}},"editables":{"create_spec":{"resources":{"guest_customization":{"windows_data":{"network_settings":{"0":{"ip":true,"gateway_default":true,"subnet_mask":true}}}},"nic_list":{},"disk_list":{}}}},"os_type":"Windows","type":"VMWARE_VM","create_spec":{"name":"MSSQL-@@{calm_unique}@@","storage_pod":"PS_DatastoreCluster","cluster":"NTNX-Cluster","host":"","clone_is_template":false,"template":"5025abd2-fe16-33dc-5b2d-e413d4735883","datastore":"","type":"PROVISION_VMWARE_VM","resources":{"nic_list":[],"num_vcpus_per_socket":1,"num_sockets":4,"memory_size_mib":6144,"power_state":"poweron","guest_customization":{"customization_type":"GUEST_OS_WINDOWS","linux_data":null,"type":"","windows_data":{"dns_primary":"172.23.0.23","domain":"ntnx.test","password":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"product_id":"","command_list":[],"dns_search_path":[],"auto_logon":false,"login_count":1,"network_settings":[{"is_dhcp":false,"gateway_default":"172.23.0.1","name":"Change_Me","ip":"@@{SQL_IP}@@","gateway_alternate":"","subnet_mask":"255.255.0.0","type":""}],"computer_name":"@@{name}@@","organization_name":"Nutanix","is_domain":true,"domain_password":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"full_name":"DEMO","timezone":"110","domain_user":"Administrator","dns_tertiary":"","dns_secondary":"172.23.0.10","type":"","workgroup":""}},"type":"","account_uuid":"7f90399d-ed3d-1c70-447d-17004ef1bd0a","disk_list":[{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":51200},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":153600},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":307200},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":307200},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":102400},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":102400},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":204800},{"adapter_type":"SCSI","disk_type":"disk","type":"","disk_size_mb":204800}]}},"variable_list":[],"name":"ESXi_MSSQL"}],"credential_definition_list":[{"username":"administrator","uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6","name":"LOCAL","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"40a6ec92-f40e-4569-b8be-2bf5b7bedc27"}}},"type":"PASSWORD","description":""},{"username":"ntnx\\administrator","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830","name":"DOMAIN_CRED","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"b5b04618-8a7f-4707-8dcc-6a87a4617c63"}}},"type":"PASSWORD","description":""},{"username":"ntnx\\administrator","uuid":"f11f1a67-22ae-4398-b5b2-777347f1381b","name":"SQL_CRED","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"3789a2d2-10f8-4db7-8951-826bcc1bf27a"}}},"type":"PASSWORD","description":""}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"uuid":"bbcaa1bc-f914-40f3-831c-f89978255f7d","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"}],"description":"","name":"507775d8_deployment","min_replicas":"1","published_service_local_reference_list":[],"max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"ESXi_MSSQL","uuid":"7e844bc0-3280-4127-9087-325652cd16d3"},"type":"GREENFIELD","variable_list":[],"depends_on_list":[]}],"uuid":"89dc7880-1951-4854-8f8b-99a1676dd983","action_list":[{"uuid":"ccac9bfe-d69e-4c31-b64e-03ff0f44b311","name":"Create new Database","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"10fca3dc-abf1-4eac-bb8e-1e38bd146c82","child_tasks_local_reference_list":[{"kind":"app_task","name":"NewDatabase","uuid":"f70a57ea-d0da-4f08-a20d-c4bb0d11c643"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"84fe0328_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"f70a57ea-d0da-4f08-a20d-c4bb0d11c643","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"[String]$dbname = \"@@{NewDatabaseName}@@\";\n \n# Open ADO.NET Connection with Windows authentification to local SQLSERVER.\n$con = New-Object Data.SqlClient.SqlConnection;\n$con.ConnectionString = \"Data Source=.;Initial Catalog=master;Integrated Security=True;\";\n$con.Open();\n \n# Select-Statement for AD group logins\n$sql = \"SELECT name\n        FROM sys.databases\n        WHERE name = '$dbname';\";\n \n# New command and reader.\n$cmd = New-Object Data.SqlClient.SqlCommand $sql, $con;\n$rd = $cmd.ExecuteReader();\nif ($rd.Read())\n{   \n    Write-Host \"Database $dbname already exists\";\n    Return;\n}\n \n$rd.Close();\n$rd.Dispose();\n \n# Create the database.\n$sql = \"CREATE DATABASE [$dbname];\"\n$cmd = New-Object Data.SqlClient.SqlCommand $sql, $con;\n$cmd.ExecuteNonQuery();     \nWrite-Host \"Database $dbname is created!\";\n \n \n# Close & Clear all objects.\n$cmd.Dispose();\n$con.Close();\n$con.Dispose();","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"NewDatabase"}],"uuid":"04854a23-6b9a-4ab6-b509-a72e441f99d3","description":"","variable_list":[{"val_type":"STRING","description":"","uuid":"2ac7b711-c6a1-4587-9947-64e3d9f350fb","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"NewDatabaseName"}],"main_task_local_reference":{"kind":"app_task","name":"84fe0328_dag","uuid":"10fca3dc-abf1-4eac-bb8e-1e38bd146c82"},"name":"fb7c6306_runbook"},"type":"user","description":""},{"uuid":"ac2cc034-fc67-4749-b240-b295e55411ba","name":"Backup Database","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","uuid":"8f74884b-9801-4f25-9c38-a61e58dcce9c","child_tasks_local_reference_list":[{"kind":"app_task","name":"BackupDatabase","uuid":"283539de-ccad-4437-beec-5eb8785e42b0"}],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"fdb433fe_dag"},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","description":"","uuid":"283539de-ccad-4437-beec-5eb8785e42b0","child_tasks_local_reference_list":[],"attrs":{"exit_status":[],"script":"Backup-SqlDatabase -ServerInstance \".\" -Database \"@@{DatabaseName}@@\" -BackupFile \"R:\\SQLBACK\\Backup.@@{BackupName}@@.@@{DatabaseName}@@.bak\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","type":"EXEC","variable_list":[],"name":"BackupDatabase"}],"uuid":"57d15435-d3fd-4aec-9dc5-e7ebaabb8ae1","description":"","variable_list":[{"val_type":"STRING","description":"","uuid":"f4ef13f5-98a0-461a-982d-05e327392bc1","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"DatabaseName"},{"val_type":"STRING","description":"","uuid":"1ccd1b65-18de-4cc9-9783-16a5292d4a04","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"BackupName"}],"main_task_local_reference":{"kind":"app_task","name":"fdb433fe_dag","uuid":"8f74884b-9801-4f25-9c38-a61e58dcce9c"},"name":"72b8ab35_runbook"},"type":"user","description":""}],"description":"","variable_list":[{"val_type":"STRING","description":"","uuid":"771e7017-25a0-421c-99f4-c3b090878bcc","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"SQL_IP"},{"val_type":"STRING","description":"","uuid":"5cc50f21-8952-4757-a8f8-253f6d45ca89","value":"172.23.0.23","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","name":"AD_IP"},{"val_type":"STRING","name":"DOMAIN","uuid":"1eca7425-edda-4016-bbec-63c62e82ca51","value":"ntnx.test","label":"","editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","description":"","uuid":"3b9fc45b-a068-4cc5-8f07-c6c179fca48e","value":"yes","label":"","attrs":{"type":""},"type":"LOCAL","name":"INCLUDE_BPG"},{"val_type":"STRING","description":"","uuid":"64de3b06-7214-43f5-b920-23934273b93a","value":"http:\/\/download.microsoft.com\/download\/8\/e\/c\/8ec3a7d8-05b4-440a-a71e-ca3ee25fe057\/rktools.exe","label":"","attrs":{"type":""},"type":"LOCAL","name":"BPG_RKTOOLS_URL"}],"name":"Default"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"7cd9ad70-f19d-43c7-be31-8659e7fcd5e6"},"package_definition_list":[{"description":"","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"}],"uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","name":"93946313_dag","type":"DAG","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Enable Credssp","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b"},"edge_type":"user_defined","type":"","uuid":"8828aab6-fbae-43a8-a942-321497e45e28","to_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"}},{"from_task_reference":{"kind":"app_task","name":"Add to Domain","uuid":"3159588c-841c-4108-95cc-df60ce625232"},"edge_type":"user_defined","type":"","uuid":"6fbc4af9-9e47-4611-880b-54035e854f66","to_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"}},{"from_task_reference":{"kind":"app_task","name":"sleep","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535"},"edge_type":"user_defined","type":"","uuid":"9568bf3f-e51a-4433-a737-cf0096040f10","to_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"}},{"from_task_reference":{"kind":"app_task","name":"initialize disk","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16"},"edge_type":"user_defined","type":"","uuid":"02941e9f-eac4-4b96-8845-5ab62f476864","to_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"}},{"from_task_reference":{"kind":"app_task","name":"Sql Install","uuid":"f500caf6-c384-42c2-984c-f390673f5338"},"edge_type":"user_defined","type":"","uuid":"0c40cde3-c09b-4390-a66a-2765b25fcfe0","to_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"}},{"from_task_reference":{"kind":"app_task","name":"Apply OS BPG","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf"},"edge_type":"user_defined","type":"","uuid":"c5c2633e-2a46-439f-a4ff-4ce11561a916","to_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"}},{"from_task_reference":{"kind":"app_task","name":"Apply Sql BPG","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c"},"edge_type":"user_defined","type":"","uuid":"286a1412-f467-4cfb-b91d-1ba4793c11bc","to_task_reference":{"kind":"app_task","name":"Firewallrules","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Enable Credssp","type":"EXEC","uuid":"03dd6b1a-f1f1-45d2-a71a-c20193b7a26b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"Enable-WSManCredSSP -Role Server -Force","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Add to Domain","type":"EXEC","uuid":"3159588c-841c-4108-95cc-df60ce625232","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is used to Change hostname of machines and join to domain.\n##############################################\n\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Host \"Not in domain\"\n    #$adminname = \"$DomainName\\$Username\"\n    $adminname = \"$Username\"\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Host \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  } else {\n     Write-Host \"Already in domain\"\n  }\n}\n\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{AD_IP}@@\"\n\nRestart-Computer -Force -AsJob\nexit 0\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"sleep","type":"EXEC","uuid":"5e89afe8-813d-438b-b82b-087c7d58b535","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(60)"},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"initialize disk","type":"EXEC","uuid":"c7b7e43b-1993-4dd4-834a-ea7db923cd16","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$start_time = Get-Date\n\nGet-Disk -Number 1 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 2 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 3 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 4 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 5 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 6 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 7 | Initialize-Disk -ErrorAction SilentlyContinue\nGet-Disk -Number 8 | Initialize-Disk -ErrorAction SilentlyContinue\n\n# Format SQL binaries disk\nNew-Partition -DiskNumber 1 -DriveLetter F -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format SQL backup\/restore disk\nNew-Partition -DiskNumber 2 -DriveLetter R -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB DATA drives\nNew-Partition -DiskNumber 3 -DriveLetter G -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 4 -DriveLetter H -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB TEMP drives\nNew-Partition -DiskNumber 5 -DriveLetter I -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 6 -DriveLetter J -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n# Format DB LOGS drives\nNew-Partition -DiskNumber 7 -DriveLetter T -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\nNew-Partition -DiskNumber 8 -DriveLetter L -UseMaximumSize -ErrorAction SilentlyContinue | Format-Volume -Confirm:$false\n\n#Format drive with 64K block size, assigns Label and drive letter\nFormat-Volume -DriveLetter F -FileSystem NTFS -NewFileSystemLabel \"SQLINSTALL\" -Confirm:$false \nFormat-Volume -DriveLetter R -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"SQLBCK\" -Confirm:$false \nFormat-Volume -DriveLetter G -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA01\" -Confirm:$false \nFormat-Volume -DriveLetter H -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"DATA02\" -Confirm:$false \nFormat-Volume -DriveLetter I -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB01\" -Confirm:$false \nFormat-Volume -DriveLetter J -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDB02\" -Confirm:$false \nFormat-Volume -DriveLetter T -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"TEMPDBLOG01\" -Confirm:$false \nFormat-Volume -DriveLetter L -AllocationUnitSize 65536 -FileSystem NTFS -NewFileSystemLabel \"ULOG01\" -Confirm:$false \n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Sql Install","type":"EXEC","uuid":"f500caf6-c384-42c2-984c-f390673f5338","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"$DriveLetter = $(Get-Partition -DiskNumber 1 -PartitionNumber 2 | select DriveLetter -ExpandProperty DriveLetter)\n$edition = \"Standard\"\n$HOSTNAME=$(hostname)\n$PackageName = \"MsSqlServer2014Standard\"\n$Prerequisites = \"Net-Framework-Core\"\n$silentArgs = \"\/IACCEPTSQLSERVERLICENSETERMS \/Q \/ACTION=install \/FEATURES=SQLENGINE,SSMS,ADV_SSMS,CONN,IS,BC,SDK,BOL \/SECURITYMODE=sql \/SAPWD=`\"@@{SQL_CRED.secret}@@`\" \/ASSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/SQLSYSADMINACCOUNTS=`\"@@{SQL_CRED.username}@@`\" \/INSTANCEID=MSSQLSERVER \/INSTANCENAME=MSSQLSERVER \/UPDATEENABLED=False \/INDICATEPROGRESS \/TCPENABLED=1 \/INSTALLSQLDATADIR=`\"${DriveLetter}:\\Microsoft SQL Server`\"\"\n$setupDriveLetter = \"D:\"\n$setupPath = \"$setupDriveLetter\\setup.exe\"\n$validExitCodes = @(0)\n\nif ($Prerequisites){\nInstall-WindowsFeature -IncludeAllSubFeature -ErrorAction Stop $Prerequisites\n}\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Apply OS BPG","type":"EXEC","uuid":"0b0e23cb-53da-4b65-a2e5-7bebee4256bf","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$RktTemp = \"$TempDirectory\\rktools.2003\"\n\n$url = \"@@{BPG_RKTOOLS_URL}@@\"\n$filePath = \"$TempDirectory\\rktools.exe\"\n\nNew-Item -ItemType Directory -Force -Path $TempDirectory\n(New-Object System.Net.WebClient).DownloadFile($url,$filePath)\n\n& $filePath \/Q \/T:\"$RktTemp\" \/C\n\nStart-Sleep 10\n\n$PackageName = \"rktools.2003\"\n$setupPath = \"C:\\Windows\\System32\\msiexec.exe\"\n$silentArgs = \"\/i $RktTemp\\rktools.msi \/qn\"\n$validExitCodes = @(0)\n\nWrite-Output \"Installing $PackageName....\"\n\n$install = Start-Process -FilePath $setupPath -ArgumentList $silentArgs -Wait -NoNewWindow -PassThru\n$install.WaitForExit()\n\n$exitCode = $install.ExitCode\n$install.Dispose()\n\nWrite-Output \"Command [`\"$setupPath`\" $silentArgs] exited with `'$exitCode`'.\"\nif ($validExitCodes -notcontains $exitCode) {\nWrite-Output \"Running [`\"$setupPath`\" $silentArgs] was not successful. Exit code was '$exitCode'. See log for possible error messages.\"\nexit 1\n}\n\n# OS related tunning\n# Set Windows Power Options to High Performance\npowercfg -s 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c\n\n#Grant Memory privileges to user \n$ntrights_cli = \"C:\\Program Files (x86)\\Windows Resource Kits\\Tools\\ntrights.exe\"\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeLockMemoryPrivilege\n& $ntrights_cli -u \"NT SERVICE\\MSSQLSERVER\" +r SeManageVolumePrivilege\n\n\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Apply Sql BPG","type":"EXEC","uuid":"1aeed4a9-9343-405b-9be0-eceffdb0176c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"if ((\"@@{INCLUDE_BPG}@@\" -eq \"no\") -or (\"@@{BPG_RKTOOLS_URL}@@\" -eq \"\")){\n    \"Ignoring BPG\"\n    exit 0\n}\n\n$start_time = Get-Date\n\n$TempDirectory = \"C:\\Temp\"\n$sqladdparms_cli = \"$TempDirectory\\Add-SqlServerStartupParameter.ps1\"\n$TSQLSCRIPTSDIR = \"$TempDirectory\\TSQL_Scripts\"\nNew-Item -ItemType Directory -Force -Path $TSQLSCRIPTSDIR\n\nSet-Content -Path \"$sqladdparms_cli\" -Value '\nparam(\n## The parameter you wish to add\n[Parameter(Mandatory = $true)]\n$StartupParameter\n)\n\n$hklmRootNode = \"HKLM:\\SOFTWARE\\Microsoft\\Microsoft SQL Server\"\n\n$props = Get-ItemProperty \"$hklmRootNode\\Instance Names\\SQL\"\n$instances = $props.psobject.properties | ?{$_.Value -like \"MSSQL*\"} | select Value\n\n$instances | %{\n$inst = $_.Value;\n$regKey = \"$hklmRootNode\\$inst\\MSSQLServer\\Parameters\"\n$props = Get-ItemProperty $regKey\n$params = $props.psobject.properties | ?{$_.Name -like \"SQLArg*\"} | select Name, Value\n#$params | ft -AutoSize\n$hasFlag = $false\nforeach ($param in $params) {\nif($param.Value -eq $StartupParameter) {\n$hasFlag = $true\nbreak;\n}\n}\nif (-not $hasFlag) {\n\"Adding $StartupParameter\"\n$newRegProp = \"SQLArg\"+($params.Count)\nSet-ItemProperty -Path $regKey -Name $newRegProp -Value $StartupParameter\n} else {\n\"$StartupParameter already set\"\n}\n}'\nSet-Content -Path \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\" -Value \"use master`r`n\ngo`r`n\nAlter database tempdb modify file (name = tempdev, filename = 'I:\\TEMPDB01\\tempdb01.mdf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb modify file (name = templog, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev02, filename = 'I:\\TEMPDB01\\tempdb02.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev03, filename = 'J:\\TEMPDB02\\tempdb03.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\nAlter database tempdb ADD file (name = tempdev04, filename = 'J:\\TEMPDB02\\tempdb04.ndf', SIZE = 4096, FILEGROWTH=0)`r`n\ngo`r`n\n`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'tempdev', NEWNAME=N'tempdev01')`r`n\nGO`r`n\nALTER DATABASE [tempdb] MODIFY FILE (NAME=N'templog', NEWNAME=N'templog01')`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\" -Value \"Use master`r`n\ngo`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, filename = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 8096);`r`n\nGO`r`n\nALTER DATABASE tempdb MODIFY FILE (NAME = templog01, FILENAME = 'T:\\TempDB-logs01\\templog01.ldf', SIZE`r`n\n= 12288);`r`n\nGO\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\" -Value \"USE master;`r`n\nexec sp_configure 'show advanced options', 1;`r`n\nRECONFIGURE;`r`n\nGO`r`n\nDECLARE `r`n\n@total_mem decimal (10,0),`r`n\n@min int,`r`n\n@max int`r`n\nSELECT `r`n\n--SELECT (physical_memory_kb\/1024) AS Server_Physical_Memory_MB`r`n\n@total_mem = (physical_memory_kb\/1024)`r`n\nFROM sys.dm_os_sys_info`r`n\n`r`n\nset @min = @total_mem * 0.1`r`n\nset @max = @total_mem * 0.85`r`n\nprint @min`r`n\nprint @max`r`n\n--print @total_mem`r`n\n`r`n\n`r`n\nEXEC sp_configure 'min server memory (MB)',@min`r`n\nEXEC sp_configure 'max server memory (MB)',@max`r`n\nRECONFIGURE\"\n\nSet-Content -Path \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\" -Value \"USE [master]`r`n\nGO`r`n\n-- Change default location for data files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultData',`r`n\nREG_SZ,`r`n\nN'G:\\SQLDATA01'`r`n\nGO`r`n\n-- Change default location for log files`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'DefaultLog',`r`n\nREG_SZ,`r`n\nN'L:\\UserDB-logs01'`r`n\nGO`r`n\n-- Change default location for backups`r`n\nEXEC xp_instance_regwrite`r`n\nN'HKEY_LOCAL_MACHINE',`r`n\nN'Software\\Microsoft\\MSSQLServer\\MSSQLServer',`r`n\nN'BackupDirectory',`r`n\nREG_SZ,`r`n\nN'R:\\SQLBACK'`r`n\nGO\"\n\n#create directories\nmkdir G:\\SQLDATA01\\\nmkdir H:\\SQLDATA02\\\nmkdir I:\\TEMPDB01\\\nmkdir J:\\TEMPDB02\\\nmkdir L:\\UserDB-logs01\\\nmkdir T:\\TempDB-logs01\\\nmkdir R:\\SQLBACK\n\n#ADD SQL T parameters \n#T1117 This parameter forces MS SQL Server to grow all database files uniformly\n#T1118 This parameter forces MS SQL Server to use full extents only\n& $sqladdparms_cli '-T1117'\n& $sqladdparms_cli '-T1118'\nrestart-service MSSQL* -force\n\n#import powershell SQL module\nimport-module \"sqlps\" -DisableNameChecking\n\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\01-ChangeTempDB.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\02-IncreaseTempDB_logs.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\03-SQL_set_memory.sql\"\ninvoke-sqlcmd -hostname localhost -inputFile \"$TSQLSCRIPTSDIR\\04-SQL-ChangeDefaultPaths.sql\"\n\n#Delete original SQL temp files\nstop-service MSSQL* \nStart-Sleep 5\nrm \"F:\\Microsoft SQL Server\\MSSQL12.MSSQLSERVER\\MSSQL\\DATA\\temp*\"\n\nstart-service MSSQL* \nwmic useraccount get sid\nWrite-Output \"Time taken: $((Get-Date).Subtract($start_time).seconds) Second(s)\"\n","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""},{"target_any_local_reference":{"kind":"app_service","name":"MSSQL","uuid":"95663329-a75f-494a-a153-763ff6ed5bc1"},"retries":"0","name":"Firewallrules","type":"EXEC","uuid":"614e597e-43f2-47f5-93a5-ea2a12bde977","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"SQL Server\" -Direction Inbound -Protocol TCP -LocalPort 1433 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Admin Connection\" -Direction Inbound -Protocol TCP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Database Management\" -Direction Inbound -Protocol UDP -LocalPort 1434 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Service Broker\" -Direction Inbound -Protocol TCP -LocalPort 4022 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Debugger\/RPC\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"SQL Browser\" -Direction Inbound -Protocol TCP -LocalPort 2382 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"DOMAIN_CRED","uuid":"50897fc0-c8d8-4fb6-834c-d7c48adf8830"}},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""}],"description":"","uuid":"e18fbeeb-ce41-4e53-8901-e1e2898fb264","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"93946313_dag","uuid":"87ccb7a6-3ce4-42b7-b3db-55b3e9ae313e"},"name":"b24859ac_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"ESXi_MSSQL_Package","uuid":"4507679b-9ddf-45e6-8f69-ae30e6eff5d5"},"retries":"0","name":"224134c5_dag","type":"DAG","uuid":"744834e9-dfce-4913-871c-10df8f98348c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"description":""}],"description":"","uuid":"a01b92f3-90c9-4235-a3bf-5c4563ffedb6","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"224134c5_dag","uuid":"744834e9-dfce-4913-871c-10df8f98348c"},"name":"03e9249d_runbook"}},"variable_list":[],"name":"ESXi_MSSQL_Package"}],"client_attrs":{"bbcaa1bc-f914-40f3-831c-f89978255f7d":{"y":-168,"x":633}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1548842399964890","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"29aec014-5f53-4c10-a6a9-55317b39f920","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":0,"creation_time":"1548842399964890","name":"Vpshere"}}