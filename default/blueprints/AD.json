{"status":{"description":"","source_mpi":"","state":"ACTIVE","is_cloned":false,"message_list":[],"resources":{"service_definition_list":[{"port_list":[],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"f8255edd-697f-4fe9-a1ea-ae19b956bf83","name":"action_create","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"cdf8ee8f-13f0-4b29-b751-200c947d530f","child_tasks_local_reference_list":[],"state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"e8ae6024_dag"}],"description":"","message_list":[],"uuid":"45e8f3f2-492f-4ee1-a50e-85374aee9711","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e8ae6024_dag","uuid":"cdf8ee8f-13f0-4b29-b751-200c947d530f"},"name":"170603f6_runbook"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"c45770b9-2455-4d78-95d1-b9917a0e9683","name":"action_delete","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"058e2e27-cfe5-4aec-83b6-bc87f5b370ca","child_tasks_local_reference_list":[],"state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"f25e9ca6_dag"}],"description":"","message_list":[],"uuid":"b9d6fd42-6e90-464a-b6b0-0f8a4141dad1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"f25e9ca6_dag","uuid":"058e2e27-cfe5-4aec-83b6-bc87f5b370ca"},"name":"017e6fe9_runbook"}},{"description":"System action for starting an application","message_list":[],"uuid":"d242f1b7-5680-4b78-b630-d678743a8598","name":"action_start","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"441c3d48-f717-421c-a313-96fba838a7e8","child_tasks_local_reference_list":[],"state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7cd4b387_dag"}],"description":"","message_list":[],"uuid":"e01911ba-ccba-42ea-9917-db8ff249f497","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7cd4b387_dag","uuid":"441c3d48-f717-421c-a313-96fba838a7e8"},"name":"73434119_runbook"}},{"description":"System action for stopping an application","message_list":[],"uuid":"0d47a702-ada1-4fdc-bd44-55333ba4f981","name":"action_stop","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"ce353043-3127-4dc1-b949-8097d09d3e9a","child_tasks_local_reference_list":[],"state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"83f2a218_dag"}],"description":"","message_list":[],"uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"83f2a218_dag","uuid":"ce353043-3127-4dc1-b949-8097d09d3e9a"},"name":"35799808_runbook"}},{"description":"System action for restarting an application","message_list":[],"uuid":"434ccaeb-25a5-42b1-98b7-6d8db087b268","name":"action_restart","state":"ACTIVE","critical":false,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"23a41d1a-209c-43fa-bcbd-0ad830562454","child_tasks_local_reference_list":[],"state":"NOT_VALIDATED","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"7078cac1_dag"}],"description":"","message_list":[],"uuid":"4024fae5-34de-4a8f-99fd-81c2c9186474","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7078cac1_dag","uuid":"23a41d1a-209c-43fa-bcbd-0ad830562454"},"name":"0d16f818_runbook"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"9e6a652c-59ce-4f34-82af-575745119a58","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"DAG","uuid":"ff96e959-4fff-4c52-b90f-fc243f1442c4","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Service_Element_Delete_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"23dd22a4-de02-48d4-8489-13cee2a7cb6e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"23dd22a4-de02-48d4-8489-13cee2a7cb6e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Service_Element_Delete_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"b386afc4-f170-4533-9f46-1677bb35a990","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"ff96e959-4fff-4c52-b90f-fc243f1442c4"},"name":"SYS_GEN__Runbook_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}}],"message_list":[],"uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","state":"ACTIVE","depends_on_list":[],"editables":{},"tier":"","singleton":false,"variable_list":[],"name":"Active_Directory"}],"substrate_definition_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"96d5a4fe-84ef-400c-8854-91548d7f9821","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"d2a0cd89-90c2-4eaa-bd12-9fe675c4f164","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"f131af3c-625f-4ba4-8210-b6f41685e228"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fd4e6bd4-9a4a-4704-80cd-9844a7b61bdd"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Provision_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"f131af3c-625f-4ba4-8210-b6f41685e228"},"edge_type":"inherent","type":"","uuid":"e4058e9b-42c3-4315-b29c-89c625776b90","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fd4e6bd4-9a4a-4704-80cd-9844a7b61bdd"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"PROVISION_NUTANIX","uuid":"f131af3c-625f-4ba4-8210-b6f41685e228","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"name":"AD-DC01","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{STATIC_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet<\/Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false<\/DhcpEnabled>\n                  <RouterDiscoveryEnabled>true<\/RouterDiscoveryEnabled>\n                  <Metric>30<\/Metric>\n               <\/Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@\/@@{PREFIX}@@<\/IpAddress>\n               <\/UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10<\/Identifier>\n                     <Metric>20<\/Metric>\n                     <NextHopAddress>@@{GATEWAY}@@<\/NextHopAddress>\n                     <Prefix>0.0.0.0\/0<\/Prefix>\n                  <\/Route>\n               <\/Routes>\n            <\/Interface>\n         <\/Interfaces>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Provision_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"fd4e6bd4-9a4a-4704-80cd-9844a7b61bdd","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"34f75433-6033-4769-907a-1905909eaca4","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"d2a0cd89-90c2-4eaa-bd12-9fe675c4f164"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for powering on an application","message_list":[],"uuid":"25bc4ee8-ecb2-413e-8f74-2370bf12abcc","name":"action_poweron","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"3203f9fc-f99d-4899-97de-29146666aee9","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"c5c61edd-3791-4db3-bc61-ddf3e6b2016a"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"816336bd-c00b-495d-a6d9-4f75623c48f7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOn_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"c5c61edd-3791-4db3-bc61-ddf3e6b2016a"},"edge_type":"inherent","type":"","uuid":"ddd5caaa-bedf-426a-b5e8-9a7aec09fea4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"816336bd-c00b-495d-a6d9-4f75623c48f7"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"c5c61edd-3791-4db3-bc61-ddf3e6b2016a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOn_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"816336bd-c00b-495d-a6d9-4f75623c48f7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"b4d92006-69f8-495f-8086-a650c2ad810a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"3203f9fc-f99d-4899-97de-29146666aee9"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for restarting an application","message_list":[],"uuid":"411b99ca-8b70-41f8-93e1-232a46619ed5","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"ea10d3f8-fc4b-46b7-8e09-9381d622224a","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"0050e8f0-a35f-4871-af79-bf4dfd91a905"},{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"8f32b4ee-6b1b-4d02-abab-6b3533f9dc40"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_Restart_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"0050e8f0-a35f-4871-af79-bf4dfd91a905"},"edge_type":"inherent","type":"","uuid":"79b17b01-134a-4b1e-93d6-e5d4a150dd8f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"8f32b4ee-6b1b-4d02-abab-6b3533f9dc40"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"0050e8f0-a35f-4871-af79-bf4dfd91a905","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_Restart_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CHECK_LOGIN","uuid":"8f32b4ee-6b1b-4d02-abab-6b3533f9dc40","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"retries":"5","dial_timeout":"","timeout":"60","address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","type":"CHECK_LOGIN","sleep_time":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__check_login_for_ActiveDirectory_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"97bbf77a-5730-4766-a349-d8453e7b76f1","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"ea10d3f8-fc4b-46b7-8e09-9381d622224a"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for suspending an application","message_list":[],"uuid":"3201aa16-6c91-44fb-b2ce-6d45ada9b431","name":"action_suspend","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"b61923f1-2cb1-4bee-9eb5-d9957c1ab611","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"2efa0188-03e3-4a1f-9178-36ec6c920317","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"b61923f1-2cb1-4bee-9eb5-d9957c1ab611"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for modifying an application","message_list":[],"uuid":"8135ada4-78bb-4af8-a26e-44f14e482401","name":"action_modify","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"7bf84ea8-b7f1-475b-b048-4541246bb348","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"eb84c02f-de51-4e72-aaab-ec9f23070f0b","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"7bf84ea8-b7f1-475b-b048-4541246bb348"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for powering off an application","message_list":[],"uuid":"3fddab4b-df8d-4401-b111-65956a0fe7ca","name":"action_poweroff","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"3256e19c-f300-41a6-ab94-040ced124297","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Operation_PowerOff_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"238638ba-16a2-4bce-8792-ed1199bf3337"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"VMOPERATION_NUTANIX","uuid":"238638ba-16a2-4bce-8792-ed1199bf3337","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":"GENERIC_OPERATION"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Operation_PowerOff_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"ba81f2fd-ea93-48da-90aa-0b4b94fc2e06","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"3256e19c-f300-41a6-ab94-040ced124297"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"9e928612-9556-419a-8782-0e76fe411df1","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"ef6fab5e-2089-4012-b6f7-344e49146048","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Nutanix_Delete_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"c958bdca-cf54-4980-93a1-ce5f189e98f1"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DELETE_NUTANIX","uuid":"c958bdca-cf54-4980-93a1-ce5f189e98f1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Nutanix_Delete_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"22e24c57-82b7-4320-a5f5-2f6b70133271","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"ef6fab5e-2089-4012-b6f7-344e49146048"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"1c6084a7-286c-435f-a26b-9881246ed9e0","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"DAG","uuid":"a3c17bbf-e1e0-4e2f-a8e9-cf8082a98a09","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Substrate_Element_Delete_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"be6356aa-c542-4247-b67e-1b535b82af80"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"be6356aa-c542-4247-b67e-1b535b82af80","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Substrate_Element_Delete_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"15dc05cf-fecd-49df-aa5d-33f5ea2b05a5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"a3c17bbf-e1e0-4e2f-a8e9-cf8082a98a09"},"name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}}],"message_list":[],"uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9","state":"ACTIVE","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"editables":{"readiness_probe":{"connection_type":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"AD-DC01","categories":"","availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{STATIC_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"parent_reference":null,"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"serial_port_list":[],"gpu_list":[],"memory_size_mib":4096,"power_state":"ON","hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet<\/Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false<\/DhcpEnabled>\n                  <RouterDiscoveryEnabled>true<\/RouterDiscoveryEnabled>\n                  <Metric>30<\/Metric>\n               <\/Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@\/@@{PREFIX}@@<\/IpAddress>\n               <\/UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10<\/Identifier>\n                     <Metric>20<\/Metric>\n                     <NextHopAddress>@@{GATEWAY}@@<\/NextHopAddress>\n                     <Prefix>0.0.0.0\/0<\/Prefix>\n                  <\/Route>\n               <\/Routes>\n            <\/Interface>\n         <\/Interfaces>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"type":"","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]}},"variable_list":[],"name":"ActiveDirectory"}],"credential_definition_list":[{"username":"administrator","description":"","state":"ACTIVE","message_list":[],"uuid":"c0442628-5536-43e8-b6eb-34befefc103e","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","state":"ACTIVE","message_list":[],"uuid":"f35d055c-8e94-4611-a8e1-3c6335322b5a","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"bfd6b205-07e6-4689-bf2f-da4b9171f4b0","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"ce7da80a-a1b6-41f8-a9c3-10925cfdc19d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"11e9731c-c635-485a-a035-6993cb1be53c"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"da9b0d36-406f-4cbf-8302-86edc1cc4fec"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"a9a541c2-ed73-41f3-8be6-1412249433d2"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"79ffddf5-441d-458f-aeed-93906df25beb"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"b8ee9a1b-4a5f-4a11-b495-32e22f7f0086"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"79ffddf5-441d-458f-aeed-93906df25beb"},"edge_type":"inherent","type":"","uuid":"6f43138a-ce38-4164-b093-4a7edbc6daf1","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"b8ee9a1b-4a5f-4a11-b495-32e22f7f0086"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"a9a541c2-ed73-41f3-8be6-1412249433d2"},"edge_type":"inherent","type":"","uuid":"1cda771a-353f-423e-8da2-79b46b13e2fb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"79ffddf5-441d-458f-aeed-93906df25beb"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"11e9731c-c635-485a-a035-6993cb1be53c"},"edge_type":"inherent","type":"","uuid":"4e348210-c7bd-488f-aed9-dd2e7ade5c4f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"da9b0d36-406f-4cbf-8302-86edc1cc4fec"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"da9b0d36-406f-4cbf-8302-86edc1cc4fec"},"edge_type":"inherent","type":"","uuid":"358bc3f9-f72d-4592-a593-c16c43ee072c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"a9a541c2-ed73-41f3-8be6-1412249433d2"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"11e9731c-c635-485a-a035-6993cb1be53c","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"da9b0d36-406f-4cbf-8302-86edc1cc4fec","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"34f75433-6033-4769-907a-1905909eaca4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a9a541c2-ed73-41f3-8be6-1412249433d2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"4505aae7-505d-4131-a8eb-a82449fa584f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"79ffddf5-441d-458f-aeed-93906df25beb","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"170603f6_runbook","uuid":"45e8f3f2-492f-4ee1-a50e-85374aee9711"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b8ee9a1b-4a5f-4a11-b495-32e22f7f0086","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"3a937b6d-b06c-4ee4-b8d5-cc679e7b7173","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"ce7da80a-a1b6-41f8-a9c3-10925cfdc19d"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for starting an application","message_list":[],"uuid":"c633bcb6-6931-4d51-b966-b934d978f720","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"c56021e4-67b8-41cd-b0b6-7d81a8bc7e88","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"e5848c4f-de26-4e95-98e3-9e488d70b6be"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c1dae65d-6c3a-45be-bfed-aaed7ca14b2e"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"e5848c4f-de26-4e95-98e3-9e488d70b6be"},"edge_type":"inherent","type":"","uuid":"acc5d149-bfa2-4b67-84e8-9123cb5f8df0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c1dae65d-6c3a-45be-bfed-aaed7ca14b2e"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e5848c4f-de26-4e95-98e3-9e488d70b6be","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"b4d92006-69f8-495f-8086-a650c2ad810a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c1dae65d-6c3a-45be-bfed-aaed7ca14b2e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"203f441d-60ab-45e1-b5ae-d3b352ac1639","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"c56021e4-67b8-41cd-b0b6-7d81a8bc7e88"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for restarting an application","message_list":[],"uuid":"9bee2c12-3647-4dc9-bf1d-94f21cbcc17d","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"4625f949-1a8b-450f-9089-dbd6b879ab08","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fc1f0ad1-d719-4aae-bd47-80747c0ab2ce"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"798ad0a4-070e-408f-9e20-2175bb2cae1a"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fc1f0ad1-d719-4aae-bd47-80747c0ab2ce"},"edge_type":"inherent","type":"","uuid":"9c739622-a7cc-4137-82dc-b056524bdd96","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"798ad0a4-070e-408f-9e20-2175bb2cae1a"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fc1f0ad1-d719-4aae-bd47-80747c0ab2ce","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"97bbf77a-5730-4766-a349-d8453e7b76f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"798ad0a4-070e-408f-9e20-2175bb2cae1a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0d16f818_runbook","uuid":"4024fae5-34de-4a8f-99fd-81c2c9186474"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"541d01ac-8757-4853-ae12-feefde255579","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"4625f949-1a8b-450f-9089-dbd6b879ab08"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for stopping an application","message_list":[],"uuid":"cac7d11b-76f5-4976-9ba7-fece4583c09f","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"939c1a30-52f6-4462-9346-b1412a41d4b7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"18935e2b-f7bb-48da-b8e9-73fcc9c37182"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"716d847e-701e-4580-8deb-be30de7a5c12"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"18935e2b-f7bb-48da-b8e9-73fcc9c37182"},"edge_type":"inherent","type":"","uuid":"2ea060e5-b4e4-4062-bbf5-dd38803bd7dc","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"716d847e-701e-4580-8deb-be30de7a5c12"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"18935e2b-f7bb-48da-b8e9-73fcc9c37182","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"716d847e-701e-4580-8deb-be30de7a5c12","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"ba81f2fd-ea93-48da-90aa-0b4b94fc2e06"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"6f70f48d-5356-4a95-bddb-7a65343767af","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"939c1a30-52f6-4462-9346-b1412a41d4b7"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"5c6b6d75-6532-496c-ae76-42947100cea8","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"922bdf1f-27b4-4933-b456-1bc17b4dd819","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"36ecbdc5-1fb8-480c-b85b-1c7b930ef2da"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"7f474793-9966-4b34-988b-df771318ae0b"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"d13b3576-16a1-403c-80e9-16f405a3f53e"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"a34b646c-3b3e-4fad-8180-33737bda082e"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"d98c5823-c4f6-4b66-bdba-03ef4d9eebc4"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"36ecbdc5-1fb8-480c-b85b-1c7b930ef2da"},"edge_type":"inherent","type":"","uuid":"534bd1cb-25a1-4fd2-841e-135f13532342","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"7f474793-9966-4b34-988b-df771318ae0b"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"7f474793-9966-4b34-988b-df771318ae0b"},"edge_type":"inherent","type":"","uuid":"663dd7e7-d4b1-4f47-9f14-4e8e99d0ed81","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"d13b3576-16a1-403c-80e9-16f405a3f53e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"d13b3576-16a1-403c-80e9-16f405a3f53e"},"edge_type":"inherent","type":"","uuid":"ddff0190-f1ba-441a-b52a-36d851d9eb12","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"a34b646c-3b3e-4fad-8180-33737bda082e"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"a34b646c-3b3e-4fad-8180-33737bda082e"},"edge_type":"inherent","type":"","uuid":"e2fa3ae5-4f8f-42ea-ada5-5fcddf683f1f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"d98c5823-c4f6-4b66-bdba-03ef4d9eebc4"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"36ecbdc5-1fb8-480c-b85b-1c7b930ef2da","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"7f474793-9966-4b34-988b-df771318ae0b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"017e6fe9_runbook","uuid":"b9d6fd42-6e90-464a-b6b0-0f8a4141dad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d13b3576-16a1-403c-80e9-16f405a3f53e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"034060f7-c412-4506-aa8c-c9ca60c129ad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a34b646c-3b3e-4fad-8180-33737bda082e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"22e24c57-82b7-4320-a5f5-2f6b70133271"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"d98c5823-c4f6-4b66-bdba-03ef4d9eebc4","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"1626d2c0-0e08-40c0-9ce0-eea6693daf58","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"922bdf1f-27b4-4933-b456-1bc17b4dd819"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for scaleout","message_list":[],"uuid":"eaa8dee6-be45-451c-868c-e93702a7e509","name":"action_scaleout","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"8d4be4ef-fa49-44ce-9fe5-158b27eb8727","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scaleout_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"80dd5dc4-78d9-4b51-89d4-24613a7e0cc1"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"SCALING","uuid":"80dd5dc4-78d9-4b51-89d4-24613a7e0cc1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scaleout_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"ecb47f42-0a5c-4b4b-9407-b38a3f68ea6f","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"59915d45-bb63-4de9-a66d-594cbd2af2ff","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"8d4be4ef-fa49-44ce-9fe5-158b27eb8727"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for scalein","message_list":[],"uuid":"93c78186-c1c2-4c90-907d-e17897a94134","name":"action_scalein","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"0d6e988a-ca0d-4ae5-96c4-36958532882d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Deployment_Scalein_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"2cd3ef76-8a60-44f3-8ad4-55c54132668e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"SCALING","uuid":"2cd3ef76-8a60-44f3-8ad4-55c54132668e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"scaling_count":"@@{scaling_count}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Deployment_Scalein_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"cd4b7ed0-c762-47dd-8245-6cff4aca1f3c","state":"ACTIVE","variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"5f846459-0e4d-400b-901c-edb1499139d6","value":"0","label":"","state":"NOT_VALIDATED","attrs":{},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"scaling_count"}],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"0d6e988a-ca0d-4ae5-96c4-36958532882d"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"5ad7647c-0ef8-4579-a35d-96b167525a1b","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DAG","uuid":"37cb7f9a-810f-48b8-afc2-3808578c3be7","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"8a6df158-42f8-4ef8-84f9-ad476f39046a"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"8fbe8f22-79ac-4e74-bb93-59f047312b67"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"390289c6-1d4c-4bf9-abe4-1242c2f7ccac"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"cded13da-283a-4e21-90fe-451154cf7928"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"8a6df158-42f8-4ef8-84f9-ad476f39046a"},"edge_type":"inherent","type":"","uuid":"8c551bfa-c151-4be4-b950-3efb2641d313","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"8fbe8f22-79ac-4e74-bb93-59f047312b67"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"8fbe8f22-79ac-4e74-bb93-59f047312b67"},"edge_type":"inherent","type":"","uuid":"96f70ea1-2551-4e03-9b05-ab28d456167c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"390289c6-1d4c-4bf9-abe4-1242c2f7ccac"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"390289c6-1d4c-4bf9-abe4-1242c2f7ccac"},"edge_type":"inherent","type":"","uuid":"0ed86e29-1dd4-4aa9-8bea-7fd3147e6e08","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"cded13da-283a-4e21-90fe-451154cf7928"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8a6df158-42f8-4ef8-84f9-ad476f39046a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"b386afc4-f170-4533-9f46-1677bb35a990"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"8fbe8f22-79ac-4e74-bb93-59f047312b67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"390289c6-1d4c-4bf9-abe4-1242c2f7ccac","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"15dc05cf-fecd-49df-aa5d-33f5ea2b05a5"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"cded13da-283a-4e21-90fe-451154cf7928","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"cb4db554-854c-43b0-a49a-db9b3d4003d0","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"37cb7f9a-810f-48b8-afc2-3808578c3be7"},"name":"SYS_GEN__Runbook_Deployment_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}}],"message_list":[],"published_service_local_reference_list":[],"uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88","min_replicas":"1","state":"ACTIVE","max_replicas":"1","depends_on_list":[],"editables":{},"package_local_reference_list":[{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"}],"substrate_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"type":"GREENFIELD","options":{},"variable_list":[],"name":"1bd2d70a_deployment"}],"description":"","action_list":[{"description":"System action for creating an application","message_list":[],"uuid":"cc2a3664-a1d4-483b-a1ae-fbcea3dc8b85","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"6a7e7d10-de7e-4d41-ab35-4db4fa291568","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"cad30d1d-888b-4af1-8854-226e896da399"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"51b5a655-bed0-46f2-bce1-2498b33d8699"},{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"0b30dccb-24bb-49e5-b8c2-e8c333e29569"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"19d7dd1a-c03b-490a-9f22-905ce77662ca"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"62f16f9e-69b1-4bdd-8093-da12dfe03c85"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"19d7dd1a-c03b-490a-9f22-905ce77662ca"},"edge_type":"inherent","type":"","uuid":"5571ab10-3745-4774-91a0-9cefa9f94f0e","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"62f16f9e-69b1-4bdd-8093-da12dfe03c85"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"0b30dccb-24bb-49e5-b8c2-e8c333e29569"},"edge_type":"inherent","type":"","uuid":"9eaf7e93-0851-4304-be7a-f856a6691e20","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"19d7dd1a-c03b-490a-9f22-905ce77662ca"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"cad30d1d-888b-4af1-8854-226e896da399"},"edge_type":"inherent","type":"","uuid":"e54c5b72-eef5-4941-aaaa-10103cea8f3c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"51b5a655-bed0-46f2-bce1-2498b33d8699"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"51b5a655-bed0-46f2-bce1-2498b33d8699"},"edge_type":"inherent","type":"","uuid":"6bf505fb-e674-475e-a91c-659b0fd5b4bd","to_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"0b30dccb-24bb-49e5-b8c2-e8c333e29569"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"CREATE_DEPLOYMENT_ELEMENT","uuid":"cad30d1d-888b-4af1-8854-226e896da399","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Provision_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"51b5a655-bed0-46f2-bce1-2498b33d8699","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"34f75433-6033-4769-907a-1905909eaca4"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"0b30dccb-24bb-49e5-b8c2-e8c333e29569","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"4505aae7-505d-4131-a8eb-a82449fa584f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"19d7dd1a-c03b-490a-9f22-905ce77662ca","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"170603f6_runbook","uuid":"45e8f3f2-492f-4ee1-a50e-85374aee9711"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"62f16f9e-69b1-4bdd-8093-da12dfe03c85","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"9ce1be7d-6997-431a-ad67-7e6205030c14","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"6a7e7d10-de7e-4d41-ab35-4db4fa291568"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}},{"description":"System action for starting an application","message_list":[],"uuid":"12f663e3-f6b5-44e6-8743-6ca6014418d3","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"6faa2355-e044-4e05-8753-68d8e1d85c14","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"b2b9d91f-3c00-4276-a243-e10fb4f0abea"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"d9920eab-d33e-4f53-a005-35d4494d0ada"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"b2b9d91f-3c00-4276-a243-e10fb4f0abea"},"edge_type":"inherent","type":"","uuid":"abfc7d7d-81b6-4278-b480-5b1ab49dec6b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"d9920eab-d33e-4f53-a005-35d4494d0ada"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"b2b9d91f-3c00-4276-a243-e10fb4f0abea","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"b4d92006-69f8-495f-8086-a650c2ad810a"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"d9920eab-d33e-4f53-a005-35d4494d0ada","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"9a651467-e903-4e37-9006-0b759a3caab3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"6faa2355-e044-4e05-8753-68d8e1d85c14"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}},{"description":"System action for restarting an application","message_list":[],"uuid":"cf8ddcb0-de25-48c1-8fc9-9c3313d2565c","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"0c1d36e8-4f66-4fe3-96dc-62e505c2f931","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"908ae139-ff7a-426d-ac89-133ae4305e2a"},{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"a6023e8e-1ac8-4b28-9c11-bf29a6bd3ce1"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"908ae139-ff7a-426d-ac89-133ae4305e2a"},"edge_type":"inherent","type":"","uuid":"7368b4e7-d4fa-43cf-a2c0-0b2a9a85309f","to_task_reference":{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"a6023e8e-1ac8-4b28-9c11-bf29a6bd3ce1"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"908ae139-ff7a-426d-ac89-133ae4305e2a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"97bbf77a-5730-4766-a349-d8453e7b76f1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"a6023e8e-1ac8-4b28-9c11-bf29a6bd3ce1","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0d16f818_runbook","uuid":"4024fae5-34de-4a8f-99fd-81c2c9186474"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"5f292058-6ff5-46dd-8917-c9e191917196","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"0c1d36e8-4f66-4fe3-96dc-62e505c2f931"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}},{"description":"System action for stopping an application","message_list":[],"uuid":"6a6e4d1f-0751-4feb-b66f-ac9752184b08","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"b6658ec6-c143-4361-82d0-5d18df8f17ea","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"e52ece19-9329-48b8-8492-854bf230537a"},{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"8eaa2f7b-f767-4502-af5b-26294359d6d6"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"e52ece19-9329-48b8-8492-854bf230537a"},"edge_type":"inherent","type":"","uuid":"d929884c-3832-4b33-9d2f-0b87553a0a43","to_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"8eaa2f7b-f767-4502-af5b-26294359d6d6"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"e52ece19-9329-48b8-8492-854bf230537a","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8eaa2f7b-f767-4502-af5b-26294359d6d6","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"ba81f2fd-ea93-48da-90aa-0b4b94fc2e06"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"}],"description":"","message_list":[],"uuid":"8d5d6c2a-ee44-434b-8a6c-f2495ec3275e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"b6658ec6-c143-4361-82d0-5d18df8f17ea"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"3d4e9226-63bf-4eae-ae59-2d44439e9b83","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"05f95c9e-6ebc-456b-b652-1d5a0a36c174","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"83506ce3-a0f0-4194-a4df-eb675e14a774"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"613cfc1b-2847-4123-bbc4-58532e12c608"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"026138c4-6b43-44aa-a801-c06b3bcd8d67"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fa9fe2fb-e635-497f-9662-6465697c5286"},{"kind":"app_task","name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"dcf83cb3-cd34-4df3-8e41-c9e74810d504"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"83506ce3-a0f0-4194-a4df-eb675e14a774"},"edge_type":"inherent","type":"","uuid":"7e1b907c-6f8e-4e49-b92f-dc0818c11edf","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"613cfc1b-2847-4123-bbc4-58532e12c608"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"613cfc1b-2847-4123-bbc4-58532e12c608"},"edge_type":"inherent","type":"","uuid":"855876c0-fde1-4316-9ed9-033e920d23b2","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"026138c4-6b43-44aa-a801-c06b3bcd8d67"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"026138c4-6b43-44aa-a801-c06b3bcd8d67"},"edge_type":"inherent","type":"","uuid":"26945ff8-8314-44f3-9caa-318bbfd5f125","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fa9fe2fb-e635-497f-9662-6465697c5286"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"fa9fe2fb-e635-497f-9662-6465697c5286"},"edge_type":"inherent","type":"","uuid":"23f36a3a-2950-49d2-ad92-11d19d29730c","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"dcf83cb3-cd34-4df3-8e41-c9e74810d504"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"83506ce3-a0f0-4194-a4df-eb675e14a774","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"613cfc1b-2847-4123-bbc4-58532e12c608","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"017e6fe9_runbook","uuid":"b9d6fd42-6e90-464a-b6b0-0f8a4141dad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"026138c4-6b43-44aa-a801-c06b3bcd8d67","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"034060f7-c412-4506-aa8c-c9ca60c129ad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"fa9fe2fb-e635-497f-9662-6465697c5286","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"22e24c57-82b7-4320-a5f5-2f6b70133271"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"DELETE_DEPLOYMENT_ELEMENT","uuid":"dcf83cb3-cd34-4df3-8e41-c9e74810d504","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"ab8500f9-a723-4ee1-b04a-756f41c3e11a","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"05f95c9e-6ebc-456b-b652-1d5a0a36c174"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"b9172471-eccb-4d5b-a0ac-101c6fc81f7d","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_profile","name":"Nutanix","uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"},"retries":"0","description":"","type":"DAG","uuid":"8ac2c16f-858f-4822-b29e-090b232251f1","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"dbbc1ac5-cb47-4389-9b82-26a486994ebc"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"3ff10c94-af8d-4fd5-9590-bf875406df04"},{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"449a50d3-ada7-4e81-9821-20fbdc5a48ab"},{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"c9919be5-0621-41ad-a14d-30578adbee27"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"dbbc1ac5-cb47-4389-9b82-26a486994ebc"},"edge_type":"inherent","type":"","uuid":"992ce6b2-2a83-4135-bdfc-564c48c6b453","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"3ff10c94-af8d-4fd5-9590-bf875406df04"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"3ff10c94-af8d-4fd5-9590-bf875406df04"},"edge_type":"inherent","type":"","uuid":"9c7b403c-354e-4a81-a57d-b3b76d9f73eb","to_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"449a50d3-ada7-4e81-9821-20fbdc5a48ab"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"449a50d3-ada7-4e81-9821-20fbdc5a48ab"},"edge_type":"inherent","type":"","uuid":"d46d3e95-c1ef-4c2f-b665-ca5241e8914b","to_task_reference":{"kind":"app_task","name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88","uuid":"c9919be5-0621-41ad-a14d-30578adbee27"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"dbbc1ac5-cb47-4389-9b82-26a486994ebc","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"b386afc4-f170-4533-9f46-1677bb35a990"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"3ff10c94-af8d-4fd5-9590-bf875406df04","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"449a50d3-ada7-4e81-9821-20fbdc5a48ab","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"deployment_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9","uuid":"15dc05cf-fecd-49df-aa5d-33f5ea2b05a5"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Substrate_c69134c0_e83f_4e4a_87fe_3ac8547207a9"},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"1bd2d70a_deployment","uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88"},"retries":"0","description":"","type":"SOFT_DELETE_DEPLOYMENT_ELEMENT","uuid":"c9919be5-0621-41ad-a14d-30578adbee27","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DE_Soft_Delete_14bf3ea3_7c0c_4204_a7ae_df519ce37e88"}],"description":"","message_list":[],"uuid":"72c113e1-d5b7-45d3-8c79-72fb1796a25e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Application_6fc75396_a53c_4d37_8b65_e3950072b299","uuid":"8ac2c16f-858f-4822-b29e-090b232251f1"},"name":"SYS_GEN__Runbook_Application_6fc75396_a53c_4d37_8b65_e3950072b299"}}],"message_list":[],"uuid":"6fc75396-a53c-4d37-8b65-e3950072b299","state":"ACTIVE","dependency_list":[],"variable_list":[{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"d265c40d-ceae-4396-859a-05b690ea70c7","value":"mssql.com","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"15f5aeff-9875-4788-bfe8-2311701c00a0","value":"DC","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"DOMAIN_TYPE"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"0747f634-9b22-4c6f-a58f-20e1d393a87b","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"PARENT_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"500a35cd-55ad-4c10-a3bb-2e0b4c09633a","value":"","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"CHILD_DOMAIN"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"133a31b1-c595-4574-b160-d9f894ffa46c","value":"10.46.6.4","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"STATIC_IP"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"ae9abfc3-8046-4731-965b-0f30b794c249","value":"10.46.6.1","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"GATEWAY"},{"regex":{},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","message_list":[],"uuid":"19a57be7-a7e2-4784-ade2-c58dfc76d2ae","value":"24","label":"","state":"ACTIVE","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"type":"LOCAL","options":{},"name":"PREFIX"}],"name":"Nutanix"}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"},"package_definition_list":[{"description":"","action_list":[{"description":"System action for installing an application","message_list":[],"uuid":"a6581ef9-25da-4986-834e-66a419b1ce07","name":"action_install","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"10ba7a2b-d2ac-4d8c-8e0b-da798fb7f252","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Install_Crb_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"4d33808f-9c98-4904-b39b-f6ccc03ee92e"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_INSTALL","uuid":"4d33808f-9c98-4904-b39b-f6ccc03ee92e","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641","child_tasks_local_reference_list":[{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},"edge_type":"user_defined","type":"","uuid":"94cd3222-efea-4045-99f5-840a9cfbd46e","to_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},"edge_type":"user_defined","type":"","uuid":"274720e3-a7ba-47cc-9af2-553cea47834c","to_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"}},{"from_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},"edge_type":"user_defined","type":"","uuid":"d4e43560-a936-43a7-98cc-e282282be45f","to_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},"edge_type":"user_defined","type":"","uuid":"dfd1ff63-e5c0-4bc5-99db-e4325d54f1b4","to_task_reference":{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"80dbbb84_dag"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"EXEC","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is join to domain in case of CDC, ADC & RODC.\n##############################################\nEnable-WSManCredSSP -Role Server -Force\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Set Hostname"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(50)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Restart"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\n\nStart-Sleep 2\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(90)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound -Protocol UDP -LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound -Protocol TCP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound -Protocol UDP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound -Protocol TCP -LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound -Protocol UDP -LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound -Protocol TCP -LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound -Protocol UDP -LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound -Protocol UDP -LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound -Protocol UDP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound -Protocol TCP -LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound -Protocol UDP -LocalPort 464 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Open Firewall Ports"}],"description":"","message_list":[],"uuid":"1a23a5ce-84c9-4957-be53-5fdb2d3ec4dd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"80dbbb84_dag","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641"},"name":"5c108f0d_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f292b4a_dag"}],"description":"","message_list":[],"uuid":"7b07c651-d706-4d04-8962-c3a77e6c0a8e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f292b4a_dag","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d"},"name":"1f35f88e_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Install_Crb_aab525a9_4e8b_4655_b6ef_baaf01966c84"}],"description":"","message_list":[],"uuid":"4505aae7-505d-4131-a8eb-a82449fa584f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"10ba7a2b-d2ac-4d8c-8e0b-da798fb7f252"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for creating an application","message_list":[],"uuid":"9348a202-1fc7-4a19-8c25-73ea2303c144","name":"action_create","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"e057f76b-c67c-43f7-a963-f39c969c3e19","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"1b33f58c-cfec-4218-96ff-f1f4bfcde9d2"},{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"785ec70a-238a-4b6d-8b2f-c5d84cc45b72"},{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"30370b3e-a20c-4cd9-9483-9cdd41212b21"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"785ec70a-238a-4b6d-8b2f-c5d84cc45b72"},"edge_type":"inherent","type":"","uuid":"fe0c9df0-483a-4320-a56c-8b3ddb3c7a24","to_task_reference":{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"30370b3e-a20c-4cd9-9483-9cdd41212b21"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"1b33f58c-cfec-4218-96ff-f1f4bfcde9d2"},"edge_type":"inherent","type":"","uuid":"5f2a15a6-8ca5-4566-ac75-5f17e795a552","to_task_reference":{"kind":"app_task","name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"785ec70a-238a-4b6d-8b2f-c5d84cc45b72"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"1b33f58c-cfec-4218-96ff-f1f4bfcde9d2","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"4505aae7-505d-4131-a8eb-a82449fa584f"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__install_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"785ec70a-238a-4b6d-8b2f-c5d84cc45b72","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"170603f6_runbook","uuid":"45e8f3f2-492f-4ee1-a50e-85374aee9711"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__create_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"30370b3e-a20c-4cd9-9483-9cdd41212b21","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"698277e4-cf8d-4a02-b21b-d2ed207b60d9","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"e057f76b-c67c-43f7-a963-f39c969c3e19"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for uninstalling an application","message_list":[],"uuid":"4ae4f5f7-c9af-4f93-bf5c-f5d1157aacb8","name":"action_uninstall","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"bcafbfa7-077d-4b3c-b5b3-2dec33cd0f32","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__Uninstall_Crb_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"397ae504-7194-4f63-847e-e6c325bea0b3"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CUSTOM_PACKAGE_UNINSTALL","uuid":"397ae504-7194-4f63-847e-e6c325bea0b3","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641","child_tasks_local_reference_list":[{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},"edge_type":"user_defined","type":"","uuid":"94cd3222-efea-4045-99f5-840a9cfbd46e","to_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},"edge_type":"user_defined","type":"","uuid":"274720e3-a7ba-47cc-9af2-553cea47834c","to_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"}},{"from_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},"edge_type":"user_defined","type":"","uuid":"d4e43560-a936-43a7-98cc-e282282be45f","to_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},"edge_type":"user_defined","type":"","uuid":"dfd1ff63-e5c0-4bc5-99db-e4325d54f1b4","to_task_reference":{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"80dbbb84_dag"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"EXEC","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is join to domain in case of CDC, ADC & RODC.\n##############################################\nEnable-WSManCredSSP -Role Server -Force\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Set Hostname"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(50)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Restart"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\n\nStart-Sleep 2\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(90)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound -Protocol UDP -LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound -Protocol TCP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound -Protocol UDP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound -Protocol TCP -LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound -Protocol UDP -LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound -Protocol TCP -LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound -Protocol UDP -LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound -Protocol UDP -LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound -Protocol UDP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound -Protocol TCP -LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound -Protocol UDP -LocalPort 464 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Open Firewall Ports"}],"description":"","message_list":[],"uuid":"1a23a5ce-84c9-4957-be53-5fdb2d3ec4dd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"80dbbb84_dag","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641"},"name":"5c108f0d_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f292b4a_dag"}],"description":"","message_list":[],"uuid":"7b07c651-d706-4d04-8962-c3a77e6c0a8e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f292b4a_dag","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d"},"name":"1f35f88e_runbook"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Uninstall_Crb_aab525a9_4e8b_4655_b6ef_baaf01966c84"}],"description":"","message_list":[],"uuid":"034060f7-c412-4506-aa8c-c9ca60c129ad","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"bcafbfa7-077d-4b3c-b5b3-2dec33cd0f32"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for deleting an application. Deletes created VMs as well","message_list":[],"uuid":"d02aad6a-b5de-47d2-9774-2df3a7ac0e92","name":"action_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"d81c6a47-b82d-436e-8c6d-d39edc5e371d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c6d8350d-3015-4747-b921-495918a57496"},{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"eb0babcd-6b5d-45dd-97ed-c41ca5d66fc9"},{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"289c5af8-78d1-43df-a52d-15ef7a09dad8"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c6d8350d-3015-4747-b921-495918a57496"},"edge_type":"inherent","type":"","uuid":"3aa11822-932b-4ac5-be81-862b80f78ac4","to_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"eb0babcd-6b5d-45dd-97ed-c41ca5d66fc9"}},{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"eb0babcd-6b5d-45dd-97ed-c41ca5d66fc9"},"edge_type":"inherent","type":"","uuid":"9e54eaf1-90f2-41c8-aa2a-afb622de8d01","to_task_reference":{"kind":"app_task","name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"289c5af8-78d1-43df-a52d-15ef7a09dad8"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c6d8350d-3015-4747-b921-495918a57496","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"eb0babcd-6b5d-45dd-97ed-c41ca5d66fc9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"017e6fe9_runbook","uuid":"b9d6fd42-6e90-464a-b6b0-0f8a4141dad1"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"289c5af8-78d1-43df-a52d-15ef7a09dad8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"034060f7-c412-4506-aa8c-c9ca60c129ad"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__uninstall_CRb_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}],"description":"","message_list":[],"uuid":"ad3972b2-14b4-4ce4-a9d4-4d39d293e67d","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"d81c6a47-b82d-436e-8c6d-d39edc5e371d"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for deleting an application. Does not delete created VMs","message_list":[],"uuid":"e47d169f-c055-48f4-a312-df70b3412699","name":"action_soft_delete","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"9076da30-33f1-4867-8c4d-a364017ab834","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c6e1c037-07fa-47e6-be78-6a63f60568f9"},{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"8c51e6fa-ee10-40c4-b3a4-f1cf6af5230b"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"c6e1c037-07fa-47e6-be78-6a63f60568f9"},"edge_type":"inherent","type":"","uuid":"3a773b90-58bf-42f8-8f5e-81a1243311d0","to_task_reference":{"kind":"app_task","name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"8c51e6fa-ee10-40c4-b3a4-f1cf6af5230b"}}],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"c6e1c037-07fa-47e6-be78-6a63f60568f9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"SYS_GEN__Runbook_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"b386afc4-f170-4533-9f46-1677bb35a990"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__soft_delete_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"SOFT_DELETE_ELEMENT","uuid":"8c51e6fa-ee10-40c4-b3a4-f1cf6af5230b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Package_Element_Delete_aab525a9_4e8b_4655_b6ef_baaf01966c84"}],"description":"","message_list":[],"uuid":"bb68d853-60b7-4ced-9c3b-7b2880f3ac3f","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"9076da30-33f1-4867-8c4d-a364017ab834"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for starting an application","message_list":[],"uuid":"d10b29d9-7652-419b-8eda-da48ab75e2cf","name":"action_start","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"d9838ea8-6806-4847-8db6-cee8e1ab19bd","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"14c5acf4-5493-4ea4-985f-2f4038ed4d2b"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"14c5acf4-5493-4ea4-985f-2f4038ed4d2b","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"73434119_runbook","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__start_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"2adab1be-aa30-46a0-a233-b4869c648eb2","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"d9838ea8-6806-4847-8db6-cee8e1ab19bd"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for restarting an application","message_list":[],"uuid":"b866b8c6-b81b-4a5d-bd1c-7e110c96344f","name":"action_restart","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"ad41e112-8edb-47b2-882c-e711f315267d","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"8de2c65b-aab8-442f-be2b-057640176c96"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"8de2c65b-aab8-442f-be2b-057640176c96","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"0d16f818_runbook","uuid":"4024fae5-34de-4a8f-99fd-81c2c9186474"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__restart_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"cb1bbb51-cf84-431f-aec1-7a49376d42c3","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"ad41e112-8edb-47b2-882c-e711f315267d"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}},{"description":"System action for stopping an application","message_list":[],"uuid":"9871df5f-7389-47ba-a411-a425de36c428","name":"action_stop","state":"ACTIVE","critical":true,"attrs":{},"type":"system","runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"5d190cde-68c0-4396-8707-a7c5a93a4485","child_tasks_local_reference_list":[{"kind":"app_task","name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04","uuid":"da69bed6-0e96-4dda-9d18-05f2ae406a88"}],"state":"ACTIVE","attrs":{"edges":[],"type":"DAG"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"CALL_RUNBOOK","uuid":"da69bed6-0e96-4dda-9d18-05f2ae406a88","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"inarg_list":[],"type":"CALL_RUNBOOK","runbook_reference":{"kind":"app_runbook","name":"35799808_runbook","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"SYS_GEN__stop_CRb_Service_e6784d26_457a_4e0e_a18f_4a067e470d04"}],"description":"","message_list":[],"uuid":"946794c3-2dc9-4c93-ae1f-1fbbe3e618a5","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"SYS_GEN__Composite_DAG_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84","uuid":"5d190cde-68c0-4396-8707-a7c5a93a4485"},"name":"SYS_GEN__Runbook_Package_aab525a9_4e8b_4655_b6ef_baaf01966c84"}}],"message_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"}],"uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84","state":"ACTIVE","version":"","editables":{},"type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641","child_tasks_local_reference_list":[{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},"edge_type":"user_defined","type":"","uuid":"94cd3222-efea-4045-99f5-840a9cfbd46e","to_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},"edge_type":"user_defined","type":"","uuid":"274720e3-a7ba-47cc-9af2-553cea47834c","to_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"}},{"from_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},"edge_type":"user_defined","type":"","uuid":"d4e43560-a936-43a7-98cc-e282282be45f","to_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},"edge_type":"user_defined","type":"","uuid":"dfd1ff63-e5c0-4bc5-99db-e4325d54f1b4","to_task_reference":{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"80dbbb84_dag"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"EXEC","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is join to domain in case of CDC, ADC & RODC.\n##############################################\nEnable-WSManCredSSP -Role Server -Force\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Set Hostname"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(50)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Restart"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\n\nStart-Sleep 2\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(90)"},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Wait for VM to Install AD"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","description":"","type":"EXEC","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound -Protocol UDP -LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound -Protocol TCP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound -Protocol UDP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound -Protocol TCP -LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound -Protocol UDP -LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound -Protocol TCP -LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound -Protocol UDP -LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound -Protocol UDP -LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound -Protocol UDP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound -Protocol TCP -LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound -Protocol UDP -LocalPort 464 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"Open Firewall Ports"}],"description":"","message_list":[],"uuid":"1a23a5ce-84c9-4957-be53-5fdb2d3ec4dd","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"80dbbb84_dag","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641"},"name":"5c108f0d_runbook"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","description":"","type":"DAG","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"name":"6f292b4a_dag"}],"description":"","message_list":[],"uuid":"7b07c651-d706-4d04-8962-c3a77e6c0a8e","state":"ACTIVE","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f292b4a_dag","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d"},"name":"1f35f88e_runbook"}},"variable_list":[],"name":"Active_Directory_Package"}]},"name":"AD"},"spec":{"name":"AD","resources":{"service_definition_list":[{"singleton":false,"name":"Active_Directory","action_list":[{"description":"System action for creating an application","name":"action_create","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","name":"Active_Directory"},"retries":"0","description":"","uuid":"cdf8ee8f-13f0-4b29-b751-200c947d530f","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"e8ae6024_dag"}],"description":"","uuid":"45e8f3f2-492f-4ee1-a50e-85374aee9711","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"e8ae6024_dag","uuid":"cdf8ee8f-13f0-4b29-b751-200c947d530f"},"name":"170603f6_runbook"},"type":"system","uuid":"f8255edd-697f-4fe9-a1ea-ae19b956bf83"},{"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","name":"Active_Directory"},"retries":"0","description":"","uuid":"058e2e27-cfe5-4aec-83b6-bc87f5b370ca","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"f25e9ca6_dag"}],"description":"","uuid":"b9d6fd42-6e90-464a-b6b0-0f8a4141dad1","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"f25e9ca6_dag","uuid":"058e2e27-cfe5-4aec-83b6-bc87f5b370ca"},"name":"017e6fe9_runbook"},"type":"system","uuid":"c45770b9-2455-4d78-95d1-b9917a0e9683"},{"description":"System action for starting an application","name":"action_start","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","name":"Active_Directory"},"retries":"0","description":"","uuid":"441c3d48-f717-421c-a313-96fba838a7e8","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"7cd4b387_dag"}],"description":"","uuid":"e01911ba-ccba-42ea-9917-db8ff249f497","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7cd4b387_dag","uuid":"441c3d48-f717-421c-a313-96fba838a7e8"},"name":"73434119_runbook"},"type":"system","uuid":"d242f1b7-5680-4b78-b630-d678743a8598"},{"description":"System action for stopping an application","name":"action_stop","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","name":"Active_Directory"},"retries":"0","description":"","uuid":"ce353043-3127-4dc1-b949-8097d09d3e9a","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"83f2a218_dag"}],"description":"","uuid":"229cfd72-b44f-4f80-80cf-6276ee1964c6","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"83f2a218_dag","uuid":"ce353043-3127-4dc1-b949-8097d09d3e9a"},"name":"35799808_runbook"},"type":"system","uuid":"0d47a702-ada1-4fdc-bd44-55333ba4f981"},{"description":"System action for restarting an application","name":"action_restart","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","name":"Active_Directory"},"retries":"0","description":"","uuid":"23a41d1a-209c-43fa-bcbd-0ad830562454","child_tasks_local_reference_list":[],"attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[],"name":"7078cac1_dag"}],"description":"","uuid":"4024fae5-34de-4a8f-99fd-81c2c9186474","variable_list":[],"main_task_local_reference":{"kind":"app_task","name":"7078cac1_dag","uuid":"23a41d1a-209c-43fa-bcbd-0ad830562454"},"name":"0d16f818_runbook"},"type":"system","uuid":"434ccaeb-25a5-42b1-98b7-6d8db087b268"}],"description":"","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04","port_list":[],"tier":"","variable_list":[],"depends_on_list":[]}],"substrate_definition_list":[{"name":"ActiveDirectory","action_list":[],"uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9","readiness_probe":{"connection_type":"POWERSHELL","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":5985,"login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"editables":{"readiness_probe":{"connection_type":true,"delay_secs":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"guest_customization":true,"disk_list":{}}}},"os_type":"Windows","type":"AHV_VM","create_spec":{"name":"AD-DC01","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{STATIC_IP}@@"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"099dbe61-2c00-4964-9567-f547ec224e10"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":null,"type":"","sysprep":{"install_type":"PREPARED","unattend_xml":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n   <settings pass=\"specialize\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <Interfaces>\n            <Interface wcm:action=\"add\">\n               <Identifier>Ethernet<\/Identifier>\n               <Ipv4Settings>\n                  <DhcpEnabled>false<\/DhcpEnabled>\n                  <RouterDiscoveryEnabled>true<\/RouterDiscoveryEnabled>\n                  <Metric>30<\/Metric>\n               <\/Ipv4Settings>\n               <UnicastIpAddresses>\n                  <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{STATIC_IP}@@\/@@{PREFIX}@@<\/IpAddress>\n               <\/UnicastIpAddresses>\n               <Routes>\n                  <Route wcm:action=\"add\">\n                     <Identifier>10<\/Identifier>\n                     <Metric>20<\/Metric>\n                     <NextHopAddress>@@{GATEWAY}@@<\/NextHopAddress>\n                     <Prefix>0.0.0.0\/0<\/Prefix>\n                  <\/Route>\n               <\/Routes>\n            <\/Interface>\n         <\/Interfaces>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <fDenyTSConnections>false<\/fDenyTSConnections>\n      <\/component>\n      <component xmlns=\"\" name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n         <UserAuthentication>0<\/UserAuthentication>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <FirewallGroups>\n            <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n               <Active>true<\/Active>\n               <Profile>all<\/Profile>\n               <Group>@FirewallAPI.dll,-28752<\/Group>\n            <\/FirewallGroup>\n         <\/FirewallGroups>\n      <\/component>\n   <\/settings>\n   <settings pass=\"oobeSystem\">\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <UserAccounts>\n            <AdministratorPassword>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/AdministratorPassword>\n         <\/UserAccounts>\n         <AutoLogon>\n            <Password>\n               <Value>@@{LOCAL.secret}@@<\/Value>\n               <PlainText>true<\/PlainText>\n            <\/Password>\n            <Enabled>true<\/Enabled>\n            <Username>Administrator<\/Username>\n         <\/AutoLogon>\n         <FirstLogonCommands>\n            <SynchronousCommand wcm:action=\"add\">\n               <CommandLine>cmd.exe \/c netsh firewall add portopening TCP 5985 \"Port 5985\"<\/CommandLine>\n               <Description>Win RM port open<\/Description>\n               <Order>1<\/Order>\n               <RequiresUserInput>true<\/RequiresUserInput>\n            <\/SynchronousCommand>\n         <\/FirstLogonCommands>\n         <OOBE>\n            <HideEULAPage>true<\/HideEULAPage>\n            <SkipMachineOOBE>true<\/SkipMachineOOBE>\n         <\/OOBE>\n      <\/component>\n      <component xmlns:wcm=\"http:\/\/schemas.microsoft.com\/WMIConfig\/2002\/State\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n         <InputLocale>en-US<\/InputLocale>\n         <SystemLocale>en-US<\/SystemLocale>\n         <UILanguageFallback>en-us<\/UILanguageFallback>\n         <UILanguage>en-US<\/UILanguage>\n         <UserLocale>en-US<\/UserLocale>\n      <\/component>\n   <\/settings>\n<\/unattend>","type":""}},"power_state":"ON","type":"","account_uuid":"efc034e3-b50e-4a48-b02d-25036aeb8bd3","boot_config":{"boot_device":{"type":"","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","name":"WindowsServer2016-Base","uuid":"bee4ebfa-0b2f-46df-b0fe-d2ed3053f08a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","device_type":"DISK","disk_address":{"adapter_type":"SCSI","device_index":0,"type":""}}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[],"description":""}],"credential_definition_list":[{"username":"administrator","description":"","uuid":"c0442628-5536-43e8-b6eb-34befefc103e","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"23f690a0-d0c3-42c6-9ff1-e8a91339f25b"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"LOCAL"},{"username":"administrator@contoso.com","description":"","uuid":"f35d055c-8e94-4611-a8e1-3c6335322b5a","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{"uuid":"f67c059d-b91e-47db-82cf-0efd44b09ab4"}}},"editables":{"username":true,"secret":true},"type":"PASSWORD","name":"DOMAIN_CRED"}],"type":"USER","app_profile_list":[{"deployment_create_list":[{"name":"1bd2d70a_deployment","action_list":[],"package_local_reference_list":[{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"}],"uuid":"14bf3ea3-7c0c-4204-a7ae-df519ce37e88","min_replicas":"1","max_replicas":"1","substrate_local_reference":{"kind":"app_substrate","name":"ActiveDirectory","uuid":"c69134c0-e83f-4e4a-87fe-3ac8547207a9"},"type":"GREENFIELD","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","uuid":"d265c40d-ceae-4396-859a-05b690ea70c7","name":"DOMAIN","value":"mssql.com","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"15f5aeff-9875-4788-bfe8-2311701c00a0","name":"DOMAIN_TYPE","value":"DC","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"0747f634-9b22-4c6f-a58f-20e1d393a87b","name":"PARENT_IP","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"500a35cd-55ad-4c10-a3bb-2e0b4c09633a","name":"CHILD_DOMAIN","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"133a31b1-c595-4574-b160-d9f894ffa46c","name":"STATIC_IP","value":"10.46.6.4","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"ae9abfc3-8046-4731-965b-0f30b794c249","name":"GATEWAY","value":"10.46.6.1","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""},{"val_type":"STRING","uuid":"19a57be7-a7e2-4784-ade2-c58dfc76d2ae","name":"PREFIX","value":"24","label":"","attrs":{"type":""},"editables":{"value":true},"type":"LOCAL","description":""}],"uuid":"6fc75396-a53c-4d37-8b65-e3950072b299"}],"default_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"},"package_definition_list":[{"uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84","action_list":[],"service_local_reference_list":[{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"}],"name":"Active_Directory_Package","version":"","type":"DEB","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","name":"80dbbb84_dag","type":"DAG","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}],"state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Set Hostname","uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},"edge_type":"user_defined","type":"","uuid":"94cd3222-efea-4045-99f5-840a9cfbd46e","to_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Restart","uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},"edge_type":"user_defined","type":"","uuid":"274720e3-a7ba-47cc-9af2-553cea47834c","to_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"}},{"from_task_reference":{"kind":"app_task","name":"Install AD","uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},"edge_type":"user_defined","type":"","uuid":"d4e43560-a936-43a7-98cc-e282282be45f","to_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"}},{"from_task_reference":{"kind":"app_task","name":"Wait for VM to Install AD","uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},"edge_type":"user_defined","type":"","uuid":"dfd1ff63-e5c0-4bc5-99db-e4325d54f1b4","to_task_reference":{"kind":"app_task","name":"Open Firewall Ports","uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}}],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641"},{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","name":"Set Hostname","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : JoinDomain.ps1\n# Author      : K Sarat Kumar\n# Version     : 1.0\n# Description : Script is join to domain in case of CDC, ADC & RODC.\n##############################################\nEnable-WSManCredSSP -Role Server -Force\nfunction JointoDomain {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$false)]\n      [string]$OU,\n      [parameter(Mandatory=$true)]\n      [string]$Username,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$true)]\n      [string]$Server\n  )\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses $Server\n\n  if ($env:computername  -eq $env:userdomain) {\n    Write-Output \"Not in domain\"\n    $adminname = $Username\n    $adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$Password\"\n    Write-Output \"$adminname , $password\"\n    $credential = New-Object System.Management.Automation.PSCredential($adminname,$adminpassword)\n    Add-computer -DomainName $DomainName -Credential $credential -force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop\n  }\n  else {\n     Write-Output \"Already in domain\"\n  }\n}\n\nif(\"@@{DOMAIN_TYPE}@@\" -eq \"DC\"){\n  $adapter = Get-NetAdapter | ? {$_.Status -eq \"up\"}\n  $adapter | Set-DnsClientServerAddress -ServerAddresses \"127.0.0.1\"\n  Restart-Computer -Force -AsJob\n  exit 0\n}\nif( (\"@@{PARENT_IP}@@\" -eq \"\") -or (\"@@{DOMAIN}@@\" -eq \"\") -or (\"@@{DOMAIN_CRED.secret}@@\" -eq \"\")){\n\tWrite-Output \"Please pass all mandatory variables DOMAIN,PARENT_IP & CREDS\"\n    exit 1\n}\nJointoDomain -DomainName \"@@{DOMAIN}@@\" -Username \"@@{DOMAIN_CRED.username}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -Server \"@@{PARENT_IP}@@\"\nStart-Sleep 3\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"b5088788-eba5-4630-9512-7cb35d5d3121"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","name":"Wait for VM to Restart","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(50)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"c551db5c-7f01-4bcd-aaaf-08952ebd74f5"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","name":"Install AD","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"##############################################\n# Name        : ActiveDirectoryBundle.ps1\n# Author      : K Sarath Kumar\n# Version     : 1.0\n# Description : Installs and configures domain controller features AD, CDC, ADC & RODC.\n##############################################\n\n$WS2008R2_MAJOR                 = '6.1'\n$WS2012_MAJOR                   = '6.2'\n$WS2012R2_MAJOR                 = '6.3'\n$WS2016_MAJOR                   = '10.0'\n\n# -*- Checks AD Domain services Installation\nfunction Check-ActiveDirectoryFeature {\n   return $(Get-WindowsFeature AD-Domain-Services -ErrorAction SilentlyContinue).Installed\n}\n# -*- Installs AD Domain services\nfunction Install-ActiveDirectory {\n  Write-Output \"Installing AD Features.\"\n  Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools\n}\n# -*- Checks the pre existance of domain\nfunction Check-DomainExistance {\n  #if (Get-ADDomainController -Discover -ErrorAction SilentlyContinue){\n  if (\"$((wmic ComputerSystem get DomainRole)[2])\".trim() -eq \"5\"){\n   return $true\n  } else{\n    return $false\n  }\n}\n\n# -*- Configures AD Domain service\nfunction Configure-ActiveDirectory {\n  [CmdletBinding()]\n  Param(\n      [parameter(Mandatory=$true)]\n      [string]$DomainName,\n      [parameter(Mandatory=$true)]\n      [string]$Password,\n      [parameter(Mandatory=$false)]\n      [string]$DatabasePath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainMode,\n      [parameter(Mandatory=$true)]\n      [string]$ForestMode,\n      [parameter(Mandatory=$false)]\n      [string]$LogPath=\"C:\\Windows\\NTDS\",\n      [parameter(Mandatory=$false)]\n      [string]$SysvolPath=\"C:\\Windows\\SYSVOL\",\n      [parameter(Mandatory=$true)]\n      [string]$DomainType,\n      [parameter(Mandatory=$false)]\n      [string]$ChildDomainName\n  )\n  Import-Module ADDSDeployment\n\n  $secpasswd = ConvertTo-SecureString $Password -AsPlainText -Force\n  $credential = New-Object System.Management.Automation.PSCredential(\"$DomainName\\administrator\",$secpasswd)\n  $netbios = $DomainName.Split(\".\")[0].ToUpper()\n  Write-Output \"Configuring Domain services.\"\n  switch ($DomainType){\n    \"DC\"{\n      Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainName $DomainName -DomainNetbiosName $netbios -ForestMode $ForestMode -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd\n    }\n    \"ADC\"{\n      Install-ADDSDomainController -NoGlobalCatalog:$false -CreateDnsDelegation:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"CDC\"{\n      Install-ADDSDomain -NoGlobalCatalog:$false -CreateDnsDelegation:$true -DatabasePath $DatabasePath -DomainMode $DomainMode -DomainType \"ChildDomain\" -InstallDns:$true -LogPath $LogPath -NewDomainName $ChildDomainName -NewDomainNetbiosName $ChildDomainName.ToUpper() -ParentDomainName $DomainName -NoRebootOnCompletion:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    \"RODC\"{\n      Install-ADDSDomainController -AllowPasswordReplicationAccountName @(\"$netbios\\Allowed RODC Password Replication Group\") -NoGlobalCatalog:$false -CriticalReplicationOnly:$false -DatabasePath $DatabasePath -DenyPasswordReplicationAccountName @(\"BUILTIN\\Administrators\", \"BUILTIN\\Server Operators\", \"BUILTIN\\Backup Operators\", \"BUILTIN\\Account Operators\", \"$netbios\\Denied RODC Password Replication Group\") -DomainName $DomainName -InstallDns:$true -LogPath $LogPath -NoRebootOnCompletion:$true -ReadOnlyReplica:$true -SiteName \"Default-First-Site-Name\" -SysvolPath $SysvolPath -Force:$true -SafeModeAdministratorPassword $secpasswd -Credential $credential\n    }\n    default{\n      Write-Output \"Invalid DomainType\"\n    }\n}\n}\n# -*- Cheking Exitance of Active directory Feature.\nif (Check-ActiveDirectoryFeature){\n  Write-Output \"Active Directory already installed.\"\n} else{\n  Install-ActiveDirectory\n}\n\nif (Check-DomainExistance){\n  Write-Output \"Domain exists already.\"\n} else{\n  $MajorOSVersion= [string](Get-WmiObject Win32_OperatingSystem | Select-Object @{n=\"Major\";e={($_.Version.Split(\".\")[0]+\".\"+$_.Version.Split(\".\")[1])}}).Major\n  if ($MajorOSVersion -eq $WS2012R2_MAJOR){\n    $DomainMode = \"Win2012R2\"\n  } elseif ($MajorOSVersion -eq $WS2016_MAJOR){\n    $DomainMode = \"WinThreshold\"\n  }\n  Configure-ActiveDirectory -DomainName \"@@{DOMAIN}@@\" -Password \"@@{DOMAIN_CRED.secret}@@\" -DomainMode $DomainMode -ForestMode $DomainMode -DomainType \"@@{DOMAIN_TYPE}@@\" -ChildDomainName \"@@{CHILD_DOMAIN}@@\"\n}\n\nStart-Sleep 2\n\nRestart-Computer -Force -AsJob\nexit 0","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"18ed676f-5a83-4a27-b421-b8073d34bad9"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","name":"Wait for VM to Install AD","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"script_type":"static","type":"","command_line_args":"","exit_status":[],"script":"#script\nsleep(90)"},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"aa93f9a6-214d-489f-9ef1-d08d1d5a5fd8"},{"target_any_local_reference":{"kind":"app_service","name":"Active_Directory","uuid":"e6784d26-457a-4e0e-a18f-4a067e470d04"},"retries":"0","name":"Open Firewall Ports","type":"EXEC","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"exit_status":[],"script":"New-NetFirewallRule -DisplayName \"AD\" -Direction Inbound -Protocol UDP -LocalPort 389 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS TCP\" -Direction Inbound -Protocol TCP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"DNS UDP\" -Direction Inbound -Protocol UDP -LocalPort 53 -Action allow\nNew-NetFirewallRule -DisplayName \"GC TCP\" -Direction Inbound -Protocol TCP -LocalPort 3268 -Action allow\nNew-NetFirewallRule -DisplayName \"GC UDP\" -Direction Inbound -Protocol UDP -LocalPort 3269 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL TCP\" -Direction Inbound -Protocol TCP -LocalPort 139 -Action allow\nNew-NetFirewallRule -DisplayName \"SYSVOL UDP\" -Direction Inbound -Protocol UDP -LocalPort 138 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS UDP\" -Direction Inbound -Protocol UDP -LocalPort 88 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM TCP\" -Direction Inbound -Protocol TCP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"AD COM UDP\" -Direction Inbound -Protocol UDP -LocalPort 135 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE TCP\" -Direction Inbound -Protocol TCP -LocalPort 464 -Action allow\nNew-NetFirewallRule -DisplayName \"KERBROS PW CHANGE UDP\" -Direction Inbound -Protocol UDP -LocalPort 464 -Action allow","script_type":"npsscript","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"LOCAL","uuid":"c0442628-5536-43e8-b6eb-34befefc103e"}},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"eec890f5-c149-4d13-8d37-c0788b0c04c7"}],"name":"5c108f0d_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"80dbbb84_dag","uuid":"06104dbe-f0e0-4395-9170-69a1ab3a6641"},"uuid":"1a23a5ce-84c9-4957-be53-5fdb2d3ec4dd"},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Active_Directory_Package","uuid":"aab525a9-4e8b-4655-b6ef-baaf01966c84"},"retries":"0","name":"6f292b4a_dag","type":"DAG","description":"","child_tasks_local_reference_list":[],"state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","message_list":[],"variable_list":[],"uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d"}],"name":"1f35f88e_runbook","description":"","state":"ACTIVE","variable_list":[],"message_list":[],"main_task_local_reference":{"kind":"app_task","name":"6f292b4a_dag","uuid":"04878857-db87-4b1a-82ef-7e52c9db9a6d"},"uuid":"7b07c651-d706-4d04-8962-c3a77e6c0a8e"}},"variable_list":[],"description":""}],"client_attrs":{"e6784d26-457a-4e0e-a18f-4a067e470d04":{"y":220,"x":500}}},"description":""},"api_version":"3.0","metadata":{"last_update_time":"1555426125960729","owner_reference":{"kind":"user","uuid":"00000000-0000-0000-0000-000000000000","name":"admin"},"kind":"blueprint","uuid":"38be8a3c-4d91-4e2e-82e7-dcc59b7d9f8f","project_reference":{"kind":"project","name":"default","uuid":"209e0a42-6f2d-4999-9a9b-5aa705d25661"},"spec_version":4,"creation_time":"1547743796948308","name":"AD"}}